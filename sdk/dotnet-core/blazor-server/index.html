<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-sdk/web/dotnet-blazor-server/README" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">.NET Core: Integrate Logto with Blazor Server | Logto docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.logto.io/sdk/dotnet-core/blazor-server/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content=".NET Core: Integrate Logto with Blazor Server | Logto docs"><meta data-rh="true" name="description" content="Prerequisites"><meta data-rh="true" property="og:description" content="Prerequisites"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.logto.io/sdk/dotnet-core/blazor-server/"><link data-rh="true" rel="alternate" href="https://docs.logto.io/sdk/dotnet-core/blazor-server/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.logto.io/sdk/dotnet-core/blazor-server/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DE7QZWOVO6-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Logto docs Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Logto docs" href="/opensearch.xml">

<script src="https://plausible.io/js/plausible.js" defer="defer" data-domain="docs.logto.io"></script>
<meta name="google-site-verification" content="3EYzsnarDwG6zL2dlHvyC8ySVcV6Q3RGlvh7-bvhb2k">

<link rel="alternate" type="application/rss+xml" href="/tutorial/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tutorial/atom.xml" title="Logto docs Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/terms/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/terms/atom.xml" title="Logto docs Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/about/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/about/atom.xml" title="Logto docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.a727978b.css">
<script src="/assets/js/runtime~main.a13f8cb2.js" defer="defer"></script>
<script src="/assets/js/main.c747207a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_LPzW" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://logto.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logto.svg" alt="Silverhand Logo" class="themedComponent_n4vJ themedComponent--light_hdqo"><img src="/img/logto_dark.svg" alt="Silverhand Logo" class="themedComponent_n4vJ themedComponent--dark_VQPO"></div></a><a class="navbar__item navbar__link" href="/">Docs</a><a href="https://blog.logto.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__Gr7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sdk/">SDK</a><a href="https://openapi.logto.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__Gr7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vduw colorModeToggle_mzm0"><button class="clean-btn toggleButton_I86H toggleButtonDisabled_MWpu" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_ygYn"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_qusn"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_aZwM"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_X0GZ"><div class="docsWrapper_VJFv"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_TjEc" type="button"></button><div class="docRoot_hQ7e"><aside class="theme-doc-sidebar-container docSidebarContainer_PHLh"><div class="sidebarViewport_fh0y"><div class="sidebar_c74n"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_NMzE"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a href="#" class="menu__link">Single page app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/react/">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/vanilla-js/">Vanilla JS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/vue/">Vue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a href="#" class="menu__link">Web app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/sdk/dotnet-core/blazor-server/">.NET Core (Blazor Server)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/dotnet-core/blazor-wasm/">.NET Core (Blazor WASM)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/dotnet-core/mvc/">.NET Core (MVC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/dotnet-core/razor/">.NET Core (Razor Pages)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/express/">Express</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/go/">Go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/next/">Next.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/next-app-router/">Next.js App Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/web/php/">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/python/">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/traditional-web/">Traditional web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a href="#" class="menu__link">Native app</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/android/">Android (Kotlin / Java)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/flutter/">Flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/swift/">iOS (Swift)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a href="#" class="menu__link">Machine-to-machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sdk/m2m/">General guide</a></li></ul></nav></div></div></aside><main class="docMainContainer_AXj0"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_L7XO"><div class="docItemContainer_Qv4f"><article><div class="tocCollapsible_CK25 theme-doc-toc-mobile tocMobile_g9u0"><button type="button" class="clean-btn tocCollapsibleButton_UoKk">On this page</button></div><div class="theme-doc-markdown markdown"><h1>.NET Core: Integrate Logto with Blazor Server</h1>
<div class="theme-admonition theme-admonition-tip admonition_Ea3n alert alert--success"><div class="admonitionHeading_OqI6"><span class="admonitionIcon_Ckmq"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_NLSJ"><ul>
<li>The following demonstration is built on .NET Core 8.0. The SDK is compatible with .NET 6.0 or higher.</li>
<li>The .NET Core sample projects are available in the <a href="https://github.com/logto-io/csharp" target="_blank" rel="noopener noreferrer">GitHub repository</a>.</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<ul>
<li>A <a href="https://cloud.logto.io" target="_blank" rel="noopener noreferrer">Logto Cloud</a> account or a self-hosted Logto (Check out the <a href="https://docs.logto.io/docs/guides/get-started/" target="_blank" rel="noopener noreferrer">⚡ Get started</a> guide to create one if you don&#x27;t have).</li>
<li>A Logto traditional web application created.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<p>Add the NuGet package to your project:</p>
<div class="language-bash codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-bash codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">dotnet </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> package Logto.AspNetCore.Authentication</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="integration">Integration<a href="#integration" class="hash-link" aria-label="Direct link to Integration" title="Direct link to Integration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="add-logto-authentication">Add Logto authentication<a href="#add-logto-authentication" class="hash-link" aria-label="Direct link to Add Logto authentication" title="Direct link to Add Logto authentication">​</a></h3>
<p>Open <code>Startup.cs</code> (or <code>Program.cs</code>) and add the following code to register Logto authentication services:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">Logto</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">AspNetCore</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token namespace" style="opacity:0.7">Authentication</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> builder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> WebApplication</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CreateBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Endpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Logto:Endpoint&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AppId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Logto:AppId&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AppSecret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Configuration</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;Logto:AppSecret&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>AddLogtoAuthentication</code> method will do the following things:</p>
<ul>
<li>Set the default authentication scheme to <code>LogtoDefaults.CookieScheme</code>.</li>
<li>Set the default challenge scheme to <code>LogtoDefaults.AuthenticationScheme</code>.</li>
<li>Set the default sign-out scheme to <code>LogtoDefaults.AuthenticationScheme</code>.</li>
<li>Add cookie and OpenID Connect authentication handlers to the authentication scheme.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="add-sign-in-redirect-uri">Add sign-in redirect URI<a href="#add-sign-in-redirect-uri" class="hash-link" aria-label="Direct link to Add sign-in redirect URI" title="Direct link to Add sign-in redirect URI">​</a></h3>
<p>Add the following URI to the <code>Redirect URIs</code> list in the Logto application details page:</p>
<div class="codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-text codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">http://&lt;your-web-app-uri&gt;/Callback</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note this is different from the redirect URI we&#x27;ll use later in <code>AuthenticationProperties</code>:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Just for reference, we will demonstrate how to use it later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">AuthenticationProperties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RedirectUri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>RedirectUri</code> property is used to redirect the user back to your web application after authentication. Note it is different from the redirect URI you configured in the Logto application details page:</p>
<ol>
<li>The redirect URI in the Logto application details page is the URI that Logto will redirect the user back to after the user has signed in.</li>
<li>The <code>RedirectUri</code> property is the URI that will be redirected to after necessary actions have been taken in the Logto authentication middleware.</li>
</ol>
<p>The order of the actions is 1 -&gt; 2. For clarity, let&#x27;s call the redirect URI in the Logto application details page the <strong>Logto redirect URI</strong> and the <code>RedirectUri</code> property the <strong>application redirect URI</strong>.</p>
<p>The <strong>Logto redirect URI</strong> has a default value of <code>/Callback</code>, which you can leave it as is if there&#x27;s no special requirement. If you want to change it, you can set the <code>CallbackPath</code> property for <code>LogtoOptions</code>:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Other configurations...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CallbackPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/SomeOtherCallbackPath&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Remember to update the value in the Logto application details page accordingly.</p>
<div class="theme-admonition theme-admonition-note admonition_Ea3n alert alert--secondary"><div class="admonitionHeading_OqI6"><span class="admonitionIcon_Ckmq"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_NLSJ"><p>No need to set the <strong>application redirect URI</strong> in the Logto application details page.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="add-sign-out-redirect-uri">Add sign-out redirect URI<a href="#add-sign-out-redirect-uri" class="hash-link" aria-label="Direct link to Add sign-out redirect URI" title="Direct link to Add sign-out redirect URI">​</a></h3>
<p>Add the following URI to the <code>Post sign-out redirect URIs</code> list in the Logto application details page:</p>
<div class="codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-text codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">http://&lt;your-web-app-uri&gt;/SignedOutCallback</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note this is different from the redirect URI we&#x27;ll use later in <code>AuthenticationProperties</code>:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Just for reference, we will demonstrate how to use it later</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">AuthenticationProperties</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  RedirectUri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>RedirectUri</code> property is used to redirect the user back to your web application after sign-out. Note it is different from the post sign-out redirect URI you configured in the Logto application details page:</p>
<ol>
<li>The post sign-out redirect URI in the Logto application details page is the URI that Logto will redirect the user back to after the user has signed out.</li>
<li>The <code>RedirectUri</code> property is the URI that will be redirected to after necessary actions have been taken in the Logto authentication middleware.</li>
</ol>
<p>The order of the actions is 1 -&gt; 2. For clarity, let&#x27;s call the post sign-out redirect URI in the Logto application details page the <strong>Logto post sign-out redirect URI</strong> and the <code>RedirectUri</code> property the <strong>application post sign-out redirect URI</strong>.</p>
<p>The <strong>Logto post sign-out redirect URI</strong> has a default value of <code>/SignedOutCallback</code>, which you can leave it as is if there&#x27;s no special requirement. If you want to change it, you can set the <code>SignedOutCallbackPath</code> property for <code>LogtoOptions</code>:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Other configurations...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SignedOutCallbackPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/SomeOtherSignedOutCallbackPath&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Remember to update the value in the Logto application details page accordingly.</p>
<div class="theme-admonition theme-admonition-note admonition_Ea3n alert alert--secondary"><div class="admonitionHeading_OqI6"><span class="admonitionIcon_Ckmq"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_NLSJ"><p>No need to set the <strong>application post sign-out redirect URI</strong> in the Logto application details page.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="add-routes">Add routes<a href="#add-routes" class="hash-link" aria-label="Direct link to Add routes" title="Direct link to Add routes">​</a></h3>
<p>Since Blazor Server uses SignalR to communicate between the server and the client, this means methods that directly manipulate the HTTP context (like issuing challenges or redirects) don&#x27;t work as expected when called from a Blazor component.</p>
<p>To make it right, we need to explicitly add two endpoints for sign-in and sign-out redirects:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MapGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/SignIn&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">?.</span><span class="token plain">Identity</span><span class="token punctuation" style="color:#393A34">?.</span><span class="token plain">IsAuthenticated </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ChallengeAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">AuthenticationProperties</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> RedirectUri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Redirect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">MapGet</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/SignOut&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">User</span><span class="token punctuation" style="color:#393A34">?.</span><span class="token plain">Identity</span><span class="token punctuation" style="color:#393A34">?.</span><span class="token plain">IsAuthenticated </span><span class="token operator" style="color:#393A34">??</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SignOutAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">AuthenticationProperties</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> RedirectUri </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Redirect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we can redirect to these endpoints to trigger sign-in and sign-out.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="implement-sign-insign-out-buttons">Implement sign-in/sign-out buttons<a href="#implement-sign-insign-out-buttons" class="hash-link" aria-label="Direct link to Implement sign-in/sign-out buttons" title="Direct link to Implement sign-in/sign-out buttons">​</a></h3>
<p>In the Razor component, add the following code:</p>
<div class="language-cshtml codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-cshtml codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">Microsoft</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">AspNetCore</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Components</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Authorization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">System</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Security</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Claims</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@inject</span><span class="token directive"> </span><span class="token directive csharp language-csharp">AuthenticationStateProvider AuthenticationStateProvider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@inject</span><span class="token directive"> </span><span class="token directive csharp language-csharp">NavigationManager NavigationManager</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Is authenticated: </span><span class="token value variable keyword" style="color:#00009f">@</span><span class="token value variable csharp language-csharp" style="color:#36acaa">User</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token value variable csharp language-csharp" style="color:#36acaa">Identity</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token value variable csharp language-csharp" style="color:#36acaa">IsAuthenticated</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token block keyword" style="color:#00009f">@if</span><span class="token block"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp">User</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">Identity</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token block csharp language-csharp">IsAuthenticated </span><span class="token block csharp language-csharp operator" style="color:#393A34">==</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp boolean" style="color:#36acaa">true</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&lt;</span><span class="token block csharp language-csharp html tag" style="color:#00009f">button</span><span class="token block csharp language-csharp html tag" style="color:#00009f"> </span><span class="token block csharp language-csharp html tag attr-name" style="color:#00a4db">@onclick</span><span class="token block csharp language-csharp html tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token block csharp language-csharp html tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token block csharp language-csharp html tag attr-value" style="color:#e3116c">SignOut</span><span class="token block csharp language-csharp html tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&gt;</span><span class="token block csharp language-csharp html">Sign out</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&lt;/</span><span class="token block csharp language-csharp html tag" style="color:#00009f">button</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&gt;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp keyword" style="color:#00009f">else</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&lt;</span><span class="token block csharp language-csharp html tag" style="color:#00009f">button</span><span class="token block csharp language-csharp html tag" style="color:#00009f"> </span><span class="token block csharp language-csharp html tag attr-name" style="color:#00a4db">@onclick</span><span class="token block csharp language-csharp html tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token block csharp language-csharp html tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token block csharp language-csharp html tag attr-value" style="color:#e3116c">SignIn</span><span class="token block csharp language-csharp html tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&gt;</span><span class="token block csharp language-csharp html">Sign in</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&lt;/</span><span class="token block csharp language-csharp html tag" style="color:#00009f">button</span><span class="token block csharp language-csharp html tag punctuation" style="color:#393A34">&gt;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token block keyword" style="color:#00009f">@code</span><span class="token block"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name">ClaimsPrincipal</span><span class="token block csharp language-csharp return-type class-name punctuation" style="color:#393A34">?</span><span class="token block csharp language-csharp"> User </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">get</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">set</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">protected</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">override</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">async</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name">Task</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">OnInitializedAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp class-name keyword" style="color:#00009f">var</span><span class="token block csharp language-csharp"> authState </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">await</span><span class="token block csharp language-csharp"> AuthenticationStateProvider</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">GetAuthenticationStateAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        User </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> authState</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">User</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name keyword" style="color:#00009f">void</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">SignIn</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        NavigationManager</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">NavigateTo</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp string" style="color:#e3116c">&quot;/SignIn&quot;</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">,</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp named-parameter punctuation" style="color:#393A34">forceLoad</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">:</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp boolean" style="color:#36acaa">true</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name keyword" style="color:#00009f">void</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">SignOut</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        NavigationManager</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">NavigateTo</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp string" style="color:#e3116c">&quot;/SignOut&quot;</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">,</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp named-parameter punctuation" style="color:#393A34">forceLoad</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">:</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp boolean" style="color:#36acaa">true</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Explanation</strong>:</p>
<ul>
<li>The injected <code>AuthenticationStateProvider</code> is used to get the current user&#x27;s authentication state, and populate the <code>User</code> property.</li>
<li>The <code>SignIn</code> and <code>SignOut</code> methods are used to redirect the user to the sign-in and sign-out endpoints respectively. Since the nature of Blazor Server, we need to use <code>NavigationManager</code> with force load to trigger the redirection.</li>
</ul>
<p>The page will show the &quot;Sign in&quot; button if the user is not authenticated, and show the &quot;Sign out&quot; button if the user is authenticated.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="the-authorizeview--component">The <code>&lt;AuthorizeView /&gt;</code> component<a href="#the-authorizeview--component" class="hash-link" aria-label="Direct link to the-authorizeview--component" title="Direct link to the-authorizeview--component">​</a></h3>
<p>Alternatively, you can use the <code>AuthorizeView</code> component to conditionally render content based on the user&#x27;s authentication state. This component is useful when you want to show different content to authenticated and unauthenticated users.</p>
<p>In your Razor component, add the following code:</p>
<div class="language-cshtml codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-cshtml codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">Microsoft</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">AspNetCore</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Components</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Authorization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">AuthorizeView</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Authorized</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Name: </span><span class="token value variable keyword" style="color:#00009f">@</span><span class="token value variable csharp language-csharp" style="color:#36acaa">User</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token value variable csharp language-csharp" style="color:#36acaa">Identity</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token value variable csharp language-csharp" style="color:#36acaa">Name</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* Content for authenticated users *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Authorized</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">NotAuthorized</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* Content for unauthenticated users *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">NotAuthorized</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">AuthorizeView</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>AuthorizeView</code> component requires a cascading parameter of type <code>Task&lt;AuthenticationState&gt;</code>. A direct way to get this parameter is to add the <code>&lt;CascadingAuthenticationState&gt;</code> component. However, due to the nature of Blazor Server, we cannot simply add the component to the layout or the root component (it may not work as expected). Instead, we can add the following code to the builder (<code>Program.cs</code> or <code>Startup.cs</code>) to provide the cascading parameter:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddCascadingAuthenticationState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then you can use the <code>AuthorizeView</code> component in every component that needs it.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="checkpoint-test-your-application">Checkpoint: Test your application<a href="#checkpoint-test-your-application" class="hash-link" aria-label="Direct link to Checkpoint: Test your application" title="Direct link to Checkpoint: Test your application">​</a></h3>
<p>Now you can run the web application and try to sign-in/sign-out with Logto:</p>
<ol>
<li>Open the web application in your browser, you should see &quot;Is authenticated: False&quot; and the &quot;Sign in&quot; button (link).</li>
<li>Click the &quot;Sign in&quot; button (link), and you should be redirected to the Logto sign-in page.</li>
<li>After you have signed in, you should be redirected back to the web application, and you should see &quot;Is authenticated: True&quot; and the &quot;Sign out&quot; button (link).</li>
<li>Click the &quot;Sign out&quot; button (link), and you should be redirected to the Logto sign-out page, and then redirected back to the web application.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="the-user-object">The user object<a href="#the-user-object" class="hash-link" aria-label="Direct link to The user object" title="Direct link to The user object">​</a></h2>
<p>To know if the user is authenticated, you can check the <code>User.Identity?.IsAuthenticated</code> property.</p>
<p>To get the user profile claims, you can use the <code>User.Claims</code> property:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> claims </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> User</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Claims</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Get the user ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> userId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> claims</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">FirstOrDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Claims</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Subject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">?.</span><span class="token plain">Value</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://github.com/logto-io/csharp/tree/master/src/Logto.AspNetCore.Authentication/docs/api/Logto/AspNetCore/Authentication/LogtoParameters/Claims/index.md" target="_blank" rel="noopener noreferrer"><code>LogtoParameters.Claims</code></a> for the list of claim names and their meanings.</p>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="scopes-and-claims">Scopes and claims<a href="#scopes-and-claims" class="hash-link" aria-label="Direct link to Scopes and claims" title="Direct link to Scopes and claims">​</a></h2>
<p>Both of &quot;scope&quot; and &quot;claim&quot; are terms from the OAuth 2.0 and OpenID Connect (OIDC) specifications. In OIDC, there are some optional <a href="https://openid.net/specs/openid-connect-core-1_0.html#Claims" target="_blank" rel="noopener noreferrer">scopes and claims conventions</a> to follow. Logto uses these conventions to define the scopes and claims for the ID token.</p>
<p>In short, when you request a scope, you will get the corresponding claims in the ID token. For example, if you request the <code>email</code> scope, you will get the <code>email</code> and <code>email_verified</code> claims in the ID token.</p>
<!-- -->
<p>By default, Logto SDK will always requests three scopes: <code>openid</code>, <code>profile</code>, and <code>offline_access</code>, and there is no way to remove these default scopes. But you can add more scopes when configuring the Logto:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scopes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name keyword" style="color:#00009f">string</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">[</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scopes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scopes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Phone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here&#x27;s the list of supported scopes and the corresponding claims:</p>
<p><strong><code>openid</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>sub</td><td><code>string</code></td><td>The unique identifier of the user</td><td>No</td></tr></tbody></table>
<p><strong><code>profile</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>name</td><td><code>string</code></td><td>The full name of the user</td><td>No</td></tr><tr><td>username</td><td><code>string</code></td><td>The username of the user</td><td>No</td></tr><tr><td>picture</td><td><code>string</code></td><td>The profile picture URL of the user</td><td>No</td></tr></tbody></table>
<p><strong><code>email</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>email</td><td><code>string</code></td><td>The email address of the user</td><td>No</td></tr><tr><td>email_verified</td><td><code>boolean</code></td><td>Whether the email address has been verified</td><td>No</td></tr></tbody></table>
<p><strong><code>phone</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>phone_number</td><td><code>string</code></td><td>The phone number of the user</td><td>No</td></tr><tr><td>phone_number_verified</td><td><code>boolean</code></td><td>Whether the phone number has been verified</td><td>No</td></tr></tbody></table>
<p><strong><code>custom_data</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>custom_data</td><td><code>object</code></td><td>The custom data of the user</td><td>Yes</td></tr></tbody></table>
<p><strong><code>identities</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>identities</td><td><code>object</code></td><td>The linked identities of the user</td><td>Yes</td></tr></tbody></table>
<p><strong><code>urn:logto:scope:organizations</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>organizations</td><td><code>string[]</code></td><td>The organization IDs the user belongs to</td><td>No</td></tr><tr><td>organization_data</td><td><code>object[]</code></td><td>The organization data the user belongs to</td><td>Yes</td></tr></tbody></table>
<p><strong><code>urn:logto:scope:organization_roles</code></strong></p>
<table><thead><tr><th>Claim name</th><th>Type</th><th>Description</th><th>Needs userinfo?</th></tr></thead><tbody><tr><td>organization_roles</td><td><code>string[]</code></td><td>The organization roles the user belongs to with the format of <code>&lt;organization_id&gt;:&lt;role_name&gt;</code></td><td>No</td></tr></tbody></table>
<hr>
<p>Considering performance and the data size, if &quot;Needs userinfo?&quot; is &quot;Yes&quot;, it means the claim will not show up in the ID token, but will be returned in the <a href="https://openid.net/specs/openid-connect-core-1_0.html#UserInfo" target="_blank" rel="noopener noreferrer">userinfo endpoint</a> response.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="special-id-token-claims">Special ID token claims<a href="#special-id-token-claims" class="hash-link" aria-label="Direct link to Special ID token claims" title="Direct link to Special ID token claims">​</a></h3>
<p>Considering performance and the data size, Logto doesn&#x27;t include all the claims in the ID token, such as <code>custom_data</code> which could be a large JSON object. To fetch these claims, you need to set the <code>GetClaimsFromUserInfoEndpoint</code> property to <code>true</code>:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GetClaimsFromUserInfoEndpoint </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Currently, the following claims are not included in the ID token:</p>
<ul>
<li><code>LogtoParameters.Claims.CustomData</code> (use <code>LogtoParameters.Scopes.CustomData</code> to fetch)</li>
<li><code>LogtoParameters.Claims.Identities</code> (use <code>LogtoParameters.Scopes.Identities</code> to fetch)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="api-resources">API resources<a href="#api-resources" class="hash-link" aria-label="Direct link to API resources" title="Direct link to API resources">​</a></h2>
<p>We recommend to read <a href="https://docs.logto.io/docs/recipes/rbac/" target="_blank" rel="noopener noreferrer">🔐 Role-Based Access Control (RBAC)</a> first to understand the basic concepts of Logto RBAC and how to set up API resources properly.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="configure-api-resource-in-your-app">Configure API resource in your app<a href="#configure-api-resource-in-your-app" class="hash-link" aria-label="Direct link to Configure API resource in your app" title="Direct link to Configure API resource in your app">​</a></h3>
<p>Once you have set up the API resources, you can add them when configuring the Logto client:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://&lt;your-api-resource-indicator&gt;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Each API resource has its own permissions (scopes).</p>
<p>For example, the <code>https://shopping.your-app.com/api</code> resource has the <code>shopping:read</code> and <code>shopping:write</code> permissions, and the <code>https://store.your-app.com/api</code> resource has the <code>store:read</code> and <code>store:write</code> permissions.</p>
<p>To request these permissions, you can add them when configuring the Logto client:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Services</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">AddLogtoAuthentication</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Resource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://shopping.your-app.com/api&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Scopes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name keyword" style="color:#00009f">string</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">[</span><span class="token constructor-invocation class-name punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;openid&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;profile&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;offline_access&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;write&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You may notice that scopes are defined separately from API resources. This is because <a href="https://www.rfc-editor.org/rfc/rfc8707.html" target="_blank" rel="noopener noreferrer">Resource Indicators for OAuth 2.0</a> specifies the final scopes for the request will be the cartesian product of all the scopes at all the target services.</p>
<!-- -->
<div class="theme-admonition theme-admonition-note admonition_Ea3n alert alert--secondary"><div class="admonitionHeading_OqI6"><span class="admonitionIcon_Ckmq"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_NLSJ"><p>It is fine to request scopes that are not defined in the API resources. For example, you can request the <code>email</code> scope even if the API resources don&#x27;t have the <code>email</code> scope available. Unavailable scopes will be safely ignored.</p></div></div>
<p>After the successful sign-in, Logto will issue proper scopes to every API resource according to the user&#x27;s roles.</p>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="fetch-tokens">Fetch tokens<a href="#fetch-tokens" class="hash-link" aria-label="Direct link to Fetch tokens" title="Direct link to Fetch tokens">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="fetch-token-via-httpcontext">Fetch token via <code>HttpContext</code><a href="#fetch-token-via-httpcontext" class="hash-link" aria-label="Direct link to fetch-token-via-httpcontext" title="Direct link to fetch-token-via-httpcontext">​</a></h3>
<p>Sometimes you may need to fetch the access token or ID token for API calls. You can use the <code>GetTokenAsync</code> method to fetch the tokens:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> HttpContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetTokenAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tokens</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccessToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> idToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> HttpContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetTokenAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tokens</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">IdToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>No need to worry about the token expiration, the authentication middleware will automatically refresh the tokens when necessary.</p>
<div class="theme-admonition theme-admonition-caution admonition_Ea3n alert alert--warning"><div class="admonitionHeading_OqI6"><span class="admonitionIcon_Ckmq"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_NLSJ"><p>Although the authentication middleware will automatically refresh the tokens, the claims in the user object will not be updated due to the limitation of the underlying OpenID Connect authentication handler.
This can be resolved once we write our own authentication handler.</p></div></div>
<p>Note the access token above is an opaque token for the userinfo endpoint in OpenID Connect, which is not a JWT token. If you have specified the API resource, you need to use <code>LogtoParameters.Tokens.AccessTokenForResource</code> to fetch the access token for the API resource:</p>
<div class="language-csharp codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-csharp codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token class-name keyword" style="color:#00009f">var</span><span class="token plain"> accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> HttpContext</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetTokenAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LogtoParameters</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Tokens</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AccessTokenForResource</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This token will be a JWT token with the API resource as the audience.</p>
<h3 class="anchor anchorWithStickyNavbar_Esll" id="fetch-token-in-razor-components">Fetch token in Razor components<a href="#fetch-token-in-razor-components" class="hash-link" aria-label="Direct link to Fetch token in Razor components" title="Direct link to Fetch token in Razor components">​</a></h3>
<p>Since we cannot directly access <code>HttpContext</code> in Razor components, we need to inject the <code>HttpContextAccessor</code> to the component and use it to fetch the tokens. The following code demonstrates how to fetch the access token for the API resource in a Razor component:</p>
<div class="language-cshtml codeBlockContainer_D9EN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_pAEv"><pre tabindex="0" class="prism-code language-cshtml codeBlock_HeFN thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_ehlE"><span class="token-line" style="color:#393A34"><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">Microsoft</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">AspNetCore</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Components</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Authorization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">System</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Security</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Claims</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">Logto</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">AspNetCore</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Authentication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@using</span><span class="token directive"> </span><span class="token directive csharp language-csharp">Microsoft</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">AspNetCore</span><span class="token directive csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token directive csharp language-csharp">Authentication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@inject</span><span class="token directive"> </span><span class="token directive csharp language-csharp">AuthenticationStateProvider AuthenticationStateProvider</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token directive keyword" style="color:#00009f">@inject</span><span class="token directive"> </span><span class="token directive csharp language-csharp">IHttpContextAccessor HttpContextAccessor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Resource:</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token value variable keyword" style="color:#00009f">@</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token value variable csharp language-csharp" style="color:#36acaa">Resource </span><span class="token value variable csharp language-csharp operator" style="color:#393A34">??</span><span class="token value variable csharp language-csharp" style="color:#36acaa"> </span><span class="token value variable csharp language-csharp string" style="color:#e3116c">&quot;(null)&quot;</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Access Token:</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token value variable keyword" style="color:#00009f">@</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token value variable csharp language-csharp" style="color:#36acaa">AccessToken </span><span class="token value variable csharp language-csharp operator" style="color:#393A34">??</span><span class="token value variable csharp language-csharp" style="color:#36acaa"> </span><span class="token value variable csharp language-csharp string" style="color:#e3116c">&quot;(null)&quot;</span><span class="token value variable csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token razor-comment comment" style="color:#999988;font-style:italic">@* ... *@</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token block keyword" style="color:#00009f">@code</span><span class="token block"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name">ClaimsPrincipal</span><span class="token block csharp language-csharp return-type class-name punctuation" style="color:#393A34">?</span><span class="token block csharp language-csharp"> User </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">get</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">set</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name keyword" style="color:#00009f">string</span><span class="token block csharp language-csharp return-type class-name punctuation" style="color:#393A34">?</span><span class="token block csharp language-csharp"> AccessToken </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">get</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">set</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name keyword" style="color:#00009f">string</span><span class="token block csharp language-csharp return-type class-name punctuation" style="color:#393A34">?</span><span class="token block csharp language-csharp"> Resource </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">get</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">set</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">protected</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">override</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">async</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name">Task</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">OnInitializedAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp class-name keyword" style="color:#00009f">var</span><span class="token block csharp language-csharp"> authState </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">await</span><span class="token block csharp language-csharp"> AuthenticationStateProvider</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">GetAuthenticationStateAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        User </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> authState</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">User</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp keyword" style="color:#00009f">if</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp">User</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token block csharp language-csharp">Identity</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token block csharp language-csharp">IsAuthenticated </span><span class="token block csharp language-csharp operator" style="color:#393A34">==</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp boolean" style="color:#36acaa">true</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">            </span><span class="token block csharp language-csharp keyword" style="color:#00009f">await</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">FetchTokenAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp keyword" style="color:#00009f">private</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">async</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp return-type class-name">Task</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp function" style="color:#d73a49">FetchTokenAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp class-name keyword" style="color:#00009f">var</span><span class="token block csharp language-csharp"> httpContext </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> HttpContextAccessor</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">HttpContext</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp keyword" style="color:#00009f">if</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp">httpContext </span><span class="token block csharp language-csharp operator" style="color:#393A34">==</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">null</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">{</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">            </span><span class="token block csharp language-csharp keyword" style="color:#00009f">return</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp class-name keyword" style="color:#00009f">var</span><span class="token block csharp language-csharp"> logtoOptions </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> httpContext</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">GetLogtoOptions</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        Resource </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> logtoOptions</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">?.</span><span class="token block csharp language-csharp">Resource</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        </span><span class="token block csharp language-csharp comment" style="color:#999988;font-style:italic">// Replace with other token types if needed</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">        AccessToken </span><span class="token block csharp language-csharp operator" style="color:#393A34">=</span><span class="token block csharp language-csharp"> </span><span class="token block csharp language-csharp keyword" style="color:#00009f">await</span><span class="token block csharp language-csharp"> httpContext</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp function" style="color:#d73a49">GetTokenAsync</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">(</span><span class="token block csharp language-csharp">LogtoParameters</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">Tokens</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">.</span><span class="token block csharp language-csharp">AccessTokenForResource</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">)</span><span class="token block csharp language-csharp punctuation" style="color:#393A34">;</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp">    </span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><span class="token block csharp language-csharp"></span><br></span><span class="token-line" style="color:#393A34"><span class="token block csharp language-csharp"></span><span class="token block csharp language-csharp punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hynU"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Bv2O" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_ieA3"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_FIQv"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_Esll" id="further-readings">Further readings<a href="#further-readings" class="hash-link" aria-label="Direct link to Further readings" title="Direct link to Further readings">​</a></h2>
<ul>
<li><a href="/docs/recipes/customize-sie/">Customize sign-in experience</a></li>
<li><a href="/docs/recipes/configure-connectors/">Configure connectors</a></li>
<li><a href="/docs/recipes/rbac/protect-resource/#client">Configure client to use RBAC</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/logto-io/docs/tree/master/docs/sdk/web/dotnet-blazor-server/README.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_h56u" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_Qvc9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sdk/vue/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Vue</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sdk/dotnet-core/blazor-wasm/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">.NET Core (Blazor WASM)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ZIoQ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#integration" class="table-of-contents__link toc-highlight">Integration</a><ul><li><a href="#add-logto-authentication" class="table-of-contents__link toc-highlight">Add Logto authentication</a></li><li><a href="#add-sign-in-redirect-uri" class="table-of-contents__link toc-highlight">Add sign-in redirect URI</a></li><li><a href="#add-sign-out-redirect-uri" class="table-of-contents__link toc-highlight">Add sign-out redirect URI</a></li><li><a href="#add-routes" class="table-of-contents__link toc-highlight">Add routes</a></li><li><a href="#implement-sign-insign-out-buttons" class="table-of-contents__link toc-highlight">Implement sign-in/sign-out buttons</a></li><li><a href="#the-authorizeview--component" class="table-of-contents__link toc-highlight">The <code>&lt;AuthorizeView /&gt;</code> component</a></li><li><a href="#checkpoint-test-your-application" class="table-of-contents__link toc-highlight">Checkpoint: Test your application</a></li></ul></li><li><a href="#the-user-object" class="table-of-contents__link toc-highlight">The user object</a></li><li><a href="#scopes-and-claims" class="table-of-contents__link toc-highlight">Scopes and claims</a><ul><li><a href="#special-id-token-claims" class="table-of-contents__link toc-highlight">Special ID token claims</a></li></ul></li><li><a href="#api-resources" class="table-of-contents__link toc-highlight">API resources</a><ul><li><a href="#configure-api-resource-in-your-app" class="table-of-contents__link toc-highlight">Configure API resource in your app</a></li></ul></li><li><a href="#fetch-tokens" class="table-of-contents__link toc-highlight">Fetch tokens</a><ul><li><a href="#fetch-token-via-httpcontext" class="table-of-contents__link toc-highlight">Fetch token via <code>HttpContext</code></a></li><li><a href="#fetch-token-in-razor-components" class="table-of-contents__link toc-highlight">Fetch token in Razor components</a></li></ul></li><li><a href="#further-readings" class="table-of-contents__link toc-highlight">Further readings</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_TCBS"><div class="container_oxh8"><div class="logoRow_e6WH"><img src="/img/silverhand.svg" alt="Logo"></div><div class="footerRow_MwlS"><div class="copyRight_Do1v">Copyright © 2024 Silverhand Inc. Built with Docusaurus.</div><div class="links_lMuC"><a class="footer__link-item" href="/">Docs</a><a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a><a href="https://logto.io/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a><a href="mailto: contact@logto.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></div></div></div></footer></div>
</body>
</html>