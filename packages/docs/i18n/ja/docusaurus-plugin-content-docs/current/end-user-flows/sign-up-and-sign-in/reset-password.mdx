---
sidebar_position: 4
---

# パスワードのリセット

有効な [Email コネクター](/connectors/email-connectors) または [SMS コネクター](/connectors/sms-connectors) が設定されている場合、パスワード回復機能が自動的に有効になります。ユーザーは登録済みのメールアドレスまたは電話番号を提供することでパスワードをリセットできます。

## パスワードリセットフロー \{#password-reset-flow}

パスワードリセット機能が有効になると、サインインフォームの下に「パスワードを忘れた場合」のリンクボタンが表示されます。ユーザーは「パスワードを忘れた場合」のリンクをクリックして、パスワードリセットプロセスを開始できます。

:::note
「パスワードを忘れた場合」のリンクが表示されない場合は、有効な **Email** または **SMS** コネクターが設定されていることを確認してください。
:::

1. **サインインページにアクセス**：ユーザーがサインインページにアクセスします。
2. **パスワードを忘れた場合のリンクをクリック**：ユーザーが「パスワードを忘れた場合」のリンクをクリックします。
3. **メール / 電話番号を入力**：「パスワードを忘れた場合」のリンクをクリックした後、ユーザーは登録済みのメールアドレスまたは電話番号を入力できる新しいページにリダイレクトされます。
4. **確認コードを送信**：Logto はユーザーが提供したメールアドレスまたは電話番号に確認コードを送信し、コード確認ページにリダイレクトします。
5. **確認コードを入力**：ユーザーはメールまたは電話で受け取った確認コードを入力します。Logto はコードとメールアドレスまたは電話番号に関連付けられたユーザーのアイデンティティを確認します。
6. **新しいパスワードを入力**：確認コードが正常に確認されると、ユーザーは新しいパスワードを入力するよう促されます。
7. **パスワードリセットの成功**：提供されたパスワードがパスワードポリシーの要件を満たしている場合、パスワードは正常に更新されます。
8. **サインインページにリダイレクト**：ユーザーは新しいパスワードでサインインするためにサインインページにリダイレクトされます。

<img src="/img/assets/reset-password.png" alt="パスワードリセットフロー" />

## 認証済みユーザーのパスワード更新 \{#update-password-for-authenticate-users}

認証済みユーザーは、アカウント設定ページにアクセスしてパスワードを更新できます。ユーザーアカウント設定ページの実装については、[アカウント設定](/end-user-flows/account-settings/)を確認してください。

## よくある質問 \{#faqs}

<details>
  <summary>

### パスワードリセットが成功した後にユーザーをサインアウトさせる方法 \{#how-to-sign-out-a-user-after-a-successful-password-reset}

</summary>

ユーザーがパスワードを正常にリセットしたときに通知を受け取るために、`PostResetPassword` [Webhook イベント](/developers/webhooks/webhooks-events#user-interaction-hook-events) を購読します。その後、ユーザーの現在のセッションを無効にし、サインインページにリダイレクトするために [サインアウト](/end-user-flows/sign-out) アクションをトリガーできます。

</details>

<details>
  <summary>

### カスタム UI でパスワードリセットフローを実装する方法 \{#how-to-implement-the-password-reset-flow-on-my-custom-ui}

</summary>

Logto の **Management API** と **Account API** を使用して独自のパスワードリセットフローを実装できます。詳細については [アカウント設定](/end-user-flows/account-settings/) を確認してください。

</details>

<details>
  <summary>

### ユーザーのメールにパスワードリセットリンクを送信する方法 \{#how-can-i-send-a-password-reset-link-to-the-users-email}

</summary>

自己ホスト型のパスワードリセットエンドポイントを作成し、Logto SDK を利用して [`first_screen`](/end-user-flows/authentication-parameters/first-screen) を `reset-password` に設定してサインインリクエストを開始できます。これにより、ユーザーはシームレスにパスワードリセットページにリダイレクトされます。

</details>

## 関連リソース \{#related-resources}

<Url href="https://blog.logto.io/design-your-password-policy">パスワードポリシーの設計</Url>
