## 在 Azure Portal 中設定 Microsoft Azure AD \{#set-up-microsoft-azure-ad-in-the-azure-portal}

- 訪問 [Azure Portal](https://portal.azure.com/#home) 並使用你的 Azure 帳戶登入。你需要有一個有效的訂閱才能存取 Microsoft Azure AD。
- 點擊他們提供的服務中的 **Azure Active Directory**，然後從左側選單中點擊 **App Registrations**。
- 點擊頂部的 **New Registration**，輸入描述，選擇你的 **存取類型 (access type)** 並新增你的 **Redirect URI**，這將在使用者登入後將其重定向到應用程式。在我們的例子中，這將是 `${your_logto_endpoint}/callback/${connector_id}`。例如 `https://foo.logto.app/callback/${connector_id}`。`connector_id` 也可以在 Logto 管理控制台連接器詳細資訊頁面的頂部欄位找到。你可以在配置部分複製 `Callback URI`。
- 選擇 Web 作為平台。

## 在 Logto 中填寫配置 \{#fill-in-the-configuration-in-logto}

| Name          | Type   |
| ------------- | ------ |
| clientId      | string |
| clientSecret  | string |
| tenantId      | string |
| cloudInstance | string |

### Client ID \{#client-id}

你可以在 Azure Portal 中新創建的應用程式的 **Overview** 部分找到 **Application (client) ID**。

### Client Secret \{#client-secret}

- 在你新創建的應用程式中，點擊 **Certificates & Secrets** 以獲取 client secret，然後從頂部點擊 **New client secret**。
- 輸入描述和到期時間。
- 這將只顯示你的 client secret 一次。將 **value** 填寫到 Logto 連接器配置中並將其保存到安全的位置。

### Cloud Instance \{#cloud-instance}

通常是 `https://login.microsoftonline.com/`。更多資訊請參閱 [Azure AD authentication endpoints](https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-national-cloud#azure-ad-authentication-endpoints)。

### Tenant ID \{#tenant-id}

Logto 將使用此欄位來構建授權端點。此值取決於你在 Azure Portal 中創建應用程式時選擇的 **存取類型 (access type)**。

- 如果你選擇 **僅限此組織目錄中的帳戶** 作為存取類型，那麼你需要輸入你的 **\{TenantID}**。你可以在 Azure Active Directory 的 **Overview** 部分找到 tenant ID。
- 如果你選擇 **任何組織目錄中的帳戶** 作為存取類型，那麼你需要輸入 **organizations**。
- 如果你選擇 **任何組織目錄或個人 Microsoft 帳戶中的帳戶** 作為存取類型，那麼你需要輸入 **common**。
- 如果你選擇 **僅限個人 Microsoft 帳戶** 作為存取類型，那麼你需要輸入 **consumers**。
