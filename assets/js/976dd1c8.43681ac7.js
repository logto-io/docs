"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[95301],{29483:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"connectors/connector-data-structure","title":"Connector data structure","description":"Introduction","source":"@site/docs/connectors/connector-data-structure.mdx","sourceDirName":"connectors","slug":"/connectors/connector-data-structure","permalink":"/connectors/connector-data-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/docs/connectors/connector-data-structure.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Enterprise connectors","permalink":"/connectors/enterprise-connectors"},"next":{"title":"Connectors","permalink":"/connectors/"}}');var r=t(86070),s=t(15658);const i={sidebar_position:5},c="Connector data structure",a={},d=[{value:"Introduction",id:"introduction",level:2},{value:"What is a connector?",id:"what-is-a-connector",level:3},{value:"Compositions",id:"compositions",level:2},{value:"Connector&#39;s local storage: <em>ConnectorMetadata</em>",id:"connectors-local-storage-connectormetadata",level:2},{value:"id",id:"id",level:3},{value:"target",id:"target",level:3},{value:"type",id:"type",level:3},{value:"platform",id:"platform",level:3},{value:"name",id:"name",level:3},{value:"description",id:"description",level:3},{value:"logo",id:"logo",level:3},{value:"logoDark",id:"logodark",level:3},{value:"isStandard",id:"isstandard",level:3},{value:"readme",id:"readme",level:3},{value:"configTemplate",id:"configtemplate",level:3},{value:"Connector&#39;s remote storage: <em>Connector DB</em>",id:"connectors-remote-storage-connector-db",level:2},{value:"id",id:"id-1",level:3},{value:"connectorId",id:"connectorid",level:3},{value:"metadata",id:"metadata",level:3},{value:"syncProfile",id:"syncprofile",level:3},{value:"config",id:"config",level:3},{value:"createdAt",id:"createdat",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"connector-data-structure",children:"Connector data structure"})}),"\n",(0,r.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(n.h3,{id:"what-is-a-connector",children:"What is a connector?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Connectors"})," play a critical role in Logto. With their help, Logto enables end-users to use passwordless registration or sign-in and the capabilities of signing in with social accounts. With the increasing popularity of websites and applications, passwordless and social sign-ins allow users to avoid managing numerous accounts and passwords."]}),"\n",(0,r.jsxs)(n.p,{children:["Follow our ",(0,r.jsx)(n.a,{href:"/connectors",children:"connector guides"})," if you want to set up an existing connector. If you cannot find the connector you want to set up, you may develop those connectors by following the guides in ",(0,r.jsx)(n.a,{href:"/logto-oss/develop-your-connector",children:"developer your connector"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"compositions",children:"Compositions"}),"\n",(0,r.jsx)(n.p,{children:"There are lots of properties in connector data."}),"\n",(0,r.jsx)(n.p,{children:"To make the data loading and updating more efficient, we store part of connector data which will be modified frequently to DB and the rest of that locally."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Local storage"}),", also known as ",(0,r.jsx)(n.a,{href:"./#connectors-remote-storage-connector-db",children:(0,r.jsx)(n.em,{children:"ConnectorMetadata"})}),", is an object containing fixed properties such as logo, connector type, and so on. (:face_with_monocle: Having trouble understanding these properties? No worry, a detailed explanation comes later!)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Remote storage"})," is stored in DB for the sake of relatively frequent changes on those data."]}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"connectors-local-storage-connectormetadata",children:["Connector's local storage: ",(0,r.jsx)(n.em,{children:"ConnectorMetadata"})]}),"\n",(0,r.jsx)(n.h3,{id:"id",children:"id"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"id"})," is an ",(0,r.jsx)(n.em,{children:"unique"})," string-typed key to identify a connector in Logto."]}),"\n",(0,r.jsx)(n.p,{children:"It's assigned by the developers of each connector and will be uploaded to DB."}),"\n",(0,r.jsx)(n.h3,{id:"target",children:"target"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"target"})," is a lowercase string to distinguish the social identities source of the social connector."]}),"\n",(0,r.jsx)(n.p,{children:'Logto users can regard this variable as "Identity provider\'s name" for better understanding.'}),"\n",(0,r.jsxs)(n.p,{children:["For example, your ",(0,r.jsx)(n.em,{children:"target"})," should be ",(0,r.jsx)(n.em,{children:"google"})," if you sign in to Logto with your google account. The value of ",(0,r.jsx)(n.em,{children:"target"})," can be an arbitrary non-empty string, but we encourage you to keep it straightforward since you can not change it. We DO NOT allow the existence of multiple connectors with the same ",(0,r.jsx)(n.em,{children:"target"})," and platform. On the other hand, you can have social connectors for different platforms sharing the same ",(0,r.jsx)(n.em,{children:"target"}),". For example, if users want to log in via ",(0,r.jsx)(n.em,{children:"WeChat"})," on their phone, a native ",(0,r.jsx)(n.em,{children:"WeChat"})," app is required per ",(0,r.jsx)(n.em,{children:"WeChat"}),"\u2019s TOU; at the same time, a web ",(0,r.jsx)(n.em,{children:"WeChat"})," app is also needed to enable log in to web applications. These two ",(0,r.jsx)(n.em,{children:"WeChat"})," apps share the same identity provider and should have the same target."]}),"\n",(0,r.jsxs)(n.p,{children:["We have concluded different use cases and suggestions for users since ",(0,r.jsx)(n.em,{children:"target"})," is a complicated concept."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{}),(0,r.jsx)(n.th,{children:"Example"}),(0,r.jsx)(n.th,{children:"Scenario"}),(0,r.jsx)(n.th,{children:"Result"}),(0,r.jsx)(n.th,{children:"Recommend?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Different IdPs and different ",(0,r.jsx)(n.em,{children:"targets"})]}),(0,r.jsxs)(n.td,{children:["1. GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),") ",(0,r.jsx)("br",{})," 2. Google Connector (target: ",(0,r.jsx)(n.code,{children:"google"}),")"]}),(0,r.jsx)(n.td,{children:"An app that supports both login with GitHub and Google account."}),(0,r.jsx)(n.td,{children:"Most common use cases."}),(0,r.jsx)(n.td,{children:"\u2705"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["Different IdPs and the same ",(0,r.jsx)(n.em,{children:"target"})]}),(0,r.jsxs)(n.td,{children:["1. GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),") ",(0,r.jsx)("br",{})," 2. Google Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),")"]}),(0,r.jsx)(n.td,{children:"N/A"}),(0,r.jsx)(n.td,{children:"It's possible for a user to sign in to a Logto account that was created using another user's GitHub account."}),(0,r.jsx)(n.td,{children:"\u274c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["The same IdP and different ",(0,r.jsx)(n.em,{children:"targets"})]}),(0,r.jsxs)(n.td,{children:["1. GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),") ",(0,r.jsx)("br",{})," 2. OAuth GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github_oauth"}),")"]}),(0,r.jsx)(n.td,{children:"The GitHub connector is used for Application A, while the OAuth GitHub connector was created specifically for Application B."}),(0,r.jsx)(n.td,{children:"Signing in to Logto using these two different connectors will always create separate Logto accounts - even if the user is using the same GitHub account."}),(0,r.jsx)(n.td,{children:"Splitting your user pool is the only scenario where you would need to use both connectors. However, it's generally considered best practice to create two separate tenants to handle this use case."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsxs)(n.td,{children:["The same IdP and the same ",(0,r.jsx)(n.em,{children:"target"})]}),(0,r.jsxs)(n.td,{children:["1. GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),") ",(0,r.jsx)("br",{})," 2. OAuth GitHub Connector (target: ",(0,r.jsx)(n.code,{children:"github"}),")"]}),(0,r.jsx)(n.td,{children:"N/A"}),(0,r.jsx)(n.td,{children:"Using either of these two connectors can result in the exact same outcome."}),(0,r.jsx)(n.td,{children:"Creating two connectors that essentially do the same thing can be confusing for end-users and doesn't make much sense. It's better to use one connector that fits your specific use case."})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"type",children:"type"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"type"})," is the property that record the type of the connector."]}),"\n",(0,r.jsx)(n.p,{children:"We define the connectors into three different types, based on their functionalities:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Social"}),": Connectors that can access user information from arbitrary third-party social media with end-users authorization."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"SMS"}),": Connectors enable end-users to receive text messages on their phones."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Email"}),": Connectors that can help send emails to end-users."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"platform",children:"platform"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"platform"})," is used to identify which platform the connector is built for."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"platform"})," should be either ",(0,r.jsx)(n.code,{children:"null"})," or one of the following string-typed values:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Native"}),": Connectors that ONLY work for native mobile apps."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Web"}),": Connectors work ONLY on desktop web applications."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Universal"}),": Connectors can work on both mobile web apps and desktop web apps."]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"platform"})," of ",(0,r.jsx)(n.em,{children:"email connectors"})," and ",(0,r.jsx)(n.em,{children:"SMS connectors"})," should always be ",(0,r.jsx)(n.code,{children:"null"}),".",(0,r.jsx)("br",{}),"\nONLY ",(0,r.jsx)(n.em,{children:"social connectors"})," can have non-NULL ",(0,r.jsx)(n.em,{children:"platform"})," values."]})}),"\n",(0,r.jsx)(n.h3,{id:"name",children:"name"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"name"})," is an object whose keys are i18n country codes and values are connectors' display name."]}),"\n",(0,r.jsx)(n.h3,{id:"description",children:"description"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"description"})," is also an object whose keys are i18n country codes and values are brief connector descriptions."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["To support i18n display at the client-side, we store the ",(0,r.jsx)(n.em,{children:"name"})," (as well as ",(0,r.jsx)(n.em,{children:"description"}),") props as a map, which uses country codes as its' key, name (or description) in local characters as the value."]})}),"\n",(0,r.jsx)(n.h3,{id:"logo",children:"logo"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"logo"})," is an URL or relative path of connector's logo."]}),"\n",(0,r.jsx)(n.h3,{id:"logodark",children:"logoDark"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"logoDark"})," is a ",(0,r.jsx)(n.em,{children:"nullable"})," URL or relative path of connector's dark mode logo."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"logo"})," is always required, and ",(0,r.jsx)(n.em,{children:"logoDark"})," is optional."]}),(0,r.jsxs)(n.p,{children:["We display ",(0,r.jsx)(n.em,{children:"logo"})," in light mode and ",(0,r.jsx)(n.em,{children:"logoDark"})," in dark mode if it exists. Otherwise will fall back to show ",(0,r.jsx)(n.em,{children:"logo"})," in dark mode."]})]}),"\n",(0,r.jsx)(n.h3,{id:"isstandard",children:"isStandard"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"isStandard"}),' is an OPTIONAL boolean attribute to identify whether the social connector is a "standard" connector. You can identify a "standard" connector by its truthy ',(0,r.jsx)(n.code,{children:"isStandard"})," attribute."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:'Logto only supports "standard" social connectors. That is to say, all Logto\'s Email or SMS connectors are NOT "standard".'}),(0,r.jsx)(n.p,{children:'Logto call connectors built upon open and standard protocols (e.g., OAuth, OIDC, SAML, etc.) as "standard" connectors. Logto\'s users are expected to construct multiple instances on each standard connector based on this context. For example, suppose that Logto has already provided an OAuth standard connector, users can build "OAuth GitHub connector", "OAuth Google connector" and "OAuth Facebook connector" instances. They are all based on the Logto OAuth standard connector.'}),(0,r.jsx)(n.p,{children:'If you are familiar with Logto\'s connector design, at most ONE Email or SMS connector can exist at the same time, which means Logto do not need "standard" Email or SMS connectors at the current stage.'})]}),"\n",(0,r.jsx)(n.h3,{id:"readme",children:"readme"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"readme"})," is a relative path of the connector's README markdown file whose contexts will show up in \"Admin Console\" during connectors' set-up."]}),"\n",(0,r.jsx)(n.h3,{id:"configtemplate",children:"configTemplate"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"configTemplate"})," is a relative path of the connector's configuration example."]}),"\n",(0,r.jsxs)(n.h2,{id:"connectors-remote-storage-connector-db",children:["Connector's remote storage: ",(0,r.jsx)(n.em,{children:"Connector DB"})]}),"\n",(0,r.jsx)(n.h3,{id:"id-1",children:"id"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"id"}),", which functions as connector DB's primary key, is an randomly generated string-typed key to identify connector in DB."]}),"\n",(0,r.jsx)(n.h3,{id:"connectorid",children:"connectorId"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"connectorId"})," is a string-typed key and is the ONLY bridge to align ",(0,r.jsx)(n.em,{children:"Connector DB"})," and ",(0,r.jsx)(n.em,{children:"ConnectorMetadata"}),". For each matched connector DB data and connector code module pair, ",(0,r.jsx)(n.em,{children:"connectorId"})," always equals to ",(0,r.jsxs)(n.a,{href:"#id",children:["metadata.",(0,r.jsx)(n.em,{children:"id"})]})," of the code module."]}),"\n",(0,r.jsx)(n.h3,{id:"metadata",children:"metadata"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"metadata"})," is a subset of ",(0,r.jsx)(n.a,{href:"#connectors-local-storage-connectormetadata",children:"ConnectorMetadata"}),", which contains configurable attributes i.e. ",(0,r.jsx)(n.a,{href:"#logo",children:(0,r.jsx)(n.em,{children:"logo"})}),", ",(0,r.jsx)(n.a,{href:"#logodark",children:(0,r.jsx)(n.em,{children:"logoDark"})}),", ",(0,r.jsx)(n.a,{href:"#target",children:(0,r.jsx)(n.em,{children:"target"})})," and ",(0,r.jsx)(n.a,{href:"#name",children:(0,r.jsx)(n.em,{children:"name"})}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"syncprofile",children:"syncProfile"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"syncProfile"})," is a boolean value to determine the user profile updating scheme, default to be FALSE."]}),"\n",(0,r.jsxs)(n.p,{children:["If ",(0,r.jsx)(n.em,{children:"syncProfile"})," is FALSE, the Logto user's basic information (including name and avatar) will be updated only when the user first signs up to Logto via this connector. Otherwise, every time users sign in to Logto through the connector, the Logto account profile will be updated."]}),"\n",(0,r.jsx)(n.h3,{id:"config",children:"config"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"config"})," could be an arbitrary non-empty object."]}),"\n",(0,r.jsxs)(n.p,{children:["It is where a connector store its configuration. Each connector have different properties in ",(0,r.jsx)(n.em,{children:"config"}),' and it obligated to be valid (connectors have different standard for "valid".) before being saved to DB. ONLY those ',(0,r.jsx)(n.em,{children:"config"})," passed validity check can be updated to DB, or there would throw an error."]}),"\n",(0,r.jsxs)(n.p,{children:["Developers are required to implement a ",(0,r.jsx)(n.em,{children:"config"})," guard when developing their own connectors, see ",(0,r.jsx)(n.a,{href:"/logto-oss/develop-your-connector",children:"develop your connector"})," for more details."]}),"\n",(0,r.jsxs)(n.p,{children:["Want to have a glance at ",(0,r.jsx)(n.em,{children:"config"})," samples? Go to ",(0,r.jsx)(n.a,{href:"/connectors",children:"connectors"})," or each connector's settings page."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["In current Logto version, only one ",(0,r.jsx)(n.em,{children:"Email/SMS"})," connector can exist at the same time, all other connectors with same type are automatically deleted."]}),(0,r.jsxs)(n.p,{children:["The rule, unique working Email or SMS connector, is not applicable to ",(0,r.jsx)(n.em,{children:"Social"})," connectors.",(0,r.jsx)("br",{}),"\nIn other words, you can add multiple ",(0,r.jsx)(n.em,{children:"Social"})," connectors."]})]}),"\n",(0,r.jsx)(n.h3,{id:"createdat",children:"createdAt"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"createdAt"})," is an auto-generated timestamp string to track the time when a connector is created in DB."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},15658:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var o=t(30758);const r={},s=o.createContext(r);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);