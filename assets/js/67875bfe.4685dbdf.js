"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[3290],{25873:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>h});var r=n(11527),o=n(17279),i=n(75696),t=n(78407);const c={},a="Protect your API Resource with RBAC",l={id:"docs/recipes/rbac/protect-resource",title:"Protect your API Resource with RBAC",description:"This page assumes you have configured roles and permissions based on your demand. Go through \ud83d\udd10 RBAC (Role Based Access Control) first if you haven't done yet.",source:"@site/docs/docs/recipes/rbac/protect-resource.mdx",sourceDirName:"docs/recipes/rbac",slug:"/docs/recipes/rbac/protect-resource",permalink:"/docs/recipes/rbac/protect-resource",draft:!1,unlisted:!1,editUrl:"https://github.com/logto-io/docs/tree/master/docs/docs/recipes/rbac/protect-resource.mdx",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Manage permissions and roles",permalink:"/docs/recipes/rbac/manage-permissions-and-roles"},next:{title:"\ud83c\udf0d Custom domain",permalink:"/docs/recipes/custom-domain/"}},d={},h=[{value:"Server",id:"server",level:2},{value:"Client",id:"client",level:2},{value:"Assumption",id:"assumption",level:3},{value:"Configure client SDK",id:"configure-client-sdk",level:3},{value:"Fetch an access token for a resource",id:"fetch-an-access-token-for-a-resource",level:3},{value:"Carry the Access Token in requests",id:"carry-the-access-token-in-requests",level:3},{value:"Optional: Access multiple API Resources",id:"optional-access-multiple-api-resources",level:3},{value:"Manage user permission change",id:"manage-user-permission-change",level:2},{value:"What happens when a user&#39;s permissions change?",id:"what-happens-when-a-users-permissions-change",level:3},{value:"Recommended Actions",id:"recommended-actions",level:3},{value:"Option 1: Use short access token expiration times",id:"option-1-use-short-access-token-expiration-times",level:4},{value:"Option 2: Periodically check permissions",id:"option-2-periodically-check-permissions",level:4},{value:"Option 3: Use Webhooks for notifications",id:"option-3-use-webhooks-for-notifications",level:4}];function u(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.a)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"protect-your-api-resource-with-rbac",children:"Protect your API Resource with RBAC"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["This page assumes you have configured roles and permissions based on your demand. Go through ",(0,r.jsx)(s.a,{href:"/docs/recipes/rbac/",children:"\ud83d\udd10 RBAC (Role Based Access Control)"})," first if you haven't done yet."]})}),"\n",(0,r.jsx)(s.h2,{id:"server",children:"Server"}),"\n",(0,r.jsxs)(s.p,{children:["To ensure the incoming request has the right access, you need to validate Access Token on the server side. Detailed validation process is demonstrated in ",(0,r.jsx)(s.a,{href:"/docs/recipes/protect-your-api/#validate-the-api-requests-authorization-token",children:"\u2694\ufe0f Protect your API"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"In short, besides the basic JWT and JWS validtion, you need to focus on:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["The token has the correct issuer (",(0,r.jsx)(s.code,{children:"iss"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["The token has the correct audience (i.e. resource indicator, ",(0,r.jsx)(s.code,{children:"aud"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["The token has the desired scope (i.e. permission, ",(0,r.jsx)(s.code,{children:"scope"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Note ",(0,r.jsx)(s.code,{children:"scope"})," is a string that includes all granted scopes separated by space. Usually the library you use to validate will take care of it."]}),"\n",(0,r.jsx)(s.admonition,{type:"caution",children:(0,r.jsxs)(s.p,{children:["Currently, there's no limitation for requesting valid resource indicators in an auth flow. Thus validating ",(0,r.jsx)(s.code,{children:"scope"})," (permission) is crucial when implementing RBAC. Otherwise the meaning of resource indicator will become trivial."]})}),"\n",(0,r.jsx)(s.admonition,{type:"info",children:(0,r.jsxs)(s.p,{children:["You may notice that ",(0,r.jsx)(s.code,{children:"role"})," is missing in the Access Token, which is by design since the scope (permission) of an API Resource is the final representative of the access control model and what we only care about."]})}),"\n",(0,r.jsx)(s.h2,{id:"client",children:"Client"}),"\n",(0,r.jsx)(s.h3,{id:"assumption",children:"Assumption"}),"\n",(0,r.jsx)(s.p,{children:"Let's say you have two resources with permissions as below:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})]}),"\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"write:order"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["API Resource ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"To gain the specific access, the client needs to exchange a proper Access Token from Logto, and use it as a Bearer Token in the request header."}),"\n",(0,r.jsx)(s.h3,{id:"configure-client-sdk",children:"Configure client SDK"}),"\n",(0,r.jsx)(s.p,{children:"This tutorial uses TypeScript as the sample language, and the convention applies to all Logto Client SDKs."}),"\n",(0,r.jsxs)(s.p,{children:["When ",(0,r.jsx)(s.a,{href:"/docs/recipes/integrate-logto/",children:"integrating client SDK"})," with your application, make sure to include both ",(0,r.jsx)(s.code,{children:"resources"})," and ",(0,r.jsx)(s.code,{children:"scopes"})," (permissions) in the configuration for ",(0,r.jsx)(s.code,{children:"LogtoClient"}),"."]}),"\n",(0,r.jsxs)(s.p,{children:["For example, in order to access the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"})," and fetch ",(0,r.jsx)(s.code,{children:"read:order"})," and ",(0,r.jsx)(s.code,{children:"write:order"})," permissions, the config should look like:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const config: LogtoConfig = {\n  // ...other configs\n  resources: ['https://api-1.store.io'],\n  scopes: ['read:order', 'write:order'], // i.e. permissions\n};\n"})}),"\n",(0,r.jsx)(s.admonition,{type:"tip",children:(0,r.jsxs)(s.p,{children:["In Logto SDKs, the term ",(0,r.jsx)(s.code,{children:"scope"})," is used to align with the OAuth 2.0 protocol. However, in the Admin Console, it is referred to ",(0,r.jsx)(s.code,{children:"permission"})," for better readability and understanding of real-world scenarios, in line with the ",(0,r.jsx)(s.a,{href:"https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf",children:"NIST RBAC model"}),". Thus ",(0,r.jsx)(s.code,{children:"scope"})," and ",(0,r.jsx)(s.code,{children:"permission"})," are identical and exchangeable in all cases except coding."]})}),"\n",(0,r.jsx)(s.h3,{id:"fetch-an-access-token-for-a-resource",children:"Fetch an access token for a resource"}),"\n",(0,r.jsxs)(s.p,{children:["When user has successfully signed in, you can use ",(0,r.jsx)(s.code,{children:"logtoClient.getAccessToken()"})," to fetch an access token for a given resource:"]}),"\n",(0,r.jsxs)(t.Z,{children:[(0,r.jsx)(i.Z,{value:"ts",label:"TypeScript",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const accessToken = await logtoClient.getAccessToken('https://api-1.store.io');\n"})})}),(0,r.jsx)(i.Z,{value:"swift",label:"Swift",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-swift",children:'let token = try await client.getAccessToken(for: "https://api-1.store.io")\n'})})}),(0,r.jsx)(i.Z,{value:"kotlin",label:"Kotlin",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-swift",children:'logtoClient.getAccessToken("https://api-1.store.io", { logtoException, accessToken ->\n    //...\n})\n'})})})]}),"\n",(0,r.jsx)(s.p,{children:"The Access Token will include all eligble scopes (permissions) for the current user. The definition of eligble scopes is the joint of the following sets:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["A subset of ",(0,r.jsx)(s.code,{children:"scopes"})," in the initial Logto config that includes all the scopes that belong to the resource indicator you passed in ",(0,r.jsx)(s.code,{children:"getAccessToken()"})]}),"\n",(0,r.jsx)(s.li,{children:"The scopes that the user can obtain based on your RBAC configuration"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"For example, in the initial Logto config:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const config: LogtoConfig = {\n  // ...other configs\n  resources: ['https://api-1.store.io'],\n  scopes: ['read:order', 'write:order', 'custom_data'],\n};\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Per our ",(0,r.jsx)(s.a,{href:"#assumption",children:"assumption"}),", scope ",(0,r.jsx)(s.code,{children:"custom_data"})," is not available in the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"}),". When getting an Access Token:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const accessToken = await logtoClient.getAccessToken('https://api-1.store.io');\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If the user has both ",(0,r.jsx)(s.code,{children:"read:order"})," and ",(0,r.jsx)(s.code,{children:"write:order"})," permissions for the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"}),", the returned Access Token will have both scopes:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"{\n  // ...other token claims\n  iss: '<your-logto-endpoint>/oidc', // issuer\n  aud: 'https://api-1.store.io', // audience, i.e. resource indicator\n  scope: 'read:order write:order'\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["If no resource indicator is passed in ",(0,r.jsx)(s.code,{children:"getAccessToken()"}),", it will try to fetch an Access Token for the ",(0,r.jsx)(s.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"UserInfo Endpoint"}),'. Check out the "Get user information" section in the SDK integration guide for details.']}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["While you can specify multiple resource indicators in the config, ",(0,r.jsx)(s.code,{children:"getAccessToken()"})," only accepts a single resource parameter for security reason. As a result, Access Tokens are resource-specific."]})}),"\n",(0,r.jsx)(s.h3,{id:"carry-the-access-token-in-requests",children:"Carry the Access Token in requests"}),"\n",(0,r.jsxs)(s.p,{children:["Put the token in the ",(0,r.jsx)(s.code,{children:"Authorization"})," field of HTTP headers with the Bearer format (",(0,r.jsx)(s.code,{children:"Bearer YOUR_TOKEN"}),"), and you are good to go. Now ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"})," can receive and validate the token from the server side."]}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["The Bearer Token's integration flow may vary based on the framework or requester you are using. Choose your own way to apply the request ",(0,r.jsx)(s.code,{children:"Authorization"})," header."]})}),"\n",(0,r.jsx)(s.h3,{id:"optional-access-multiple-api-resources",children:"Optional: Access multiple API Resources"}),"\n",(0,r.jsxs)(s.p,{children:["While your business or the amount of micro services is growing, your client app may need to access multiple API Resources. We found it confusing since we cannot specify the relation between ",(0,r.jsx)(s.code,{children:"resources"})," and ",(0,r.jsx)(s.code,{children:"scopes"})," per OAuth 2.0 protocol."]}),"\n",(0,r.jsxs)(s.p,{children:["So we took another look at RFC 8707. In ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html#section-2.2-3",children:"section 2.2"}),", it turns out the result is the ",(0,r.jsx)(s.a,{href:"https://en.wikipedia.org/wiki/Cartesian_product",children:"cartesian product"})," of ",(0,r.jsx)(s.code,{children:"resources"})," and ",(0,r.jsx)(s.code,{children:"scopes"}),":"]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.em,{children:"... Effectively, the requested access rights of the token are the cartesian product of all the scopes at all the target services. To the extent possible, when issuing access tokens, the authorization server should downscope the scope value..."})}),"\n"]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"OK cool. Let's go with this."}),(0,r.jsx)(s.p,{children:'We are not sure if the cartesian product is the best solution to this, since all permissions are "attached" to a resource indicator and the result is implicit.'}),(0,r.jsxs)(s.p,{children:["But it is also understandable since ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"RFC 8087"})," published eight years later than ",(0,r.jsx)(s.a,{href:"https://www.rfc-editor.org/rfc/rfc6749",children:"RFC 6749"})," (i.e. the OAuth 2.0 Authorization Framework)."]})]}),"\n",(0,r.jsxs)(s.p,{children:["Thus, if the client wants to access all ",(0,r.jsx)(s.code,{children:"read:order"})," permissions across the two resources in our ",(0,r.jsx)(s.a,{href:"#assumption",children:"assumption"}),", the config should look like:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const config: LogtoConfig = {\n  // ...other configs\n  resources: ['https://api-1.store.io', 'https://api-2.store.io'],\n  scopes: ['read:order'],\n};\n"})}),"\n",(0,r.jsx)(s.p,{children:"During the auth flow, Logto will try to validate two permissions:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"})]}),"\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["What if you want to request the ",(0,r.jsx)(s.code,{children:"write:order"})," permission of API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"}),"? Simply update the config to:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"const config: LogtoConfig = {\n  // ...other configs\n  resources: ['https://api-1.store.io', 'https://api-2.store.io'],\n  scopes: ['read:order', 'write:order'],\n};\n"})}),"\n",(0,r.jsx)(s.p,{children:"Per definition of the cartesian product, during the auth flow, Logto will try to validate four permissions:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"})]}),"\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"write:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-1.store.io"})]}),"\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"read:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"})]}),"\n",(0,r.jsxs)(s.li,{children:["Permission ",(0,r.jsx)(s.code,{children:"write:order"})," of the API Resource ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"})]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["But the ",(0,r.jsx)(s.code,{children:"write:order"})," permission does not exist in the API Resource ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"}),'. Logto will ignore (i.e. "downscope") this permission in the API Resource ',(0,r.jsx)(s.code,{children:"https://api-2.store.io"})," which will reflect in the auth result."]}),"\n",(0,r.jsxs)(s.p,{children:["Now you can also specify ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"})," as the resource indicator when calling ",(0,r.jsx)(s.code,{children:"logtoClient.getAccessToken()"}),". Only ",(0,r.jsx)(s.code,{children:"read:order"})," will present in the ",(0,r.jsx)(s.code,{children:"scope"})," claim of the returned Access Token even if the user has the full access of ",(0,r.jsx)(s.code,{children:"https://api-2.store.io"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"manage-user-permission-change",children:"Manage user permission change"}),"\n",(0,r.jsx)(s.p,{children:"User permissions may be altered during a session -- for instance, they may be assigned new roles or have existing role permissions modified. In these scenarios, detecting these changes and updating the application UI may be necessary."}),"\n",(0,r.jsx)(s.h3,{id:"what-happens-when-a-users-permissions-change",children:"What happens when a user's permissions change?"}),"\n",(0,r.jsx)(s.p,{children:"Current access tokens will remain valid until they expire, even after a user\u2019s permissions are changed. However, new permissions will be reflected in subsequent access tokens, and any revoked permissions will be omitted."}),"\n",(0,r.jsx)(s.h3,{id:"recommended-actions",children:"Recommended Actions"}),"\n",(0,r.jsx)(s.h4,{id:"option-1-use-short-access-token-expiration-times",children:"Option 1: Use short access token expiration times"}),"\n",(0,r.jsxs)(s.p,{children:["Short-lived access tokens ensure more frequent updates to user permissions. Configure token expiration settings in the ",(0,r.jsx)(s.a,{href:"../../../references/resources/#logto-api-resource-schema",children:"API Resource"})," settings of the Console."]}),"\n",(0,r.jsx)(s.h4,{id:"option-2-periodically-check-permissions",children:"Option 2: Periodically check permissions"}),"\n",(0,r.jsxs)(s.p,{children:["Call ",(0,r.jsx)(s.a,{href:"../../interact-with-management-api/",children:"Management API"})," endpoints periodically to verify user permissions. Upon detecting changes, update the client UI accordingly or prompt the user to re-authenticate."]}),"\n",(0,r.jsx)(s.h4,{id:"option-3-use-webhooks-for-notifications",children:"Option 3: Use Webhooks for notifications"}),"\n",(0,r.jsxs)(s.p,{children:["Set up ",(0,r.jsx)(s.a,{href:"../../webhooks/",children:"Webhooks"})," to receive notifications about user permission changes. Forward this information to the client to update the UI in real-time."]})]})}function p(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},75696:(e,s,n)=>{n.d(s,{Z:()=>t});n(50959);var r=n(5341);const o={tabItem:"tabItem_YHvg"};var i=n(11527);function t(e){let{children:s,hidden:n,className:t}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,t),hidden:n,children:s})}},78407:(e,s,n)=>{n.d(s,{Z:()=>y});var r=n(50959),o=n(5341),i=n(18387),t=n(28903),c=n(15885),a=n(35927),l=n(38894),d=n(70148);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:s,children:n}=e;return(0,r.useMemo)((()=>{const e=s??function(e){return h(e).map((e=>{let{props:{value:s,label:n,attributes:r,default:o}}=e;return{value:s,label:n,attributes:r,default:o}}))}(n);return function(e){const s=(0,l.l)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,n])}function p(e){let{value:s,tabValues:n}=e;return n.some((e=>e.value===s))}function f(e){let{queryString:s=!1,groupId:n}=e;const o=(0,t.k6)(),i=function(e){let{queryString:s=!1,groupId:n}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:s,groupId:n});return[(0,a._X)(i),(0,r.useCallback)((e=>{if(!i)return;const s=new URLSearchParams(o.location.search);s.set(i,e),o.replace({...o.location,search:s.toString()})}),[i,o])]}function m(e){const{defaultValue:s,queryString:n=!1,groupId:o}=e,i=u(e),[t,a]=(0,r.useState)((()=>function(e){let{defaultValue:s,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!p({value:s,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:s,tabValues:i}))),[l,h]=f({queryString:n,groupId:o}),[m,x]=function(e){let{groupId:s}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(s),[o,i]=(0,d.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:o}),g=(()=>{const e=l??m;return p({value:e,tabValues:i})?e:null})();(0,c.Z)((()=>{g&&a(g)}),[g]);return{selectedValue:t,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);a(e),h(e),x(e)}),[h,x,i]),tabValues:i}}var x=n(20619);const g={tabList:"tabList_bI1r",tabItem:"tabItem_PIQj"};var j=n(11527);function b(e){let{className:s,block:n,selectedValue:r,selectValue:t,tabValues:c}=e;const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.o5)(),d=e=>{const s=e.currentTarget,n=a.indexOf(s),o=c[n].value;o!==r&&(l(s),t(o))},h=e=>{let s=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;s=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;s=a[n]??a[a.length-1];break}}s?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},s),children:c.map((e=>{let{value:s,label:n,attributes:i}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===s?0:-1,"aria-selected":r===s,ref:e=>a.push(e),onKeyDown:h,onClick:d,...i,className:(0,o.Z)("tabs__item",g.tabItem,i?.className,{"tabs__item--active":r===s}),children:n??s},s)}))})}function w(e){let{lazy:s,children:n,selectedValue:o}=e;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(s){const e=i.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:i.map(((e,s)=>(0,r.cloneElement)(e,{key:s,hidden:e.props.value!==o})))})}function v(e){const s=m(e);return(0,j.jsxs)("div",{className:(0,o.Z)("tabs-container",g.tabList),children:[(0,j.jsx)(b,{...s,...e}),(0,j.jsx)(w,{...s,...e})]})}function y(e){const s=(0,x.Z)();return(0,j.jsx)(v,{...e,children:h(e.children)},String(s))}},17279:(e,s,n)=>{n.d(s,{Z:()=>c,a:()=>t});var r=n(50959);const o={},i=r.createContext(o);function t(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);