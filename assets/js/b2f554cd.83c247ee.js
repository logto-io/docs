"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[11477],{30010:e=>{e.exports=JSON.parse('{"blogPosts":[{"id":"/releases/2023-mar","metadata":{"permalink":"/blog/releases/2023-mar","source":"@site/blog/releases/2023-mar.md","title":"Logto 2023 March Update","description":"Did you know?","date":"2023-03-27T00:00:00.000Z","tags":[{"label":"release","permalink":"/blog/tags/release"}],"readingTime":3.97,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"date":"2023-03-27T00:00:00.000Z","authors":"gao","tags":["release"]},"unlisted":false,"nextItem":{"title":"Announcing Logto Cloud (Preview) and OSS General Availability","permalink":"/blog/announcing-logto-cloud-preview"}},"content":"> ***Did you know?***\\n> We have refreshed the Logto logo! We simplified the gradients but made our brand color stronger, resulting in improved recognizability.\\n\\nWe are grateful for your participation in testing Logto OSS, and we\'re excited to announce our first general availability version. In this version, we have delivered numerous improvements to the sign-in experience, making it more delightful for your end-users. This new release also includes several new practical features.\\n\\n\x3c!-- truncate --\x3e\\n\\n> **Note**\\n> In case you missed it, please see the letter from Gao: [Announcing Logto Cloud (Preview) and OSS General Availability](https://docs.logto.io/blog/announcing-logto-cloud-preview).\\n\\nLet\'s take a look at what\'s new!\\n\\n## \ud83d\udca5 BREAKING CHANGE \ud83d\udca5\\n\\nRename the **`/api/phrase`** API to **`/api/.well-known/phrases`.**\\n\\n## New features\\n\\n### Custom CSS editor\\n\\nThe console now has a custom CSS code editor in the \u201cSign-in experience\u201d tab that allows you to apply advanced UI customization to your application. You can preview your changes in real-time via the sign-in experience preview on the right side.\\n\\n<img width=\\"593\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727339-d8e284d0-30af-493e-957a-ebacd45e1c09.png\\" />\\n\\n### Image uploader\\n\\nThe console now supports a drag-and-drop image uploader for multiple scenarios. If a storage provider is configured in the system, you can upload images directly from your local file system. The first version of the uploader supports AWS S3 and Azure Blob Storage. For more information, please refer to the **[File storage provider](https://docs.logto.io/docs/recipes/configure-storage-providers/)** documentation.\\n\\n<img width=\\"579\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727364-7b8e1c92-72e6-4383-b633-087581edfc4f.png\\" />\\n\\n### Console profile page\\n\\nWe have removed the previous profile component and moved it to the user profile page. You can access the page by clicking your user avatar in the top right corner. From there, you can also change your language or theme directly from the popover menu.\\n\\n<img width=\\"350\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727413-cf90c33f-84bf-4635-91ca-9703e95f8a0d.png\\" />\\n\\nOn the profile page, you can update your avatar, name, and username, as well as change your password. For cloud users, it is now possible to link your email address and social accounts (Google and GitHub at first launch).\\n\\n### Sign-in experience\\n\\nAdded \\"Powered by Logto\\" to the sign-in experience.\\n\\n<img width=\\"153\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727454-267509ba-d6fb-4dd2-927d-2dcbe1a7e81a.png\\" />\\n\\n## CLI\\n\\nWe have added a new CLI command `db system` that allows you to get/set the system table value for your database. Enter `logto db system --help` in your terminal for details.\\n\\n## Improvements\\n\\n### Add parameter to specify showing sign-in or sign-up\\n\\nA new parameter have been added to our JavaScript SDKs which allows users to specify their desired user interaction experience. For instance, in our React SDK:\\n\\n```tsx\\nconst { signIn } = useLogto();\\n\\n// Shows the sign-in page\\nvoid signIn(\'https://some-callback-url\');\\n\\n// Shows the sign-up page\\nvoid signIn(\'https://some-callback-url\', \'signUp\');\\n```\\n\\nOther SDKs will be updated soon.\\n\\n### Country code selector\\n\\nA new country code selector dropdown component with a search box has been added to sign-in experience, allowing users to quickly search for a country code by typing in the search box.\\n\\n<img width=\\"430\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727560-4da65476-a8f9-4534-84b1-0b6876584ccd.png\\" />\\n\\n### Custom favicon\\n\\nUsers can now upload their own favicon in the sign-in-experience branding settings. A local logto icon will be used as a fallback.\\n\\n<img width=\\"550\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/227727577-87fd8d13-e450-445d-9020-e26a00191b04.png\\" />\\n\\n### Dynamic HTML titles\\n\\nInstead of showing \u201cLogto\u201d, now sign-in experience will change the page title based on the current context, for example, \u201cCreate account\u201d.\\n\\n### Enhanced password policy\\n\\nThe password policy has been updated to require a minimum of 8 characters and contain a mix of letters, numbers, and symbols. The allowed characters now include:\\n\\n- Digits: `0-9`\\n- Letters: `a-z`, `A-Z`\\n- Symbols: ```!\\"#$%&\'()*+,-./:;<=>?@[]^_`{|}~```\\n\\nUsers must now use at least two out of three types of characters.\\n\\nNote the new password policy only applies to new users or new passwords. Existing users can continue to use their old password to sign in.\\n\\n### Implement a lite version of set password form\\n\\nThe new lite version only contains one field for the password and will be used only if the forgot-password feature is enabled (password can be reset either by email and phone). If you don\'t have any email or SMS service enabled, the old version of set password form containing two fields (password and confirm password) will still be used.\\n\\n### Support Privacy Policy URL\\n\\nA new Privacy Policy URL field has been added to the sign-in-experience settings to support end-users\' privacy declaration needs.\\n\\n### Simplify the Terms of Use and Privacy Policy manual agreement for the sign-in flow\\n\\nThe Terms of Use and Privacy Policy manual agreement steps have been removed from the sign-in flow. The agreement checkbox in sign-in pages has been replaced with links to the Terms of Use and Privacy Policy.\\n\\nUsers can still read the agreements before signing in. However, the manual agreement is still mandatory for the sign-up flow, including sign-up with new social identities.\\n\\n## New Contributors\\n\\n* @Eengineer1 made their first contribution in https://github.com/logto-io/logto/pull/3431"},{"id":"announcing-logto-cloud-preview","metadata":{"permalink":"/blog/announcing-logto-cloud-preview","source":"@site/blog/2023-03-20-announcing-logto-cloud-preview/index.md","title":"Announcing Logto Cloud (Preview) and OSS General Availability","description":"Logto Cloud (Preview) has launched on Product Hunt. Come and support us!","date":"2023-03-20T00:00:00.000Z","tags":[{"label":"announcement","permalink":"/blog/tags/announcement"},{"label":"product","permalink":"/blog/tags/product"},{"label":"auth","permalink":"/blog/tags/auth"},{"label":"dev","permalink":"/blog/tags/dev"},{"label":"authentication","permalink":"/blog/tags/authentication"},{"label":"authorization","permalink":"/blog/tags/authorization"}],"readingTime":3.66,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"announcing-logto-cloud-preview","authors":"gao","tags":["announcement","product","auth","dev","authentication","authorization"]},"unlisted":false,"prevItem":{"title":"Logto 2023 March Update","permalink":"/blog/releases/2023-mar"},"nextItem":{"title":"Logto 2023 February Update (Extended)","permalink":"/blog/releases/2023-feb-extended"}},"content":":::info\\nLogto Cloud (Preview) has launched on [Product Hunt](https://www.producthunt.com/posts/logto-cloud-preview). Come and support us!\\n:::\\n\\nHi there,\\n\\nI\u2019m Gao, one of the creators of Logto. I remember feeling nervous last July - that\u2019s the date we launched the first beta version of Logto OSS.\\n\\n\x3c!-- truncate --\x3e\\n\\nTo our surprise, we had some deep conversations with the community from the outset. We talked about the terrible developer experience of building authentication, even with existing products, and the dramatic costs of current industry leaders. As developers ourselves, we feel you and that\'s why we started building Logto.\\n\\nThese conversations drove us towards a brighter future. I want to say a big thank you to everyone we connected with during our beta! Only with your help, we can shape the future of identity development together.\\n\\nToday, we\'re excited to announce that we\'ve made a significant step forward with Logto: we\'re officially launching Logto Cloud (Preview) to the public!\\n\\nI know that most of you got started with Logto through the online demo (huge credit to GitPod) or the docker-compose file. With Logto Cloud (Preview), you can even forget all the operational overheads when developing with Logto. Simply sign in and a new Logto instance will be ready for you. If you\'re developing locally, the only thing you need to change in your code is the Logto endpoint.\\n\\nAssuming you are familiar with cloud products, here are some quick answers to frequently asked questions:\\n\\n### What is the pricing model?\\n\\nWe are still finalizing our pricing model, but rest assured that we are working hard to make our product much more affordable than similar offerings currently on the market. We believe it should be more usage-based, rather than charging per seat for a customer-facing scenario.\\n\\nLogto Cloud will remain free while in preview. We would love to explore the appropriate and sustainable pricing model with you. Feel free to send us an email or schedule a meeting with us.\\n\\n### How will you process data?\\n\\nWe have a strong belief in building trust and maintaining transparency. During the preview period, all Logto data will stay in the Azure West Europe region. See our Privacy Policy for more details if you are interested.\\n\\n### Will you keep data when the preview ends?\\n\\nYes. Your tenant will seamlessly transition to Logto Cloud once the preview period ends. You can also request to have your data physically removed at any time if needed. See our Terms of Use for more details.\\n\\n### Will you stop open-source?\\n\\nNo! Open-source is the core of our product and we believe it always will be. We will try our best to align between OSS and Cloud, and make sure you have full confidence that Logto OSS is backing you up.\\n\\n:::tip Invitation\\nWith gratitude, we invite you to enter Logto Cloud via [this link](https://cloud.logto.io/). You can find more details about Logto Cloud (Preview) [here](https://docs.logto.io/about/cloud-preview/).\\n:::\\n\\nThe other role today is the General Availability version of [Logto OSS](https://github.com/logto-io/logto/). After multiple rounds of beta versions and release candidates, we are happy to announce the first release version of Logto OSS. Let\u2019s quickly go through the major updates since last July:\\n\\n- A brand new end-user Sign-In Experience with superior customizability on sign-in and sign-up flows.\\n- 10+ new connectors, including multiple open-standard connectors, such as OAuth 2.0 and SAML.\\n- Role-based access control that conforms to the NIST model.\\n- Fully customizable translations with 8 languages built-in.\\n- Machine-to-Machine apps and Web Hooks for building programmatic connections between Logto and your services.\\n\\nWe received valuable feedback from our community and have incorporated it into our recent priorities:\\n\\n- Add Single Sign-On (SSO) support to solidly bridge your product with your customers\' identities.\\n- Implement Multi-Factor Authentication (MFA) for enhanced security requirements.\\n- Introduce Dynamic Organizations, which unlocks much more business potential for your product while keeping all your customers\' identities in a single source of truth.\\n\\nIf you notice anything missing, please do not hesitate to reach out to us by sending an email or joining our Discord server.\\n\\nWe could not have made it this far without the support of our community. Although this is a meaningful milestone for Logto, we believe our journey is just beginning.\\n\\nBuilding an identity product is a serious task, so leave the headache to us. We hope you enjoy using Logto, and let\'s meet on the cloud!\\n\\nGao"},{"id":"/releases/2023-feb-extended","metadata":{"permalink":"/blog/releases/2023-feb-extended","source":"@site/blog/releases/2023-feb-extended.md","title":"Logto 2023 February Update (Extended)","description":"While Logto Cloud is still under construction, we would like to introduce some new features to our foundation, Logto OSS. This will be the last version before general availability.","date":"2023-02-26T00:00:00.000Z","tags":[{"label":"release","permalink":"/blog/tags/release"}],"readingTime":5.61,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"date":"2023-02-26T00:00:00.000Z","authors":"gao","tags":["release"]},"unlisted":false,"prevItem":{"title":"Announcing Logto Cloud (Preview) and OSS General Availability","permalink":"/blog/announcing-logto-cloud-preview"},"nextItem":{"title":"Do you need to build your own auth for apps?","permalink":"/blog/do-you-need-to-build-auth"}},"content":":::info\\nWhile Logto Cloud is still under construction, we would like to introduce some new features to our foundation, Logto OSS. This will be the last version before general availability.\\n:::\\n\\nNotable updates include:\\n\\n- Refactored infrastructure and enhanced security\\n- Smart Input and Customize CSS added to Sign-in Experience\\n- Open standard connectors (SAML, OIDC, and OAuth 2.0)\\n- New language support\\n\\nLet\'s take a look at what\'s inside!\\n\\n\x3c!-- truncate --\x3e\\n\\n## \ud83d\udca5 BREAKING CHANGES \ud83d\udca5\\n\\n### Decouple normal users and admins\\n\\nLogto was using a single port to serve both normal users and admins, as well as the web console. While we continuously maintain a high level of security, it\u2019ll still be great to decouple these components into two separate parts to keep data isolated and provide a flexible infrastructure.\\n\\n<img width=\\"737\\" alt=\\"image\\" src=\\"https://user-images.githubusercontent.com/14722250/221365507-6f20a804-1059-4933-9b88-df1244ab900b.png\\" />\\n\\nFrom this version, Logto now listens to two ports by default, one for normal users (`3001`), and one for admins (`3002`).\\n\\n<details>\\n<summary><b>\u203c\ufe0f Click to expand details</b></summary>\\n<p>\\n\\n- Nothing changed for normal users. No adaption is needed.\\n- For admin users:\\n  - The default Admin Console URL has been changed to `http://localhost:3002/console`.\\n  - To change the admin port, set the environment variable `ADMIN_PORT`. For instance, `ADMIN_PORT=3456`.\\n  - You can specify a custom endpoint for admins by setting the environment variable `ADMIN_ENDPOINT`. For example, `ADMIN_ENDPOINT=https://admin.your-domain.com`.\\n  - You can now completely disable admin endpoints by setting `ADMIN_DISABLE_LOCALHOST=1` and leaving `ADMIN_ENDPOINT` unset.\\n  - Admin Console and admin user data are not accessible via normal user endpoints, including `localhost` and `ENDPOINT` from the environment.\\n  - Admin Console no longer displays audit logs of admin users. However, these logs still exist in the database, and Logto still inserts admin user logs. There is just no convenient interface to inspect them.\\n  - Due to the data isolation, the numbers on the dashboard may slightly decrease (admins are excluded).\\n- Resource Indicator for Logto Management API changed from `https://[your-tenant-id].logto.app/api` to `https://default.logto.app/api`.\\n\\n</p>\\n</details>\\n\\nIf you are upgrading from a previous version, simply run the [database alteration command](https://docs.logto.io/docs/references/using-cli/database-alteration) as usual, and we\'ll take care of the rest.\\n\\n:::success ***DID YOU KNOW?***\\nUnder the hood, we use the powerful Postgres feature Row-Level Security to isolate admin and user data.\\n:::\\n\\n### CORS policy\\n\\n- If `ADMIN_ENDPOINT` is not specified, `localhost:[admin-port]` will be allowed to perform Cross-Origin Resource Sharing (CORS) in Logto.\\n- If `ADMIN_ENDPOINT` is specified, only requests from the origin of `ADMIN_ENDPOINT` will be allowed.\\n\\n## \ud83d\udd10 Security update\\n\\nIn previous versions, when registering or changing passwords, all new passwords were stored in plain text in the Audit Logs before being encrypted and inserted into the database.\\n\\nIn this version, we have updated the process to fully mask password fields before inserting them into the Audit Logs.\\n\\n:::caution\\nFor enhanced security and compliance, we strongly recommend removing all passwords from the Audit Logs or deleting all logs that include passwords.\\n:::\\n\\nIf you have any questions regarding this issue or the removal of data, please do not hesitate to contact us via email or Discord.\\n\\n## \ud83e\uddd1\u200d\ud83d\ude80 Feature update\\n\\n### \ud83d\udca1 Smart Input for Sign-in Experience\\n\\nWe have integrated the traditional input fields for username, phone number, and email into a single intelligent input box:\\n\\n<p>\\n<video src=\\"https://user-images.githubusercontent.com/14722250/221401902-cc9bcd91-160c-4058-91ce-1e8a7bdfc842.mov\\" />\\n</p>\\n\\nThis advanced input box automatically identifies the type of characters you\u2019re entering, such as an `@` sign or consecutive numbers, and provides relevant error feedback.\\n\\nBy streamlining the sign-in process, users no longer need to waste time figuring out which button to click to switch their desired login method. This reduces the risk of errors and ensures a smoother sign-in experience.\\n\\n### \ud83c\udfa8 Customize CSS in Sign-in Experience\\n\\nWe have put a lot of effort into improving the user sign-in experience and have provided a brand color option for the UI. However, we know that fine-tuning UI requirements can be unpredictable. While Logto is still exploring the best options for customization, we want to provide a programmatic method to unblock your development.\\n\\nYou can now use the Management API `PATCH /api/sign-in-exp` with body `{ \\"customCss\\": \\"arbitrary string\\" }` to set customized CSS for the sign-in experience. You should see the value of `customCss` attached after `<title>` of the page. If the style has a higher priority, it should be able to override.\\n\\nFor instance, if you want to give your sign-in page a feel of the ***Night City***, try this CSS:\\n\\n<details>\\n\\n<summary><b>Click to expand CSS and preview</b></summary>\\n\\n<p></p>\\n\\n```css\\n@font-face { font-family: \'Rock Salt\'; font-style: normal; font-weight: 400; font-display: swap; src: url(https://fonts.gstatic.com/s/rocksalt/v18/MwQ0bhv11fWD6QsAVOZrt0M6p7NGrQ.woff2) format(\'woff2\'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }\\n@font-face { font-family: \'Share Tech\'; font-style: normal; font-weight: 400; font-display: swap; src: url(https://fonts.gstatic.com/s/sharetech/v17/7cHtv4Uyi5K0OeZ7bohU8H0JmBUhfrE.woff2) format(\'woff2\'); unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD; }\\n#app * { font-family: \'Share Tech\'; letter-spacing: 0.5px; }\\n#app > div[class$=viewBox] { background-image: url(https://silverhand.io/assets/v-in-nc.jpg); background-size: cover; }\\n#app main[class$=main] { background-image: url(https://silverhand.io/assets/gentle-universe.png); background-size: cover; opacity: 0.98; min-height: initial; padding: 24px; padding-bottom: 72px; border-radius: 12px; }\\n#app main[class$=main] img[class$=logo] { content: url(https://silverhand.io/assets/cyberpunk-2077.png); margin: -20px 0 -12px; height: 160px; }\\n#app main[class$=main] div[class$=headline] { visibility: hidden; height: 60px; }\\n#app main[class$=main] div[class$=headline]:before { content: \'Welcome to Night City\'; visibility: visible; display: block; font-family: \'Rock Salt\'; font-style: italic; line-height: 60px; font-size: 20px; color: rgba(245,250,255,0.6); padding: 0 20px; }\\n#app form div[class$=inputField] > div { outline: none; border: none; border-radius: 4px; }\\n#app form div[class$=inputField] > div > input, #app form div[class$=inputField] div[class$=countryCodeSelector] { background: initial; background-color: #453f67; font-family: \'Share Tech\'; letter-spacing: 0.5px; font-size: 16px; font-weight: 600; }\\n#app button { font-weight: 600; font-size: 16px; border-radius: 4px; }\\n#app button[type=submit] { background: linear-gradient(270.84deg, #2FD6FB -24.55%, #6369FC 44.33%, #A741EB 119.2%), #5D34F2; }\\n```\\n\\n![custom-css-preview](https://user-images.githubusercontent.com/14722250/221394786-4ae77638-8f35-4791-afae-8ab6a314dbf8.jpg)\\n\\n*\\"We have a city to burn!\\"*\\n\\n</details>\\n\\n:::note\\nSince Logto uses CSS Modules, you may see a hash value in the `class` property of DOM elements (e.g. a `<div>` with `vUugRG_container`).\\n\\nTo override these, you can use the `$=` CSS selector to match elements that end with a specified value. In this case, it should be `div[class$=container]`.\\n:::\\n\\n### \ud83d\udd17 Open standard connectors with better config interface\\n\\nLogto now supports standard protocols (SAML, OIDC, and OAuth 2.0) for creating social connectors to integrate external identity providers. Each protocol can create multiple social connectors, giving you more control over your access needs.\\n\\nPlus, we optimized the config interface for SAML connectors. Try it and let us know your feeling!\\n\\n### \ud83d\udcc4 New language\\n\\nAdded Russian translation. (credit [@evist0](https://github.com/evist0))\\n\\n## \ud83c\udf89 New Contributors\\n\\n* [@Alanimdeo](https://github.com/Alanimdeo) made their first contribution in [#3064](https://github.com/logto-io/logto/pull/3064)\\n* [@gadkins](https://github.com/gadkins) made their first contribution in [#3032](https://github.com/logto-io/logto/pull/3032)\\n* [@evist0](https://github.com/evist0) made their first contribution in [#3158](https://github.com/logto-io/logto/pull/3158)\\n* [@muratgozel](https://github.com/muratgozel) made their first contribution in [#3203](https://github.com/logto-io/logto/pull/3203)\\n\\nThank you!"},{"id":"do-you-need-to-build-auth","metadata":{"permalink":"/blog/do-you-need-to-build-auth","source":"@site/blog/2023-02-16-do-you-need-to-build-auth/index.md","title":"Do you need to build your own auth for apps?","description":"Although article is inspired from personal dev experience and I tried my best to keep things objective, it\'s still non-negligible that I\'m one of the creators of Logto (an auth product).","date":"2023-02-16T00:00:00.000Z","tags":[{"label":"auth","permalink":"/blog/tags/auth"},{"label":"dev","permalink":"/blog/tags/dev"},{"label":"authentication","permalink":"/blog/tags/authentication"},{"label":"authorization","permalink":"/blog/tags/authorization"}],"readingTime":6.18,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"do-you-need-to-build-auth","authors":"gao","tags":["auth","dev","authentication","authorization"]},"unlisted":false,"prevItem":{"title":"Logto 2023 February Update (Extended)","permalink":"/blog/releases/2023-feb-extended"},"nextItem":{"title":"CIAM 102: Authorization & Role-based Access Control","permalink":"/blog/ciam-102-authz-and-rbac"}},"content":":::note Prologue\\nAlthough article is inspired from personal dev experience and I tried my best to keep things objective, it\'s still non-negligible that I\'m one of the creators of Logto (an auth product).\\n\\nI would like to point out this first for a better reading experience.\\n:::\\n\\nI\u2019ve seen a lot of developers asking questions like \u201cShould I build my own auth for my app?\u201d. While the answer cannot be a simple \\"Yes\\" or \\"No\\", I\u2019d like to write an article to breakdown the implementation and demonstrate the pros and cons to help you decide.\\n\\n\x3c!--truncate--\x3e\\n\\n> **TL;DR** If you\'re still learning, auth will be a good challenge. If you want full control, it\'s worth building your own auth system. Otherwise, it\'s necessary to find an existing solution that fits your needs.\\n\\n## Intro\\n\\nAs a developer, I have built many applications during my career. Regardless of the programming language, there is a common foundation I always need to construct: user auth.\\n\\nIt was a negligible part since everything was straightforward going back to 20 years ago:\\n\\n- Implement a registration and sign-in system with username and password.\\n- Create a mechanism to maintain a user\'s session.\\n- About security? MD5 is the answer.\\n\\nThat\u2019s it. Then I could focus on \u201cthe real business\u201d. Didn\'t hear about MD5? You missed out on the \\"good times\\" of software development. Nowadays, developers face more challenges when building sign-in/up.\\n\\nIt sounds alarmist, but let me go through with an example.\\n\\n## Example: An online bookstore\\n\\nLet\u2019s say you are trying to build an online bookstore with an API service and a web frontend app.\\n\\nFirst, the scope of \u201cauth\u201d should be defined. Auth can be explained as authentication and authorization, and they have totally different definitions and use cases:\\n\\n:::note \ud83e\udd14 About Auth\\n- Authentication (AuthN) answers the question \u201cWhich identity do you own?\u201d\\n- Authorization (AuthZ) answers the question \u201cWhat can you do?\u201d\\n:::\\n\\nI wrote an article [CIAM 101: Authentication, Identity, SSO](../2022-11-28-ciam-101-authn-identity-sso/index.mdx) to discuss these concepts in detail.\\n\\n### Choose authentication methods\\n\\nLet\u2019s start with \u201cauthentication\u201d, which is user sign-in in our example. Besides the username-and-password method, here are some trending methods people are adopting for a better user conversion and security:\\n\\n- Passwordless, i.e. dynamic verification code (via email or sms)\\n- Social sign-in (Google, Facebook, etc.)\\n\\nThe choice of method depends on the business decision, while we can take a look on the tech effort:\\n\\n- For passwordless, you need to find a vendor to send verification codes via email or sms; then integrate with your API service (new APIs may needed).\\n- For social sign-in, you must adhere to the integration guidelines of the social identity provider(s) you wish to use. Additionally, you must create a mapping between your bookstore\'s user IDs and the identity provider\'s.\\n  - For example, when a user signs in with a Gmail account `foo@gmail.com`, you can link this email address to the user `foo` in the bookstore. This process helps you to build a unified identity system and allows the user to modify or unlink their social identity in the future.\\n\\n### Design and implement sign-in experience\\n\\nAfter you decide authentication methods, a graceful and smooth sign-in experience for your end-users is the next target. The conversion here is fundamental but crucial to the business since it\'s a natural way to leave the persisted customer data.\\n\\nWhen I was working for Airbnb, there was a whole team dedicated to optimize the sign-in experience for multiple platforms. They conducted numerous A/B tests to determine which combination had the highest conversion rate.\\n\\nIt\u2019s not practical to do so when a business is getting started. But we still need to try our best to make every piece right. Which platforms would you like to run the bookstore? You may start with mobile, web, or both. The exact design will depend on the authentication methods you choose:\\n\\n- Username and password: The easiest one, just several input boxes and buttons.\\n- Passwordless: Enter phone / email, then send and verify a dynamic code.\\n- Social sign-in: Read the docs from the chosen social identity provider, follow the visual guideline, handle the redirect logic, and finally link the social identity with the bookstore identity.\\n\\nMore things to consider to make it better:\\n\\n- Do you need to combine the sign-in and registration process for a specific method?\\n- Do you need a \u201cforgot password\u201d flow to allow customers to reset their passwords independently?\\n\\nIf you opt for native development, the workload will almost double for one additional platform.\\n\\n### Security and token exchange\\n\\nSecurity can be a hidden iceberg. It\u2019ll be great if you are familiar with OpenID Connect or OAuth 2.0, since they are widely used and battle-tested. OpenID Connect is relatively new but is designed for \u201cuser authentication\u201d, which is a great fit for an online bookstore.\\n\\nWithout delving into the details of the standards, there are still some things to consider:\\n\\n- Which encryption method should be used for passwords?\\n- What is the process for standard authentication and authorization?\\n- How does token exchange work (Access Token, Refresh Token, ID Token, etc.)?\\n- How can signing keys be used in tokens and how can the signature be validated to protect resources?\\n- How can client and server attacks be prevented?\\n\\nFinally, you can land a good sign-in experience and deliver it to your customers.\\n\\n### Authorization model\\n\\nAs a bookstore, you need to separate resources for customers and sellers. For example, customers can browse all books, while sellers can manage their on-sale books. It\'s OK to start with simple if-else checks; however, as the business grows, you may need to leverage a more flexible model such as Role-based Access Control (RBAC) or Attribute-based Access Control (ABAC).\\n\\nI also wrote an article [CIAM 102: Authorization & Role-based Access Control](../2023-02-05-ciam-102-authz-and-rbac/index.md) to demonstrate basic authorization concepts and the RBAC model.\\n\\n## Make the decision\\n\\nYou can see auth is not an \u201call or nothing\u201d problem, since it involves multiple technical components and you or your team may have different tech expertise in these areas. It\'s important to break it down into smaller parts to gain a better understanding of the status quo.\\n\\nTo make the decision, I\'ll ask myself the following questions:\\n\\n- How urgent is the project?\\n- How much effort do I expect to put into auth versus the business?\\n- What\u2019s the priority of user experience, security, and maintainability?\\n- Which part(s) do I need full control of? How familiar should I become with them?\\n- If I go with some frameworks / solutions, are they good enough for customization or extension?\\n- If the business grows, will I need to introduce a new authentication model?\\n- If I find a suitable vendor, is it safe enough to use? Do I need a withdrawal plan if anything happens to the vendor?\\n\\n:::info\\nOn the other hand, if you\'re still learning or honing your programming skills, auth can be a great stepping stone on the path to becoming a full-stack developer. It covers almost all components needed for an app.\\n:::\\n\\nWith the questions in mind, I discovered two facts:\\n\\n- Crafting a reliable authentication system is highly complex.\\n- Existing vendors cannot meet all the necessary criteria.\\n\\nSo I decided to start a dedicated project (Logto) for auth, and embrace the open-source community from day one.\\n\\nHope this article helps."},{"id":"ciam-102-authz-and-rbac","metadata":{"permalink":"/blog/ciam-102-authz-and-rbac","source":"@site/blog/2023-02-05-ciam-102-authz-and-rbac/index.md","title":"CIAM 102: Authorization & Role-based Access Control","description":"Background","date":"2023-02-05T00:00:00.000Z","tags":[{"label":"ciam","permalink":"/blog/tags/ciam"},{"label":"auth","permalink":"/blog/tags/auth"},{"label":"authorization","permalink":"/blog/tags/authorization"}],"readingTime":5.925,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"ciam-102-authz-and-rbac","authors":"gao","tags":["ciam","auth","authorization"]},"unlisted":false,"prevItem":{"title":"Do you need to build your own auth for apps?","permalink":"/blog/do-you-need-to-build-auth"},"nextItem":{"title":"Logto 2023 February Update","permalink":"/blog/releases/2023-feb"}},"content":"## Background\\n\\nIn the [previous article](../2022-11-28-ciam-101-authn-identity-sso/index.mdx), we introduced the concept of authentication (AuthN) and authorization (AuthZ), along with some headachy terms: Identity, Organization, Tenant, etc.\\n\\nOrganization and Tenant are great for grouping Identities, but they lead to an absolute democracy: everyone can do anything in this system. While utopia is still a mystery, let\u2019s take a look at the governance of access: Authorization (AuthZ).\\n\\n\x3c!--truncate--\x3e\\n\\n### Why do we need authorization?\\n\\n:::info Recall\\nAuthorization (AuthZ) answers the question \u201cWhat can you do?\u201d\\n:::\\n\\nNotion is a great example. For each page you own, you can choose to keep it private, accessible only to you, or share it with friends, or even the public.\\n\\nOr, for an online bookstore, you want everyone to be able to view all books, but customers to only view their own orders, and sellers to manage only the books in their stores.\\n\\nAuthZ and AuthN are essential components of a complex business model. They often go hand-in-hand; AuthZ verifies a user\'s access, while AuthN authenticates identities. Both are necessary for a secure system.\\n\\n## The basic authorization model\\n\\nHere\u2019s one of the most common AuthZ models: If **IDENTITY** performs **ACTION** on **RESOURCE**, then **ACCEPT** or **DENY**.\\n\\nIn the Notion example, the model is **PERSON** performs **VIEW** on **PAGE.**\\n\\nIf the page is private:\\n\\n- You\u2019ll receive **ACCEPT** when performing **VIEW** on your **PAGE**.\\n- Everyone else should receive **DENY** when performing **VIEW** on your **PAGE**.\\n\\nBased on consensus, the industry developed various authorization technologies, such as Role-based Access Control (RBAC), Attribute-based Access Control (ABAC). Today, we will focus on the [NIST RBAC model](https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf) Level 1: Flat RBAC.\\n\\n## Role-based Access Control\\n\\n:::info\\nThe NIST RBAC model left many things open to provide flexibility and adaptability for various scenarios. Logto now adopts the Level 1 definition with an additional concept \\"Resource\\" (i.e. API Resource).\\n:::\\n\\nLet\'s extend the bookstore example. Say we have many customers, but only one seller:\\n\\n- Customers can view and order books, as well as view their own orders.\\n- The seller can view, create, and delete books, and manage customer orders.\\n\\n### Define resources\\n\\nIn Logto, a resource (i.e. API Resource) usually represents a set of entities or items, since it\u2019s required to use a valid URL as the indicator. Hence we define two resources:\\n\\n- Books: `https://api.bookstore.io/books`\\n- Orders: `https://api.bookstore.io/orders`\\n\\nOne of the advantages of enforcing the URL format is it can map to a real address of your API service, which improves the readability and recognizability when integrating with other components in the system.\\n\\n:::note\\n\ud83e\udd14 Resources should be divided according to the needs of the business. There is no one-size-fits-all approach; the decision should be made on a case-by-case basis. The example in this article that divides Books and Orders may be suitable for microservices, but not for a monolithic architecture.\\n:::\\n\\n### Define permissions\\n\\nSince we introduced the concept of resource, in Logto, we also enforce that permissions must belong to a resource, in reverse, resources can have permissions.\\n\\nLet\u2019s add some permissions the the resources:\\n\\n- Books: `read`, `create`, `delete`\\n- Orders: `read`, `read:self`, `create:self`, `delete`\\n\\nAlthough there\u2019s no requirement of the name of a permission, we have the convention as below:\\n\\n```\\n<action>[:<target>]\\n```\\n\\nWhile `<action>` is required to describe a permission, `:<target>` can be ignored to describe a general target, i.e. to all entities or items in the resource. For example:\\n\\n- Permission `read` in resource Books means the action to read arbitrary books.\\n- Permission `create:self` in resource Orders means the action to create orders that belong to the current user.\\n\\n### Define roles\\n\\nIn short, a role is a group of permissions. Let\u2019s create two roles `customer` and `seller` and assign permissions to them as below:\\n\\n```mermaid\\nerDiagram\\n\\t\\"Role: customer\\" {\\n\\t\\tpermission Books \\"read\\"\\n\\t\\tpermission Orders \\"read:self\\"\\n\\t\\tpermission Orders \\"create:self\\"\\n\\t}\\n\\n\\t\\"Role: seller\\" {\\n\\t\\tpermission Books \\"read\\"\\n\\t\\tpermission Books \\"create\\"\\n\\t\\tpermission Books \\"delete\\"\\n\\t\\tpermission Orders \\"read\\"\\n\\t\\tpermission Orders \\"delete\\"\\n\\t}\\n\\n```\\n\\nYou may notice the permission-role assignment is many-to-many relations.\\n\\n### Assign roles to users\\n\\nJust like role-permission assignment, user-role assignment is also a many-to-many relationship. Therefore, you can assign multiple roles to a single user, and a single role can be assigned to multiple users.\\n\\n### Connect to dots\\n\\nHere\u2019s a complete relationship diagram for the Level 1 RBAC model in Logto:\\n\\n```mermaid\\nerDiagram\\n\\tUser }|--|{ Role : maps\\n\\tRole }|--|{ Permission : maps\\n\\t\\"API Resource\\" ||--|{ Permission : contains\\n```\\n\\nIn the RBAC model, permissions are always \\"positive\\", meaning the authorization judgement is simple: if a user has the permission, then accept; otherwise, reject.\\n\\nLet\'s say Alice has the role `seller`, Bob and Carol have the role `customer`. We\'ll describe actions in natural language first, and transpile them to the standard authorization format: **IDENTITY** performs **ACTION** on **RESOURCE**, finally giving the conclusion.\\n\\n- Alice wants to add a new book for sale:\\n  - User Alice performs `create` on resource Books (`https://api.bookstore.io/books`).\\n  - Since Alice has been assigned the permission `create` of Books according to their role `seller`, the result is \u2705 **ACCEPT**.\\n- Alice wants to view all orders to see if the sale meets their expectation:\\n  - User Alice performs `read` on resource Orders (`https://api.bookstore.io/orders`).\\n  - Since Alice has been assigned the permission `read` of Orders according to their role `seller`, the result is \u2705 **ACCEPT**.\\n- Bob wants to browse the book list to see if there\u2019s any books they want to purchase.\\n  - User Bob performs `read` on resource Books (`https://api.bookstore.io/books`).\\n  - Since Bob has been assigned the permission `read` of Books according to their role `cusomter`, the result is \u2705 **ACCEPT**.\\n- Bob wants to view Carol\u2019s order.\\n  - Since it\u2019s someone else\u2019s order, the permission `read:self` of `Orders` does not work here.\\n  - User Bob performs `read` on resource Orders (`https://api.bookstore.io/order`).\\n  - Since Bob has no permission `read` of Orders, the result is \u274c **DENY**.\\n\\n### Other RBAC levels\\n\\nThere are four levels in the NIST RBAC model:\\n\\n- Flat RBAC\\n- Hierarchical RBAC\\n- Constrained RBAC\\n- Symmetric RBAC\\n\\nSee the [paper](https://csrc.nist.gov/CSRC/media/Publications/conference-paper/2000/07/26/the-nist-model-for-role-based-access-control-towards-a-unified-/documents/sandhu-ferraiolo-kuhn-00.pdf) for details if you are interested.\\n\\nLogto now has the Level 1 implementation and will progress to higher levels based on community feedback. Don\u2019t hesitate to let us know if a higher level fits your need!\\n\\n## In practice\\n\\nBeside the theory, we still have heavy technical works to complete in order to make the model work as expected:\\n\\n- Client and auth server development\\n- Database design for RBAC\\n- Validation across different services\\n- Security and open-standard compliance\\n- Role, permission, resource management and assignment\\n\\nDon\u2019t panic. We\'ve taken this into account and added out-of-the-box support to cover all of the above. Check out the [\ud83d\udd10 RBAC recipe](/docs/recipes/rbac/) to learn how to use RBAC in Logto.\\n\\n## Closing notes\\n\\nRBAC is a powerful access management model for most cases, but there\u2019s no silver bullet. We still have some questions:\\n\\n- Do I need high levels of RBAC?\\n- How does RBAC compare to other authorization models?\\n- How to define authorization model between different Organizations?\\n\\n:::note\\n\ud83d\udd25 Stay tuned. We\u2019ll see you in CIAM 103!\\n:::"},{"id":"/releases/2023-feb","metadata":{"permalink":"/blog/releases/2023-feb","source":"@site/blog/releases/2023-feb.md","title":"Logto 2023 February Update","description":"Please welcome our first release candidate! Logto is just a few steps away from general availability.","date":"2023-02-02T00:00:00.000Z","tags":[{"label":"release","permalink":"/blog/tags/release"}],"readingTime":2.62,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"date":"2023-02-02T00:00:00.000Z","authors":"gao","tags":["release"]},"unlisted":false,"prevItem":{"title":"CIAM 102: Authorization & Role-based Access Control","permalink":"/blog/ciam-102-authz-and-rbac"},"nextItem":{"title":"Logto 2023 New Year Update","permalink":"/blog/releases/2023-jan"}},"content":":::note\\nPlease welcome our first release candidate! Logto is just a few steps away from general availability.\\n:::\\n\\n\x3c!-- truncate --\x3e\\n\\n## \ud83d\udca5 Breaking changes \ud83d\udca5\\n\\n- core: remove `GET /settings` and `PATCH /settings` API\\n- core: add `GET /configs/admin-console` and `PATCH /configs/admin-console` API\\n  - `/configs/*` APIs are config/key-specific now. they may have different logic per key.\\n- core: officially remove all deprecated `/session` APIs\\n- core: use HTTP/2 to serve TLS (HTTPS) connections\\n- cli: change valid `logto db config` keys by removing `alterationState` and adding `adminConsole` since:\\n  - OIDC configs and admin console configs are tenant-level configs (the concept of \\"tenant\\" can be ignored until we officially announce it)\\n  - alteration state is still a system-wide config\\n- for admin access of machine-to-machine applications, now it\'s required to add scope `all` for client configs to fetch proper Access Token\\n  - see [\ud83d\ude9d Interact with Management API](https://docs.logto.io/docs/recipes/interact-with-management-api/) for details\\n\\n## \ud83d\udd12 Role-based access control\\n\\nWe are excited to introduce our latest addition to our product, Role-based access control (RBAC). This powerful feature gives administrators the ability to assign specific roles and permissions to users, ensuring they only have access to the resources and functions they need to do their job.\\n\\nWith RBAC, administrators can:\\n\\n- Define permissions across APIs\\n- Create custom roles with specific permissions\\n- Assign roles to users and manage their roles\\n- Easily manage and update permissions\\n- Securely validate permissions to protect APIs\\n\\nLogto takes a major step forward in security and control with easy access management and authorization of sensitive info, ensuring only authorized users have the right to access. This aligns with our vision to provide an open-source identity solution with features for authentication and authorization, and packed with all the features you need.\\n\\n:::note\\nIf you are using Logto SDKs, please upgrade to the latest version to take advantage of RBAC.\\n:::\\n\\nCheck out our [RBAC recipe](https://docs.logto.io/docs/recipes/rbac/) for a step-by-step guide. Give it a try and let us know what you think!\\n\\n## \ud83c\udfc4 Streamlined social sign-in flow\\n\\n\ud83d\udca1 Logto now detects a trusted email (or phone number) from the social account during social sign-in.\\n\\n- If the email (or phone number) has been registered: Automatically connect the social identity to the existing user account with a single click.\\n- If the email (or phone number) is not registered: Automatically sync the user profile with the social-provided email (or phone number) if and only if it is marked as a required user profile.\\n\\n## \ud83d\udd22 Send and verify verification codes via Management API\\n\\nThe new Management APIs allow you to reuse connectors to dynamically send and verify verification codes for various purposes, such as validating identity before a user updates their profile or performs a dangerous action.\\n\\n- Call `/api/verification-code` to send verification code to a given email or phone\\n- Call `/api/verification-code/verify` to verify the code against a given email or phone\\n\\n## \u21a9\ufe0f Rollback database alteration state\\n\\nIn case of any issues with the database, you can now use the `logto db alteration rollback [target]` command to roll back all database schemas to a previous version, for example `logto db alteration rollback v1.0.0-beta.19`."},{"id":"/releases/2023-jan","metadata":{"permalink":"/blog/releases/2023-jan","source":"@site/blog/releases/2023-jan.md","title":"Logto 2023 New Year Update","description":"\ud83d\ude4b Hey folks!","date":"2023-01-01T00:00:00.000Z","tags":[{"label":"release","permalink":"/blog/tags/release"}],"readingTime":3.295,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"date":"2023-01-01T00:00:00.000Z","authors":"gao","tags":["release"]},"unlisted":false,"prevItem":{"title":"Logto 2023 February Update","permalink":"/blog/releases/2023-feb"},"nextItem":{"title":"The design considerations for a seamless sign-in experience (Second Chapter)","permalink":"/blog/design-for-seamless-sie-2"}},"content":"\ud83d\ude4b Hey folks!\\n\\nFor the first day of 2023, we shipped a few things for everybody:\\n\\n- Web hooks, Advanced search API, New connectors\\n- Admin console enhancement, Refactored Interaction APIs and Audit logs\\n- New blog posts\\n\\n:::note\\nWe are currently busy working on the general availability version which includes User profile, RBAC (Role-based access control), and much more!\\n:::\\n\\n\x3c!-- truncate --\x3e\\n\\n## \ud83d\udca5 Breaking change \ud83d\udca5\\n\\nIf you want to perform the original fuzzy user search via Management API, adding `%` around the keyword is required. E.g.:\\n\\nOriginal: `GET /users?search=foo`\\nNow: `GET /users?search=%foo%`\\n\\n## Migration\\n\\nIf you are upgrading from an older version of logto, make sure to go through our [Database alteration](https://docs.logto.io/docs/references/using-cli/database-alteration) tutorial.\\n\\n## Feature updates\\n\\n### \ud83e\ude9d Web hooks\\n\\nWith hooks, Logto can enable the next-level extensibility for you to interact with other services in an event-based manner. E.g., do some async jobs after a new user registered.\\n\\nWe support three events in this version: `PostRegister`, `PostSignIn` and `PostResetPassword`. Check out [\ud83e\ude9d Web hooks](https://docs.logto.io/docs/recipes/webhooks/) for the concept explained and detailed usage.\\n\\n### \u2699\ufe0f Advanced search API\\n\\nManagement API is a programmatic way to communicate with Logto. We redesigned the user search API to make it powerful for advanced search requests.\\n\\nNow you can designate one or multiple search fields as well as the match mode. For example, you can search users that:\\n\\n- Name starts with \u201cAlice\u201d, case-sensitive; or\\n- Email includes \u201cAlice\u201d, case-insensitive.\\n\\nExact search is also supported, e.g., search users that name is exactly \u201cJohn Wick\u201d. See [Advanced user search](https://docs.logto.io/docs/recipes/interact-with-management-api/advanced-user-search) for details.\\n\\n### \ud83d\udd17 Connectors\\n\\nLogto is built on open standards, and we believe they can eliminate enormous gaps in software development. From this version, Logto supports creating multiple connectors based on the same open standard: **OAuth 2.0** or **OpenID Connect**; We call them \u201cstandard connectors\u201d.\\n\\nWe are developing more standard connectors like SAML and LDAP. Feel free to let us know your needs!\\n\\nBesides, we\u2019d like to highlight our community contributors:\\n\\n- [@kentio](https://github.com/kentio) contributed AWS SES connector\\n- [@StringKe](https://github.com/StringKe) contributed Tencent SMS and Feishu (Lark) connector\\n\\nThank you!\\n\\n## Enhancement\\n\\n### \ud83d\udcbb Admin Console enhancement to streamline the set up process\\n\\n:::info\\nWe revisited the Logto admin console UI and give it a fresh look! The goal of this is to make the admin console more intuitive and aesthetically pleasing, which ends up helping developers more efficiently perform the tasks.\\n:::\\n\\nNow you can feel the following enhancement as follows:\\n\\n- **Responsive design improvement** We optimized responsive design to ensure that the interface looks great on different screen sizes.\\n- **Simplification of the layout** We have streamlined the layout of the interface, organizing the content in a more logical and intuitive way. This makes it easier for our developers to navigate the interface and find what they are looking for.\\n- **Fixed the non-intuitive interaction behaviors** we changed the saving interaction and make it a section-level behavior, which avoiding seeing too many double check alerts. We wish to provide a more secure developer experience when making configuration.\\n\\nPlease check it out and explore, and let us know how you feel! \ud83d\ude09\\n\\n### \ud83e\uddd1\u200d\ud83d\ude80 Refactored Interaction APIs and Audit logs\\n\\nDue to the increased flexibility and complexity of Sign-in experience, and to provide even more auditable and structured logs for user interactions, we decided to refactor our Interaction APIs with the logging mechanism; The original session APIs are deprecated from now.\\n\\n:::note\\nThis API change does not affect the end-user Sign-in experience.\\n:::\\n\\nAudit logs become fine-categorized by the new key definitions, and payloads are optimized for behavior tracing. Check out the \u201cAudit logs\u201d tab in Admin console to feel the change.\\n\\n## Blog posts\\n\\n- [The design considerations for a seamless sign-in experience (Second Chapter)](https://silverhand.substack.com/p/the-design-considerations-for-a-seamless-2d4?utm_source=github-release) Learn more about our design thinking and decision making philosophies\\n- [Migrate a 60k LOC TypeScript (NodeJS) repo to ESM and testing become 4x faster](https://dev.to/gaosun/series/21132?utm_source=github-release) A practical series of our engineering efforts on module system migration"},{"id":"design-for-seamless-sie-2","metadata":{"permalink":"/blog/design-for-seamless-sie-2","source":"@site/blog/2022-12-05-design-for-seamless-sie-2/index.md","title":"The design considerations for a seamless sign-in experience (Second Chapter)","description":"In the previous piece, we discussed the development of the Sign-in Experience, and what makes a positive end-user encounter, and we ended on some thought-provoking topics.","date":"2022-12-05T00:00:00.000Z","tags":[{"label":"design","permalink":"/blog/tags/design"},{"label":"sign-in","permalink":"/blog/tags/sign-in"},{"label":"ux","permalink":"/blog/tags/ux"}],"readingTime":6.42,"hasTruncateMarker":true,"authors":[{"name":"Guamian","title":"Product & Design at Silverhand","url":"https://github.com/fleuraly","imageURL":"https://github.com/fleuraly.png","key":"guamian"},{"name":"Ran","title":"Product & Design at Silverhand","url":"https://github.com/Rany0101","imageURL":"https://github.com/Rany0101.png","key":"rany"}],"frontMatter":{"slug":"design-for-seamless-sie-2","authors":["guamian","rany"],"tags":["design","sign-in","ux"]},"unlisted":false,"prevItem":{"title":"Logto 2023 New Year Update","permalink":"/blog/releases/2023-jan"},"nextItem":{"title":"CIAM 101: Authentication, Identity, SSO","permalink":"/blog/ciam-101-intro-authn-sso"}},"content":"In the previous piece, we discussed the development of the Sign-in Experience, and what makes a positive end-user encounter, and we ended on some thought-provoking topics.\\n\\n1. How can I do this with as little effort as possible using the Logto Admin Console?\\n2. When compared to currently available market solutions, how does Logto\u2019s configuration experience stand out? Curious to understand why this is the best choice for my business.\\n3. From a business perspective, how can sign-up be evaluated?\\n4. What does Logto have in store for future service and product development?\\n\\nIn this article, we\'ll answer these questions and show you how the Logto Admin Console can help.\\n\\n\x3c!--truncate--\x3e\\n\\n## Make Admin Console thoughtful and educational\\n\\nThe permutation and combination of identifier, Authentication Factor, Connector, and Personal information is a complex interaction design question. It\u2019s very ambitious and there are lots of directions we can go. We listed them out, evaluated them and made the decision with the aligned trade-off on our team.\\n\\nTo enable the sign-in and sign-up, there are three high-level directions we explored.\\n\\n![Table](table-1.jpg)\\n\\nA sign-in experience is never complete without the Admin Console. We never lose sight of the fact that the Admin Console exists to support the experience we have suggested, and not the other way around. Many of the solutions out there that let users choose their own sign-in and sign-up processes end up making things more complicated for our developers and lowering the quality of the experience for end users because they don\'t cater for actual use cases.\\n\\nIn the end, we picked direction 3.\\n\\n- There are far too many illogical outcomes when following Option 1.\\n- The second direction is not consistent with the principle of progressive disclosure. The amount of mental effort required is excessive, and there is no way to make it more scalable in the future.\\n\\nFirst, we\'ll look at our sample of the Admin Console and run through the two most common use cases. You may learn more about how we make it possible with a robust tool like this.\\n\\nThe first scenario:\\n\\n- _Sign up: Email with a password and verify email at sign up._\\n- _Sign in: Email with a password, Social account_\\n\\n![demo](demo-1.gif)\\n\\nThe second scenario:\\n\\n- _Sign up: Email or Phone number with a password and verify at sign up._\\n- _Sign in: Email or Phone number with a password, Social accounts._\\n\\n![demo](demo-2.gif)\\n\\nWe have three guiding principles that we stick to as a group to ensure success.\\n\\n### Optimal balance between adaptability and solving real use cases\\n\\nIn order to accommodate the vast majority of use cases, we strive to provide consumers with as much customization as possible. However, we must be strict about any identifier combination that makes no sense to real users as those can have a negative effect on business.\\n\\n#### Flexibility\\n\\nAs previously stated, we divided the Sign-in Experience into four categories: \\"Identifier, Authentication Factor, Social Connector, and Personal Information.\u201d\\n\\n:::info\\nThe most significant change in Sign-in Experience V2 is the establishment of a flexible and scalable framework to support more scenarios in the long run.\\n:::\\n\\nThis framework allows developers to combine and categorize components based on their choices. Here\'s how we prioritize features and put them on the roadmap.\\n\\n##### Sign-up identifier\\n\\n![Sign-up identifier](sign-up-identifier.jpg)\\n\\n##### Authentication factors\\n\\n![Authentication factors](auth-factors.jpg)\\n\\n##### Social connector\\n\\n![Social connector](social-connector.jpg)\\n\\n##### Personal information\\n\\nWe currently do not have a profile page that users can modify and update on their own. This, on the other hand, is on our priority list and will be ready before the end of the year. Following this implementation, the entire sign-in experience can be integrated as a whole.\\n\\n#### Be true to real use cases\\n\\nHowever, based on the permutations and combinations, there are numerous possibilities, many of which make no sense at all. We must make trade-offs and implement features gradually so as not to overwhelm users in the first place. In v2, for example, we only defined four options as sign-up identifiers because these are the most common scenarios, covering 90%+ of the market.\\n\\nAnother example is that for nonsensical use cases, we disable them and use tooltips to explain why. The rules discussed in the previous article are then applied.\\n\\n> **Restrictions between Sign-in, Registration and Authentication Factor, for example:**\\n>\\n> - _If password is chosen as an authentication factor, sign-in should support it as well, and all other identifiers must as well. We don\'t want users to do meaningless work or disregard their security intentions when registering. The fact that a password is required for sign-up with a username but not for email or phone password sign-in makes no sense and confuses the user._\\n> - _If users enabled multiple identifiers during sign-in, such as email or phone number, both of those identifiers must be available for sign-in. For example, if a person signs up using their email address but only signs in with their support phone number, they will be unable to use the product in the end._\\n> - _If the sole identifier used during registration is the username, a password is required. This is owing to the limitations and characteristics of using a username as an identifier._\\n\\n![Restrictions](restrictions.png)\\n\\n### Beginning with developer mindsets, bring clarity to complexity\\n\\nThe setup is intended to assist users in creating successful sign-in and sign-up processes. When building up their Sign-in Experience, we illustrate the broad reasoning behind the scenes and assist people in learning and growing. I\'ll give you two instances.\\n\\n#### Thoughtful educational content\\n\\nIn order to be clear. We utilized a brief and plain description to help customers understand what each setting means and to address any questions they may have.\\n\\n![Educational content](educational-content.png)\\n\\n#### A synopsis to provide clarity\\n\\nAnother example - Developers reconfiguring and updating the Sign-in Experience settings can be a difficult and risky process because it will affect your end users\' engagement. Before saving a modification, we show the user a change summary. Our engineers are familiar with the before vs. after mindset, and it has brought a lot of clarity to complexity.\\n\\n![Synopsis](synopsis.png)\\n\\n### Make ability to scale, consider Day 0, and plan for iteration\\n\\nWe don\'t want to piss off our users with another massive redesign in the future, thus we need to make sure that the product design is scalable. We also think about the steps we would take to support future versions, such as Multi-Factor Authentication (MFA), Magic Link, completing a user\'s profile (including name, gender, email address, and password), and supporting future versions.\\n\\nHere is a view about the future version with how we support `Unverified email` , `MFA`, `Magic Link`, and `Profile fulfill`.\\n\\n![Future version](future-version.png)\\n\\n## From a business perspective, how can sign-up be evaluated?\\n\\nWe accelerated the sign-up and sign-in processes and increased user acquisition by adhering to the ideas of \\"minimum steps,\\" \\"helping users succeed,\\" and \\"limited consumer options\\" when designing the best practice of sign-in flow. Additionally, the [Dashboard] and [Audit Log] are excellent resources for learning about the sign-up and login patterns of users and the general health of the app.\\n\\n## The future\\n\\nThe Logto Sign-in Experience V2 and its development process are now clear to you. Now is the moment to experiment and speed up the development of your product. We are also putting up V3 suggestions. To give you a taste of the available options, here is a preview,\\n\\n1. Share our polished design components in Figma source file\\n2. Support multi-factor authentication\\n3. Support magic links\\n4. Visualize the end-to-end flow when building the Sign-in Experience and better for business needs\\n5. User profile customization\\n6. Much more in accessibility improvement, and look and feel customization"},{"id":"ciam-101-intro-authn-sso","metadata":{"permalink":"/blog/ciam-101-intro-authn-sso","source":"@site/blog/2022-11-28-ciam-101-authn-identity-sso/index.mdx","title":"CIAM 101: Authentication, Identity, SSO","description":"Background","date":"2022-11-28T00:00:00.000Z","tags":[{"label":"ciam","permalink":"/blog/tags/ciam"},{"label":"auth","permalink":"/blog/tags/auth"},{"label":"authentication","permalink":"/blog/tags/authentication"}],"readingTime":12.76,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"ciam-101-intro-authn-sso","authors":"gao","tags":["ciam","auth","authentication"]},"unlisted":false,"prevItem":{"title":"The design considerations for a seamless sign-in experience (Second Chapter)","permalink":"/blog/design-for-seamless-sie-2"},"nextItem":{"title":"The design considerations for a seamless sign-in experience (First Chapter)","permalink":"/blog/design-for-seamless-sie-1"}},"content":"## Background\\n\\nI began the build Logto because I noticed that Identity and Access Management (IAM) had become increasingly complex and expansive over time. The concept of IAM is even large enough to give rise to new concepts, such as WIAM (Workforce IAM) and CIAM (Customer IAM).\\n\\nWhile WIAM and CIAM share the same foundation, they have distinct use cases: WIAM is typically used for internal users, while CIAM is used for external customers.\x3c!--truncate--\x3e Some examples:\\n\\n- **WIAM** Your company has a unified identity system for employees, thus every one can use the same account to access company resources, such as software subscriptions, cloud computing services, etc.\\n- **CIAM** Your online bookstore requires a user identity system for customers and sellers. The sign-in experience is a critical part of onboarding, as it is located at the top of the conversion funnel.\\n\\nLogto started with the CIAM for various reasons (we\u2019ll have another article talking about this). During development, we realized that building a unified understanding across the team would be beneficial before taking our product to the next level. We hope this will also help you gain a better grasp of the IAM landscape.\\n\\nLet\u2019s get started!\\n\\n## The basics of CIAM\\n\\n:::info\\nRegardless of their differences, WIAM and CIAM both have the same foundation: authentication and authorization. These two concepts are at the core of their features.\\n:::\\n\\nIn this article, we\'ll focus on the fundamental concepts of CIAM and problems we may meet during or after the authentication flow. We\u2019ll also discuss Single Sign-On (SSO) and its related scenarios.\\n\\n### Authentication and authorization\\n\\n:::info Definition\\n- Authentication (AuthN) answers the question \u201cWhich identity do you own?\u201d\\n- Authorization (AuthZ) answers the question \u201cWhat can you do?\u201d\\n:::\\n\\n> \ud83d\udca1 Authentication is initially defined as \\"Who are you?\\". However, when discussing digital identities, it is more accurate to demonstrate authentication by \\"proving ownership of identity\\". (Credit to [Calm-Card-2424](https://www.reddit.com/r/programming/comments/10uycg0/comment/j7eyhrb/))\\n\\nIf you discover something that does not fit into either of these two categories, it is likely not essential to the identity business.\\n\\n- **Examples for authentication**\\n  - Password sign-in, passwordless sign-in, social sign-in, etc.\\n  - Machine-to-Machine authentication\\n- **Examples for authorization**\\n  - Role-based Access Control\\n  - Attribute-based Access Control\\n- **Examples for exceptions**\\n  - Non-identity data\\n  - Web hooks\\n\\n### Identity and Tenant\\n\\nIdentity typically represents either a user or a machine. Upon successful authentication, an ID Token is issued as an Identity.\\n\\nIn other words, the main purpose of authentication is to obtain an Identity.\\n\\nA Tenant is a group of identities:\\n\\n```mermaid\\ngraph TD\\n  Tenant --- A[Identity: User 1]\\n  Tenant --- B[Identity: User 2]\\n  Tenant --- C[Identity: Machine 1]\\n```\\n\\nWhen we discuss \\"Multi-tenant\\", we are referring to multiple Logto instances that are identity-isolated from one another. In other words, multiple Logto instances.\\n\\n```mermaid\\ngraph TD\\n  T1[Tenant 1] --- A[Identity: User 1]\\n  T2[Tenant 2] --- B[Identity: User 1]\\n  T2[Tenant 2] --- C[Identity: Machine 1]\\n  subgraph IS2[Identity system 2]\\n    T2\\n\\t  B\\n    C\\n  end\\n  subgraph IS1[Identity system 1]\\n    T1\\n    A\\n  end\\n```\\n\\nNote it has two **isolated** identity systems, i.e. you cannot use the Identity of Tenant 1 in Tenant 2, even for the same identifier (email,  phone, etc.). It\'s like your Costco membership not being valid at Whole Foods.\\n\\n:::info\\n\ud83e\uddf1 In short, there are \u201cphysical walls\u201d between Tenants.\\n:::\\n\\n:::note\\nThe definition of \\"Tenant\\" varies across CIAM products. Some refer to the term \\"Organization\\" in Logto, which will be introduced later.\\n:::\\n\\n### App and Tenant\\n\\nJust like Identity, an App also belongs to a Tenant. Several things to remember:\\n\\n- There is typically no direct relationship between an App and an Identity.\\n    - An Identity can represent an App, but there is no direct connection between them.\\n- Like users, apps are also Tenant-level.\\n- Apps are code, while users are human.\\n- The sole purpose of Apps are to complete authentication, i.e. to obtain an Identity.\\n\\n### Identity Provider (IdP) and Service Provider (SP)\\n\\nThe difference between these two providers is tricky but important.\\n\\n- **Identity Provider** is a service that provides authentication (AuthN) and issues identities.\\n\\nYou can find various explanations about Service Provider from Google, though they may not be satisfactory. In my mind, Service Provider is a relative concept:\\n\\n- **Service Provider (or Relying Party in [OIDC](https://openid.net/specs/openid-connect-core-1_0.html))** is a service or client that initiates authentication (AuthN) and requests the result from Identity Providers.\\n\\n#### Quiz\\n\\nConsider a typical social sign-in scenario:\\n\\n```mermaid\\ngraph LR\\n  A[iOS App] --\x3e |Invoke sign-in| Logto --\x3e |Redirect| GitHub\\n  GitHub --\x3e |Return GitHub ID| Logto --\x3e |Return Logto ID| A\\n```\\n\\n**\u2753 How many Service Providers and Identity Providers in this graph?**\\n\\n<details>\\n<summary>Answer</summary>\\n    \\nBoth have two.\\niOS App is a service provider to Logto, while Logto is an identity provider.\\nLogto is also a service provider to GitHub, while GitHub is an identity provider.\\nThus, Logto is a Service Provider also a Identity Provider.\\n</details>\\n\\n## Case study: A tech solution company\\n\\nYou are a CTO of a tech solution company, you have over 100 business partners and you have delivered over 300 projects.\\n\\n- Each project is either a web app or a mobile app with a backend service.\\n- For each business partner, you want to refactor the user system to provide SSO across its projects.\\n\\n**\u2753 How can Logto (or a CIAM product) help?**\\n\\n<details>\\n<summary>Answer</summary>\\n    \\nCreate a Logto instance for each business partner. Each partner holds a Tenant. Projects are mapped to \\"Apps\\" in Logto.\\n\\n```mermaid\\ngraph TD\\n  T1[Tenant 1] --- A[App 1]\\n  T1 --- B[App 2]\\n  T1 --- C[App 3]\\n  T1 --- U1[User 1]\\n  T1 --- U2[User 2]\\n  T2[Tenant 2] --- D[App 1]\\n  T2 --- E[App 2]\\n  T2 --- U21[User 1]\\n  T2 --- U22[User 2]\\n```\\n\\nLogto offers a universal sign-in experience (i.e. SSO) within a Tenant, so users don\u2019t need to sign in again when accessing another app in the same Tenant if they already signed in.\\n</details>\\n\\n## What we talk about when we talk about SSO\\n\\nWe found the term \u201cSSO\u201d often causes confusion. We consider Single Sign-On(In) to be a behavior, not a business concept. Therefore, SSO does not equate to \u201cSSO in WIAM\u201d.\\n\\nWhen we say \u201cit needs SSO\u201d, it can refer to one of the following cases:\\n\\n### SSO Case 1\\n\\n> \ud83d\udc49\ud83c\udffd In a big corp, employees use the same credentials to sign in to all company-licensed resources (e.g. email, IM, cloud services).\\n\\nIt is the typical WIAM scenario. In this case, only one Identity Provider is involved. We don\u2019t care for now.\\n\\n### SSO Case 2\\n\\n> \ud83d\udc49\ud83c\udffd End-users use the same credentials to sign in to all services developed by the same company (e.g. GSuite).\\n\\nLogto is currently focusing on the approach outlined above. Multiple external identity providers, such as a third-party social sign-in provider, may exist independently and without connection.\\n\\nDespite this, Logto remains the single source of truth for Identities, simply \\"borrowing\\" them from other providers. In this case, Logto acts as both an Identity Provider (to GSuite apps) and a Service Provider (to external Identity Providers).\\n\\n### SSO Case 3\\n\\n> \ud83d\udc49\ud83c\udffd End-users can only use the specific Identity Provider within the corresponding email domain to complete authentication. For example, signing in to Figma with Google Workspace.\\n\\nThis is the most common use case for SSO in CIAM. Let\u2019s take a closer look.\\n\\nIf we want to sign in to Figma using our @silverhand.io email, we can use either Social sign-in or SSO. The figures below illustrate the difference between the two:\\n\\n<div style={{ padding: \'2rem\', display: \'grid\', gridTemplateColumns: \'1fr 1fr\', gap: \'1.5rem\' }}>\\n<div>\\n<center>\\n\\n```mermaid\\ngraph TD\\n  A(Figma home) --\x3e |\\"Click &quot;Sign in&quot;\\"| B(Sign-in page) --\x3e |\\"Click &quot;Sign in with Google&quot;\\"| C(Google)\\n  C --\x3e |Redirect when finish| A\\n```\\n\\n*Social sign-in*\\n\\n</center>\\n\\n</div>\\n<div>\\n<center>\\n\\n```mermaid\\ngraph TD\\n  A(Figma home) --\x3e |\\"Click &quot;Sign in&quot;\\"| S(Sign-in page) --\x3e |\\"Click &quot;Use SSO&quot;\\"| B(SSO page) --\x3e |\\"Enter email address\\"| C(\\"X (explain later)\\") --\x3e |Redirect| D(Google Workspace)\\n\\tD --\x3e |Redirect when finish| A\\n```\\n\\n*SSO*\\n\\n</center>\\n</div>\\n</div>\\n\\nIn words:\\n\\n- After social sign-in, users are free to set a password or change the email address in Figma\\n- After SSO, users cannot set password or change any personal info including email address, since their Identities are managed by Google Workspace\\n\\nIn this case, Logto is both an Identity Provider and a Service Provider. It appears that SSO is more complex than a normal sign-in process. What are the benefits for the identity owner?\\n\\n- **Centralized control:** Keep identity information and authentication processes in one place, and ensure user information is always up-to-date. There is no need to add and remove licenses across different applications for changes.\\n- **Improved user experience:** Identity owners who require SSO are usually corporations. Their employees can use the same credentials and shared session for cross-company applications, such as Figma, Zoom, Slack, etc.\\n- **Enhanced security:** You may have noticed that some corporations require specific sign-in methods, such as dynamic verification codes. Using SSO can ensure that every employee uses the same sign-in method combination for accessing all resources.\\n\\n> \ud83e\udd14 Smart like you must have noticed that this is actually **SSO Case 1** from the SaaS perspective.\\n\\nIt\u2019s time to discuss the \\"X\\" in the SSO graph. This represents the process of Figma connecting the email domain to a specific Identity Provider. But, how does it work?\\n\\n## SSO mapping\\n\\nSince the request often comes from enterprise clients, we refer to the process of \\"SSO Case 3\\" from the previous section as \\"Enterprise SSO\\" for clarity.\\n\\nWe can easily devise a naive solution: create a mapping between email domains and SSO methods, then manually update it.\\n\\nThe action of process \u201cX\u201d is now clear:\\n\\n> \ud83d\udd0d **Find the mapped Enterprise SSO method of the given email domain**\\n\\nThus, if you configure `silverhand.io` as a valid email domain that connects with a Google Workspace SSO URL, users who try to sign in with an `@silverhand.io` email will be redirected to the corresponding Google Workspace sign-in page, instead of being processed in-place.\\n\\nWhen you only have a few dozen clients that need Enterprise SSO, manually managing the mapping is okay. However, there are more considerations to take into account:\\n\\n1. *What if there are hundreds or thousands Enterprise SSO clients?*\\n2. *What\u2019s the relationship between \u201cnormal users\u201d and \u201cEnterprise SSO users\u201d?*\\n3. *Should data be isolated between different Enterprise SSO clients?*\\n4. *Is there a need to provide a dashboard for the Enterprise SSO admins to view active users, audit logs, etc.?*\\n5. *How can accounts be automatically deactivated when a user is removed from the Enterprise SSO Identity Provider?*\\n\\nAnd a lot more. Since almost all Enterprise SSO are email-domain-based, we can quickly figure out a better solution:\\n\\n- If the user can prove ownership of that domain, they can set up the enterprise SSO of that domain in a self-serve manner.\\n\\nThis solution addresses the first two questions:\\n\\n> *1. What if there are hundreds or thousands Enterprise SSO clients?*\\n\\n- They can configure Enterprise SSO in a self-serve way.\\n\\n> *2. What\u2019s the relationship between \u201cnormal users\u201d and \u201cEnterprise SSO users\u201d?*\\n\\n- We open all possible sign-in methods to normal users except Enterprise SSO; While we limit the sign-in method to Enterprise SSO only to the users who are trying to sign in with the configured domains.\\n\\nAs for the third question:\\n\\n> *3. Should I isolate data between different Enterprise SSO clients?*\\n\\n- Yes and no. It\u2018s time to introduce organization.\\n\\n## Organization\\n\\nWe mentioned using email domains to recognize the specific Enterprise SSO method to use; in other words, applying a specific treatment for a specific batch of users.\\n\\nHowever, the client requirements are often more than just Enterprise SSO; for example, questions 4 and 5 in the previous section. Over the years, a mature model have been developed by outstanding SaaS companies to address these kinds of problems: Organizations.\\n\\n**Organizations rules**\\n\\n1. An organization is a group of identities, typically smaller than a Tenant.\\n2. All organizations are associated with a Tenant.\\n\\nYou may see other terms, such as \\"Workspace\\", \u201cTeam\u201d, or even \\"Tenant\\" in the software. To identify if it is the concept we are discussing, just check if it represents \u201ca group of Identities\u201d.\\n\\nIn this article, we will use the term \\"Organization\\" for consistency.\\n\\n:::note\\n\ud83e\udd39\ud83c\udffd\u200d\u2640\ufe0f In most cases, \\"a group of Identities\\" is equivalent to \\"a group of users\\". However, **the same Identity can exist in multiple Organizations**.\\n:::\\n\\nIn Notion, you can create and join multiple workspaces (i.e. Organizations) with the same email address and switch between them easily.\\n\\nFor Slack, it appears to be the same, but we suspect it uses different Identities behind the scenes since we need to create a new account for each workspace.\\n\\n<div style={{ padding: \'2rem 3rem\', display: \'grid\', gridTemplateColumns: \'1fr 1fr\', gap: \'1.5rem\' }}>\\n<center>\\n\\n![Slack workspaces](./slack-workspaces.png)\\n\\n*Slack workspaces*\\n\\n</center>\\n<center>\\n\\n![Notion workspaces](./notion-workspaces.png)\\n\\n*Notion workspaces*\\n\\n</center>\\n</div>\\n\\nNotion has a \u201cPersonal Plan\u201d available, which is normally an Organization under the hood, with the sole user (you) inside. We don\'t know the exact implementation of Notion, but this explanation is reasonable and archivable for our model.\\n\\nEach Organization also has an identifier, usually referred to as the \u201cOrganization domain\u201d.\\n\\n:::info\\nAn \\"Organization domain\\" is an internal identifier used to distinguish Organizations. It may differ from the \\"email domain\\", as the former is managed by the Service Provider, while the latter is usually provided by an external Identity Provider.\\n\\nFor example, you can use `foo` as the Organization domain in Slack, but use `@bar.io` as the email domain for this Organization.\\n:::\\n\\n### Quiz\\n\\n**\u2753 Can an app be associated with an Organization?**\\n\\n<details>\\n<summary>Answer</summary>\\n    \\nYes yes. As we discussed in the beginning, an app can have an Identity. Can you elaborate a business scenario of this?\\n</details>\\n\\n## Questions remain\\n\\n> *3. Should data be isolated between different Enterprise SSO clients?*\\n\\n- **Yes:** Isolate business data, such as messages and documents, at the Organization level.\\n- **No:** Keep Identities independent, since they do not need to be associated with an Organization.\\n- Note there are three distinct entities involved here: Identities, Organizations, and Enterprise SSO configurations; which notably increased the complexity. The question itself is not specific enough.\\n\\n> *4. Is there a need to provide a dashboard for the Enterprise SSO admins to view active users, audit logs, etc.?*\\n>\\n> *5. How to automatically deactivate account when user is removed for the Enterprise SSO Identity Provider?*\\n\\n- These demands are more business-oriented and can be implemented at Organization level. We\'ll leave them open here.\\n\\n## Closing notes\\n\\nWe\'ve introduced several concepts: Authentication (AuthN), Authorization (AuthZ), Identity, Tenant, Application, Identity Provider (IdP), Service Provider (SP), Single Sign-On (SSO), and Enterprise SSO (Organization). It may take some time to understand them all.\\n\\nAs I wrote this article, I noticed that interestingly, the most expensive plans of online services often include exclusive features related to authorization, which is totally unmentioned in this article. You may already have some questions about authorization, such as:\\n\\n- How can we assign permissions to a user and verify them?\\n- What authorization model should I use?\\n- What is the best practice for applying an authorization model?\\n\\n:::note\\n\ud83d\udd25 Take a break, and see you in CIAM 102!\\n:::"},{"id":"design-for-seamless-sie-1","metadata":{"permalink":"/blog/design-for-seamless-sie-1","source":"@site/blog/2022-11-15-design-for-seamless-sie-1/index.mdx","title":"The design considerations for a seamless sign-in experience (First Chapter)","description":"We are thrilled to announce the release of the newest version of the Sign-in Experience, which includes more ways to sign-in and sign-up, as well as a framework that is easier to understand and more flexible to configure in the Admin Console. When compared to Sign-in Experience V1, this version\'s capability was expanded so that it could support a greater variety of flexible use cases. We hope that this will be able to assist developers in delivering a successful sign-in flow, which will also be appreciated by the end users.","date":"2022-11-15T00:00:00.000Z","tags":[{"label":"design","permalink":"/blog/tags/design"},{"label":"sign-in","permalink":"/blog/tags/sign-in"},{"label":"ux","permalink":"/blog/tags/ux"}],"readingTime":15.065,"hasTruncateMarker":true,"authors":[{"name":"Guamian","title":"Product & Design at Silverhand","url":"https://github.com/fleuraly","imageURL":"https://github.com/fleuraly.png","key":"guamian"},{"name":"Ran","title":"Product & Design at Silverhand","url":"https://github.com/Rany0101","imageURL":"https://github.com/Rany0101.png","key":"rany"}],"frontMatter":{"slug":"design-for-seamless-sie-1","authors":["guamian","rany"],"tags":["design","sign-in","ux"]},"unlisted":false,"prevItem":{"title":"CIAM 101: Authentication, Identity, SSO","permalink":"/blog/ciam-101-intro-authn-sso"},"nextItem":{"title":"Logto x Hasura: How to use open-source auth + GraphQL solution to boost your project","permalink":"/blog/logto-x-hasura"}},"content":"import architecture from \'./architecture.png\';\\n\\n\\nWe are thrilled to announce the release of the newest version of the Sign-in Experience, which includes more ways to sign-in and sign-up, as well as a framework that is easier to understand and more flexible to configure in the Admin Console. When compared to Sign-in Experience V1, this version\'s capability was expanded so that it could support a greater variety of flexible use cases. We hope that this will be able to assist developers in delivering a successful sign-in flow, which will also be appreciated by the end users.\\n\\n\x3c!--truncate--\x3e\\n\\nIn this article, we\'ll go over the history of Sign-in Experience, including its conception, design decisions, and product tradeoffs. You will also gain a better grasp of how to construct a successful and frictionless sign-in or sign-up experience.\\n\\nIf you\'re unfamiliar with Logto, let me back up a bit and define it, as well as the connection between Logto and the Sign-in Experience.\\n\\nAs an OIDC-based identity service, Logto is available as open source software allowing professionals, groups, and companies to set up the necessary sign-in and identity infrastructure in a matter of minutes.\\n\\n<center style={{ margin: \'2rem\' }}>\\n  <div>\\n    <img src={architecture} alt=\\"Architecture\\" width=\\"640\\" />\\n  </div>\\n  <div>\\n    <i>Our portfolio and key components of Logto</i>\\n  </div>\\n</center>\\n\\nProviding a straightforward sign-up process forms one of our top priorities. The sign-in process can be quickly customized by developers using the Admin Console without the need for any custom coding.\\n\\n## Why do we design an end-to-end Sign-in Experience?\\n\\nWe saw a lot of challenges and problems in the market before we started Logto, and that\'s why we spent tonnes of time researching and talking to customers, developers, and businesses that were having trouble with their sign-up processes.\\n\\n### Painpoints\\n\\n#### Developer, Team (Builders)\\n\\nCreating a smooth sign-up process is a mundane but intricate endeavor. Tasks like composing 0-1 front-end code and ensuring platform consistency is a challenging problem. Unfortunately, this problem is exacerbated for the early-stage startup or for individual developers because there is no professional design or product team to help them. If developers didn\'t have to deal with and manage the chore, they could put more effort into the main product and other impactful priorities.\\n\\n#### Business stakeholders\\n\\nA self-serve Sign-up flow is a standard tactic for user acquisition. It takes into account the requirements of multiple disciplines and data growth. Building a Sign-in and sign-up process that has everyone happy requires a lot of back-and-forth because of all the decisions that need to be made.\\n\\n#### End customers\\n\\nQuick and smooth is the key and a single blocker can ruin the whole game. For example, multiple unnecessary accounts, blocked by terribly designed flow are definitely huge concerns for the end users. Security and privacy are seriously taken care of too. An untrusted flow or sign-in UI can prevent users from moving forwards and end up dropping off the product.\\n\\n#### Similar solutions in the market\\n\\nWe\'re not naive; we know there are other open-source sign-in flow solutions out there. However,\\nfew authentication and identification options are supported.\\n\\n- Their user interface lacks polish and personalization and neglects user experience and accessibility.\\n- The latest trends, such as supporting localization and a \\"dark mode,\\" are rarely implemented.\\n- There is a lack of end-user testing and verification of the entire process.\\n- There are only a handful of industry-tested solutions, and they are prohibitively expensive, making them unattainable for most individuals, small teams, and startups.\\n\\nFurthermore, the final user experience between consumer-facing apps and B2B SaaS products is very different. Focusing on customer identity first and being business and industry-agnostic \u2014 taking on the Sign-in Experience happening in our daily lives, such as e-commerce, food delivery, and entertainment \u2014 is important to us because it will allow us to make an accessible product and build the strong foundation step by step. In the meantime, think ahead and keep exploring extensive user cases of sign-in for different verticals that can be simply applied to many types of businesses in the near future.\\n\\nWith that in mind, we aim to make this step so easy that even those with no prior experience with programming may set up a self-serve sign-up process. Logto V1 was released in July 2022 and has since had a lot of positive feedback from users all across the world, helping us reach 4.4k stars in just two months with limited promotional resources. This motivates us to keep going! It was important to us to make sure that our global audience could use our service, therefore we added support for additional sign-in methods in version 2. Compare Version 1 to Version 2 and see what we backed first.\\n\\n## Our solutions so far\\n\\n<center style={{ margin: \'2rem\' }}>\\n\\n![New sign-in experience preview](sie-preview.png)\\n\\n_Logto Sign-in Experience v2 Preview_\\n\\n</center>\\n\\n![Compare v1 and v2](compare-v1-v2.png)\\n\\nNow that you know what we brought to the table in V2, let\'s examine the road we took to get there and the backstory that led us here.\\n\\n## Modularize Sign-in Experience like LEGO blocks, atomic but scalable\\n\\nOur difficulty as an open-source project is that Logto should be flexible enough to meet the needs of developers working on a wide range of products and with varying degrees of customization. That said, our product might inevitably become a complex monster devoid of special opinions if we aim to cover every possible circumstance.\\n\\nOur strategic solution to the above is to base ourselves in the actual world while approaching Sign-in Experience as though it were a LEGO set\u2014individual pieces that may be combined to become something larger.\\n\\nAs a first step, we surveyed the login procedures of over a hundred apps in various industries and held one-on-one discussions with app creators and end users in the Logto Discord Community. We organized the product challenges into four pillars after considering many viewpoints; they are also the most common issues encountered by construction professionals.\\n\\n- Define methods\\n- Design an ideal flow\\n- Guided by UX strategies\\n- Customize the look and feel\\n\\nThe market\'s validation of usage frequency and popularity was used to determine the priority of certain features under each pillar.\\n\\nWe seek to provide the best practices within the scope of fundamental functions (both universal and extensible), bridge the gap between scenarios, and make it easy for developers to grasp Admin Console\'s complicated logic in the critical 0-1 window. Whether a developer is highly experimental and has no ideas at all, or highly targeted and has a precise UI design in hand, Sign-in Experience may be configured seamlessly in any case.\\n\\nSo, let\'s take a closer look at these four cornerstones:\\n\\n### Step 1: Define methods\\n\\nWe break down the example sign-in into four categories: identifier, authentication factor, third-party connector, and personal information. Components like these make up the sign-in process for thousands of users. The final user experience, however, varies widely depending on the specifics of each situation. There are benefits to each approach; developers should consider their needs before settling on one.\\n\\n#### Identifier\\n\\nLet\'s first take a look at the popular identifiers and their pros and cons:\\n\\n<table>\\n  <tbody>\\n    <tr>\\n      <td>\\n        <b>Username</b>\\n      </td>\\n      <td>\\n        <p>\\n          A user\'s username is frequently disclosed anonymously as a unique identifier. It is\\n          appropriate for social products such as content, games, instant messaging, and so on. It\\n          can be configured by the user or selected by the system.\\n        </p>\\n        <p>\\n          When registering, a username can be used in conjunction with an email address or a phone\\n          number to offer users one more reminder information. A username is also a secure\\n          identifier that does not reveal too much personal information.\\n        </p>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <b>Email</b>\\n      </td>\\n      <td>\\n        <p>\\n          In the long run, users can simply recall their email addresses, and there are no device\\n          restrictions for getting verification emails. Subscriptions or win-back campaigns can also\\n          be sent to users\' email addresses for marketing objectives.\\n        </p>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <b>Phone</b>\\n      </td>\\n      <td>\\n        <p>\\n          The use of a phone number as an identity is more mobile and accessible to the elderly. Its\\n          advantages include real-name authentication, timely interaction with the user, and access\\n          to the user\'s contacts list for connection.\\n        </p>\\n        <p>\\n          However, there are issues like changing mobile phone numbers, using used numbers, leaking\\n          contact information, and requiring devices to be present while signing in or signing up.\\n        </p>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n#### Authentication Factor\\n\\n<table>\\n  <tbody>\\n    <tr>\\n      <td>\\n        <b>Password</b>\\n      </td>\\n      <td>\\n        <p>\\n          Password sign-in is convenient, but users sometimes forget it. Low-complexity password is\\n          at risk of theft.\\n        </p>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <b>Email verification</b>\\n      </td>\\n      <td>\\n        <p>\\n          Email Verification Codes or Magic links are the most popular ways for verification. It has\\n          higher security but is cheaper than SMS.\\n        </p>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <b>SMS</b>\\n      </td>\\n      <td>\\n        <p>\\n          SMS is also more secure. The autofill feature of the keyboard facilitates mobile input.\\n          However, it may result in additional SMS charges.\\n        </p>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n#### Third-party connector\\n\\n<table>\\n  <tbody>\\n    <tr>\\n      <td>\\n        <b>Social connector</b>\\n      </td>\\n      <td>\\n        <p>\\n          According to Google Account and Facebook data, implementing Social Sign-in can strengthen\\n          the acquisition funnel and raise registration rates. Users may sign in with a single\\n          click, synchronize personal information with a more convenient and confident sense, and\\n          avoid forgetting passwords or email addresses used to sign up.\\n        </p>\\n        <p>\\n          The drawback is that third-party service quality and product life will limit the Sign-in\\n          Experience. If the social connector does not give trustworthy contact information, the\\n          user must provide the necessary contact information; otherwise, the user cannot be\\n          contacted.\\n        </p>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n#### Personal information\\n\\n<table>\\n  <tbody>\\n    <tr>\\n      <td>\\n        <b>Personal information</b>\\n      </td>\\n      <td>\\n        <p>\\n          Contact information, name, gender, age, region, address, user preferences, and other\\n          personal information provided by users can be used for display, account recovery,\\n          personalized recommendations, product data analysis, and other purposes. It is a standard\\n          affiliate and business-neutral component of the sign-up process.\\n        </p>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n### Step 2: Design an ideal flow\\n\\n**What does flow mean in Sign-in Experience\uff1f**\\n\\nThere is more to the Sign-in Experience than just the layout. The layout is simple, and a preview may be seen on the left while you work on it. In this context, \\"flow\\" refers to the entire sign-up process that a user would go through. We intend to handle the entire trip, which has traditionally been a difficult job for developers.\\n\\n**Atomized the flow**\\n\\nDevelopers can utilize the Logto Sign-in Experience in a flexible manner by breaking down the full process into its component parts. With this mental modal, you will then develop a mindmap like below, which is all you need to consider when you design an end-to-end sign-in experience for your end customer.\\n\\n![Mind map](mind-map.png)\\n\\n**Standardized the flow and guard by carefully considered product logic**\\n\\nTo establish the framework, we have to provide the best practice for each individual flow mentioned above. Those best practices were based on well-considered product logic, user-center design principles, and business objectives. We keep generality and inclusiveness at the same time.\\n\\nA lot of Logto competitor treats the flow like an easy permutation and combination task but it is definitely not true. Let\u2019s talk about the constraints and laws between them:\\n\\n1. **Sign in \u2260 Create Account**\\n\\nMethods of sign-in and registration are neither equal nor inclusive. Some programs, for example, request \\"Email+Password+Email Verification code\\" when signing up but only support \\"Email+Password\\" as a sign-in method.\\n\\n![Mobile sign-in](mobile-sign-in.png)\\n\\nIn another case, requiring to enter a username when registering, but there is no option for Username sign-in.\\n\\nDistinct scenarios have different goals, resulting in various product logic. We will not only examine the variety of logic but also delve deeper into why. In summary, the difference between creating an account and sign-in is listed below:\\n\\n<table>\\n  <thead>\\n    <tr>\\n      <td></td>\\n      <td>\\n        <b>Purpose</b>\\n      </td>\\n      <td>\\n        <b>Flow</b>\\n      </td>\\n    </tr>\\n  </thead>\\n  <tbody>\\n    <tr>\\n      <td>\\n        <b>Create account</b>\\n      </td>\\n      <td>\\n        <p>\\n          The purpose of creating an account is to ask consumers for identifying information while\\n          also acquiring users with the least amount of effort from a commercial standpoint.\\n        </p>\\n        <p>\\n          There is a trade-off between doing the fewest steps and gathering more information from\\n          end users. Fewer steps indicate higher conversion rates, but they may result in\\n          low-quality targeted users and leads, which could harm future customer support and product\\n          growth.\\n        </p>\\n        <p>Simultaneously, the registration rate might be increased.</p>\\n      </td>\\n      <td>\\n        <p>\\n          Between various IDs, the logic is \\"and.\\" Because this is a product requirement, consumers\\n          must fill all of them at the same time (some factors can be skipped).\\n        </p>\\n        <p>\\n          There is just one exception, \\"Phone or Email,\\" because consumers validating two pieces of\\n          contact information at the same time is time-consuming and unneeded.\\n        </p>\\n      </td>\\n    </tr>\\n    <tr>\\n      <td>\\n        <b>Sign in</b>\\n      </td>\\n      <td>\\n        <p>\\n          Sign-purpose is to allow users to access the product quickly, securely, and successfully.\\n        </p>\\n      </td>\\n      <td>\\n        <p>\\n          Between various IDs, the logic is \\"or.\\" That implies consumers can use whichever sign-in\\n          technique they like. The less complicated, the better. (Multi-factor authentication\\n          instances are excluded here)\\n        </p>\\n      </td>\\n    </tr>\\n  </tbody>\\n</table>\\n\\n2. **Sign in + Create an account \u2264 Profile**\\n\\nAll sign-in and registration information is stored in a profile. However, don\'t feel rushed to obtain all of the information during registration. Allow users to register successfully first and then access user information incrementally in specified instances. The contact information that the user enters proactively in the Profile may be used in the sign-in procedures. As a result, sign-in methods may be more than just sign-up methods.\\n\\n1. **Restrictions between Sign-in, Registration, and Authentication Factors, for example:**\\n\\n- If password is used as an authentication factor \u2192 sign-in should support it as well, and all other identifiers must support password as well. We don\'t want consumers to complete pointless efforts or to disregard their security intentions while registering. The fact that a password is necessary for sign-up with a username but not for email or phone password sign-in makes no sense and confuses the user.\\n- If users enabled multiple identifiers during registration, such as email or phone number, both of those identifiers must be available for sign-in. For example, if a person signs up using their email address but only founds phone number sign-in option, they will be unable to use the product in the end.\\n- A password is necessary if the username is the only identifier used during registration. This is owing to the limitations and characteristics of using a username as an identifier.\\n\\n### Step 3: Guide by UX design strategies\\n\\nLogto delivers flows that are governed by a few end-user-centered tactics to enable the finest end-user experience. You can get a sense of what we insist on in terms of UX design by looking at the examples below.\\n\\n- **Security first**\\n\\n  Security is unquestionably crucial in terms of sign-in experience and user identity. We took this approach seriously and put it into action. For example, when a user wants to verify an email address, we only alert the user that the account already exists until the user enters the verification code and verifies. In this strategy, we prevent someone from hacking a list of emails that do not exist.\\n\\n  ![Mobile sign-in](mobile-sign-in-2.png)\\n\\n- **Anticipate user needs and avoid meaningless attempts**\\n\\n  This is done to prevent pointless efforts at creating a successful outcome. The login process is convoluted and full of edge cases. When an account is found, for instance, the user is prompted to log in. When a person attempts to sign in and their account already does not exist, we will ask them if they would want to create an account.\\n\\n  This foresight allows customers to get up and running with the product with minimal delay.\\n\\n  ![Mobile sign-in](mobile-sign-in-3.png)\\n\\n- **Consider account upgrades**\\n\\n  Account upgrades may also result in a change in the sign-in or sign-up flow. This will also have an influence on our end-user engagement. This scenario should also be considered. For example, if the administrator makes some modifications and adds new sign-in methods in the admin dashboard, existing end users will be required to sign in to the app.\\n\\n  ![Mobile sign-in](mobile-sign-in-4.png)\\n\\n- **Making the choice easier for users**\\n\\n  For example, we advise developers not to use too many social sign-in methods and if they are too many they will be hidden in another view because this would result in a poorer conversion. We don\'t include everything equally in the UI layout of the sign-in experience, but we do have a focus. This is to adhere to general design principles of usability and a better acquisition approach. At the same time, this is done to reduce users\u2019 cognitive load.\\n\\n### Step 4: Brand and look and feel\\n\\nLast but not least, we provide users with lots of flexibility to customize their look and feel.\\n\\n- Modification of Brand elements, such as the selection of theme color, the replacement of a logo image, changes to component settings, and the selection of standard layouts, can all be accomplished with just one click when working with developers.\\n- Maintain as much uniformity as possible across all multi-end design plans in order to make it easier for developers to intuitively comprehend and adjust UI. Mobile and web, for instance, use layouts, processes, components, and styles that are equivalent to one another.\\n- In comparison to more conventional business tools, we put in a lot of work to ensure that the design is elegant. We came up with the formulas for calculating the brand colors, the dark mode, the internationalization of languages, and the barrier-free strategy.\\n\\n## Closing notes\\n\\nThank you for spending time reading about our Logto Sign-in Experience. You might have the following questions:\\n\\n1. How can this be accomplished with the least amount of work in Logto Admin Console?\\n2. How does your configuration experience vary from existing market solutions? Why is it the greatest option for my company?\\n3. How can the success of sign-ups be measured from a business standpoint? Have you thought about it yet?\\n4. What is Logto\u2019s upcoming plan for supporting you and your product?"},{"id":"logto-x-hasura","metadata":{"permalink":"/blog/logto-x-hasura","source":"@site/blog/2022-08-20-logto-x-hasura/index.mdx","title":"Logto x Hasura: How to use open-source auth + GraphQL solution to boost your project","description":"Intro","date":"2022-08-20T00:00:00.000Z","tags":[{"label":"graphql","permalink":"/blog/tags/graphql"},{"label":"hasura","permalink":"/blog/tags/hasura"},{"label":"api","permalink":"/blog/tags/api"}],"readingTime":5.165,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"logto-x-hasura","authors":"gao","tags":["graphql","hasura","api"]},"unlisted":false,"prevItem":{"title":"The design considerations for a seamless sign-in experience (First Chapter)","permalink":"/blog/design-for-seamless-sie-1"},"nextItem":{"title":"TypeScript all-in-one: Monorepo with its pains and gains","permalink":"/blog/typescript-all-in-one"}},"content":"import logos from \'./logos.png\';\\nimport createApi from \'./create-api.png\';\\n\\n\\n## Intro\\n\\nWhen it comes to a new project, you usually cannot skip several things: APIs, authentication + authorization, identity, and end-user sign-in flow. It used to be hard to kick off these things because there are many concepts and technologies that spread widely: RESTful/GraphQL, web frontend, native client, connect clients with APIs, auth best practices to balance security and user experience, etc.\\n\\nAlso, most of the works are \u201crepeating\u201d. I mean, they are needed and similar for almost every project, with some tweaks.\\n\\n\x3c!--truncate--\x3e\\n\\nSounds scary and tedious? Don\u2019t panic. Today we have open source. With the two open-source projects below, things become not tricky :\\n\\n- [Logto](https://github.com/logto-io/logto): Helps you build the sign-in, auth, and user identity within minutes.\\n- [Hasura](https://github.com/hasura/graphql-engine): Blazing fast, instant real-time GraphQL APIs on your DB with fine-grained access control.\\n\\n<center><img alt=\\"Logto x Hasura\\" src={logos} width=\\"480\\" /></center>\\n\\nIn this article, we\u2019ll focus on connecting Logto and Hasura, which enables you to implement authentication, authorization, and GraphQL APIs without friction. Thus you can quickly jump into your business without rocket-science learning.\\n\\n\\n## Get started\\n\\n### Prerequisites\\n\\nSince both [Logto](https://docs.logto.io/docs/tutorials/get-started/) and [Hasura](https://hasura.io/docs/latest/getting-started/index/) have a decent get-started guide, we assume you have read them and have a basic feeling. Access to a running instance of both is needed.\\n\\nWe assume the accessible endpoints are:\\n\\n- Logto: `http://localhost:3001`\\n- Hasura: `http://localhost:8080`\\n\\n:::info\\nIf you are using Docker/Docker Compose, for accessing of your machine(host)\u2019s `localhost`, you can use the Docker magic string `host.docker.internal`. In this case, the Logto endpoint will be `http://host.docker.internal:3001`.\\n:::\\n\\nAlso, we assume you have a preferred platform and framework to build the client app, say React or Next.js.\\n\\n### Set up API in Logto\\n\\nIn the left navigation sidebar of your Logto Admin Console, click \u201cAPI Resources\u201d, and you\u2019ll see the API Resource management page.\\n\\nThen click the huge \u201c+ Create API Resource\u201d button in the top-right corner. In the opening modal, enter `Hasura` for API name and `https://hasura.api` for API identifier.\\n\\n<center><img alt=\\"Create API modal\\" src={createApi} width=\\"540\\" /></center>\\n\\nWe\u2019ll use this API identifier for the rest of our article. But feel free to change the values based on your preference.\\n\\nClick \u201cCreate API Resource\u201d, and it will show a message that indicates the resource has been successfully created. That\u2019s all we need in Logto for now.\\n\\n### Enable webhook authentication in Hasura\\n\\n[Hasura uses role-based access management](https://hasura.io/docs/latest/auth/index/), which handles authorization. So, we only need to figure out authentication. It supports two methods: Webhook and JWT. We choose [webhook](https://hasura.io/docs/latest/auth/authentication/webhook/) since it\u2019s more flexible.\\n\\nTo enable webhook authentication, you must set the admin secret and auth hook endpoint.\\n\\n- The admin secret is the key to having Hasura admin access when sending requests. It is required before enabling webhook authentication. Remember to keep it somewhere safe, and don\u2019t use it in production.\\n- The auth hook endpoint is a URL to send authentication requests.\\n\\nYou can set them via [environment variables](https://hasura.io/docs/latest/auth/authentication/webhook/#configuring-webhook-mode):\\n\\n```yaml\\nHASURA_GRAPHQL_ADMIN_SECRET: myadminsecretkey # Replace with your own secret\\nHASURA_GRAPHQL_AUTH_HOOK: http://localhost:3001/api/authn/hasura?resource=https://hasura.api\\n```\\n\\nYou may notice we use the API identifier filled in Logto to build the auth hook endpoint. It ensures that the user is passing the correct bearer token instead of a random one that may from malicious.\\n\\nYou need to update the auth hook endpoint if you have a different Logto endpoint or API indicator. Say you have `https://logto.domain.com` as the Logto endpoint and `https://graphql.domain.com` as the API identifier, then it will be:\\n\\n```yaml\\nHASURA_GRAPHQL_AUTH_HOOK: https://logto.domain.com/api/authn/hasura?resource=https://graphql.domain.com\\n```\\n\\nFrom now, for every GraphQL request, Hasura will bring all request headers to the Logto auth hook endpoint, and Logto will respond properly.\\n\\n## Send secured GraphQL requests\\n\\n### Summary\\n\\nSince we won\u2019t use the Hasura admin secret in production, every GraphQL request is secured by the following headers:\\n\\n- `Authorization` The standard bearer token that Logto generates.\\n- `Expected-Role` The role you want Logto to show in the auth hook response.\\n\\n:::caution\\nIf the user that the `Authorization` header indicates doesn\u2019t have the `Expected-Role`, Logto will respond with `401 Unauthorized`.\\n:::\\n\\nThe `Authorization` header requires a valid Access Token in JWT format with the Hasura API indicator for audience. Hold on - it\u2019s quite hard to remember and compose all these things. Fortunately we get Logto SDKs to simplify the geeky part.\\n\\n### Set default roles in Logto\\n\\nBy default, only the first user will have an `admin` role name. After that, Logto will NOT assign any role names to new users. But for Hasura, it is necessary to have a role to perform an authed request.\\n\\nWhile access control is still an under-the-hood feature of Logto, we don\u2019t want you to manually add the default role names. You can set an environment variable `USER_DEFAULT_ROLE_NAMES` with a comma-separated string [for Logto](https://docs.logto.io/docs/references/core/configuration). E.g.:\\n\\n```yaml\\nUSER_DEFAULT_ROLE_NAMES: user,good_user\\n```\\n\\nThen two roles `user` and `good_user` will be automatically added to newly created users. It will reflect in both `users` table and Access Tokens.\\n\\n### Integrate Logto SDK\\n\\nFollow the [integration guide](https://docs.logto.io/docs/recipes/integrate-logto/) to integrate a Logto SDK in your client app. It enables not only the ability to generate a valid Access Token for GraphQL requests, but also a smooth sign-in experience for your end-users.\\n\\nOnce you finish the guide, we need one tiny modification to the `LogtoConfig`: Add the API indicator you created in Logto Admin Console to `resources`. Taking React SDK as an example:\\n\\n```tsx\\nconst config: LogtoConfig = {\\n  endpoint: \'http://localhost:3001\',\\n  appId: \'<your-application-id>\',\\n  resources: [\'https://hasura.api\'], // Add this line\\n};\\n```\\n\\n### Send requests\\n\\nFinally! After the user is signed in, use `getAccessToken()` in Logto SDK to fetch the Access Token for Hasura GraphQL requests:\\n\\n```tsx\\nconst accessToken = await logto.getAccessToken(\'https://hasura.api\');\\n\\n// Before sending the request\\nrequest.headers.set(\'Authorization\', `Bearer ${accessToken}`);\\nrequest.headers.set(\'Expected-Role\', \'user\');\\n```\\n\\n## Recap\\n\\nWith the effort above, we successfully implemented all the non-skippable things in the intro:\\n\\n- A database-schema-driven GraphQL API endpoint\\n- An auth and identity service on top of OIDC protocol\\n- The complete end-user sign-in flow and auth state management\\n- Secured API access based on user identity and roles\\n\\nNot that hard, right? If you meet any issues, feel free to join the [Logto](https://discord.gg/vRvwuwgpVX) or [Hasura](https://discord.gg/hasura) discord server to have a live chat with the team."},{"id":"typescript-all-in-one","metadata":{"permalink":"/blog/typescript-all-in-one","source":"@site/blog/2022-08-07-typescript-all-in-one.md","title":"TypeScript all-in-one: Monorepo with its pains and gains","description":"Intro","date":"2022-08-07T00:00:00.000Z","tags":[{"label":"typescript","permalink":"/blog/tags/typescript"},{"label":"monorepo","permalink":"/blog/tags/monorepo"}],"readingTime":8.93,"hasTruncateMarker":true,"authors":[{"name":"Gao","title":"Founder of Silverhand","url":"https://github.com/gao-sun","imageURL":"https://github.com/gao-sun.png","key":"gao"}],"frontMatter":{"slug":"typescript-all-in-one","authors":"gao","tags":["typescript","monorepo"]},"unlisted":false,"prevItem":{"title":"Logto x Hasura: How to use open-source auth + GraphQL solution to boost your project","permalink":"/blog/logto-x-hasura"}},"content":"## Intro\\n\\nI always had a dream of monorepo.\\n\\nI saw the monorepo approach while working for Airbnb, but it was for the frontend only. With a deep love of the JavaScript ecosystem and the \u201chappy\u201d TypeScript developing experience, I started to align frontend and backend code in the same language from ~three years ago. It was great (for hiring) but not that great for developing since our projects were still scattered across multiple repos.\\n\\n\x3c!--truncate--\x3e\\n\\n:::info FYI\\nThere are quotes around the word \u201chappy\u201d since TypeScript did bring me a lot of fun and a-ha moments, but it also let me think \u201chow could this doesn\u2019t work\u201d sometimes.\\n:::\\n\\nAs it says, \u201cthe best way of refactoring a project is to start a new one\u201d. So when I was starting my startup about one year ago, I decided to use a total monorepo strategy: put frontend and backend projects, even database schemas, into one repo.\\n\\nIn this article, I won\u2019t compare monorepo and polyrepo since it\u2019s all about philosophy. Instead, I\u2019ll focus on the building and evolving experience and assume you are familiar with the JS/TS ecosystem.\\n\\nThe final result is available on [GitHub](https://github.com/logto-io/logto).\\n\\n## Why TypeScript?\\n\\nFrankly speaking, I\u2019m a fan of JavaScript and TypeScript. I love the compatibility of its flexibility and rigorousness: you can fall back to `unknown` or `any` (although we banned any form of `any` in our codebase), or use a super-strict lint rule set to align the code style across the team.\\n\\nWhen we were talking about the concept of \u201cfullstack\u201d before, we usually imagine at least two ecosystems and programming languages: one for frontend and one for backend.\\n\\nOne day, I suddenly realized it could be simpler: Node.js is fast enough (believe me, in most cases, code quality is more important than running speed), TypeScript is mature enough (works well in big frontend projects), and the monorepo concept has been practiced by a bunch of famous teams (React, Babel, etc.) - so why don\u2019t we combine all the code together, from frontend to backend? This can make engineers do the jobs without context switch in one repo and implement a complete feature in (almost) one language.\\n\\n## Choosing package manager\\n\\nAs a developer, and as usual, I couldn\u2019t wait to start coding. But this time, things were different.\\n\\nThe choice of the package manager is critical to the dev experience in a monorepo.\\n\\n:::info \ud83d\udd28 TL; DR\\nWe chose lerna with pnpm.\\n:::\\n\\n### The pain of inertia\\n\\nIt was July 2021. I started with `yarn@1.x` since I\u2019ve been using it for a long time. Yarn was fast, but soon I met several issues with Yarn Workspaces. E.g., [not hoisting dependencies correctly](https://github.com/yarnpkg/yarn/issues/7572), and tons of issues are tagged with \u201c[fixed in modern](https://github.com/yarnpkg/yarn/issues?q=label%3Afixed-in-modern+)\u201d, which redirects me to the v2 ([berry](https://github.com/yarnpkg/berry)).\\n\\n\u201cOkay fine I\u2019m upgrading now.\u201d I stopped struggling with v1 and started to migrate. But the long [migration guide](https://yarnpkg.com/getting-started/migration) of berry frightened me, and I gave up after several failed tries.\\n\\n### It just works\\n\\nSo the research about package managers began. I was absorbed by `pnpm` after a trial: fast as yarn, native monorepo support, similar commands to `npm`, hard links, etc. Most importantly, it just works. As a developer who wants to get started with a product but NOT develop a package manager, I just wanted to add some dependencies and start the project without knowing how a package manager works or any other fancy concepts.\\n\\nBased on the same idea, we chose an old friend `lerna` for executing commands across the packages and publishing workspace packages.\\n\\n:::info\\nNow pnpm has a -w option to run commands in the workspace root and --filter for filtering. Thus you can probably replace lerna with a more dedicated package publishing CLI.\\n:::\\n\\n## Defining package scopes\\n\\nIt\u2019s hard to clearly figure out the final scope of each package in the beginning. Just start with your best try according to the status quo, and remember you can always refactor during development.\\n\\nOur [initial structure](https://github.com/logto-io/logto/tree/af7e6ccd83723d623555dafa4650e115fa795838/packages) contains four packages:\\n\\n- `core`: the backend monolith service.\\n- `phrases`: i18n key \u2192 phrase resources.\\n- `schemas`: the database and shared TypeScript schemas.\\n- `ui`: a web SPA that interacts with `core`.\\n\\n## Tech stack for fullstack\\n\\nSince we are embracing the JavaScript ecosystem and using TypeScript as our main programming language, a lot of choices are straightforward (based on my preference \ud83d\ude0a):\\n\\n- `koajs` for the backend service (core): I had a hard experience using `async/await` in `express`, so I decided to use something with native support.\\n- `i18next/react-i18next` for i18n (phrases/ui): like its simplicity of APIs and good TypeScript support.\\n- `react` for SPA (ui): Just personal preference.\\n\\n### How about schemas?\\n\\nSomething is still missing here: database system and schema &lt;-&gt; TypeScript definition mapping.\\n\\n#### General v.s. opinionated\\n\\nAt that point, I tried two popular approaches:\\n\\n- Use ORM with a lot of decorators.\\n- Use a query builder like Knex.js.\\n\\nBut both of them produce a strange feeling during previous development:\\n\\n- For ORM: I\u2019m not a fan of decorators, and another abstract layer of the database causes more learning effort and uncertainty for the team.\\n- For query builder: It\u2019s like writing SQL with some restrictions (in a good way), but it\u2019s not actual SQL. Thus we need to use `.raw()` for raw queries in many scenarios.\\n\\nThen I saw this article: \u201c[Stop using Knex.js: Using SQL query builder is an anti-pattern](https://gajus.medium.com/stop-using-knex-js-and-earn-30-bf410349856c)\u201d. The title looks aggressive, but the content is great. It strongly reminds me that \u201cSQL is a programming language\u201d, and I realized I could write SQL directly (just like CSS, how could I miss this!) to leverage the native language and database features instead of adding another layer and reducing the power.\\n\\nIn conclusion, I decided to stick with Postgres and [Slonik](https://github.com/gajus/slonik) (an open-source Postgres client), as the article states:\\n\\n> \u2026the benefit of allowing user to choose between the different database dialects is marginal and the overhead of developing for multiple databases at once is significant.\\n\\n#### SQL &lt;-&gt; TypeScript\\n\\nAnother advantage of writing SQL is we can easily use it as the single source of truth of TypeScript definitions. I wrote a [code generator](https://github.com/logto-io/logto/tree/af7e6ccd83723d623555dafa4650e115fa795838/packages/schemas/src/gen) to transpile SQL schemas to TypeScript code that we\u2019ll use in our backend, and the result looks not bad:\\n\\n```tsx\\n// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\\n\\nimport { OidcClientMetadata } from \'../foundations\';\\n\\nexport type OidcClient = {\\n  clientId: string;\\n  metadata: OidcClientMetadata;\\n  createdAt: number;\\n};\\n// ...\\n```\\n\\nWe can even connect `jsonb` with a TypeScript type and process type validation in the backend service if needed.\\n\\n:::note \ud83e\udd14 Why not use TypeScript as the SSOT?\\nIt\u2019s a plan I\u2019ve thought of. It sounds attractive initially, but SQL will precisely describe database schemas and keep the flow in one direction (see the following section) instead of using TypeScript and then \u201ctranspile back\u201d to SQL.\\n:::\\n\\n### Result\\n\\nThe final dependency structure looks like:\\n\\n```mermaid\\ngraph TD\\n  database[Postgres Database] --\x3e Schemas\\n  subgraph Monorepo\\n\\t  Phrases --\x3e Core\\n\\t  Phrases --\x3e UI\\n\\t  Schemas --\x3e Core\\n\\t  Schemas --\x3e UI\\n  end\\n```\\n\\nYou may notice it\u2019s a one-direction diagram, which greatly helped us to keep a clear architecture and the ability to expand while the project grows. Plus, the code is (basically) all in TypeScript.\\n\\n## Dev experience\\n\\n### Package and config sharing\\n\\n#### Internal dependencies\\n\\n`pnpm` and `lerna` are doing an awesome job on internal workspace dependencies. We use the command below in the project root to add sibling packages:\\n\\n```bash\\nlerna add --scope=@logto/core @logto/schemas\\n```\\n\\nIt will add `@logto/schemas` as a dependency to `@logto/core`. While keeping the semantic version in `package.json` of your internal dependencies, `pnpm` can also correctly link them in `pnpm-lock.yaml`. The result will look like this:\\n\\n```json\\n// packages/core/pacakge.json\\n{\\n  \\"dependencies\\": {\\n    \\"@logto/schemas\\": \\"^1.0.0-beta.3\\"\\n  }\\n}\\n```\\n\\n```yaml\\n# pnpm-lock.yaml\\npackages/core:\\n  dependencies:\\n    \'@logto/schemas\': link:../schemas\\n```\\n\\n#### Config sharing\\n\\nWe treat every package in monorepo \u201cindependent\u201d. Thus we can use the standard approach for config sharing, which covers `tsconfig`, `eslintConfig`, `prettier`, `stlyelint`, and `jest-config`. See [this project](https://github.com/logto-io/logto/tree/6327eb6c577cdf36c8f44b55bac8195f7d6a6335/packages/console) for example.\\n\\n### Code, lint, and commit\\n\\nI use VSCode for daily development, and in short, nothing is different when the project is configured properly:\\n\\n- ESLint and Stylelint work normally.\\n    - If you are using VSCode ESLint plugin, add the VSCode settings below to make it honors the per-package ESLint config (replace the value of `pattern` with your own):\\n    \\n    ```json\\n    {\\n    \\t\\"eslint.workingDirectories\\": [\\n    \\t  {\\n    \\t    \\"pattern\\": \\"./packages/*\\"\\n    \\t  }\\n    \\t]\\n    }\\n    ```\\n    \\n- husky, commitlint, and lint-staged work as expected.\\n\\n### Compiler and proxy\\n\\nWe are using different compilers for frontend and backend: `parceljs` for UI (React) and `tsc` for all other pure TypeScript packages. I strongly recommend you to try `parceljs` if you haven\u2019t. It\u2019s a real \u201czero-config\u201d compiler that gracefully handles different file types.\\n\\nParcel hosts its own frontend dev server, and the production output is just static files. Since we\u2019d like to mount APIs and SPA under the same origin to avoid CORS issues, the strategy below works:\\n\\n- In dev environment, use a simple HTTP proxy to redirect the traffic to the Parcel dev server.\\n- In production, serve static files directly.\\n\\nYou can find the frontend middleware function implementation [here](https://github.com/logto-io/logto/blob/6327eb6c577cdf36c8f44b55bac8195f7d6a6335/packages/core/src/middleware/koa-spa-proxy.ts).\\n\\n### Watch mode\\n\\nWe have a `dev` script in `package.json` for each package that watches the file changes and re-compile when needed. Thanks to `lerna`, things become easy using `lerna exec` to run package scripts in parallel. The root script will look like this:\\n\\n```yaml\\n\\"dev\\": \\"lerna --scope=@logto/{core,phrases,schemas,ui} exec -- pnpm dev\\"\\n```\\n\\n### Summary\\n\\nIdeally, only two steps for a new engineer/contributor to get started:\\n\\n1. Clone the repo\\n2. `pnpm i && pnpm dev`\\n\\n## Closing notes\\n\\nOur team has been developing under this approach for one year, and we are pretty happy with it. Visit our [GitHub repo](https://github.com/logto-io/logto) to see the latest shape of the project. To wrap up:\\n\\n**Pains**\\n\\n- Need to be familiar with the JS/TS ecosystem\\n- Need to choose the right package manager\\n- Require some additional one-time setup\\n\\n**Gains**\\n\\n- Develop and maintain the whole project in one repo\\n- Simplified coding skill requirements\\n- Shared code styles, schemas, phrases, and utilities\\n- Improved communication efficiency\\n    - No more questions like: What\u2019s the API definition?\\n    - All engineers are talking in the same programming language\\n- CI/CD with ease\\n    - Use the same toolchain for building, testing, and publishing\\n\\nThis article remains several topics uncovered: Setting up the repo from scratch, adding a new package, leveraging GitHub Actions for CI/CD, etc. It\u2019ll be too long for this article if I expand each of them. Feel free to comment and let me know which topic you\u2019d like to see in the future."}]}')}}]);