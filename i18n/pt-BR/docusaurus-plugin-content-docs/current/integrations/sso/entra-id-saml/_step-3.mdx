import azureAdDefaultAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_default_attribute_mapping.webp';
import azureAdLogtoAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_logto_attribute_mapping.webp';

Logto fornece uma maneira flexível de mapear os atributos de usuário retornados do IdP para os atributos de usuário no Logto. Logto sincronizará os seguintes atributos de usuário do IdP por padrão:

- id: O identificador único do usuário. Logto lerá a reivindicação `nameID` da resposta SAML como o id de identidade SSO do usuário.
- email: O endereço de email do usuário. Logto lerá a reivindicação `email` da resposta SAML como o email principal do usuário por padrão.
- name: O nome do usuário.

Você pode gerenciar a lógica de mapeamento de atributos de usuário tanto no lado do Azure AD quanto no lado do Logto.

1. Mapear os atributos de usuário do AzureAD para os atributos de usuário do Logto no lado do Logto.

   Visite a seção `Attributes & Claims` do seu aplicativo SSO do Azure AD.

   Copie os seguintes nomes de atributos (com prefixo de namespace) e cole-os nos campos correspondentes no Logto.

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` (Recomendação: atualize este valor de atributo para `user.displayname` para uma melhor experiência do usuário)

<img src={azureAdDefaultAttributeMappingImage} alt="Mapeamento de atributos padrão do Azure AD" />

1. Mapear os atributos de usuário do AzureAD para os atributos de usuário do Logto no lado do AzureAD.

   Visite a seção `Attributes & Claims` do seu aplicativo SSO do Azure AD.

   Clique em `Edit`, e atualize os campos `Additional claims` com base nas configurações de atributos de usuário do Logto:

   - atualize o valor do nome da reivindicação com base nas configurações de atributos de usuário do Logto.
   - remova o prefixo de namespace.
   - clique em `Save` para continuar.

   Deve terminar com as seguintes configurações:

<img src={azureAdLogtoAttributeMappingImage} alt="Mapeamento de atributos Azure AD_Logto" />

Você também pode especificar atributos de usuário adicionais no lado do Azure AD. Logto manterá um registro dos atributos de usuário originais retornados do IdP no campo `sso_identity` do usuário.
