### Opcional: lidar com alteração de permissões do usuário \{#optional-handle-user-permission-change}

As permissões dos usuários podem mudar a qualquer momento. Como o Logto emite JWTs para RBAC, as atualizações de permissões só aparecem em tokens recém-emitidos e nunca modificam JWTs existentes.

:::info Regra de subconjunto de escopo
Um token de acesso (Access token) só pode incluir escopos (Scopes) que foram solicitados no fluxo de autorização OAuth original.
Mesmo que um usuário obtenha novas permissões (Permissions), o token emitido posteriormente só pode conter um subconjunto dos escopos originalmente solicitados.
Para acessar escopos recém-concedidos que não faziam parte da solicitação inicial, o cliente deve executar um novo fluxo de autorização.
:::

#### Permissões reduzidas \{#downscoped-permissions}

Quando um usuário perde permissões:

- Tokens recém-emitidos refletem imediatamente os escopos reduzidos.
- JWTs existentes mantêm os escopos antigos até expirarem.
- Sua API deve sempre validar os escopos e depender de tempos de vida curtos para os tokens.

Se você precisar de reações mais rápidas, implemente seu próprio sinal para informar aos clientes que eles devem atualizar seus tokens.

#### Permissões ampliadas \{#enlarged-permissions}

{props.type === "global" && <p>Para recursos de API globais, quando um usuário ganha permissões, as permissões ampliadas NÃO aparecerão através do refresh. O cliente deve realizar um novo fluxo de autorização OAuth para obter um token que inclua os novos escopos. Isso pode acontecer silenciosamente se o usuário tiver uma sessão Logto ativa.</p>}

{props.type === "organization" && <p>Para tokens de organização, quando um usuário ganha permissões, as permissões ampliadas aparecerão na próxima emissão (refresh ou solicitação de token). Ainda é necessário um novo token, mas não é preciso uma reautenticação completa, a menos que os novos escopos excedam o conjunto solicitado originalmente.</p>}

#### Recomendações \{#recommendations}

- Valide os escopos em sua API em todas as chamadas.
- Mantenha a expiração dos tokens curta.
- Adicione notificações opcionais se precisar de propagação imediata de alterações de permissões.
