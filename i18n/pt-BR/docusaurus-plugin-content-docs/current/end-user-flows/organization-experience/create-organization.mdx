---
sidebar_position: 3
---

# Criar organização

Imagine que você está construindo um [aplicativo multi-inquilino](https://auth.wiki/multi-tenancy) (por exemplo, um aplicativo SaaS multi-inquilino) que atende muitos clientes, e cada cliente possui um inquilino dedicado.

As organizações geralmente são criadas quando:

1. Novos clientes se cadastram e criam tanto uma conta quanto um inquilino para seu negócio.
2. Usuários existentes podem criar uma nova organização dentro do aplicativo.

<img src="/img/assets/new-account-creates-org.png" alt="Nova conta cria organização" />
<img src="/img/assets/existing-user-creates-org.png" alt="Usuário existente cria organização" />

## Implementar a criação de organização \{#implement-organization-creation}

Existem duas maneiras de criar organizações para seu aplicativo.

### Criar via Logto Console \{#create-via-logto-console}

Crie organizações manualmente na interface do Logto Console. Vá para <CloudLink to="/organizations">Console > Organizações (Organizations)</CloudLink> para criar organizações, atribuir membros e papéis, e personalizar a experiência de login da organização.

Crie um [modelo de organização](/authorization/organization-template) para criar em lote organizações semelhantes que compartilham os mesmos papéis e permissões.

### Criar via Logto Management API \{#create-via-logto-management-api}

O console é ótimo para configuração manual, mas a maioria dos aplicativos permite que os usuários finais se autoatendam—criem e gerenciem organizações diretamente no seu aplicativo. Para isso, implemente esses recursos com o Logto Management API.

:::note

Se você é novo no Logto Management API ou ainda não leu a introdução básica sobre o uso do Logto Management API para experiência de organização, leia estes primeiro:

<Url href="/end-user-flows/organization-experience/setup-app-service-with-management-api">
  Configure seu serviço de aplicativo com o Logto Management API
</Url>
<Url href="/concepts/core-service/#management-api">Management API</Url>
<Url href="/integrate-logto/interact-with-management-api">Interaja com o Management API</Url>

:::

Assuma que seu backend está conectado ao Logto Management API via o mecanismo máquina para máquina (M2M), e você já obteve um token de acesso M2M.

Crie uma organização com o Management API ([referências da API](https://openapi.logto.io/operation/operation-createorganization)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}'
```

Depois, adicione o usuário como membro da organização ([referência da API](https://openapi.logto.io/operation/operation-addorganizationusers)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"userIds":["string"]}'
```

Opcionalmente, atribua papéis específicos da organização ao usuário ([referência da API](https://openapi.logto.io/operation/operation-assignorganizationrolestousers)).

Confira as [especificações completas da API](https://openapi.logto.io/group/endpoint-organizations) para mais detalhes.

Envolva essas chamadas em sua própria camada de API. Quando os usuários realizarem a ação de “criar organização” em seu aplicativo, valide a solicitação verificando suas permissões e, em seguida, chame o Logto Management API para concluir a operação.

## Validar o token de organização nas solicitações do usuário \{#validating-organization-token-in-user-request}

No seu aplicativo, quando os usuários realizam ações no contexto de uma organização, eles devem usar um token de organização em vez de um token de acesso comum. O token de organização é um [JWT](https://auth.wiki/jwt) que contém permissões da organização. Assim como qualquer [token de acesso](https://auth.wiki/access-token), você pode decodificar as reivindicações e verificar a reivindicação "scope" para aplicar permissões.

Veja <Url href="/authorization">Autorização (Authorization)</Url> para mais sobre cenários de autorização e como validar tokens de organização.
