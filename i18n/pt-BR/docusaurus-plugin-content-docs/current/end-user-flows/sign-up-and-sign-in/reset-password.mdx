---
sidebar_position: 4
---

# Redefinir senha

O recurso de recuperação de senha será automaticamente habilitado para você quando houver um [Conector de Email](/connectors/email-connectors) ou [Conector de SMS](/connectors/sms-connectors) válido configurado. O usuário pode redefinir sua senha fornecendo o endereço de email ou número de telefone registrado.

## Esqueceu a senha para recuperação de conta \{#forgot-password-for-account-recovery}

Uma vez que o recurso de redefinição de senha esteja habilitado, um botão de link "Esqueceu a senha" será exibido abaixo do formulário de login. Os usuários podem clicar no link "Esqueceu a senha" para iniciar o processo de redefinição de senha.

:::note
Não está vendo o link "Esqueceu a senha"? Certifique-se de que você tem um **Conector de Email** ou **Conector de SMS** válido configurado.
:::

1. **Visite a página de login**: O usuário acessa a página de login.
2. **Clique no link Esqueceu a senha**: O usuário clica no link "Esqueceu a senha".
3. **Digite email / telefone**: Após clicar no link "Esqueceu a senha", o usuário será redirecionado para uma nova página onde poderá inserir seu endereço de email ou número de telefone registrado.
4. **Enviar código de verificação**: O Logto enviará um código de verificação para o endereço de email ou número de telefone fornecido pelo usuário e redirecionará para a página de verificação do código.
5. **Digite o código de verificação**: O usuário insere o código de verificação recebido em seu email ou telefone. O Logto verificará o código e a identidade do usuário associado ao endereço de email ou número de telefone.
6. **Digite a nova senha**: O usuário será solicitado a inserir uma nova senha assim que o código de verificação for verificado com sucesso.
7. **Redefinição de senha bem-sucedida:** Se a senha fornecida atender aos requisitos da política de senha, a senha será atualizada com sucesso.
8. **Redirecionar para a página de login**: O usuário será redirecionado para a página de login para acessar com a nova senha.

<img src="/img/assets/reset-password.png" alt="Fluxo de redefinição de senha" />

## Atualizar senha após login \{#update-password-after-sign-in}

Usuários autenticados podem alterar (ou definir inicialmente) sua senha através da experiência de configurações de conta dentro do seu aplicativo. Veja [Configurações da conta](/end-user-flows/account-settings/by-account-api#update-users-password) para saber como construir isso com a Account API.

## Verificar se o usuário possui senha \{#check-if-user-has-a-password}

Os dados do usuário expõem um campo booleano `hasPassword` indicando se o usuário atualmente possui uma credencial de senha armazenada.

Você pode obter `hasPassword` por:

- [Management API](/integrate-logto/interact-with-management-api): ex. `GET /api/users/:id` (incluído no objeto do usuário)
- [Reivindicações personalizadas de token](/developers/custom-token-claims): Injete `hasPassword` em tokens de ID / acesso (assim seu frontend pode ramificar a UI sem uma chamada extra de API)

Depois, chame o endpoint da Account API para definir ou atualizar a senha (veja o guia de configurações da conta para detalhes da requisição). Para usuários que nunca tiveram uma senha, você NÃO precisa (e não deve exigir) o campo de senha antiga.

:::tip

Mesmo que seus métodos de cadastro exijam "Definir uma senha" para registros por email / telefone / nome de usuário, usuários criados através de **login social** puro pulam a criação de senha por padrão para reduzir atrito. Esses usuários terão `hasPassword = false` até que definam uma senha explicitamente depois. Evite forçar a configuração imediata de senha logo após o cadastro social, a menos que seja exigido pelo seu modelo de segurança — prompts contextuais e tardios geralmente convertem melhor.

:::

## Política de senha personalizada \{#custom-password-policy}

Personalize o comprimento da senha, requisitos de caracteres e restrições de palavras para atender às necessidades de segurança do seu negócio enquanto proporciona uma boa experiência ao usuário. Essas configurações podem ser ajustadas na seção <CloudLink to="/security/password-policy">Segurança > Política de senha</CloudLink>. Consulte a documentação de [política de senha](/security/password-policy) para saber mais.

## Perguntas frequentes \{#faqs}

<details>
  <summary>

### Como deslogar um usuário após uma redefinição de senha bem-sucedida? \{#how-to-sign-out-a-user-after-a-successful-password-reset}

</summary>

Assine o evento `PostResetPassword` do [webhook](/developers/webhooks/webhooks-events#user-interaction-hook-events) para receber uma notificação quando um usuário redefinir sua senha com sucesso. Você pode então acionar uma ação de [logout](/end-user-flows/sign-out) para invalidar a sessão atual do usuário e redirecioná-lo para a página de login.

</details>

<details>
  <summary>

### Como implementar o fluxo de redefinição de senha na minha interface personalizada? \{#how-to-implement-the-password-reset-flow-on-my-custom-ui}

</summary>

Você pode implementar seu próprio fluxo de redefinição de senha usando a **Management API** e a **Account API** do Logto. Confira [configurações da conta](/end-user-flows/account-settings/) para mais detalhes.

</details>

<details>
  <summary>

### Como posso enviar um link de redefinição de senha para o email do usuário? \{#how-can-i-send-a-password-reset-link-to-the-users-email}

</summary>

Você pode criar um endpoint de redefinição de senha auto-hospedado e utilizar o SDK do Logto para iniciar uma solicitação de login com [`first_screen`](/end-user-flows/authentication-parameters/first-screen) definido como `reset-password`. Isso redirecionará o usuário diretamente para a página de redefinição de senha.

</details>
