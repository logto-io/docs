---
sidebar_position: 3
---

# Organisation erstellen

Stell dir vor, du baust eine [Multi-Tenant-App](https://auth.wiki/multi-tenancy) (z. B. eine Multi-Tenant-SaaS-App), die viele Kunden bedient, wobei jeder Kunde einen eigenen Tenant besitzt.

Organisationen werden typischerweise erstellt, wenn:

1. Neue Kunden sich registrieren und sowohl ein Konto als auch einen Tenant für ihr Unternehmen erstellen.
2. Bestehende Benutzer innerhalb der App eine neue Organisation erstellen können.

<img src="/img/assets/new-account-creates-org.png" alt="Neues Konto erstellt Organisation" />
<img
  src="/img/assets/existing-user-creates-org.png"
  alt="Bestehender Benutzer erstellt Organisation"
/>

## Organisationserstellung implementieren \{#implement-organization-creation}

Es gibt zwei Möglichkeiten, Organisationen für deine App zu erstellen.

### Erstellung über Logto Console \{#create-via-logto-console}

Erstelle Organisationen manuell in der Logto Console UI. Gehe zu <CloudLink to="/organizations">Console > Organizations</CloudLink>, um Organisationen zu erstellen, Mitglieder und Rollen zuzuweisen und die Anmeldeerfahrung der Organisation anzupassen.

Erstelle eine [Organisation-Vorlage](/authorization/organization-template), um ähnliche Organisationen, die die gleichen Rollen und Berechtigungen teilen, im Batch zu erstellen.

### Erstellung über Logto Management API \{#create-via-logto-management-api}

Die Console ist großartig für die manuelle Einrichtung, aber die meisten Apps ermöglichen es Endbenutzern, sich selbst zu bedienen – Organisationen direkt in deiner App zu erstellen und zu verwalten. Um dies zu ermöglichen, implementiere diese Funktionen mit der Logto Management API.

:::note

Wenn du neu bei der Logto Management API bist oder die grundlegende Einführung zur Nutzung der Logto Management API für die Organisationserfahrung noch nicht gelesen hast, lies zuerst diese:

<Url href="/end-user-flows/organization-experience/setup-app-service-with-management-api">
  Richte deinen App-Service mit der Logto Management API ein
</Url>
<Url href="/concepts/core-service/#management-api">Management API</Url>
<Url href="/integrate-logto/interact-with-management-api">Interaktion mit der Management API</Url>

:::

Angenommen, dein Backend ist über den Maschine-zu-Maschine (M2M)-Mechanismus mit der Logto Management API verbunden und du hast ein M2M-Zugangstoken erhalten.

Erstelle eine Organisation mit der Management API ([API-Referenzen](https://openapi.logto.io/operation/operation-createorganization)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}'
```

Füge dann den Benutzer als Mitglied der Organisation hinzu ([API-Referenz](https://openapi.logto.io/operation/operation-addorganizationusers)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"userIds":["string"]}'
```

Optional kannst du dem Benutzer bestimmte Organisationsrollen zuweisen ([API-Referenz](https://openapi.logto.io/operation/operation-assignorganizationrolestousers)).

Sieh dir die [vollständigen API-Spezifikationen](https://openapi.logto.io/group/endpoint-organizations) für weitere Details an.

Verpacke diese Aufrufe in deiner eigenen API-Schicht. Wenn Benutzer in deiner App die Aktion „Organisation erstellen“ ausführen, validiere die Anfrage, indem du ihre Berechtigungen prüfst, und rufe dann die Logto Management API auf, um den Vorgang abzuschließen.

## Organisationstoken in Benutzeranfragen validieren \{#validating-organization-token-in-user-request}

In deiner App müssen Benutzer, wenn sie Aktionen im Kontext einer Organisation ausführen, ein Organisationstoken anstelle eines regulären Zugangstokens verwenden. Das Organisationstoken ist ein [JWT](https://auth.wiki/jwt), das Organisationsberechtigungen enthält. Wie jedes [Zugangstoken (Access token)](https://auth.wiki/access-token) kannst du die Ansprüche (Claims) dekodieren und den "scope"-Anspruch überprüfen, um Berechtigungen durchzusetzen.

Siehe <Url href="/authorization">Autorisierung (Authorization)</Url> für weitere Informationen zu Autorisierungsszenarien und wie du Organisationstokens validierst.
