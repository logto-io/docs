---
sidebar_position: 4
---

# Persönlicher Zugriffstoken

Persönliche Zugriffstokens (PATs) bieten eine sichere Möglichkeit für Benutzer, einen [Zugangstoken (Access token)](https://auth.wiki/access-token) zu gewähren, ohne ihre Zugangsdaten und eine interaktive Anmeldung zu verwenden. Dies ist nützlich für CI / CD, Skripte oder Anwendungen, die programmatisch auf Ressourcen zugreifen müssen.

## Verwaltung persönlicher Zugriffstokens \{#managing-personal-access-tokens}

### Über die Konsole \{#using-console}

Du kannst persönliche Zugriffstokens auf der Seite "Benutzerdetails" der <CloudLink to="/users">Konsole > Benutzerverwaltung</CloudLink> verwalten. In der Karte "Authentifizierung (Authentication)" siehst du die Liste der persönlichen Zugriffstokens und kannst neue erstellen.

### Über die Management API \{#using-management-api}

Nach der Einrichtung der [Management API](/integrate-logto/interact-with-management-api/) kannst du die [API-Endpunkte](https://openapi.logto.io/operation/operation-listuserpersonalaccesstokens) verwenden, um persönliche Zugriffstokens zu erstellen, aufzulisten und zu löschen.

## PATs verwenden, um Zugangstokens zu gewähren \{#use-pats-to-grant-access-tokens}

Nach dem Erstellen eines PAT kannst du ihn verwenden, um Zugangstokens für deine Anwendung über den Token-Austausch-Endpunkt zu gewähren.

:::tip Tokenfluss-Äquivalenz

Mit PATs erhaltene Zugangstokens funktionieren **identisch** wie Tokens, die über den Standard-`refresh_token`-Flow erhalten werden. Das bedeutet:

- **Organisationskontext**: Mit PAT erhaltene Tokens unterstützen die gleichen Organisationsberechtigungen und Berechtigungen (Scopes) wie Refresh-Token-Flows
- **Autorisierungsflow**: Du kannst mit PAT ausgetauschte Zugangstokens für [Organisationsberechtigungen](/authorization/organization-permissions) und [organisationsbezogene API-Ressourcen](/authorization/organization-level-api-resources) verwenden
- **Tokenvalidierung**: Die gleiche Validierungslogik gilt – nur der anfängliche Grant-Typ unterscheidet sich

Wenn du mit Organisationen arbeitest, sind die Zugriffsmuster und Berechtigungen gleich, unabhängig davon, ob du PAT oder Refresh-Tokens verwendest.

:::

### Anfrage \{#request}

Die Anwendung stellt eine [Token-Austauschanfrage](https://auth.wiki/authorization-code-flow#token-exchange-request) an den [Token-Endpunkt](/integrate-logto/application-data-structure#token-endpoint) des Tenants mit einem speziellen Grant-Typ über die HTTP-POST-Methode. Die folgenden Parameter werden im HTTP-Request-Entity-Body im Format `application/x-www-form-urlencoded` übergeben.

1. `client_id`: ERFORDERLICH. Die Client-ID der Anwendung.
2. `grant_type`: ERFORDERLICH. Der Wert dieses Parameters muss `urn:ietf:params:oauth:grant-type:token-exchange` sein und zeigt an, dass ein Token-Austausch durchgeführt wird.
3. `resource`: OPTIONAL. Der Ressourcenindikator, wie bei anderen Token-Anfragen.
4. `scope`: OPTIONAL. Die angeforderten Berechtigungen (Scopes), wie bei anderen Token-Anfragen.
5. `subject_token`: ERFORDERLICH. Das PAT des Benutzers.
6. `subject_token_type`: ERFORDERLICH. Der Typ des im Parameter `subject_token` bereitgestellten Sicherheitstokens. Der Wert dieses Parameters muss `urn:logto:token-type:personal_access_token` sein.

### Antwort \{#response}

Wenn die Token-Austauschanfrage erfolgreich ist, gibt der Token-Endpunkt des Tenants einen Zugangstoken zurück, das die Identität des Benutzers repräsentiert. Die Antwort enthält die folgenden Parameter im HTTP-Response-Entity-Body im Format `application/json`.

1. `access_token`: ERFORDERLICH. Das Zugangstoken des Benutzers, das wie bei anderen Token-Anfragen wie `authorization_code` oder `refresh_token` ist.
2. `issued_token_type`: ERFORDERLICH. Der Typ des ausgegebenen Tokens. Der Wert dieses Parameters muss `urn:ietf:params:oauth:token-type:access_token` sein.
3. `token_type`: ERFORDERLICH. Der Typ des Tokens. Der Wert dieses Parameters muss `Bearer` sein.
4. `expires_in`: ERFORDERLICH. Die Lebensdauer des Zugangstokens in Sekunden.
5. `scope`: OPTIONAL. Die Berechtigungen (Scopes) des Zugangstokens.

### Beispiel für einen Token-Austausch \{#example-token-exchange}

Für traditionelle Webanwendungen mit App-Secret:

```
POST /oidc/token HTTP/1.1
Host: tenant.logto.app
Content-Type: application/x-www-form-urlencoded
Authorization: Basic <base64(app-id:app-secret)>

grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Atoken-exchange
&resource=http://my-api.com
&scope=read
&subject_token=pat_W51arOqe7nynW75nWhvYogyc
&subject_token_type=urn%3Alogto%3Atoken-type%3Apersonal_access_token
```

Für Single-Page- oder native Anwendungen ohne App-Secret:

```
POST /oidc/token HTTP/1.1
Host: tenant.logto.app
Content-Type: application/x-www-form-urlencoded

client_id=your-app-id
&grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Atoken-exchange
&resource=http://my-api.com
&scope=read
&subject_token=pat_W51arOqe7nynW75nWhvYogyc
&subject_token_type=urn%3Alogto%3Atoken-type%3Apersonal_access_token
```

```
HTTP/1.1 200 OK
Content-Type: application/json

{
  "access_token": "eyJhbGci...zg",
  "token_type": "Bearer",
  "expires_in": 3600,
  "scope": "read"
}
```

Wenn du dann das Zugangstoken mit dem [JWT Decoder](https://logto.io/jwt-decoder) dekodierst, erhältst du folgendes Beispiel für ein Zugangstoken-Payload:

```json
{
  "jti": "VovNyqJ5_tuYac89eTbpF",
  "sub": "rkxl1ops7gs1",
  "iat": 1756908403,
  "exp": 1756912003,
  "scope": "read",
  "client_id": "your-app-id",
  "iss": "https://tenant-id.logto.app/oidc",
  "aud": "http://my-api.com"
}
```

## Verwandte Ressourcen \{#related-resources}

<Url href="https://blog.logto.io/api-authentication-with-personal-access-token">
  Was ist ein persönlicher Zugriffstoken? Wann sollte ich persönliche Zugriffstokens verwenden?
</Url>

<Url href="https://blog.logto.io/pat-and-api-keys">
  Persönliche Zugriffstokens, Maschine-zu-Maschine-Authentifizierung und API-Schlüssel: Definition
  und reale Anwendungsfälle
</Url>
