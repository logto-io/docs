---
id: custom-domain
title: Benutzerdefinierte Domain
sidebar_position: 4
---

# Benutzerdefinierte Domain

Dein Logto-Mandant verfügt standardmäßig über eine kostenlose Domain `{{tenant-id}}.app.logto`. Du kannst jedoch das Benutzererlebnis und die Markenbekanntheit steigern, indem du eine benutzerdefinierte Domain wie `auth.example.com` verwendest.

Deine benutzerdefinierte Domain wird für mehrere Funktionen genutzt:

- URLs für [Anmelde- und Registrierungsseite](/end-user-flows/sign-up-and-sign-in)
- [Passkey](/end-user-flows/mfa/webauthn) Verknüpfungs-URLs (Wenn du die Domain änderst, nachdem Benutzer Passkeys verknüpft haben, kann dies deren Authentifizierung blockieren).
- Callback-URIs für [soziale Connectors](/connectors/social-connectors) oder [Enterprise SSO Connectors](/connectors/enterprise-connectors).
- [SDK-Endpunkt](/integrate-logto/application-data-structure#openid-provider-configuration-endpoint) zur Integration von Logto in deine Anwendung.

:::note
Das Ändern der Domain nach der Veröffentlichung deines Dienstes kann zu Problemen führen, da dein Anwendungscode und Integrationen möglicherweise noch auf die alte Domain verweisen. Um einen reibungslosen Übergang zu gewährleisten, **richte deine benutzerdefinierte Domain direkt zu Beginn** bei der Erstellung eines Produktionsmandanten ein.
:::

## Benutzerdefinierte Domain in der Console konfigurieren \{#configure-custom-domain-in-console}

Um eine neue benutzerdefinierte Domain in der Logto Console hinzuzufügen, folge diesen Schritten:

1. Navigiere zu <CloudLink to="/tenant-settings/domains">Console > Einstellungen > Domains</CloudLink>.
2. Gib im Abschnitt "Benutzerdefinierte Domain" deinen Domainnamen ein und klicke auf "Domain hinzufügen".

   <img src="/img/assets/custom-domain-section.jpeg" alt="Domain hinzufügen" />

3. Kopiere den CNAME-Wert aus der Tabelle und gehe zu deinem DNS-Anbieter, um den Eintrag hinzuzufügen.

   <img
     src="/img/assets/custom-domain-processing.jpeg"
     alt="Benutzerdefinierte Domain wird verarbeitet"
   />

4. Warte auf die Verifizierung und den SSL-Prozess.
   1. Wir überprüfen deine Einträge automatisch alle 10 Sekunden, bis die benutzerdefinierte Domain hinzugefügt wurde. Stelle einfach sicher, dass der eingegebene Domainname bzw. die DNS-Einträge korrekt sind.
   2. Die Verifizierung dauert in der Regel nur wenige Minuten, kann aber je nach DNS-Anbieter bis zu 24 Stunden in Anspruch nehmen. Du kannst währenddessen die Seite verlassen.

## Fehlerbehebung \{#troubleshooting}

<details>
<summary>

### SSL-Zertifikatsprobleme \{#ssl-certificate-issues}

</summary>

Wenn du beim Einrichten deiner benutzerdefinierten Domain auf SSL-Zertifikatsprobleme stößt, kann dies mit CAA-Einträgen in deiner DNS-Konfiguration zusammenhängen. CAA-Einträge legen fest, welche Zertifizierungsstellen (CAs) berechtigt sind, Zertifikate für deine Domain auszustellen. Wenn du CAA-Einträge verwendest, musst du sowohl "letsencrypt.org" als auch "pki.goog" autorisieren, damit Logto SSL-Zertifikate ausstellen kann.

Zur Fehlerbehebung und Lösung von SSL-Zertifikatsproblemen im Zusammenhang mit CAA-Einträgen siehe die [Cloudflare-Dokumentation](https://developers.cloudflare.com/ssl/edge-certificates/caa-records/) zu CAA-Einträgen.

</details>

<details>
<summary>

### Fehler "The hostname is associated with a held zone" \{#the-hostname-is-associated-with-a-held-zone-error}

</summary>

Wenn du beim Hinzufügen einer benutzerdefinierten Domain die Fehlermeldung "The hostname is associated with a held zone, please contact the owner to have the hold removed" erhältst, bedeutet dies, dass die Domain bereits in einer Cloudflare-Zone ist und auf den Status "Zone Hold" gesetzt wurde. Weitere Informationen findest du in dieser [Cloudflare-Dokumentation](https://developers.cloudflare.com/fundamentals/setup/account/account-security/zone-holds/).

Um dieses Problem zu lösen, musst du den Zone Hold aufheben. Folge dem obigen Link für Anweisungen, wie du den Zone Hold in Cloudflare aufhebst.

</details>

<details>
<summary>

### Verbindungstimeout (Fehlercode 522) bei Cloudflare-gehosteter Domain \{#cloudflare-522-timeout}

</summary>

Wenn deine Domain bei Cloudflare gehostet wird, deaktiviere den Cloudflare-Proxy für den CNAME-Eintrag.

</details>

<details>
<summary>

### Fehler "Redirect URI does not match" nach Einrichtung der benutzerdefinierten Domain \{#redirect-uri-mismatch}

</summary>

Wenn du nach dem Hinzufügen deiner benutzerdefinierten Domain den Fehler "redirect URI does not match" erhältst, musst du deine SDK-Konfiguration aktualisieren, damit der Endpunkt die benutzerdefinierte Domain verwendet.

**Zum Thema "primäre Domain":**

Es gibt in Logto keine separate Einstellung für eine "primäre Domain". Nach dem Hinzufügen einer benutzerdefinierten Domain bleiben sowohl deine benutzerdefinierte Domain als auch die Standarddomain `{tenant-id}.logto.app` gültig. Die Domain, die du im `endpoint`-Parameter deines SDKs konfigurierst, bestimmt, welche Domain für Authentifizierungsflüsse verwendet wird.

**Lösung:**

Aktualisiere den `endpoint`-Parameter bei der Initialisierung deines SDKs, sodass deine benutzerdefinierte Domain verwendet wird:

```typescript
const client = new LogtoClient({
  endpoint: 'https://auth.example.com', // Verwende deine benutzerdefinierte Domain
  appId: 'your-app-id',
  // ... weitere Optionen
});
```

Überprüfe außerdem, ob die in <CloudLink to="/applications">Console → Anwendungen</CloudLink> registrierten Redirect-URIs mit der verwendeten Domain übereinstimmen.

**Hinweis:** Logto stellt SSL-Zertifikate für deine benutzerdefinierte Domain automatisch bereit und verwaltet sie. Du musst keine eigenen Zertifikate konfigurieren.

</details>

## Benutzerdefinierte Domain verwenden \{#use-custom-domain}

Sobald du deine Einstellungen konfiguriert hast, stehen sowohl dein benutzerdefinierter Domainname als auch der Standard-Logto-Domainname für deinen Mandanten zur Verfügung. Für die Aktivierung des benutzerdefinierten Domainnamens sind jedoch bestimmte Konfigurationen erforderlich.

:::note

In diesem Artikel gehen wir davon aus, dass deine benutzerdefinierte Domain `auth.example.com` ist.

:::

### Aktualisierung des SDK-Endpunkts für Anwendungen \{#updating-the-sdk-endpoint-for-applications}

Passe deinen Initialisierungscode für das Logto SDK an, indem du den Domainnamen des Endpunkts änderst.

```typescript
const client = new LogtoClient({
  ...,// weitere Optionen
  endpoint: 'https://auth.example.com',
});
```

### Auth-Endpunkte für andere Anwendungen anpassen \{#modifying-auth-endpoints-for-other-applications}

Wenn du Anwendungen hast, die nicht das Logto SDK verwenden, musst du deren Auth-Endpunkte aktualisieren.

Du findest die Auth-Endpunkte unter der Well-Known-URL:

```
https://auth.example.com/oidc/.well-known/openid-configuration
```

### Aktualisierung der Callback-URI des Social Connectors \{#updating-the-social-connectors-callback-uri}

Die Callback-URI des Social Connectors wird automatisch aktualisiert, wenn deine Benutzer die benutzerdefinierte Domain verwenden. Du musst jedoch in der Entwicklerkonsole des Social Providers die Callback-URI aktualisieren.

Wenn deine Benutzer die benutzerdefinierte Domain verwenden, wird die Callback-URI des Social Connectors die neue Domain nutzen. Daher musst du in der Entwicklerkonsole des Social Providers die Callback-URI manuell aktualisieren.
