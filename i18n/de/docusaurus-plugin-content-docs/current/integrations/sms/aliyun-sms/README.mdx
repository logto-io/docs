---
slug: /integrations/aliyun-sms
sidebar_label: Aliyun Kurzmitteilung
sidebar_custom_props:
  description: Aliyun bietet Cloud-Computing-Dienste für Online-Unternehmen an.
  logoFilename: 'aliyun.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# SMS-Verifizierung mit Aliyun Short Message Service einrichten

Der offizielle Logto Connector für den Aliyun Short Message Service.

<GuideTip />

## Erste Schritte \{#get-started}

Aliyun ist ein führender Cloud-Service-Anbieter in Asien und bietet viele Cloud-Dienste an, darunter SMS (Short Message Service). Der Aliyun SMS Connector ist ein von Logto bereitgestelltes Plugin, das den Aliyun SMS-Dienst ansteuert. Damit können sich Logto-Endbenutzer per SMS-Verifizierungscode registrieren und bei ihrem Logto-Konto anmelden.

## Short Message Service in der Aliyun SMS-Konsole einrichten \{#set-up-a-short-message-service-in-aliyun-sms-console}

### Aliyun-Konto erstellen \{#create-an-aliyun-account}

Gehe auf die [Aliyun-Website](https://cn.aliyun.com/) und registriere ein Aliyun-Konto, falls du noch keines hast.

### Aliyun Short Message Service aktivieren und konfigurieren \{#enable-and-configure-aliyun-short-message-service}

1. Melde dich mit deinem Aliyun-Konto auf der [Aliyun-Website](https://cn.aliyun.com/) an und gehe zur [SMS-Service-Konsole](https://www.aliyun.com/product/sms).
2. Klicke auf die Schaltfläche „Kostenlos öffnen“ (免费开通) oben links auf der SMS-Service-Seite und beginne mit der Konfiguration.
3. Lies und akzeptiere die „SMS-Service-Aktivierungsvereinbarung“ (短信服务开通条款) und klicke auf „Dienst abonnieren“ (开通服务), um fortzufahren.
4. Du befindest dich nun auf der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview). Gehe je nach Anwendungsfall auf die Schaltfläche „Festlandchina“ (国内消息) oder „Außerhalb Festlandchina“ (国际/港澳台消息) in der Seitenleiste.
5. Füge Signatur und Vorlage gemäß den Richtlinien hinzu und reiche die erforderlichen Materialien oder Informationen zur Überprüfung ein.
   - Denke daran, beim Ausfüllen des Signaturantrags „Verifizierungscode-Nachricht“ (验证码) als „Szenario“ (适用场景) auszuwählen und auch „Verifizierungscode-Nachricht“ (验证码) als „Typ“ (模板类型) bei der Beantragung einer Vorlagenüberprüfung, da wir diese Signaturen und Vorlagen zum Versenden von Verifizierungscodes verwenden. Derzeit unterstützen wir das Versenden von SMS-Nachrichten, die nicht mit Verifizierungscodes zusammenhängen, nicht.
   - Verwende außerdem `{{code}}` als Platzhalter an der Stelle, an der du deinen digitalen Verifizierungscode im Vorlagentext einfügen möchtest.
6. Nachdem du deine SMS-Signatur und Vorlagenanträge eingereicht hast, musst du warten, bis sie wirksam werden. Nun kannst du zur [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview) zurückkehren und eine Test-SMS senden. Wenn deine Signaturen und Vorlagen einsatzbereit sind, kannst du sie direkt ausprobieren; falls sie noch nicht wirksam sind, stellt Aliyun auch Testvorlagen bereit.
   - Möglicherweise musst du vor dem Versenden von Testnachrichten einen kleinen Betrag aufladen.
   - Es kann sein, dass du vor dem Versenden von Testnachrichten eine Test-Telefonnummer binden musst. Weitere Details findest du im Tab „Schnellstart“ (快速学习) in der Seitenleiste der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview).

## Connector-JSON zusammenstellen \{#compose-the-connector-json}

1. Gehe von der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview) aus mit der Maus auf dein Avatar oben rechts und gehe zu „AccessKey-Verwaltung“ (AccessKey 管理) und klicke auf „AccessKey erstellen“ (创建 AccessKey). Nach Abschluss der Sicherheitsüberprüfung erhältst du ein „AccessKey ID“ und „AccessKey Secret“-Paar. Bitte bewahre diese sicher auf.
2. Gehe zu dem Tab „Festlandchina“ (国内消息) oder „Außerhalb Festlandchina“ (国际/港澳台消息), den du gerade besucht hast. Dort findest du „Signatur“ (签名名称) und „Vorlagen-Code“ (模板 CODE) leicht.
   - Wenn du die nur für Tests vorgesehenen Signaturen und Vorlagen verwenden möchtest, gehe stattdessen zum Tab „Schnellstart“ (快速学习). Dort findest du sie unter „Signatur & Vorlagen (nur für Tests)“.
3. Fülle die Einstellungen für den Aliyun SMS Connector aus:
   - Trage in die Felder `accessKeyId` und `accessKeySecret` die Zugangsdaten aus Schritt 1 ein.
   - Trage in das Feld `signName` die „Signatur“ (签名名称) aus Schritt 2 ein. Alle Vorlagen teilen sich diesen Signaturnamen.
   - Du kannst mehrere SMS-Connector-Vorlagen für verschiedene Fälle hinzufügen. Hier ein Beispiel für das Hinzufügen einer einzelnen Vorlage:
     - Trage in das Feld `templateCode`, mit dem du den SMS-Kontext steuerst, den „Vorlagen-Code“ (模板 CODE) aus Schritt 2 ein.
     - Trage in das Feld `usageType` entweder `Register`, `SignIn`, `ForgotPassword` oder `Generic` für verschiedene Anwendungsfälle ein. (`usageType` ist eine Logto-Eigenschaft zur Identifizierung des passenden Anwendungsfalls.) Um alle Benutzerflüsse zu ermöglichen, sind Vorlagen mit den usageTypes `Register`, `SignIn`, `ForgotPassword` und `Generic` erforderlich.
4. „Strikte Überprüfung der Telefon-Region aktivieren“:
   - Aktiviere diese Option, wenn du SMS an ausländische Telefonnummern (außerhalb Festlandchina, z. B. USA, HK usw.) senden musst. Wenn aktiviert, geht der Connector davon aus, dass alle Telefonnummern gültige Regionscodes enthalten (z. B. +1, +852), um zu bestimmen, ob sie zu Festlandchina gehören.
   - **Achtung**: Wenn deine bestehenden Benutzer Telefonnummern ohne Regionscode haben, kann das Aktivieren dieser Option deren Anmeldeprozess beeinflussen. Aktiviere sie nur, wenn du SMS ins Ausland versenden musst.

### Aliyun SMS Connector testen \{#test-aliyun-sms-connector}

Du kannst eine Telefonnummer eingeben und auf „Senden“ klicken, um zu prüfen, ob die Einstellungen funktionieren, bevor du auf „Speichern und Fertig“ klickst.

Das war's. Vergiss nicht, den <MainSiteUrl href="/connectors/sms-connectors/#enable-phone-number-for-end-user-flows">Connector in der Anmeldeerfahrung zu aktivieren</MainSiteUrl>.

### Konfigurationstypen \{#config-types}

| Name            | Typ        |
| --------------- | ---------- |
| accessKeyId     | string     |
| accessKeySecret | string     |
| signName        | string     |
| templates       | Template[] |

| Template-Eigenschaften | Typ         | Enum-Werte                                           |
| ---------------------- | ----------- | ---------------------------------------------------- |
| templateCode           | string      | N/A                                                  |
| usageType              | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |

## Referenzen \{#references}

<Url href="https://dysms.console.aliyun.com/quickstart">Aliyun SMS – Schnellstart</Url>
