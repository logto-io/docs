## Kurznachrichtendienst im Aliyun SMS-Console einrichten \{#set-up-a-short-message-service-in-aliyun-sms-console}

### Aliyun-Konto erstellen \{#create-an-aliyun-account}

Gehe auf die [Aliyun-Website](https://cn.aliyun.com/) und registriere dein Aliyun-Konto, falls du noch keines hast.

### Aliyun Short Message Service aktivieren und konfigurieren \{#enable-and-configure-aliyun-short-message-service}

1. Melde dich mit deinem Aliyun-Konto auf der [Aliyun-Website](https://cn.aliyun.com/) an und gehe zur [SMS-Service-Konsole](https://www.aliyun.com/product/sms).
2. Klicke auf die Schaltfläche „Kostenlos öffnen“ (免费开通) oben links auf der SMS-Service-Seite und beginne mit der Konfiguration.
3. Lies und akzeptiere die „SMS-Service-Aktivierungsvereinbarung“ (短信服务开通条款) und klicke auf „Dienst abonnieren“ (开通服务), um fortzufahren.
4. Du befindest dich nun auf der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview). Gehe je nach Anwendungsfall entweder auf „Festlandchina“ (国内消息) oder „Außerhalb Festlandchina“ (国际/港澳台消息) im Seitenmenü.
5. Füge Signatur und Vorlage gemäß den Richtlinien hinzu und reiche die erforderlichen Materialien oder Informationen zur Überprüfung ein.
   - Denke daran, beim Ausfüllen des Signaturantrags „Verifizierungscode-Nachricht“ (验证码) als „Szenario“ (适用场景) auszuwählen und auch „Verifizierungscode-Nachricht“ (验证码) als „Typ“ (模板类型) bei der Beantragung der Vorlagenüberprüfung, da wir diese Signaturen und Vorlagen zum Versenden von Verifizierungscodes verwenden. Derzeit unterstützen wir das Versenden von SMS-Nachrichten, die nicht mit Verifizierungscodes zusammenhängen, nicht.
   - Verwende außerdem `{{code}}` als Platzhalter an der Stelle, an der du deinen digitalen Verifizierungscode im Vorlagentext einfügen möchtest.
6. Nachdem du deine SMS-Signatur und Vorlage eingereicht hast, musst du warten, bis sie wirksam werden. Jetzt kannst du zur [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview) zurückkehren und eine Test-SMS senden. Wenn deine Signaturen und Vorlagen einsatzbereit sind, kannst du sie direkt ausprobieren; falls sie noch nicht wirksam sind, stellt Aliyun auch Testvorlagen zur Verfügung.
   - Möglicherweise musst du vor dem Versenden von Testnachrichten einen kleinen Betrag aufladen.
   - Es kann auch erforderlich sein, vor dem Versenden von Testnachrichten eine Test-Telefonnummer zu binden. Weitere Details findest du im Tab „Schnellstart“ (快速学习) im Seitenmenü der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview).

## Connector-JSON zusammenstellen \{#compose-the-connector-json}

1. Gehe von der [SMS-Service-Konsole](https://dysms.console.aliyun.com/overview) aus mit der Maus auf dein Avatar oben rechts und gehe zu „AccessKey-Verwaltung“ (AccessKey 管理) und klicke auf „AccessKey erstellen“ (创建 AccessKey). Nach Abschluss der Sicherheitsüberprüfung erhältst du ein Paar aus „AccessKey ID“ und „AccessKey Secret“. Bitte bewahre diese sicher auf.
2. Gehe zum Tab „Festlandchina“ (国内消息) oder „Außerhalb Festlandchina“ (国际/港澳台消息), den du gerade besucht hast. Dort findest du „Signatur“ (签名名称) und „Vorlagen-Code“ (模板 CODE) leicht.
   - Wenn du die nur für Tests vorgesehenen Signaturen und Vorlagen verwenden möchtest, gehe stattdessen zum Tab „Schnellstart“ (快速学习). Dort findest du sie unter „Signatur & Vorlagen (nur für Tests)“.
3. Fülle die Einstellungen des Aliyun SMS Connectors aus:
   - Trage in die Felder `accessKeyId` und `accessKeySecret` das Access-Key-Paar aus Schritt 1 ein.
   - Trage in das Feld `signName` die „Signatur“ (签名名称) aus Schritt 2 ein. Alle Vorlagen teilen sich diesen Signaturnamen.
   - Du kannst mehrere SMS-Connector-Vorlagen für verschiedene Fälle hinzufügen. Hier ein Beispiel für das Hinzufügen einer einzelnen Vorlage:
     - Fülle das Feld `templateCode`, mit dem du den SMS-Kontext steuerst, mit dem „Vorlagen-Code“ (模板 CODE) aus Schritt 2 aus.
     - Fülle das Feld `usageType` mit entweder `Register`, `SignIn`, `ForgotPassword` oder `Generic` für verschiedene Anwendungsfälle aus. (`usageType` ist eine Logto-Eigenschaft zur Identifizierung des passenden Anwendungsfalls.) Um vollständige Benutzerflüsse zu ermöglichen, sind Vorlagen mit den usageTypes `Register`, `SignIn`, `ForgotPassword` und `Generic` erforderlich.

### Aliyun SMS Connector testen \{#test-aliyun-sms-connector}

Du kannst eine Telefonnummer eingeben und auf „Senden“ klicken, um zu prüfen, ob die Einstellungen funktionieren, bevor du auf „Speichern und Fertig“ klickst.

Das war's. Vergiss nicht, den <MainSiteUrl href="/connectors/sms-connectors/#enable-phone-number-sign-up-or-sign-in">Connector in der Anmeldeerfahrung zu aktivieren</MainSiteUrl>.

### Konfigurationstypen \{#config-types}

| Name            | Typ        |
| --------------- | ---------- |
| accessKeyId     | string     |
| accessKeySecret | string     |
| signName        | string     |
| templates       | Template[] |

| Template-Eigenschaften | Typ         | Enum-Werte                                           |
| ---------------------- | ----------- | ---------------------------------------------------- |
| templateCode           | string      | N/A                                                  |
| usageType              | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
