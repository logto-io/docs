## Schritt 1: Erstelle eine GitHub App \{#step-1-create-a-github-app}

Bevor du GitHub als Authentifizierungsanbieter verwenden kannst, musst du eine GitHub App auf GitHub erstellen, um OAuth 2.0-Zugangsdaten zu erhalten.

1. Gehe zu [GitHub](https://github.com/) und melde dich mit deinem Konto an oder erstelle ein neues Konto, falls erforderlich.
2. Navigiere zu [Einstellungen > Entwicklereinstellungen > GitHub Apps](https://github.com/settings/apps).
3. Klicke auf **Neue GitHub App**, um eine neue Anwendung zu registrieren:
   - **Name der GitHub App**: Gib einen eindeutigen Namen für deine App ein. Der Name darf nicht länger als 34 Zeichen sein und muss auf GitHub eindeutig sein.
   - **Homepage-URL**: Gib die Homepage-URL deiner Anwendung ein.
   - **Callback-URL**: Kopiere die **Callback-URI** aus deinem Logto GitHub Connector und füge sie hier ein. Du kannst bei Bedarf mehrere Callback-URLs hinzufügen. Nachdem sich Benutzer mit GitHub angemeldet haben, werden sie hierher mit einem Autorisierungscode weitergeleitet, den Logto zur Vervollständigung der Authentifizierung verwendet.
   - **Benutzerauthorisierungstokens ablaufen lassen**: Lasse dies **aktiviert** (empfohlen). Dies ermöglicht das Ablaufen von Tokens und Auffrischungstokens für erhöhte Sicherheit.
   - **Benutzerauthorisierung (OAuth) während der Installation anfordern**: Optional aktivieren, um Benutzer während der Installation zur Autorisierung deiner App aufzufordern.
   - **Webhook**: Deaktiviere **Aktiv**, wenn du keine Webhook-Ereignisse benötigst. Für reine Authentifizierungsfälle sind Webhooks in der Regel nicht erforderlich.
4. Unter **Berechtigungen** konfiguriere die Berechtigungen, die deine App benötigt (siehe Schritt 2 unten für Details).
5. Unter **Wo kann diese GitHub App installiert werden?** wähle **Beliebiges Konto**, wenn Benutzer aus jedem GitHub-Konto deine App zur Authentifizierung verwenden dürfen.
6. Klicke auf **GitHub App erstellen**, um die GitHub App zu erstellen.

:::note
Im Gegensatz zu OAuth Apps verwenden GitHub Apps fein abgestufte Berechtigungen anstelle von weit gefassten Berechtigungen (Scopes). Du konfigurierst die Berechtigungen im GitHub-Dashboard während der App-Erstellung, und Benutzer gewähren Zugriff auf bestimmte Repositories während der Autorisierung.

Weitere Informationen zur Einrichtung von GitHub Apps findest du unter [Registrieren einer GitHub App](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app).
:::

## Schritt 2: Berechtigungen in GitHub konfigurieren \{#step-2-configure-permissions-in-github}

GitHub Apps verwenden fein abgestufte Berechtigungen anstelle von OAuth-Berechtigungen (Scopes). Du musst die Berechtigungen **im GitHub-Dashboard** beim Erstellen oder Bearbeiten deiner GitHub App konfigurieren. Diese Berechtigungen bestimmen, auf welche Daten deine App zugreifen kann.

### Verständnis der GitHub App-Berechtigungen \{#understanding-github-app-permissions}

Berechtigungen werden in drei Typen unterteilt:

- **Repository-Berechtigungen**: Zugriff auf Ressourcen auf Repository-Ebene (Code, Issues, Pull Requests usw.)
- **Organisationsberechtigungen**: Zugriff auf Ressourcen auf Organisationsebene (Mitglieder, Teams, Projekte usw.)
- **Konto-Berechtigungen**: Zugriff auf Benutzerdaten (E-Mail, Profil, Follower usw.)

Für jede Berechtigung kannst du auswählen:

- **Kein Zugriff**: Die App kann nicht auf diese Ressource zugreifen
- **Nur Lesen**: Die App kann diese Ressource lesen, aber nicht ändern
- **Lesen & Schreiben**: Die App kann diese Ressource lesen und ändern

### Empfohlene Berechtigungen für Authentifizierung \{#recommended-permissions-for-authentication}

Für die grundlegende "Mit GitHub anmelden"-Funktionalität konfiguriere mindestens diese **Konto-Berechtigung**:

| Berechtigung        | Zugriffsebene | Zweck                                                    |
| ------------------- | ------------- | -------------------------------------------------------- |
| **E-Mail-Adressen** | Nur Lesen     | E-Mail-Adresse des Benutzers für Kontoerstellung abrufen |

:::tip
GitHub Apps haben impliziten Zugriff auf das öffentliche Profil, wenn sie im Namen eines Benutzers agieren. Du musst keine explizite Berechtigung für grundlegende Profildaten wie Benutzername, Avatar und öffentliche Profil-URL anfordern.
:::

### Zusätzliche Berechtigungen für API-Zugriff \{#additional-permissions-for-api-access}

Wenn deine Anwendung Zugriff auf GitHub APIs über die Authentifizierung hinaus benötigt, füge die entsprechenden Berechtigungen im GitHub-Dashboard hinzu. Hier einige gängige Beispiele:

| Berechtigungstyp | Berechtigung  | Zugriffsebene                 | Anwendungsfall                                                     |
| ---------------- | ------------- | ----------------------------- | ------------------------------------------------------------------ |
| **Repository**   | Inhalte       | Nur Lesen / Lesen & Schreiben | Zugriff auf Repository-Dateien und Code                            |
| **Repository**   | Issues        | Lesen & Schreiben             | Erstellen und Verwalten von Issues                                 |
| **Repository**   | Pull Requests | Lesen & Schreiben             | Erstellen und Verwalten von Pull Requests                          |
| **Repository**   | Metadaten     | Nur Lesen                     | Zugriff auf Repository-Metadaten (für viele Aktionen erforderlich) |
| **Organisation** | Mitglieder    | Nur Lesen                     | Auflisten von Organisationsmitgliedern                             |
| **Konto**        | Follower      | Nur Lesen                     | Zugriff auf Follower und Gefolgte des Benutzers                    |

Dies ist keine vollständige Liste — GitHub Apps unterstützen viele weitere fein abgestufte Berechtigungen. Siehe [Erforderliche Berechtigungen für GitHub Apps](https://docs.github.com/en/rest/overview/permissions-required-for-github-apps) für die vollständige Übersicht.

:::tip[Wichtiger Unterschied zu OAuth Apps]
Im Gegensatz zu OAuth Apps, bei denen du Berechtigungen (Scopes) im Logto Connector konfigurierst, werden GitHub App-Berechtigungen vollständig im GitHub-Dashboard verwaltet. Du kannst das Feld `Scope` in deinem Logto GitHub Connector leer lassen — es ist nicht erforderlich, da GitHub Apps keine traditionellen OAuth-Berechtigungen verwenden.

Konfiguriere einfach die benötigten Berechtigungen in GitHub, und Benutzer werden während der Autorisierung zur Freigabe aufgefordert.
:::

## Schritt 3: Konfiguriere deinen Logto Connector \{#step-3-configure-your-logto-connector}

Nach dem Erstellen der GitHub App wirst du zur Einstellungsseite weitergeleitet, wo du die Zugangsdaten erhältst.

1. Kopiere auf der Einstellungsseite deiner GitHub App die **Client-ID** und füge sie in das Feld `clientId` in Logto ein.
2. Unter **Client-Geheimnisse** klicke auf **Neues Client-Geheimnis generieren**. Kopiere das generierte Geheimnis und füge es in das Feld `clientSecret` in Logto ein.
3. Klicke in Logto auf **Speichern und Fertig**, um dein Identitätssystem mit GitHub zu verbinden.

:::warning
Bewahre dein Client-Geheimnis sicher auf und veröffentliche es niemals im Client-seitigen Code. GitHub-Client-Geheimnisse können nicht wiederhergestellt werden, falls sie verloren gehen – du musst ein neues generieren.
:::

:::note
Die Client-ID einer GitHub App unterscheidet sich von der App-ID. Stelle sicher, dass du die Client-ID verwendest (auf der Einstellungsseite als "Client ID" angezeigt), nicht die App-ID.
:::

## Schritt 4: Allgemeine Einstellungen \{#step-4-general-settings}

Hier sind einige allgemeine Einstellungen, die die Verbindung zu GitHub nicht blockieren, aber die Authentifizierungserfahrung für Endbenutzer beeinflussen können.

### Profilinformationen synchronisieren \{#sync-profile-information}

Im GitHub Connector kannst du konfigurieren, wie Profilinformationen von GitHub-Benutzerdaten in das Logto-Benutzerprofil synchronisiert werden, einschließlich `name`, `avatar` und `email`. Wähle aus den folgenden Optionen:

- **Nur bei Registrierung synchronisieren**: Profilinformationen werden einmalig abgerufen, wenn sich der Benutzer zum ersten Mal anmeldet.
- **Immer bei Anmeldung synchronisieren**: Profilinformationen werden bei jeder Anmeldung des Benutzers aktualisiert.

### Tokens speichern, um auf GitHub APIs zuzugreifen (Optional) \{#store-tokens-to-access-github-apis-optional}

Wenn du auf GitHub APIs zugreifen und Aktionen mit Benutzerautorisierung durchführen möchtest (entweder über soziale Anmeldung oder Kontoverknüpfung), aktiviere die Token-Speicherung in Logto:

1. Konfiguriere die erforderlichen Berechtigungen in den Einstellungen deiner GitHub App (Schritt 2).
2. Aktiviere **Tokens für dauerhaften API-Zugriff speichern** im Logto GitHub Connector. Logto speichert sowohl das Zugangstoken als auch das Auffrischungstoken sicher im Secret Vault.

:::note
Da GitHub Apps immer Auffrischungstokens ausstellen, speichert Logto beide Tokens automatisch. Das Zugangstoken läuft nach 8 Stunden ab, aber Logto kann das Auffrischungstoken verwenden, um neue Zugangstokens zu erhalten und so einen unterbrechungsfreien API-Zugriff für bis zu 6 Monate sicherstellen.
:::

## Schritt 5: Teste deine Integration (Optional) \{#step-5-test-your-integration-optional}

Bevor du live gehst, teste deine GitHub App-Integration:

1. Verwende den Connector in einem Logto-Entwicklungstenant.
2. Überprüfe, dass sich Benutzer mit GitHub anmelden können.
3. Prüfe, dass Benutzer während der Autorisierung nach den richtigen Berechtigungen gefragt werden.
4. Wenn du die Token-Speicherung aktiviert hast, stelle sicher, dass Zugangstokens (und Auffrischungstokens) korrekt gespeichert werden.
5. Teste API-Aufrufe mit den gespeicherten Tokens, um sicherzustellen, dass die Berechtigungen wie erwartet funktionieren.

GitHub Apps funktionieren sofort mit jedem GitHub-Benutzerkonto – es sind keine Testbenutzer oder App-Freigaben wie bei anderen Plattformen erforderlich. Wenn deine App jedoch in einer Organisation installiert ist, müssen Organisationsbesitzer die Installation möglicherweise genehmigen.
