## Schritt 1: Erstelle eine OAuth-App auf GitHub \{#step-1-create-an-oauth-app-on-github}

Bevor du GitHub als Authentifizierungsanbieter verwenden kannst, musst du eine OAuth-App auf GitHub erstellen, um OAuth 2.0-Zugangsdaten zu erhalten.

1. Gehe zu [GitHub](https://github.com/) und melde dich mit deinem Konto an oder erstelle bei Bedarf ein neues Konto.
2. Navigiere zu [Einstellungen > Entwicklereinstellungen > OAuth-Apps](https://github.com/settings/developers).
3. Klicke auf **Neue OAuth-App**, um eine neue Anwendung zu registrieren:
   - **Anwendungsname**: Gib einen aussagekräftigen Namen für deine App ein.
   - **Homepage-URL**: Gib die Homepage-URL deiner Anwendung ein.
   - **Autorisierungs-Callback-URL**: Kopiere die **Callback-URI** aus deinem Logto GitHub Connector und füge sie hier ein. Nachdem sich Benutzer mit GitHub angemeldet haben, werden sie hierher mit einem Autorisierungscode weitergeleitet, den Logto verwendet, um die Authentifizierung abzuschließen.
   - **Anwendungsbeschreibung**: (Optional) Füge eine kurze Beschreibung deiner App hinzu.
4. Klicke auf **Anwendung registrieren**, um die OAuth-App zu erstellen.

:::note
Wir empfehlen, das Kontrollkästchen **Device Flow aktivieren** nicht zu markieren, da Benutzer, die sich mit GitHub auf mobilen Geräten anmelden, die anfängliche Anmeldeaktion in der GitHub Mobile App bestätigen müssten. Viele GitHub-Nutzer installieren die GitHub Mobile App nicht auf ihren Handys, was den Anmeldevorgang blockieren könnte. Aktiviere dies nur, wenn du erwartest, dass Endbenutzer ihren Anmeldevorgang über die GitHub Mobile App bestätigen. Siehe Details zum [Device Flow](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#device-flow).

Weitere Informationen zum Einrichten von GitHub OAuth-Apps findest du unter [Erstellen einer OAuth-App](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app).
:::

## Schritt 2: Konfiguriere deinen Logto Connector \{#step-2-configure-your-logto-connector}

Nachdem du die OAuth-App in GitHub erstellt hast, wirst du zu einer Detailseite weitergeleitet, auf der du die Client-ID kopieren und ein Client-Geheimnis generieren kannst.

1. Kopiere die **Client-ID** aus deiner GitHub OAuth-App und füge sie in das Feld `clientId` in Logto ein.
2. Klicke in GitHub auf **Neues Client-Geheimnis generieren**, um ein neues Geheimnis zu erstellen, und kopiere und füge es dann in das Feld `clientSecret` in Logto ein.
3. Klicke in Logto auf **Speichern und Fertig**, um dein Identitätssystem mit GitHub zu verbinden.

:::warning
Halte dein Client-Geheimnis sicher und gib es niemals im Client-seitigen Code preis. GitHub-Client-Geheimnisse können nicht wiederhergestellt werden, wenn sie verloren gehen – du musst ein neues generieren.
:::

## Schritt 3: Berechtigungen (Scopes) konfigurieren (Optional) \{#step-3-configure-scopes-optional}

Berechtigungen (Scopes) definieren, welche Zugriffsrechte deine App von den Benutzern anfordert und steuern, auf welche Daten deine App in deren GitHub-Konten zugreifen kann.

Verwende das Feld `Scopes` in Logto, um zusätzliche Berechtigungen von GitHub anzufordern. Wähle je nach Bedarf eine der folgenden Vorgehensweisen:

### Option 1: Keine zusätzlichen API-Berechtigungen benötigt \{#option-1-no-extra-api-scopes-needed}

- Lasse das Feld `Scopes` in deinem Logto GitHub Connector leer.
- Die Standardberechtigung `read:user` wird angefordert, damit Logto grundlegende Benutzerinformationen (z. B. E-Mail, Name, Avatar) korrekt abrufen kann.

### Option 2: Zusätzliche Berechtigungen beim Anmelden anfordern \{#option-2-request-additional-scopes-at-sign-in}

- Durchsuche alle verfügbaren [GitHub-Berechtigungen für OAuth-Apps](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps) und füge nur die Berechtigungen hinzu, die deine App benötigt.
- Gib alle gewünschten Berechtigungen im Feld **Scopes** ein, getrennt durch Leerzeichen.
- Alle hier aufgeführten Berechtigungen überschreiben die Standardwerte, daher immer die Authentifizierungsberechtigung `read:user` einschließen.
- Häufig verwendete zusätzliche Berechtigungen sind:
  - `repo`: Vollständige Kontrolle über private Repositories
  - `public_repo`: Zugriff auf öffentliche Repositories
  - `user:email`: Zugriff auf Benutzer-E-Mail-Adressen
  - `notifications`: Zugriff auf Benachrichtigungen
- Stelle sicher, dass alle Berechtigungen korrekt geschrieben und gültig sind. Eine falsche oder nicht unterstützte Berechtigung führt zu einem "Invalid scope"-Fehler von GitHub.

### Option 3: Schrittweise Berechtigungen später anfordern \{#option-3-request-incremental-scopes-later}

- Nachdem sich der Benutzer angemeldet hat, kannst du bei Bedarf zusätzliche Berechtigungen anfordern, indem du einen föderierten sozialen Autorisierungsfluss erneut initiierst und das gespeicherte Token-Set der Benutzer aktualisierst.
- Diese zusätzlichen Berechtigungen müssen nicht im Feld `Scopes` deines Logto GitHub Connectors eingetragen werden und können über die Social Verification API von Logto erreicht werden.

Wenn du diese Schritte befolgst, fordert dein Logto GitHub Connector genau die Berechtigungen an, die deine App benötigt – nicht mehr und nicht weniger.

:::tip
Wenn deine App diese Berechtigungen anfordert, um auf die GitHub API zuzugreifen und Aktionen auszuführen, stelle sicher, dass du **Tokens für dauerhaften API-Zugriff speichern** im Logto GitHub Connector aktivierst. Siehe den nächsten Abschnitt für Details.
:::

## Schritt 4: Allgemeine Einstellungen \{#step-4-general-settings}

Hier sind einige allgemeine Einstellungen, die die Verbindung zu GitHub nicht blockieren, aber das Authentifizierungserlebnis für Endbenutzer beeinflussen können.

### Profilinformationen synchronisieren \{#sync-profile-information}

Im GitHub Connector kannst du die Richtlinie für das Synchronisieren von Profilinformationen wie Benutzernamen und Avataren festlegen. Wähle aus:

- **Nur bei Registrierung synchronisieren**: Profilinformationen werden einmalig abgerufen, wenn sich der Benutzer zum ersten Mal anmeldet.
- **Immer bei Anmeldung synchronisieren**: Profilinformationen werden jedes Mal aktualisiert, wenn sich der Benutzer anmeldet.

### Tokens speichern, um auf GitHub APIs zuzugreifen (Optional) \{#store-tokens-to-access-github-apis-optional}

Wenn du auf GitHub APIs zugreifen und Aktionen mit Benutzerautorisierung durchführen möchtest (sei es über soziale Anmeldung oder Kontoverknüpfung), muss Logto bestimmte API-Berechtigungen erhalten und Tokens speichern.

1. Füge die erforderlichen Berechtigungen gemäß den obigen Anweisungen hinzu.
2. Aktiviere **Tokens für dauerhaften API-Zugriff speichern** im Logto GitHub Connector. Logto speichert GitHub Zugangstokens sicher im Secret Vault.

:::note
Wenn du eine GitHub **OAuth-App** wie in diesem Tutorial beschrieben verwendest, kannst du kein Auffrischungstoken (Refresh token) von GitHub erhalten, da dessen Zugangstoken (Access token) nicht abläuft, es sei denn, der Benutzer widerruft es manuell. Daher musst du `offline_access` nicht im Feld `Scopes` hinzufügen – dies könnte andernfalls zu einem Fehler führen.

Wenn du möchtest, dass das Zugangstoken abläuft oder Auffrischungstokens verwendest, solltest du stattdessen die Integration mit einer **GitHub App** in Betracht ziehen. Erfahre mehr über die [Unterschiede zwischen GitHub Apps und OAuth Apps](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps).
:::

## Schritt 5: Teste deine Integration (Optional) \{#step-5-test-your-integration-optional}

Bevor du live gehst, teste deine GitHub-Integration:

1. Verwende den Connector in einem Logto-Entwicklungstenant.
2. Überprüfe, ob sich Benutzer mit GitHub anmelden können.
3. Prüfe, ob die richtigen Berechtigungen angefordert werden.
4. Teste API-Aufrufe, wenn du Tokens speicherst.

GitHub OAuth-Apps funktionieren sofort mit jedem GitHub-Benutzerkonto – es sind keine Testbenutzer oder App-Freigaben wie bei anderen Plattformen erforderlich.
