---
slug: /integrations/wechat-native
sidebar_label: WeChat (Native)
sidebar_custom_props:
  description: WeChat ist eine plattform√ºbergreifende Instant-Messaging-App.
  logoFilename: 'wechat.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# Soziale Anmeldung mit WeChat (Native) einrichten

Der offizielle Logto-Connector f√ºr die WeChat-Sozialanmeldung in nativen Apps (iOS und Android).

<GuideTip />

## Erste Schritte \{#get-started}

Wenn du das Konzept des Connectors nicht kennst oder nicht wei√üt, wie du diesen Connector zu deiner Anmeldeerfahrung hinzuf√ºgen kannst, sieh dir bitte das [Logto-Tutorial](/connectors/social-connectors) an.

In nativen Apps kannst du das Web nicht als Anmeldemethode von WeChat verwenden: Eine Navigation zur WeChat-App ist erforderlich, und es erfordert auch die Verwendung ihres SDK.

Wir wissen, dass es be√§ngstigend klingt, aber keine Sorge. Wir werden es in diesem Tutorial leicht handhaben.

## Erstelle eine mobile App auf der WeChat Open Platform \{#create-a-mobile-app-in-the-wechat-open-platform}

> üí° **Tipp**
>
> Du kannst einige Abschnitte √ºberspringen, wenn du sie bereits abgeschlossen hast.

### Erstelle ein Konto \{#create-an-account}

√ñffne https://open.weixin.qq.com/, klicke auf die Schaltfl√§che "Registrieren" in der oberen rechten Ecke und schlie√üe dann den Registrierungsprozess ab.

### Erstelle eine mobile App \{#create-a-mobile-app}

Melde dich mit dem gerade erstellten Konto an. Im Tab "Mobile Anwendung" (ÁßªÂä®Â∫îÁî®) klicke auf die gro√üe gr√ºne Schaltfl√§che "Erstelle eine mobile App" (ÂàõÂª∫ÁßªÂä®Â∫îÁî®).

![App-Tabs](./assets/app-tabs.png)

F√ºlle die erforderlichen Informationen im Antragsformular aus.

![Erstelle eine mobile App](./assets/create-mobile-app.png)

#### Grundlegende Informationen \{#basic-info}

Die meisten sind ziemlich selbsterkl√§rend, und wir haben hier einige Tipps:

- Wenn du nur die WeChat-Anmeldung testen m√∂chtest und die App nicht im App Store ist, w√§hle im Abschnitt "App ist verf√ºgbar" "Nein", um den "App-Download-Link" zu √ºberspringen.
- Das "App-Betriebsablaufdiagramm" sieht knifflig aus. Aus unserer Erfahrung musst du ein einfaches Flussdiagramm und mehrere App-Screenshots vorbereiten, um die M√∂glichkeit zu erh√∂hen, die √úberpr√ºfung zu bestehen.

Klicke auf "N√§chster Schritt", um fortzufahren.

#### Plattforminformationen \{#platform-info}

Du kannst eine oder beide Plattformen, iOS und Android, konfigurieren, um Logto mit der WeChat-Native-Anmeldung zu integrieren.

**iOS-App**

W√§hle "iOS-App" (iOS Â∫îÁî®) aus und w√§hle dann den Zielger√§tetyp deiner App entsprechend aus.

![App-Plattform](./assets/platform.png)

Wenn du "Nein" f√ºr die Verf√ºgbarkeit im App Store gew√§hlt hast, kannst du das Ausf√ºllen der "AppStore-Download-Adresse" hier √ºberspringen.

F√ºlle _Bundle ID_, _Testversion Bundle ID_ und _Universal Links_ aus (tats√§chlich wird nur ein Link ben√∂tigt üòÇ).

> ‚ÑπÔ∏è **Hinweis**
>
> _Bundle ID_ und _Testversion Bundle ID_ k√∂nnen denselben Wert haben.

> üí° **Tipp**
>
> WeChat erfordert einen universellen Link f√ºr die native Anmeldung. Wenn du ihn nicht eingerichtet hast oder nicht wei√üt, was es ist, sieh dir bitte die [offizielle Apple-Dokumentation](https://developer.apple.com/ios/universal-links/) an.

**Android-App**

W√§hle "Android-App" (Android Â∫îÁî®) aus.

![Android-App-Plattform](./assets/platform-android-app.png)

F√ºlle _Anwendungssignatur_ (Â∫îÁî®Á≠æÂêç) und _Anwendungspaketname_ (Â∫îÁî®ÂåÖÂêç) aus.

> ‚ÑπÔ∏è **Hinweis**
>
> Du musst deine App signieren, um eine Signatur zu erhalten. Siehe [App signieren](https://developer.android.com/studio/publish/app-signing) f√ºr weitere Informationen.

Nachdem du das Signieren abgeschlossen hast, kannst du die `signingReport`-Aufgabe ausf√ºhren, um die Signatursignatur zu erhalten.

```bash
./gradlew your-android-project:signingReport
```

Der `MD5`-Wert des entsprechenden Build-Variantenberichts wird die _Anwendungssignatur_ (Â∫îÁî®Á≠æÂêç) sein, aber denke daran, alle Doppelpunkte aus dem Wert zu entfernen und ihn in Kleinbuchstaben zu schreiben.

Z.B. `1A:2B:3C:4D` -> `1a2b3c4d`.

#### Warten auf das √úberpr√ºfungsergebnis \{#waiting-for-the-review-result}

Nachdem du die Plattforminformationen abgeschlossen hast, klicke auf "√úberpr√ºfung einreichen", um fortzufahren. Normalerweise geht die √úberpr√ºfung schnell, sie endet innerhalb von 1-2 Tagen.

Wir vermuten, dass der Pr√ºfer bei jeder Einreichung zuf√§llig zugewiesen wird, da der Standard schwankt. Du k√∂nntest beim ersten Mal abgelehnt werden, aber gib nicht auf! Erkl√§re deinen aktuellen Status und frage den Pr√ºfer, wie du ihn √§ndern kannst.

## Aktiviere die WeChat-Native-Anmeldung in deiner App \{#enable-wechat-native-sign-in-in-your-app}

### iOS \{#ios}

Wir gehen davon aus, dass du das [Logto iOS SDK](/quick-starts/swift) in deiner App integriert hast. In diesem Fall sind die Dinge ziemlich einfach, und du musst nicht einmal die WeChat SDK-Dokumentation lesen:

**1. Konfiguriere den universellen Link und das URL-Schema in deinem Xcode-Projekt**

Im Xcode-Projekt -> Tab "Signing & Capabilities", f√ºge die F√§higkeit "Associated Domains" und den zuvor konfigurierten universellen Link hinzu.

![Universeller Link](./assets/universal-link.png)

Gehe dann zum Tab "Info" und f√ºge ein [benutzerdefiniertes URL-Schema](https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app) mit der WeChat-App-ID hinzu.

![Benutzerdefiniertes URL-Schema](./assets/custom-url-scheme.png)

√ñffne schlie√ülich deine `Info.plist` und f√ºge `weixinULAPI` und `weixin` unter `LSApplicationQueriesSchemes` hinzu.

![Plist](./assets/plist.png)

> ü§¶ **Hinweis**
>
> Wir wissen, dass diese Aktionen nicht sehr vern√ºnftig sind, aber dies ist die minimal funktionsf√§hige L√∂sung, die wir gefunden haben. Siehe den [magischen offiziellen Leitfaden](https://developers.weixin.qq.com/doc/oplatform/en/Mobile_App/Access_Guide/iOS.html) f√ºr weitere Informationen.

**2. F√ºge `LogtoSocialPluginWechat` zu deinem Xcode-Projekt hinzu**

F√ºge das Framework hinzu:

![Framework hinzuf√ºgen](./assets/add-framework.png)

Und f√ºge `-ObjC` zu deinen Build-Einstellungen > Linking > Other Linker Flags hinzu:

![Linker-Flags](./assets/linker-flags.png)

> ‚ÑπÔ∏è **Hinweis**
>
> Das Plugin enth√§lt das WeChat Open SDK 1.9.2. Du kannst `import WechatOpenSDK` direkt verwenden, sobald das Plugin importiert wurde.

**3. F√ºge das Plugin zu deinen `LogtoClient`-Init-Optionen hinzu**

```swift
let logtoClient = LogtoClient(
  useConfig: config,
  socialPlugins: [LogtoSocialPluginWechat()]
)
```

**4. Behandle `onOpenURL` richtig**

> ‚ÑπÔ∏è **Hinweis**
>
> Die Funktion `LogtoClient.handle(url:)` wird alle nativen Connectoren behandeln, die du aktiviert hast. Du musst sie nur einmal aufrufen.

```swift
// SwiftUI
YourRootView()
  .onOpenURL { url in
      LogtoClient.handle(url: url)
  }

// oder AppDelegate
func application(_ app: UIApplication, open url: URL, options: /*...*/) -> Bool {
  LogtoClient.handle(url: url)
}
```

### Android \{#android}

Wir gehen davon aus, dass du das [Logto Android SDK](/quick-starts/android) in deiner App integriert hast. In diesem Fall sind die Dinge ziemlich einfach, und du musst nicht einmal die WeChat SDK-Dokumentation lesen:

**1. F√ºge `Wechat Open SDK` zu deinem Projekt hinzu**

Stelle sicher, dass das `mavenCentral()`-Repository in deinen Gradle-Projektrepositories enthalten ist:

```kotlin
repositories {
  // ...
  mavenCentral()
}
```

F√ºge das Wechat Open SDK zu deinen Abh√§ngigkeiten hinzu:

```kotlin
dependencies {
  // ...
  api("com.tencent.mm.opensdk:wechat-sdk-android:6.8.0")  // kotlin-script
  // oder
  api 'com.tencent.mm.opensdk:wechat-sdk-android:6.8.0'   // groovy-script
}
```

**2. F√ºhre `WXEntryActivity` in dein Projekt ein**

Erstelle ein `wxapi`-Paket unter deinem Paketstamm und f√ºge die `WXEntryActivity` im `wxapi`-Paket hinzu (Nehmen wir `com.sample.app` als Beispiel):

```kotlin
// WXEntryActivity.kt
package com.sample.app.wxapi

import io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity

class WXEntryActivity: WechatSocialResultActivity()
```

```java
// WXEntryActivity.java
package com.sample.app.wxapi

import io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity

public class WXEntryActivity extends WechatSocialResultActivity {}
```

Die endg√ºltige Position der `WXEntryActivity` im Projekt sollte so aussehen (Nehmen wir Kotlin als Beispiel):

```bash
src/main/kotlin/com/sample/app/wxapi/WXEntryActivity.kt
```

**3. √Ñndere die `AndroidManifest.xml`**

F√ºge die folgende Zeile zu deiner `AndroidManifest.xml` hinzu:

```xml
\<?xml version="1.0" encoding="utf-8"?>
\<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.sample.app">

  \<application>
    \<!-- hinzuzuf√ºgende Zeile -->
    \<activity android:name=".wxapi.WXEntryActivity" android:exported="true"/>
  \</application>

\</manifest>
```

## Teste den WeChat-Native-Connector \{#test-wechat-native-connector}

Das war's. Vergiss nicht, den [sozialen Connector in der Anmeldeerfahrung zu aktivieren](/connectors/social-connectors/#enable-social-sign-in).

Sobald der WeChat-Native-Connector aktiviert ist, kannst du deine App erstellen und ausf√ºhren, um zu sehen, ob sie funktioniert.

> ‚ö†Ô∏è **Vorsicht**
>
> WeChat hat keinen Plan f√ºr Ger√§te ohne installierte WeChat-App. Logto wird diesen Connector w√§hrend der Anmeldung ausblenden, falls dies der Fall ist (was die empfohlene Vorgehensweise aus dem [offiziellen Entwicklungsleitfaden](https://developers.weixin.qq.com/doc/oplatform/en/Mobile_App/WeChat_Login/Development_Guide.html) ist).
