import applicationDetails from './assets/entra_id_oidc_application_details.webp';
import createSecret from './assets/entra_id_oidc_create_secret.webp';
import endpoints from './assets/entra_id_oidc_endpoints.webp';

Nach der erfolgreichen Erstellung einer Microsoft Entra OIDC-Anwendung musst du die IdP-Konfigurationen zurück an Logto übermitteln. Navigiere zum Tab `Connection` in der Logto-Konsole und fülle die folgenden Konfigurationen aus:

1. **Client ID**: Ein eindeutiger Identifikator, der deiner OIDC-Anwendung von Microsoft Entra zugewiesen wird. Dieser Identifikator wird von Logto verwendet, um die Anwendung während des OIDC-Flows zu identifizieren und zu authentifizieren. Du findest ihn auf der Übersichtsseite der Anwendung als `Application (client) ID`.

<center>
  <img src={applicationDetails} alt="Anwendungsdetails" />
</center>

2. **Client Secret**: Erstelle ein neues Client Secret und kopiere den Wert zu Logto. Dieses Secret wird verwendet, um die OIDC-Anwendung zu authentifizieren und die Kommunikation zwischen Logto und dem IdP zu sichern.

<center>
  <img src={createSecret} alt="Secret erstellen" />
</center>

3. **Aussteller (Issuer)**: Die Aussteller-URL, ein eindeutiger Identifikator für den IdP, der den Ort angibt, an dem der OIDC-Identitätsanbieter gefunden werden kann. Sie ist ein wesentlicher Bestandteil der OIDC-Konfiguration, da sie Logto hilft, die erforderlichen Endpunkte zu entdecken.

   Anstatt alle diese OIDC-Endpunkte manuell bereitzustellen, ruft Logto automatisch alle erforderlichen Konfigurationen und IdP-Endpunkte ab. Dies geschieht, indem die von dir bereitgestellte Aussteller-URL verwendet wird und ein Aufruf zum Discover-Endpunkt des IdP gemacht wird.

   Um die Aussteller-URL zu erhalten, findest du sie im Abschnitt `Endpoints` auf der Übersichtsseite der Anwendung.

   Suche den Endpunkt `OpenID Connect metadata document` und kopiere die URL **OHNE** den abschließenden Pfad `.well-known/openid-configuration`. Dies liegt daran, dass Logto automatisch `.well-known/openid-configuration` an die Aussteller-URL anhängt, wenn die OIDC-Konfigurationen abgerufen werden.

<center>
  <img src={endpoints} alt="Endpunkte" />
</center>

4. **Berechtigung (Scope)**: Eine durch Leerzeichen getrennte Liste von Zeichenfolgen, die die gewünschten Berechtigungen oder Zugriffsebenen definieren, die von Logto während des OIDC-Authentifizierungsprozesses angefordert werden. Der Scope-Parameter ermöglicht es dir, anzugeben, welche Informationen und Zugriffe Logto vom IdP anfordert.

Der Scope-Parameter ist optional. Unabhängig von den benutzerdefinierten Scope-Einstellungen sendet Logto immer die Scopes `openid`, `profile` und `email` an den IdP.

Klicke auf `Speichern`, um den Konfigurationsprozess abzuschließen.
