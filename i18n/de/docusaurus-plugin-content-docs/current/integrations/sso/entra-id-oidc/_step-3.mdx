Berechtigungen (Scopes) definieren die Berechtigungen, die deine App von den Benutzern anfordert, und steuern, auf welche Daten deine App in deren Microsoft Entra ID-Konten zugreifen kann. Das Anfordern von Microsoft Graph-Berechtigungen erfordert eine Konfiguration auf beiden Seiten:

**Im Microsoft Entra Admin Center:**

1. Navigiere zu **Microsoft Entra ID > App-Registrierungen** und wähle deine Anwendung aus.
2. Gehe zu **API-Berechtigungen > Berechtigung hinzufügen > Microsoft Graph > Delegierte Berechtigungen**.
3. Wähle nur die Berechtigungen aus, die deine App benötigt:
   - OpenID-Berechtigungen:
     - `openid` (Erforderlich) – Benutzer anmelden
     - `profile` (Erforderlich) – Grundlegendes Benutzerprofil anzeigen
     - `email` (Erforderlich) – E-Mail-Adresse des Benutzers anzeigen
     - `offline_access` (Optional) – Nur erforderlich, wenn du [Tokens für dauerhaften API-Zugriff speichern](#step-4-store-tokens-to-access-microsoft-apis-optional) im Logto-Connector aktivierst und Auffrischungstokens für einen langfristigen Zugriff auf Microsoft Graph-APIs benötigst.
   - API-Zugriff (Optional): Füge alle zusätzlichen Berechtigungen hinzu, die deine App benötigt. Häufig verwendete Microsoft Graph-Berechtigungen sind z. B. `Mail.Read`, `Calendars.Read`, `Files.Read` usw. Durchsuche die [Microsoft Graph-Berechtigungsreferenz](https://docs.microsoft.com/en-us/graph/permissions-reference), um verfügbare Berechtigungen zu finden.
4. Klicke auf **Berechtigungen hinzufügen**, um die Auswahl zu bestätigen.
5. Wenn deine App für bestimmte Berechtigungen eine Administratorzustimmung benötigt, klicke auf **Administratorzustimmung für [Deine Organisation] erteilen**.

<center>
  <img
    src="/img/assets/entra_id_oidc_add_api_permissions.webp"
    alt="Microsoft API-Berechtigungen hinzufügen"
  />
</center>

**Im Logto Microsoft Entra ID Connector:**

1. Logto fügt automatisch die Scopes `openid`, `profile` und `email` hinzu, um grundlegende Benutzeridentitätsinformationen abzurufen. Du kannst das Feld `Scopes` leer lassen, wenn du nur grundlegende Benutzerinformationen benötigst.
2. Füge `offline_access` zum Feld `Scopes` hinzu, wenn du planst, Tokens für dauerhaften API-Zugriff zu speichern. Dieser Scope ermöglicht Auffrischungstokens für einen langfristigen API-Zugriff.
3. Füge zusätzliche Scopes (durch Leerzeichen getrennt) im Feld `Scopes` hinzu, um weitere Daten von Microsoft Graph anzufordern. Verwende Standard-Scope-Namen, zum Beispiel: `User.Read Mail.Read Calendars.Read`

:::tip

Wenn deine App diese Scopes anfordert, um auf die Microsoft Graph API zuzugreifen und Aktionen auszuführen, stelle sicher, dass du **Tokens für dauerhaften API-Zugriff speichern** im Logto Microsoft Entra ID Connector aktivierst. Siehe den nächsten Abschnitt für Details.

:::
