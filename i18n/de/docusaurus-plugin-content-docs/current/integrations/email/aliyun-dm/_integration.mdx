## E-Mail-Dienst im Aliyun DirectMail-Console einrichten \{#set-up-an-email-service-in-aliyun-directmail-console}

### Aliyun-Konto erstellen \{#create-an-aliyun-account}

Gehe zu [Aliyun](https://aliyun.com/) und erstelle ein Aliyun-Konto, falls du noch keines hast.

### Aliyun Direct Mail aktivieren und konfigurieren \{#enable-and-configure-aliyun-direct-mail}

Gehe zur [DM-Service-Konsole](https://www.aliyun.com/product/directmail) und melde dich an. Aktiviere den Direct Mail-Dienst, indem du oben links auf der Seite auf die Schaltfläche „Apply to enable“ (申请开通) klickst und beginne mit der Konfiguration.

Starte von der [DM-Admin-Konsole](https://dm.console.aliyun.com/) und folge diesen Schritten:

1. Gehe im Seitenmenü zu „Email Domains“ (发信域名) und füge eine „New Domain“ (新建域名) gemäß den Anweisungen hinzu.
2. Passe „Sender Addresses“ (发信地址) und „Email Tags“ (邮件标签) jeweils an.

Nach Abschluss der Einrichtung gibt es zwei verschiedene Möglichkeiten zum Testen:

- Gehe zur [DirectMail-Übersichtsseite](https://dm.console.aliyun.com/), finde unten auf der Seite den „Operation Guide“ (操作引导) und klicke auf „Send Emails“ (发送邮件). Dort findest du alle verschiedenen Testmethoden.
- Folge im Seitenmenü dem Pfad „Send Emails“ (发送邮件) -> „Email Tasks“ (发送邮件), um eine Testaufgabe zu erstellen.

## Connector-JSON erstellen \{#compose-the-connector-json}

1. Gehe von der [DM-Admin-Konsole](https://dm.console.aliyun.com/) aus mit der Maus auf dein Avatar oben rechts und wähle „AccessKey Management“ (AccessKey 管理), dann klicke auf „Create AccessKey“ (创建 AccessKey). Nach der Sicherheitsüberprüfung erhältst du ein „AccessKey ID“ und „AccessKey Secret“-Paar. Bitte bewahre diese sicher auf.
2. Gehe zum Tab „Sender Addresses“ (发信地址) oder „Email Tags“ (邮件标签), den du gerade in der [DM-Admin-Konsole](https://dm.console.aliyun.com/) besucht hast. Dort findest du leicht die _Sender Address_ oder _Email Tag_.
3. Fülle die Einstellungen für den Aliyun DM Connector aus:
   - Trage in die Felder `accessKeyId` und `accessKeySecret` das Access Key-Paar aus Schritt 1 ein.
   - Trage in die Felder `accountName` und `fromAlias` die „Sender Address“ und den „Email Tag“ aus Schritt 2 ein. Alle Vorlagen teilen sich diesen Signaturnamen. (`fromAlias` kann leer bleiben, da es OPTIONAL ist.)
   - Du kannst mehrere DM-Connector-Vorlagen für verschiedene Fälle hinzufügen. Hier ein Beispiel für das Hinzufügen einer einzelnen Vorlage:
     - Fülle das Feld `subject` aus, das als Betreff der E-Mail dient.
     - Fülle das Feld `content` mit beliebigen Zeichenfolgen aus. Vergiss nicht, den Platzhalter `{{code}}` für den zufälligen Bestätigungscode zu lassen.
     - Fülle das Feld `usageType` mit entweder `Register`, `SignIn`, `ForgotPassword` oder `Generic` für verschiedene Anwendungsfälle aus. (`usageType` ist eine Logto-Eigenschaft zur Identifizierung des passenden Anwendungsfalls.) Um vollständige Benutzerflüsse zu ermöglichen, sind Vorlagen mit den usageTypes `Register`, `SignIn`, `ForgotPassword` und `Generic` erforderlich.

### Aliyun DM Connector testen \{#test-aliyun-dm-connector}

Du kannst eine E-Mail-Adresse eingeben und auf „Senden“ klicken, um zu prüfen, ob die Einstellungen funktionieren, bevor du auf „Speichern und Fertig“ klickst.

Das war's. Vergiss nicht, den <MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">Connector in der Anmeldeerfahrung zu aktivieren</MainSiteUrl>.

### Konfigurationstypen \{#config-types}

| Name            | Typ               |
| --------------- | ----------------- |
| accessKeyId     | string            |
| accessKeySecret | string            |
| accountName     | string            |
| fromAlias       | string (OPTIONAL) |
| templates       | Template[]        |

| Template-Eigenschaften | Typ         | Enum-Werte                                           |
| ---------------------- | ----------- | ---------------------------------------------------- |
| subject                | string      | N/A                                                  |
| content                | string      | N/A                                                  |
| usageType              | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
