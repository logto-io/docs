---
slug: /integrations/smtp
sidebar_label: SMTP
sidebar_custom_props:
  description: SMTP — это стандартный интернет-протокол связи для передачи электронной почты.
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# Настройка проверки электронной почты через SMTP

Официальный коннектор Logto для SMTP.

<GuideTip />

## Начало работы \{#get-started}

SMTP (Simple Mail Transfer Protocol) — это стандартный интернет-протокол связи для передачи электронной почты. Почтовые серверы и другие агенты передачи сообщений используют SMTP для отправки и получения сообщений.

## Настройка коннектора SMTP \{#set-up-smtp-connector}

SMTP — это протокол передачи, который не является эксклюзивным для некоторых конкретных поставщиков услуг электронной почты, но может работать со всеми поставщиками.

Мы предлагаем руководства по использованию коннектора SMTP для отправки электронных писем через следующих поставщиков для вашего лучшего понимания:

- _Gmail_ — самый популярный поставщик услуг электронной почты в мире.
- _Aliyun direct mail_ и _SendGrid mail_. Некоторые из вас могут быть знакомы с этими двумя поставщиками услуг электронной почты, поскольку команда Logto предоставила соответствующие коннекторы; у вас, вероятно, есть общее представление о них.

Мы надеемся, что вы сможете разобраться в настройках всех других поставщиков электронной почты с помощью следующих примеров :rocket:

### Настройка для использования Gmail \{#set-up-for-gmail-use}

Вы можете получить новую учетную запись Gmail на [Gmail](https://mail.google.com/), или вы можете использовать существующую учетную запись, если она у вас есть.

[Официальный пост Gmail](https://support.google.com/a/answer/176600) показывает, как определить значения необходимых свойств для работы с Gmail через коннектор SMTP.

### Интеграция с SendGrid SMTP API \{#integrate-with-sendgrid-smtp-api}

Изначально мы предполагаем, что у вас уже есть учетная запись SendGrid. Если нет, создайте новую учетную запись на [веб-сайте SendGrid](https://app.sendgrid.com/).

Вы можете найти пошаговое руководство по ["Интеграции с SMTP API"](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api).

Разработчики могут получить доступ к деталям _отправителя_ на ["Управление отправителями"](https://mc.sendgrid.com/senders).

### Настройка с учетной записью Aliyun direct mail \{#configure-with-aliyun-direct-mail-account}

Войдите на [веб-сайт Aliyun](https://cn.aliyun.com/). Зарегистрируйте новую учетную запись, если у вас ее нет.

Следуйте [руководству по отправке писем с использованием SMTP](https://www.alibabacloud.com/help/en/directmail/latest/send-emails-using-smtp) и выполните эти 'задачи', чтобы получить необходимые настройки и информацию.

Вы можете перейти на [страницу адресов службы SMTP](https://www.alibabacloud.com/help/en/directmail/latest/smtp-service-address), чтобы выбрать подходящий хост и номер порта службы SMTP.

Чтобы проверить "Адреса отправителей", вы можете найти вход на левой панели навигации в [консоли DirectMail](https://dm.console.aliyun.com/). Здесь вы должны увидеть `Адрес отправителя` и `Пароль SMTP`.

:::note
В предыдущих случаях предоставлен только один пример шаблона для упрощения. Вы должны добавить больше шаблонов для других случаев использования.
Вы должны изменить значения, обернутые в "\<" и ">", в соответствии с настройками вашей учетной записи Gmail, SendGrid или Aliyun и выбрать, какие другие поля оставить без "\<" и ">".
Добавьте `{{code}}` в качестве заполнителя в содержимое шаблонов, чтобы показать случайный код подтверждения при отправке писем.
:::

### Тестирование коннектора SMTP \{#test-smtp-connector}

Вы можете ввести адрес электронной почты и нажать "Отправить", чтобы проверить, работают ли настройки, прежде чем нажать "Сохранить и завершить".

Вот и все. Не забудьте [включить коннектор в опыте входа](/connectors/email-connectors/#enable-email-sign-up-or-sign-in).

### Типы конфигураций \{#config-types}

| Имя       | Тип        |
| --------- | ---------- |
| host      | string     |
| port      | string     |
| fromEmail | string     |
| templates | Template[] |

| Свойства шаблона | Тип         | Значения перечисления                                   |
| ---------------- | ----------- | ------------------------------------------------------- |
| subject          | string      | N/A                                                     |
| content          | string      | N/A                                                     |
| usageType        | enum string | 'Register' \| 'SignIn' \| 'ForgotPassword' \| 'Generic' |
| contentType      | enum string | 'text/plain' \| 'text/html'                             |

**Опции аутентификации по имени пользователя и паролю**

| Имя  | Тип                    | Значения перечисления |
| ---- | ---------------------- | --------------------- |
| user | string                 | N/A                   |
| pass | string                 | N/A                   |
| type | enum string (OPTIONAL) | 'login'               |

Вы также можете настроить [OAuth2 Auth Options](https://nodemailer.com/smtp/oauth2/) и другие расширенные конфигурации. Подробнее см. [здесь](https://nodemailer.com/smtp/).

Мы привели пример конфигурации со всеми настраиваемыми параметрами в текстовом поле, чтобы помочь вам настроить собственную конфигурацию. (Вы несете ответственность за конфигурацию, некоторые значения предназначены для демонстрации и могут не подходить для вашего случая использования.)
