---
slug: /integrations/aliyun-dm
sidebar_label: Aliyun Direct Mail
sidebar_custom_props:
  description: Aliyun предоставляет облачные вычислительные услуги для онлайн-бизнеса.
  logoFilename: 'aliyun.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# Настройка проверки электронной почты через Aliyun Direct Mail

Официальный коннектор Logto для Aliyun для сервиса прямой почты.

<GuideTip />

## Начало работы \{#get-started}

Aliyun является основным поставщиком облачных услуг в Азии, предлагая множество облачных сервисов, включая DM (прямую почту). Коннектор Aliyun DM — это плагин, предоставляемый командой Logto для вызова API сервиса Aliyun DM, с помощью которого конечные пользователи Logto могут регистрироваться и входить в свою учетную запись Logto через код проверки по почте (или, другими словами, код проверки).

## Настройка почтового сервиса в консоли Aliyun DirectMail \{#set-up-an-email-service-in-aliyun-directmail-console}

### Создание учетной записи Aliyun \{#create-an-aliyun-account}

Перейдите на [Aliyun](https://aliyun.com/) и создайте свою учетную запись Aliyun, если у вас ее нет.

### Включение и настройка Aliyun Direct Mail \{#enable-and-configure-aliyun-direct-mail}

Перейдите на [страницу консоли сервиса DM](https://www.aliyun.com/product/directmail) и войдите в систему. Включите сервис Direct Mail, нажав кнопку "Apply to enable" (申请开通) в верхнем левом углу страницы и начните процесс настройки.

Начиная с [страницы админ-консоли DM](https://dm.console.aliyun.com/), вам следует:

1. Перейдите в "Email Domains" (发信域名) из боковой панели и добавьте "New Domain" (新建域名) следуя инструкциям.
2. Настройте "Sender Addresses" (发信地址) и "Email Tags" (邮件标签) соответственно.

После завершения настройки есть два разных способа тестирования:

- Перейдите на [страницу обзора DirectMail](https://dm.console.aliyun.com/), найдите "Operation Guide" (操作引导) внизу страницы и нажмите на "Send Emails" (发送邮件). Вы найдете все различные методы тестирования.
- Следуйте по пути "Send Emails" (发送邮件) -> "Email Tasks" (发送邮件) в боковой панели, чтобы создать тестовую задачу.

## Составление JSON для коннектора \{#compose-the-connector-json}

1. С [страницы админ-консоли DM](https://dm.console.aliyun.com/), наведите курсор на свой аватар в правом верхнем углу и перейдите в "AccessKey Management" (AccessKey 管理), и нажмите "Create AccessKey" (创建 AccessKey). Вы получите пару "AccessKey ID" и "AccessKey Secret" после завершения проверки безопасности. Пожалуйста, храните их надлежащим образом.
2. Перейдите на вкладку "Sender Addresses" (发信地址) или "Email Tags" (邮件标签), которую вы только что посетили с [страницы админ-консоли DM](https://dm.console.aliyun.com/), вы легко найдете _Sender Address_ или _Email Tag_.
3. Заполните настройки коннектора Aliyun DM:
   - Заполните поля `accessKeyId` и `accessKeySecret` парами ключей доступа, которые вы получили на шаге 1.
   - Заполните поля `accountName` и `fromAlias` с "Sender Address" и "Email Tag", которые были найдены на шаге 2. Все шаблоны будут использовать это имя подписи. (Вы можете оставить `fromAlias` пустым, так как это НЕОБЯЗАТЕЛЬНО.)
   - Вы можете добавить несколько шаблонов коннектора DM для разных случаев. Вот пример добавления одного шаблона:
     - Заполните поле `subject`, которое будет работать как заголовок отправляемого письма.
     - Заполните поле `content` произвольным строковым содержимым. Не забудьте оставить `{{code}}` как заполнитель для случайного кода проверки.
     - Заполните поле `usageType` одним из значений: `Register`, `SignIn`, `ForgotPassword` или `Generic` для разных случаев использования. (`usageType` — это свойство Logto для идентификации соответствующего случая использования.) Для включения полного пользовательского потока требуются шаблоны с `usageType` `Register`, `SignIn`, `ForgotPassword` и `Generic`.

### Тестирование коннектора Aliyun DM \{#test-aliyun-dm-connector}

Вы можете ввести адрес электронной почты и нажать "Send", чтобы проверить, работают ли настройки, перед тем как "Save and Done".

Вот и все. Не забудьте [включить коннектор в опыте входа](/connectors/email-connectors/#enable-email-sign-up-or-sign-in).

### Типы конфигурации \{#config-types}

| Имя             | Тип                    |
| --------------- | ---------------------- |
| accessKeyId     | string                 |
| accessKeySecret | string                 |
| accountName     | string                 |
| fromAlias       | string (НЕОБЯЗАТЕЛЬНО) |
| templates       | Template[]             |

| Свойства шаблона | Тип         | Значения перечисления                                   |
| ---------------- | ----------- | ------------------------------------------------------- |
| subject          | string      | N/A                                                     |
| content          | string      | N/A                                                     |
| usageType        | enum string | 'Register' \| 'SignIn' \| 'ForgotPassword' \| 'Generic' |
