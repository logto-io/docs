## Настройка проекта в Google API Console \{#set-up-a-project-in-the-google-api-console}

- Посетите [Google API Console](https://console.developers.google.com) и войдите в систему с вашей учетной записью Google.
- Нажмите кнопку **Выбрать проект** в верхней панели меню и нажмите кнопку **Создать проект**, чтобы создать проект.
- В вашем новом проекте нажмите **APIs & Services**, чтобы войти в меню **APIs & Services**.

## Настройка экрана согласия \{#configure-your-consent-screen}

### Настройка и регистрация вашего приложения \{#configure-and-register-your-application}

- В левом меню **APIs & Services** нажмите кнопку **OAuth consent screen**.
- Выберите нужный вам **Тип пользователя** и нажмите кнопку **Создать**. (Примечание: Если вы выберете **Внешний** в качестве **Типа пользователя**, вам нужно будет позже добавить тестовых пользователей.)

Теперь вы окажетесь на странице **Редактировать регистрацию приложения**.

### Редактирование регистрации приложения \{#edit-app-registration}

#### Настройка экрана согласия OAuth \{#config-oauth-consent-screen}

- Следуйте инструкциям, чтобы заполнить форму **OAuth consent screen**.
- Нажмите **СОХРАНИТЬ И ПРОДОЛЖИТЬ**, чтобы продолжить.

#### Настройка областей \{#config-scopes}

- Нажмите **ДОБАВИТЬ ИЛИ УДАЛИТЬ ОБЛАСТИ** и выберите `../auth/userinfo.email`, `../auth/userinfo.profile` и `openid` в всплывающем окне, затем нажмите **ОБНОВИТЬ**, чтобы завершить. Рекомендуется рассмотреть возможность добавления всех областей, которые вы можете использовать, иначе некоторые области, добавленные в конфигурации, могут не работать.
- Заполните форму по мере необходимости.
- Нажмите **СОХРАНИТЬ И ПРОДОЛЖИТЬ**, чтобы продолжить.

#### Добавление тестовых пользователей (только для внешнего типа пользователя) \{#add-test-users-external-user-type-only}

- Нажмите **ДОБАВИТЬ ПОЛЬЗОВАТЕЛЕЙ** и добавьте тестовых пользователей, чтобы разрешить этим пользователям доступ к вашему приложению во время тестирования.
- Нажмите **СОХРАНИТЬ И ПРОДОЛЖИТЬ**, чтобы продолжить.

Теперь у вас должен быть настроен экран согласия Google OAuth 2.0.

## Получение учетных данных OAuth 2.0 \{#obtain-oauth-20-credentials}

- В левом меню **APIs & Services** нажмите кнопку **Credentials**.
- На странице **Credentials** нажмите кнопку **+ СОЗДАТЬ УЧЕТНЫЕ ДАННЫЕ** в верхней панели меню и выберите **OAuth client ID**.
- На странице **Создать OAuth client ID** выберите **Веб-приложение** в качестве типа приложения.
- Заполните основную информацию о вашем приложении.
- Нажмите **+ Добавить URI**, чтобы добавить авторизованный домен в раздел **Авторизованные источники JavaScript**. Это домен, с которого будет обслуживаться ваша страница авторизации Logto. В нашем случае это будет `${your_logto_origin}`, например, `https://logto.dev`.
- Нажмите **+ Добавить URI** в разделе \***\*Авторизованные URI перенаправления\*\***, чтобы настроить \***\*Авторизованные URI перенаправления\*\***, которые перенаправляют пользователя в приложение после входа. В нашем случае это будет `${your_logto_endpoint}/callback/${connector_id}`, например, `https://logto.dev/callback/${connector_id}`. `connector_id` можно найти на верхней панели страницы деталей коннектора в Logto Admin Console.
- Нажмите **Создать**, чтобы завершить, и вы получите **Client ID** и **Client Secret**.

## Настройка вашего коннектора \{#configure-your-connector}

Заполните поля `clientId` и `clientSecret` с _Client ID_ и _Client Secret_, которые вы получили на страницах деталей OAuth приложения, упомянутых в предыдущем разделе.

`scope` — это список [областей](https://developers.google.com/identity/protocols/oauth2/scopes), разделенных пробелами. Если не указано, область по умолчанию будет `openid profile email`.

`prompts` — это массив строк, который указывает тип взаимодействия с пользователем, который требуется. Строка может быть одним из следующих значений:

- `none`: Сервер авторизации не отображает никаких экранов аутентификации или согласия пользователя; он вернет ошибку, если пользователь еще не аутентифицирован и не настроил предварительное согласие для запрашиваемых областей. Вы можете использовать none, чтобы проверить существующую аутентификацию и/или согласие.
- `consent`: Сервер авторизации запрашивает у пользователя согласие перед возвратом информации клиенту.
- `select_account`: Сервер авторизации запрашивает у пользователя выбор учетной записи. Это позволяет пользователю, у которого есть несколько учетных записей на сервере авторизации, выбрать среди нескольких учетных записей, для которых у него могут быть текущие сеансы.

### Типы конфигурации \{#config-types}

| Имя          | Тип      |
| ------------ | -------- |
| clientId     | string   |
| clientSecret | string   |
| scope        | string   |
| prompts      | string[] |

## Включение Google One Tap \{#enable-google-one-tap}

[Google One Tap](https://developers.google.com/identity/gsi/web/guides/features) — это безопасный и простой способ позволить пользователям входить на ваш веб-сайт или в приложение с помощью их учетной записи Google.

После настройки коннектора Google вы увидите карточку для Google One Tap на странице деталей коннектора. Вы можете включить Google One Tap на ваших страницах регистрации и входа, переключив переключатель.

Когда вы включаете Google One Tap, вы можете настроить следующие параметры:

- **Автоматически выбирать учетные данные, если возможно**: Автоматически входить в систему с учетной записью Google, если [выполнены определенные условия](https://developers.google.com/identity/gsi/web/guides/automatic-sign-in-sign-out).
- **Отменить запрос, если пользователь нажмет/коснется вне**: Закрыть запрос Google One Tap, если пользователь нажмет или коснется вне запроса. Если отключено, пользователь должен нажать кнопку закрытия, чтобы отклонить запрос.
- **Включить улучшенный UX One Tap на браузерах с ITP**: Включить улучшенный пользовательский интерфейс Google One Tap на браузерах с интеллектуальной защитой отслеживания (ITP). Пожалуйста, обратитесь к [этой странице](https://developers.google.com/identity/gsi/web/guides/features#upgraded_ux_on_itp_browsers) для получения дополнительной информации.

:::note

Чтобы включить Google One Tap на вашем веб-сайте (помимо опыта входа Logto), эта функция находится в разработке. Пожалуйста, следите за обновлениями.

:::
