## Настройка Microsoft Azure AD в Azure Portal \{#set-up-microsoft-azure-ad-in-the-azure-portal}

- Посетите [Azure Portal](https://portal.azure.com/#home) и войдите в систему с вашей учетной записью Azure. Вам нужна активная подписка для доступа к Microsoft Azure AD.
- Нажмите на **Azure Active Directory** из предлагаемых сервисов и выберите **App Registrations** в левом меню.
- Нажмите **New Registration** вверху, введите описание, выберите ваш **тип доступа** и добавьте ваш **Redirect URI**, который будет перенаправлять пользователя в приложение после входа. В нашем случае это будет `${your_logto_endpoint}/callback/${connector_id}`, например, `https://foo.logto.app/callback/${connector_id}`. `connector_id` также можно найти на верхней панели страницы деталей коннектора в Logto Admin Console. Вы можете скопировать `Callback URI` в разделе конфигурации.
- Выберите Web в качестве платформы.

## Заполнение конфигурации в Logto \{#fill-in-the-configuration-in-logto}

| Name          | Type   |
| ------------- | ------ |
| clientId      | string |
| clientSecret  | string |
| tenantId      | string |
| cloudInstance | string |

### Client ID \{#client-id}

Вы можете найти **Application (client) ID** в разделе **Overview** вашего недавно созданного приложения в Azure Portal.

### Client Secret \{#client-secret}

- В вашем недавно созданном приложении нажмите **Certificates & Secrets**, чтобы получить client secret, и выберите **New client secret** вверху.
- Введите описание и срок действия.
- Это покажет ваш client secret только один раз. Заполните **value** в конфигурации коннектора Logto и сохраните его в безопасном месте.

### Cloud Instance \{#cloud-instance}

Обычно это `https://login.microsoftonline.com/`. См. [Azure AD authentication endpoints](https://learn.microsoft.com/en-us/azure/active-directory/develop/authentication-national-cloud#azure-ad-authentication-endpoints) для получения дополнительной информации.

### Tenant ID \{#tenant-id}

Logto будет использовать это поле для построения конечных точек авторизации. Это значение зависит от **типа доступа**, который вы выбрали при создании приложения в Azure Portal.

- Если вы выбрали **Accounts in this organizational directory only** для типа доступа, то вам нужно ввести ваш **\{TenantID}**. Вы можете найти tenant ID в разделе **Overview** вашего Azure Active Directory.
- Если вы выбрали **Accounts in any organizational directory** для типа доступа, то вам нужно ввести **organizations**.
- Если вы выбрали **Accounts in any organizational directory or personal Microsoft accounts** для типа доступа, то вам нужно ввести **common**.
- Если вы выбрали **Personal Microsoft accounts only** для типа доступа, то вам нужно ввести **consumers**.
