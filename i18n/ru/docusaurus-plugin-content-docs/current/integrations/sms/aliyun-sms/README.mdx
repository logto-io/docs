---
slug: /integrations/aliyun-sms
sidebar_label: Aliyun Short Message
sidebar_custom_props:
  description: Aliyun предоставляет облачные вычислительные услуги для онлайн-бизнеса.
  logoFilename: 'aliyun.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# Настройка проверки SMS через Aliyun Short Message Service

Официальный коннектор Logto для службы коротких сообщений Aliyun.

<GuideTip />

## Начало работы \{#get-started}

Aliyun является основным поставщиком облачных услуг в Азии, предлагая множество облачных услуг, включая SMS (службу коротких сообщений). Коннектор Aliyun SMS — это плагин, предоставляемый командой Logto для вызова службы SMS Aliyun, с помощью которого конечные пользователи Logto могут регистрироваться и входить в свою учетную запись Logto через код проверки SMS.

## Настройка службы коротких сообщений в консоли SMS Aliyun \{#set-up-a-short-message-service-in-aliyun-sms-console}

### Создание учетной записи Aliyun \{#create-an-aliyun-account}

Перейдите на [веб-сайт Aliyun](https://cn.aliyun.com/) и зарегистрируйте свою учетную запись Aliyun, если у вас ее нет.

### Включение и настройка службы коротких сообщений Aliyun \{#enable-and-configure-aliyun-short-message-service}

1. Войдите в систему с вашей учетной записью Aliyun на [веб-сайте Aliyun](https://cn.aliyun.com/) и перейдите на [страницу консоли службы SMS](https://www.aliyun.com/product/sms).
2. Нажмите кнопку "Открыть бесплатно" (免费开通) в верхнем левом углу страницы службы SMS и начните процесс настройки.
3. Прочтите и согласитесь с "Соглашением об активации службы SMS" (短信服务开通条款) и нажмите "Подписаться на услугу" (开通服务), чтобы продолжить.
4. Теперь вы находитесь на [странице консоли службы SMS](https://dysms.console.aliyun.com/overview), перейдите на кнопку "Материковый Китай" (国内消息) или "За пределами материкового Китая" (国际/港澳台消息) на боковой панели в зависимости от вашего случая использования.
5. Добавьте подпись и шаблон, следуя инструкциям, и предоставьте материалы или информацию, необходимые для проверки.
   - Не забудьте выбрать "Сообщение с кодом подтверждения" (验证码) в качестве "Сценария" (适用场景) при заполнении заявки на подпись, а также "Сообщение с кодом подтверждения" (验证码) для "Типа" (模板类型) при подаче заявки на проверку шаблона, так как мы используем эти подписи и шаблоны для отправки кода подтверждения. В настоящее время мы не поддерживаем отправку SMS-сообщений, кроме текстовых сообщений, связанных с кодом подтверждения.
   - Также используйте `{{code}}` в качестве заполнителя, где вы хотите разместить свой цифровой код подтверждения в содержимом шаблона.
6. После отправки заявки на подпись и шаблон SMS вам нужно дождаться, пока они вступят в силу. На этом этапе мы можем вернуться на [страницу консоли службы SMS](https://dysms.console.aliyun.com/overview) и отправить тестовое SMS. Если ваши подписи и шаблоны готовы к использованию, вы можете попробовать их напрямую; если они еще не вступили в силу, Aliyun также предоставляет тестовые шаблоны.
   - Возможно, вам потребуется пополнить небольшой баланс перед отправкой тестовых сообщений.
   - Вас также могут попросить привязать тестовый номер телефона перед отправкой тестовых сообщений. Для получения более подробной информации перейдите на вкладку "Быстрый старт" (快速学习) на боковой панели [страницы консоли службы SMS](https://dysms.console.aliyun.com/overview).

## Составление JSON коннектора \{#compose-the-connector-json}

1. На [странице консоли службы SMS](https://dysms.console.aliyun.com/overview) наведите курсор на свой аватар в правом верхнем углу и перейдите в "Управление AccessKey" (AccessKey 管理), и нажмите "Создать AccessKey" (创建 AccessKey). Вы получите пару "AccessKey ID" и "AccessKey Secret" после завершения проверки безопасности. Пожалуйста, храните их в безопасности.
2. Перейдите на вкладку "Материковый Китай" (国内消息) или "За пределами материкового Китая" (国际/港澳台消息), которую вы только что посетили, вы легко найдете "Подпись" (签名名称) и "Код шаблона" (模板 CODE).
   - Если вы хотите использовать только тестовую подпись и шаблон, перейдите на вкладку "Быстрый старт" (快速学习), и вы найдете их под "Подпись и шаблоны (только для теста)".
3. Заполните настройки коннектора Aliyun SMS:
   - Заполните поля `accessKeyId` и `accessKeySecret` парами ключей доступа, которые вы получили на шаге 1.
   - Заполните поле `signName` "Подписью" (签名名称), упомянутой на шаге 2. Все шаблоны будут использовать это имя подписи.
   - Вы можете добавить несколько шаблонов коннектора SMS для различных случаев. Вот пример добавления одного шаблона:
     - Заполните поле `templateCode`, которое позволяет управлять контекстом SMS, "Кодом шаблона" (模板 CODE) с шага 2.
     - Заполните поле `usageType` одним из значений: `Register`, `SignIn`, `ForgotPassword` или `Generic` для различных случаев использования. (`usageType` — это свойство Logto для идентификации соответствующего случая использования.) Чтобы включить полные пользовательские потоки, требуются шаблоны с `usageType` `Register`, `SignIn`, `ForgotPassword` и `Generic`.

### Тестирование коннектора Aliyun SMS \{#test-aliyun-sms-connector}

Вы можете ввести номер телефона и нажать "Отправить", чтобы проверить, работают ли настройки, перед тем как нажать "Сохранить и завершить".

Вот и все. Не забудьте [включить коннектор в опыте входа](/connectors/sms-connectors/#enable-phone-number-sign-up-or-sign-in).

### Типы конфигурации \{#config-types}

| Имя             | Тип        |
| --------------- | ---------- |
| accessKeyId     | string     |
| accessKeySecret | string     |
| signName        | string     |
| templates       | Template[] |

| Свойства шаблона | Тип         | Значения перечисления                                   |
| ---------------- | ----------- | ------------------------------------------------------- |
| templateCode     | string      | N/A                                                     |
| usageType        | enum string | 'Register' \| 'SignIn' \| 'ForgotPassword' \| 'Generic' |

## Ссылки \{#references}

<Url href="https://dysms.console.aliyun.com/quickstart">Aliyun SMS - Быстрый старт</Url>
