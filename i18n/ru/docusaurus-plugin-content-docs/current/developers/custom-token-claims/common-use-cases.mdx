---
id: common-use-cases
title: Common use cases
sidebar_label: Common use cases
sidebar_position: 2
---

# Общие случаи использования

В этом разделе мы предоставим несколько примеров, чтобы помочь вам понять некоторые сценарии, в которых [пользовательские утверждения токенов](/developers/custom-token-claims) могут быть полезны, предлагая вам некоторые ссылки. Таким образом, когда вы столкнетесь с трудностями в управлении доступом, вы сможете оценить, могут ли пользовательские утверждения токенов принести вам удобство.

## Сделать возможным управление доступом на основе атрибутов (ABAC) \{#make-attribute-based-access-control-abac-possible}

[Управление доступом на основе атрибутов (ABAC)](https://auth.wiki/abac) — это модель управления доступом, которая использует атрибуты (такие как роли пользователей, свойства ресурсов и условия окружающей среды) для принятия решений о доступе. Это гибкий и динамичный способ управления доступом к защищенным ресурсам.

Предположим, вы создаете приложение, и выпуск приложения разделен на две фазы: публичная бета и официальный запуск. Даже после официального запуска приложения вы хотите, чтобы старые пользователи, участвовавшие в публичной бете, продолжали использовать платные функции.

После официального запуска приложения вы используете функцию Logto [управление доступом на основе ролей (RBAC)](/authorization/role-based-access-control) для реализации управления доступом к использованию платных функций. Чтобы легко проверить, использовал ли пользователь приложение во время публичной бета-фазы, вы можете использовать метод `getCustomJwtClaims()`, чтобы добавить утверждение `createdAt` в полезную нагрузку токена.

Затем, при управлении доступом в ваших защищенных API, вам нужно разрешить токены доступа, которые соответствуют одному из следующих условий:

1. С контекстом RBAC, имеющим область действия для доступа к платным ресурсам.
2. `createdAt` раньше времени окончания публичной бета-фазы.

Если бы не было функции пользовательских утверждений токенов, при проверке разрешений для [защищенных ресурсов API](/authorization/api-resources) необходимо было бы вызывать Logto Management API, чтобы проверить, имеет ли пользователь с текущим токеном доступа разрешения, соответствующие роли, требуемой определенным ресурсом API.

В аналогичном сценарии, предположим, ваше приложение отображает поздравления с днем рождения на странице входа, если приближается день рождения пользователя. Вы можете использовать пользовательские утверждения токенов, чтобы добавить поле дня рождения в [полезную нагрузку токена](/user-management/personal-access-token#example-token-exchange), которое можно использовать для определения, следует ли отображать конкретное сообщение.

## Ручная блокировка выдачи токенов \{#manually-block-token-issuance}

Предположим, Джо управляет онлайн-игрой и использует Logto в качестве системы [управления идентификацией и доступом (IAM)](https://auth.wiki/iam).

Предположим, эта игра требует пополнения счета для покупки игрового времени. Джо записывает баланс каждого пользователя в своем игровом сервисе и постоянно вычитает из баланса по мере накопления игрового времени. Джо хочет принудительно выгонять игроков из игры, когда их баланс на счете исчерпан, чтобы побудить их пополнить счет.

В этот момент Джо также может использовать функцию пользовательских утверждений токенов, предоставляемую Logto, для достижения этой цели:

1. В скрипте можно использовать внешний вызов API [получить внешние данные](/developers/custom-token-claims/create-script/#step-3-fetch-external-data), чтобы получить текущий баланс игрока с сервера игры Джо.
2. Если баланс меньше или равен 0, можно использовать метод [`api.denyAccess()`](/developers/custom-token-claims/create-script/#api) для блокировки выдачи токенов.

В этот момент, поскольку новый действительный токен доступа не может быть получен, игрок будет принудительно выведен из игры.
