---
id: email-templates
title: Шаблоны электронной почты
sidebar_label: Шаблоны электронной почты
sidebar_position: 3
---

Logto предоставляет различные шаблоны для настройки содержимого электронной почты, которые классифицируются в зависимости от их сценариев использования.

Настоятельно рекомендуется использовать разные шаблоны в разных сценариях. В противном случае пользователи могут получить содержимое электронной почты, не соответствующее текущей операции, что вызовет путаницу. Если отсутствуют шаблоны, которые не настроены, это может вызвать ошибки в потоках, зависящих от этого шаблона, и повлиять на нормальное развитие бизнеса.

## Типы шаблонов электронной почты \{#email-template-types}

| usageType                | Сценарий                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| SignIn                   | Пользователи входят в систему, используя свою электронную почту и подтверждают это, вводя код подтверждения вместо пароля.                                                                                                                                                                                                                                                                                                                               |
| Register                 | Пользователи создают учетную запись, используя свою электронную почту и подтверждают ее, вводя код подтверждения, отправленный Logto на их электронную почту.                                                                                                                                                                                                                                                                                            |
| ForgotPassword           | Если пользователи забыли свой пароль во время входа, они могут выбрать подтверждение своей личности, используя электронную почту, которую они уже подтвердили с Logto.                                                                                                                                                                                                                                                                                   |
| Generic                  | Этот шаблон может использоваться в качестве общего резервного варианта для различных сценариев, включая тестирование конфигураций коннекторов и так далее.                                                                                                                                                                                                                                                                                               |
| OrganizationInvitation   | Используйте этот шаблон, чтобы отправить пользователям приглашение присоединиться к организации.                                                                                                                                                                                                                                                                                                                                                         |
| UserPermissionValidation | Во время использования приложения могут возникнуть некоторые операции с высоким уровнем риска или операции с относительно высоким уровнем риска, требующие дополнительной проверки пользователя, такие как банковские переводы, удаление используемых ресурсов и отмена членства. Шаблон `UserPermissionValidation` можно использовать для определения содержимого кода подтверждения электронной почты, который пользователи получают в этих ситуациях. |
| BindNewIdentifier        | Когда пользователь изменяет свой профиль, он может привязать адрес электронной почты к своей текущей учетной записи. В этом случае шаблон `BindNewIdentifier` можно использовать для настройки содержимого письма с подтверждением.                                                                                                                                                                                                                      |

Важно понимать эти параметры:

- Коды подтверждения истекают через 10 минут. В настоящее время мы не поддерживаем настройку времени истечения кода подтверждения.
- В шаблоне необходимо оставить заполнитель `{{code}}`. При отправке кода подтверждения случайно сгенерированный код заменит этот заполнитель перед отправкой электронной почты пользователям.

## Примеры шаблонов электронной почты \{#email-template-examples}

Вы можете использовать предоставленные примеры кода шаблонов электронной почты в качестве отправной точки для настройки вашего интерфейса. Чтобы создать пользовательский интерфейс, похожий на следующий:

![Пример встроенного шаблона электронной почты](../assets/built-in-email-template-sample.jpeg)

Поскольку шаблоны электронной почты, используемые в различных сценариях Logto, очень похожи, единственное различие заключается в описании текущего сценария и операции.

Мы не показываем HTML-код всех шаблонов в деталях здесь. Вместо этого мы берем только сценарий **входа** в качестве примера. Другие сценарии, такие как регистрация и восстановление пароля, очень похожи на следующий пример.

Пользователи могут обратиться к этому шаблону и настроить его в соответствии с их фактической ситуацией.

```html
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Verify your email to sign in</title>
    <style>
      .auth-service-by:hover .mini-logo {
        display: none !important;
      }
      .auth-service-by:hover .mini-logo-color {
        display: block !important;
      }
      body {
        font-family:
          'SF Pro Text',
          -apple-system,
          system-ui,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          Arial,
          sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-smooth: always;
        background-color: #fff;
        color: #191c1d;
        max-width: 640px;
        padding: 32px 0;
        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      }
      h1 {
        font-size: 24px;
        font-weight: 700;
        line-height: 32px;
        margin-top: 32px;
      }
      .verification-code {
        margin: 20px 0;
        background: #eff1f1;
        border-radius: 12px;
        padding: 36px;
        font-size: 32px;
        font-weight: 600;
        line-height: 40px;
      }
      .footer {
        text-align: center;
        color: #a9acac;
        margin-top: 48px;
      }
    </style>
  </head>
  <body>
    <div style="max-width: 698px; border-radius: 16px; border: 1px solid #E0E3E3;">
      <div style="padding: 0 24px;">
        <center>
          <img src="{{logoUrl}}" alt="Logo" width="auto" height="40" />
          <h1>Verify your email to sign in</h1>
          <p>
            We have received a sign in attempt with the following code. Please enter it in the page
            you opened to complete the sign in process.
          </p>
          <div class="verification-code">000000</div>
          <p style="color: #747778;">
            If you did not attempt to sign in but received this email, please ignore it. The code
            will remain active for 10 minutes.
          </p>
          <hr style="margin: 64px 0 24px; max-width: 420px;" />
          <p style="color: #747778; margin: 16px 0 0;">{{companyInfo}}</p>
        </center>
      </div>
    </div>
    <div class="footer">
      <hr />
      <p style="font-size: 14px; line-height: 20px; margin: 20px 0;">
        <a href="https://logto.io" style="color: #A9ACAC; text-decoration: underline;">Logto</a>:
        The better identity infrastructure for developers.
      </p>
      <table style="margin: 0 auto; width: auto; border-spacing: 0;">
        <tbody>
          <tr>
            <td style="vertical-align: middle;">
              <a href="{{discordServerUrl}}" style="display: block; margin: 0 12px;">
                <img src="{{discordLogoUrl}}" style="width: 20px;" />
              </a>
            </td>
            <td style="vertical-align: middle;">
              <a href="{{githubUrl}}" style="display: block; margin: 0 12px;">
                <img src="{{githubLogoUrl}}" style="width: 20px;" />
              </a>
            </td>
            <td style="vertical-align: middle;">
              <a href="{{twitterUrl}}" style="display: block; margin: 0 12px;">
                <img src="{{twitterLogoUrl}}" style="width: 20px;" />
              </a>
            </td>
            <td style="vertical-align: middle;">
              <a href="{{mailToUrl}}" style="display: block; margin: 0 12px;">
                <img src="{{emailIconUrl}}" style="width: 20px;" />
              </a>
            </td>
          </tr>
        </tbody>
      </table>
      <p style="font-size: 12px; line-height: 16px;">
        © Silverhand, Inc., 2810 North Church Street, Wilmington, DE 19802
      </p>
      <p style="color: #A9ACAC; font-size: 12px; line-height: 16px;">
        Have questions or need help?
        <a href="{{mailToUrl}}" style="color: #A9ACAC; text-decoration: underline;">Contact us</a>
      </p>
    </div>
  </body>
</html>
```

Затем вы можете экранировать приведенный выше HTML-код и добавить его в поле "Template" коннектора в конфигурациях следующим образом (предполагая использование SendGrid коннектора):

```json
{
  "subject": "<sign-in-template-subject>",
  "content": "<table cellpadding=\"0\" cellspacing=\"0\" ...",
  "usageType": "SignIn",
  "type": "text/html"
}
```

## Часто задаваемые вопросы \{#faqs}

<details>
<summary>

### Как использовать сторонние сервисы шаблонов электронной почты, если шаблоны не настроены в Logto? \{#how-to-use-third-party-email-template-services-if-templates-are-not-configured-in-logto}

</summary>

Вы можете добавить новую конечную точку в свой собственный веб-сервис для отправки электронных писем, затем использовать [HTTP email коннектор Logto](/integrations/http-email) для вызова конечной точки, которую вы поддерживаете.

Это позволяет вам обрабатывать логику шаблонов электронной почты на вашем собственном сервере.

</details>

<details>
<summary>

### Есть ли способ использовать электронную почту Logto для отправки нашим пользователям кастомизированного "Приветственного письма"? \{#is-there-a-way-to-use-logto-email-for-sending-our-users-a-customized-welcome-email}

</summary>

Мы предлагаем функциональность [Webhook](/developers/webhooks). Вы можете реализовать свою собственную конечную точку API для получения события `User.Created`, отправленного Webhook Logto, и добавить логику для отправки кастомизированного приветственного письма в обработчике webhook.

Коннектор электронной почты Logto предоставляет только уведомления по электронной почте для событий, связанных с потоком аутентификации. Приветственные письма являются бизнес-требованием и не поддерживаются нативно коннектором электронной почты, но эта функциональность может быть достигнута через Webhooks.

</details>

## Связанные ресурсы \{#related-resources}

<Url href="https://blog.logto.io/verification-email-delivery">
  Максимизация доставки писем с подтверждением для гарантии доступа пользователей
</Url>
