---
id: email-connectors
title: Email connectors
sidebar_label: Email connectors
sidebar_position: 1
---

# Email connectors

Email connector интегрирует вашу службу доставки электронной почты с Logto для обеспечения безопасной проверки пользователей через электронную почту. После настройки вы можете отправлять [одноразовые пароли (OTPs)](https://auth.wiki/otp) для [регистрации](/end-user-flows/sign-up-and-sign-in/sign-up), [входа](/end-user-flows/sign-up-and-sign-in/sign-in), [сброса пароля](/end-user-flows/sign-up-and-sign-in/reset-password), [связывания аккаунтов](/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking), [приглашений участников](/end-user-flows/organization-experience/invite-organization-members) и [проверки операций с высоким риском](/end-user-flows/security-verification).

## Выберите ваш email connector \{#choose-your-email-connector}

Logto предлагает три типа опций email connector:

### Бесплатный Logto Email Service (только Cloud) \{#free-logto-email-service-cloud-only}

Эта встроенная опция службы электронной почты идеально подходит для быстрого начала как для [тестирования](/logto-cloud/tenant-settings#development), так и для [производства](/logto-cloud/tenant-settings#production). Она устраняет необходимость в сторонних интеграциях и предлагает бесплатную, надежную доставку электронной почты. Просто настройте ваше базовое оформление для заранее разработанных шаблонов электронной почты.

Коннектор Logto Email Service теперь предлагает возможности брендирования, включая логотип, информацию о компании и имя отправителя.

Однако, несмотря на удобство, есть некоторые ограничения, о которых следует знать — вы не можете настроить адрес электронной почты отправителя, домен или конкретное содержание электронной почты.

```mdx-code-block
import DocCardList from '@theme/DocCardList';
import LogtoEmailService from '../assets/icons/logto-email-service.svg';
import AwsDm from '../assets/icons/aws-direct-mail.svg';
import SendGrid from '../assets/icons/sendgrid.svg';
import Mailgun from '../assets/icons/mailgun.svg';
import Postmark from '../assets/icons/postmark.svg';
import AliyunDm from '../assets/icons/aliyun-direct-mail.svg';
import Smtp from '../assets/icons/smtp.svg';
import Http from '../assets/icons/http.svg';

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Logto Email Service',
      href: '/connectors/email-connectors/built-in-email-service',
      description: 'Официальный коннектор для Logto Email Service.',
      customProps: {
        icon: <LogtoEmailService />,
      }
    },
  ]}
/>
```

### Популярные провайдеры электронной почты \{#popular-email-providers}

Подключитесь к вашему предпочтительному провайдеру услуг электронной почты (ESP) с помощью пошаговых руководств Logto.

Эти опции позволяют вам полностью настроить ваш шаблон электронной почты, имя отправителя и т. д., чтобы лучше соответствовать вашему бренду.

Мы предоставляем готовую поддержку для следующих провайдеров услуг электронной почты:

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'AWS Direct Mail',
      href: '/integrations/aws-ses',
      description: 'Официальный коннектор Logto для AWS коннектора для службы прямой почты.',
      customProps: {
        icon: <AwsDm />,
      }
    },
    {
      type: 'link',
      label: 'Mailgun',
      href: '/integrations/mailgun',
      description: 'Официальный коннектор Logto для службы электронной почты Mailgun.',
      customProps: {
        icon: <Mailgun />,
      }
    },
    {
      type: 'link',
      label: 'SendGrid Email',
      href: '/integrations/sendgrid-email',
      description: 'Официальный коннектор Logto для службы электронной почты SendGrid.',
      customProps: {
        icon: <SendGrid />,
      }
    },
    {
      type: 'link',
      label: 'Aliyun Direct Mail',
      href: '/integrations/aliyun-dm',
      description: 'Официальный коннектор Logto для Aliyun коннектора для службы прямой почты.',
      customProps: {
        icon: <AliyunDm />,
      }
    },
    {
      type: 'link',
      label: 'Postmark Mail',
      href: '/integrations/postmark',
      description: 'Коннектор Logto для службы электронной почты Postmark.',
      customProps: {
        icon: <Postmark />,
      }
    },
  ]}
/>
```

### Настройте ваш email connector \{#customize-your-email-connector}

Если ни одно из вышеперечисленных решений не соответствует вашим потребностям, вы также можете выбрать подключение к желаемой службе электронной почты с использованием Simple Mail Transfer Protocol (SMTP).

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'SMTP',
      href: '/integrations/smtp',
      description: 'Официальный коннектор Logto для SMTP.',
      customProps: {
        icon: <Smtp />,
      }
    },
  ]}
/>
```

Если у вас уже есть собственная служба электронной почты и вы не можете использовать соединение SMTP, мы также предоставляем "HTTP email connector".

Когда необходимо отправить электронное письмо, он отправляет API-запрос на настроенный `endpoint` для завершения потока аутентификации, зависящего от электронной почты. Обратите внимание, что для предотвращения ошибок в потоке аутентификации настроенный endpoint должен возвращать ответ 200 после получения WebHook, чтобы уведомить Logto о получении уведомления для отправки электронной почты. В этом случае вам нужно следить за вашей собственной службой электронной почты, чтобы обеспечить успешную доставку.

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'HTTP email connector',
      href: '/integrations/http-email',
      description: 'Официальный коннектор Logto для HTTP email.',
      customProps: {
        icon: <Http />,
      }
    },
  ]}
/>
```

Если наши стандартные коннекторы не соответствуют вашим конкретным требованиям, не стесняйтесь [связаться с нами](https://logto.productlane.com/roadmap). Для пользователей OSS вы можете [реализовать ваш коннектор (OSS)](/logto-oss/develop-your-connector/implement-connectors#build-a-passwordless-connector), если это требование срочное. Мы всегда приветствуем [вклад](/logto-oss/contribution); ваши усилия могут помочь другим членам сообщества с такими же потребностями.

## Шаги настройки \{#configure-steps}

Следуйте шагам ниже, чтобы добавить email connector:

1. Перейдите в <CloudLink to="/connectors/passwordless">Консоль > Коннекторы > Коннекторы электронной почты и SMS </CloudLink>.
2. Чтобы добавить новый email connector, нажмите кнопку "Set up" и выберите желаемого провайдера электронной почты.
3. Ознакомьтесь с документацией README и настройте выбранного провайдера шаг за шагом.
4. Нажмите "Save and Done", чтобы завершить.

## Изменение email connector \{#change-email-connector}

Вы можете заметить, что можно добавить только один email connector.

Когда у вас уже есть email connector, вы можете выбрать только "Change email connector". При выполнении этой операции в консоли она вступает в силу сразу после сохранения, поэтому, пожалуйста, убедитесь в тестировании вашей настройки перед сохранением.

Чтобы обеспечить стабильность вашей службы, пользователи Cloud могут создать [dev tenant](/logto-cloud/tenant-settings#development) для среды разработки. После тестирования настройки в среде разработки "перенесите" настройку в [производство](/logto-cloud/tenant-settings#production), а затем сохраните настройку.

## Включение регистрации или входа по электронной почте \{#enable-email-sign-up-or-sign-in}

После успешного добавления email connector и завершения настройки вы можете включить конфигурации входа и регистрации, которые зависят от электронной почты + кода подтверждения, в соответствии с вашими бизнес-потребностями.

1. **Перейдите в:** <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Консоль > Опыт входа > Регистрация и вход</CloudLink>
2. [**Установите методы регистрации**](/end-user-flows/sign-up-and-sign-in/sign-up): Выберите "Адрес электронной почты" или "Адрес электронной почты или номер телефона" в качестве идентификатора регистрации. Примечание: проверка электронной почты в настоящее время обязательна при регистрации.
3. [**Установите методы входа**](/end-user-flows/sign-up-and-sign-in/sign-in): Выбранный идентификатор регистрации автоматически становится методом входа. Нажмите "Add another" для дополнительных опций входа.
4. **Сохраните изменения и протестируйте:** Нажмите "Save changes", чтобы внедрить новый опыт входа. Не забудьте использовать "[Live preview](/customization/live-preview)" для тестирования функциональности.

:::warning
Поскольку наши настройки вступают в силу немедленно, удаление существующего email connector может повлиять на нормальные процессы входа и регистрации конечных пользователей.

Например, если идентификатор входа включает комбинацию "электронная почта + код подтверждения", удаление существующего email connector предотвратит получение пользователями кодов подтверждения по электронной почте и приведет к ошибке в процессе входа.

Пожалуйста, будьте внимательны к потенциальным рискам при работе с коннекторами.
:::

## Часто задаваемые вопросы \{#faqs}

<details>
<summary>

### Как настроить имя отправителя электронной почты? \{#how-to-customize-the-email-sender-name}

</summary>

Мы все еще работаем над добавлением большего количества коннекторов. Если вам нужны дополнительные опции, просто сообщите нам о ваших потребностях в Discord и подайте запрос на функцию на [GitHub](https://github.com/logto-io/logto/issues). Если вам нужна дополнительная помощь, вы также можете [связаться с нами по электронной почте](mailto:contact@logto.io).

Для участников мы предоставляем легкий в расширении метод создания коннекторов, позволяющий вам [настроить ваш собственный коннектор](/logto-oss/develop-your-connector) на основе ваших конкретных сценариев. Вы всегда можете отправить pull request в Logto, чтобы другие члены сообщества также могли воспользоваться вашей работой.

</details>

<details>
<summary>

### Как я могу ограничить IP-адреса для запросов электронной почты в email connectors Logto? \{#how-can-i-restrict-ip-addresses-for-email-requests-in-logto-email-connectors}

</summary>

Одним из решений является использование Logto HTTP email connector.

Реализуйте API endpoint на вашем сервере, который вызывает соответствующую службу электронной почты, и запускайте этот API endpoint через Logto [HTTP email connector](/integrations/http-email). Таким образом, у вас будет полный контроль над IP-адресом вашего API endpoint и вы сможете добавить соответствующие IP-адреса в белый список в конфигурации провайдера услуг электронной почты.

</details>
