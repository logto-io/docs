---
sidebar_label: Устранение неполадок
sidebar_position: 9
---

# Устранение неполадок для OSS

<details>

<summary>

### Мой браузер не может загрузить Admin Console (показывает ошибку `Crypto.subtle is unavailable...`) \{#my-browser-cannot-load-admin-console-showing-error-cryptosubtle-is-unavailable}

</summary>

Admin Console использует [Web Crypto API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Crypto_API), который требует [защищенных контекстов](https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts), т.е. HTTPS или HTTP с `localhost`.

Если вы используете HTTP с IP-адресом или пользовательским доменом, браузер не сможет загрузить Admin Console.

</details>

<details>

<summary>

### Я использую пользовательский домен, но мой браузер не может загрузить Admin Console (показывает ошибку `"code": "oidc.invalid_redirect_uri"`) \{#im-using-a-custom-domain-but-my-browser-cannot-load-admin-console-showing-error-code-oidcinvalid_redirect_uri}

</summary>

Если вы используете пользовательский домен вместо `localhost`, вам нужно установить переменную окружения `ENDPOINT` на URL Logto. Это связано с жесткими требованиями к Redirect URI в OIDC. Подробности смотрите в разделе [Конфигурация](/concepts/core-service/configuration/).

</details>

<details>

<summary>

### Я использую HTTPS-прокси (например, Nginx) перед Logto, но у меня не получается войти (показывает ошибку `TypeError: Failed to fetch`) \{#im-using-an-https-proxy-eg-nginx-in-front-of-logto-but-i-failed-on-sign-in-showing-error-typeerror-failed-to-fetch}

</summary>

- Во-первых, убедитесь, что вы установили переменную окружения узла `TRUST_PROXY_HEADER` в значение `true`. Подробности смотрите в разделе [Конфигурация](/concepts/core-service/configuration/#using-a-https-proxy).
- Также вам нужно установить заголовок `X-Forwarded-Proto` в значение `https` в конфигурации вашего прокси. Подробности смотрите в разделе [Доверие к прокси, разгружающим TLS](https://github.com/panva/node-oidc-provider/blob/main/docs/README.md#trusting-tls-offloading-proxies).

</details>

<details>

<summary>

### У меня проблемы с CORS. \{#im-facing-cors-issues}

</summary>

- Если `ADMIN_ENDPOINT` не указан, `localhost:[admin-port]` будет разрешен для выполнения Cross-Origin Resource Sharing (CORS) в Logto.
- Если `ADMIN_ENDPOINT` указан, будут разрешены только запросы с источника `ADMIN_ENDPOINT`.

</details>

<details>

<summary>

### Что это снова? `Error: Invalid id token` \{#what-is-this-again-error-invalid-id-token}

</summary>

Если вы не путаетесь с вашими токенами, то в большинстве случаев это вызвано несоответствием времени на вашем сервере и клиенте. Синхронизируйте время на вашем сервере и клиенте и попробуйте снова.

</details>
