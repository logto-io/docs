---
sidebar_position: 6
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# Миграция конфигураций из env

:::note
Вы можете пропустить эту страницу, если ваша версия Logto больше или равна `v1.0.0-beta.11`.
:::

Управление слишком большим количеством переменных окружения неэффективно и негибко, и сложно поддерживать единый источник истины, когда у вас запущено несколько контейнеров.

Поэтому мы решили перенести все возможные технические конфигурации в базу данных, включая ключи, связанные с OIDC.

Чтобы сделать это плавно, убедитесь, что у вас есть оригинальный файл `.env`, или выполните команду в окружении, где заданы следующие переменные:

```bash
OIDC_PRIVATE_KEYS=some_secret_key # Или OIDC_PRIVATE_KEY_PATHS
OIDC_COOKIE_KEYS=key1,key2
DB_URL=postgresql://localhost:5432/logto
```

Затем выполните следующую команду:

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto db seed oidc
# Или
logto db seed oidc --env /your/path/to/.env
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli db seed oidc
# Или
npx @logto/cli db seed oidc --env /your/path/to/.env
```

  </TabItem>

</Tabs>

Если все прошло успешно, вы увидите сообщение, подобное этому:

```bash
[info] Read config oidc.privateKeys from env
[info] Read config oidc.cookieKeys from env
[info] Generated config oidc.refreshTokenReuseInterval
[info] ✔ Seed OIDC config
```

С этого момента вы можете безопасно удалить `OIDC_PRIVATE_KEYS` и `OIDC_COOKIE_KEYS` из переменных окружения. Не забудьте перезапустить ваш экземпляр Logto, чтобы изменения вступили в силу.
