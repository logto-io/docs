---
description: Управление коннекторами с помощью Logto CLI.
sidebar_position: 2
---

import Admonition from '@theme/Admonition';
import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# Управление коннекторами

:::note

Для каждой команды вы можете добавить `--path /your/path/to/logto` (псевдоним `-p`), чтобы указать путь к экземпляру Logto.

:::

Если рабочая директория находится в корне проекта Logto, вы можете пропустить использование опции `--path`, так как CLI автоматически обнаружит её.

## Список существующих коннекторов \{#list-existing-connectors}

Используйте команду ниже, чтобы перечислить существующие коннекторы, которые были добавлены в ваш экземпляр Logto:

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto connector list
```

  </TabItem>
  <TabItem value="local" label="Local">

```bash
npm run cli connector list
```

  </TabItem>
  
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli connector list
```

  </TabItem>

</Tabs>

Пример вывода:

```bash
OFFICIAL
  @logto/connector-alipay-native
  @logto/connector-aliyun-dm
  @logto/connector-aliyun-sms
  @logto/connector-apple
  @logto/connector-azuread

3RD-PARTY
  connector-some-third-party
```

## Добавление коннекторов \{#add-connectors}

### Официальные коннекторы \{#official-connectors}

Все официальные коннекторы перечислены в [@logto/connectors](https://github.com/logto-io/logto/tree/master/packages/connectors), за исключением тех, чьи имена начинаются с `connector-mock-` для тестирования.

<Admonition type="tip" title="Призыв к участникам!">

Каждый коннектор по умолчанию является [вопросом Tier 1 Bounty Hunter](https://github.com/logto-io/logto/issues/1861). Не стесняйтесь комментировать или создавать соответствующий вопрос на GitHub, чтобы признать коннектор, если вы заинтересованы.

</Admonition>

Если вы используете официальную версию Logto (Docker image, Docker Compose, загрузка с GitHub release page или инициализация через CLI), нет необходимости вручную добавлять официальные коннекторы.

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto connector add --official
```

  </TabItem>
  <TabItem value="local" label="Local">

```bash
npm run cli connector add --official
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli connector add --official
```

  </TabItem>

</Tabs>

### Сторонние коннекторы \{#third-party-connectors}

Сторонние коннекторы — это те, которые созданы для Logto, но НЕ находятся в [@logto/connectors](https://github.com/logto-io/logto/tree/master/packages/connectors).

Коннектор для добавления должен быть действительным пакетом NPM, и имя пакета должно начинаться с `connector-` или `@some-org/connector-`. Например:

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto connector add service-a connector-service-b @org/service-c
# эквивалентно
logto connector add connector-service-a connector-service-b @org/connector-service-c
```

  </TabItem>
  <TabItem value="local" label="Local">

```bash
npm run cli connector add service-a connector-service-b @org/service-c
# эквивалентно
npm run cli connector add connector-service-a connector-service-b @org/connector-service-c
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli connector add service-a connector-service-b @org/service-c
# эквивалентно
npx @logto/cli connector add connector-service-a connector-service-b @org/connector-service-c
```

  </TabItem>

</Tabs>

:::caution
Коннекторы — это исполняемый код! Тщательно проверяйте и анализируйте СКОМПИЛИРОВАННЫЙ КОД (содержимое, загруженное из NPM), чтобы избежать потенциальных проблем с безопасностью, если вы собираетесь использовать сторонний коннектор.
:::

:::note
Не забудьте перезапустить ваш экземпляр Logto, чтобы изменения вступили в силу.
:::

### Связывание локальных коннекторов \{#link-local-connectors}

Logto также поставляется с набором предустановленных коннекторов в `<logto-root>/packages/connectors` в директории вашего экземпляра Logto. Они связаны с основным сервисом по умолчанию, и вы можете вручную связать их снова для обновлений (например, добавить новый локальный коннектор).

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto connector link
```

  </TabItem>
  <TabItem value="local" label="Local">

```bash
npm run cli connector link
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli connector link
```

  </TabItem>

</Tabs>

Эта команда создаст символические ссылки для каждого коннектора в `<logto-root>/packages/connectors` в `<logto-root>/packages/core/connectors`. Если коннектор с таким же именем уже существует в `packages/core/connectors`, он будет сначала удален.

## Удаление коннекторов \{#remove-connectors}

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto connector remove connector-service-a @org/connector-service-b
```

  </TabItem>
  <TabItem value="local" label="Local">

```bash
npm run cli connector remove connector-service-a @org/connector-service-b
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli connector remove connector-service-a @org/connector-service-b
```

  </TabItem>

</Tabs>

:::note
Не забудьте перезапустить ваш экземпляр Logto, чтобы изменения вступили в силу.
:::
