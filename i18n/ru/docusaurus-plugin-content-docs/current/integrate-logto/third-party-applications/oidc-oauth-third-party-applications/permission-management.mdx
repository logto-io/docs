---
description: Выберите области авторизации приложения (разрешения) и убедитесь, что они четко отображаются на экране согласия OAuth.
sidebar_label: Управление разрешениями
sidebar_position: 1
---

import GrantPermissionsOfOrganizationData from './assets/grant-permissions-of-organization-data.webp';
import GrantPermissionsOfUserData from './assets/grant-permissions-of-user-data.webp';

# Управление разрешениями приложения OIDC / OAuth

Сторонние приложения, не принадлежащие вашему сервису, интегрируются с Logto в качестве провайдеров идентификации для аутентификации пользователей. Эти приложения, обычно от внешних поставщиков услуг, требуют тщательного управления разрешениями для защиты данных пользователей.

Logto позволяет вам контролировать конкретные разрешения, предоставляемые сторонним приложениям. Это включает управление [профилем пользователя](#user-permissions-user-profile-scopes), [ресурсами API](#api-resource-permissions-api-resource-scopes) и [областями организации](#organization-permissions-organization-scopes). В отличие от приложений первой стороны, сторонним приложениям, запрашивающим неавторизованные области, будет отказано в доступе.

Включая определенные области, вы определяете, к какой информации о пользователе могут получить доступ сторонние приложения. Пользователи будут просматривать и одобрять эти разрешения на экране согласия перед предоставлением доступа.

## Управление разрешениями ваших сторонних приложений OIDC \{#manage-the-permissions-of-your-oidc-third-party-applications}

Перейдите на <CloudLink to="/applications">Консоль > Приложения > Страница деталей приложения</CloudLink> вашего стороннего приложения OIDC и перейдите на вкладку **Разрешения** и нажмите кнопку **Добавить разрешения**, чтобы управлять разрешениями ваших сторонних приложений.

Основные данные пользователя всегда требуются для запросов сторонних приложений. Кроме того, Logto поддерживает назначение ресурсов организации, что делает его идеальным для B2B-сервисов.

### Предоставление разрешений на данные пользователя \{#grant-permissions-of-user-data}

Назначьте разрешения на уровне пользователя, включая [разрешения профиля пользователя](#user-permissions-user-profile-scopes) (например, электронная почта, имя и аватар) и [разрешения ресурсов API](#api-resource-permissions-api-resource-scopes) (например, доступ на чтение или запись к определенным ресурсам).

Названия запрашиваемых ресурсов (например, Личные данные пользователя, Имя API) и описания конкретных разрешений (например, Ваш адрес электронной почты) будут отображаться на экране согласия для просмотра пользователями.

Нажимая кнопку **Авторизовать**, пользователи соглашаются предоставить указанные разрешения стороннему приложению.

<center>
  <img src={GrantPermissionsOfUserData} alt="предоставление разрешений на данные пользователя" />
</center>

### Предоставление разрешений на данные организации \{#grant-permissions-of-organization-data}

Назначьте разрешения на уровне организации, включая [разрешения организации](#organization-permissions-organization-scopes) и [разрешения ресурсов API](#api-resource-permissions-api-resource-scopes). Logto позволяет назначать ресурсы API конкретным ролям организации.

На экране согласия данные организации отображаются отдельно от данных пользователя. Во время потока авторизации пользователь должен выбрать конкретную организацию для предоставления доступа. Пользователи могут переключаться между организациями перед подтверждением. Стороннее приложение получит доступ только к данным выбранной организации и связанным разрешениям.

<center>
  <img
    src={GrantPermissionsOfOrganizationData}
    alt="предоставление разрешений на данные организации"
  />
</center>

## Типы разрешений \{#permissions-types}

### Разрешения пользователя (Области профиля пользователя) \{#user-permissions-user-profile-scopes}

Эти разрешения являются стандартными для OIDC и основными областями профиля пользователя Logto, используемыми для доступа к утверждениям пользователя. Утверждения пользователя будут возвращены в ID токене и на конечной точке userinfo соответственно.

- `profile`: стандартная область OIDC, используется для доступа к имени пользователя и аватару.
- `email`: стандартная область OIDC, используется для доступа к электронной почте пользователя.
- `phone`: стандартная область OIDC, используется для доступа к номеру телефона пользователя.
- `custom_data`: область профиля пользователя Logto, используется для доступа к [пользовательским данным](/user-management/user-data/#custom-data).
- `identity`: область профиля пользователя Logto, используется для доступа к информации о связанных [социальных идентичностях](/user-management/user-data/#social-identities) пользователя.
- `role`: область профиля пользователя Logto, используется для доступа к информации о [роли](/authorization/role-based-access-control/#roles) пользователя.
- `urn:logto:scope:organizations`: область организации пользователя Logto, используется для доступа к информации об организациях пользователя. Если включено и запрошено сторонним приложением, на экране согласия будет отображаться селектор организации. Это позволяет пользователям просматривать и выбирать организацию, которой они хотят предоставить доступ. Подробнее см. в разделе [организации](/organizations).
- `urn:logto:scope:organization_roles`: область организации пользователя Logto, используется для доступа к информации о ролях организации пользователя.

:::warning

Запрос неактивированной области профиля пользователя в запросе авторизации приведет к ошибке.

:::

### Разрешения ресурсов API (Области ресурсов API) \{#api-resource-permissions-api-resource-scopes}

Logto предоставляет управление доступом на основе ролей (RBAC) для ресурсов API. Ресурсы API — это ресурсы, принадлежащие вашему сервису и защищенные Logto. Вы можете назначать самостоятельно определяемые области API сторонним приложениям для доступа к вашим ресурсам API. Пожалуйста, обратитесь к [RBAC](/authorization/role-based-access-control), шаблону организации и [Защите вашего API](/authorization/api-resources/protect-your-api/) для получения более подробной информации.

Вы можете создавать и управлять своими областями ресурсов API в разделе <CloudLink to="/api-resources">Консоль > Ресурсы API</CloudLink>.

:::warning

Области ресурсов API, которые не активированы для сторонних приложений, будут игнорироваться при отправке запроса на авторизацию. Они не будут отображаться на экране согласия пользователя и не будут предоставлены Logto.

:::

### Разрешения организации (Области организации) \{#organization-permissions-organization-scopes}

[Разрешения организации](/authorization/organization-template/#organization-permission) — это области, определенные исключительно для организаций Logto. Они используются для доступа к информации и ресурсам организации.

:::note

Чтобы использовать разрешения организации Logto, вам нужно активировать область пользователя `urn:logto:scope:organizations`. В противном случае разрешения организации будут игнорироваться при отправке запроса на авторизацию.

:::

Вы можете определить свои собственные области организации в настройках шаблона организации. Пожалуйста, см. [Настройка шаблона организации](/authorization/organization-template/configure-organization-template/) для получения более подробной информации.

:::warning

Области организации, которые не активированы для сторонних приложений, будут игнорироваться при отправке запроса на авторизацию. Они не будут отображаться на экране согласия пользователя и не будут предоставлены Logto.

:::
