---
description: Ознакомьтесь с ключевыми параметрами приложения для интеграции аутентификации OIDC, включая перенаправление URI, конечные точки, токены обновления, выход через backchannel и т. д.
sidebar_position: 6
---

# Структура данных приложения

## Введение \{#introduction}

В Logto _приложение_ относится к конкретной программе или сервису, зарегистрированному на платформе Logto, которому предоставлена авторизация для доступа к информации о пользователе или выполнения действий от имени пользователя. Приложения используются для идентификации источника запросов, сделанных к Logto API, а также для управления процессом аутентификации и авторизации для пользователей, получающих доступ к этим приложениям.

Использование приложений в опыте входа Logto позволяет пользователям легко получать доступ и управлять своими авторизованными приложениями из одного места с последовательным и безопасным процессом аутентификации. Это помогает упростить пользовательский опыт и гарантировать, что только авторизованные лица получают доступ к конфиденциальной информации или выполняют действия от имени организации.

Приложения также используются в журналах аудита Logto для отслеживания активности пользователей и выявления потенциальных угроз безопасности или нарушений. Ассоциируя конкретные действия с определенным приложением, Logto может предоставлять подробную информацию о том, как данные используются и к ним осуществляется доступ, что позволяет организациям лучше управлять своими требованиями безопасности и соответствия.
Если вы хотите интегрировать ваше приложение с Logto, смотрите [Интеграция Logto](/integrate-logto).

## Свойства \{#properties}

### Идентификатор приложения \{#application-id}

_Идентификатор приложения_ — это уникальный автоматически сгенерированный ключ для идентификации вашего приложения в Logto, который упоминается как [client id](https://www.oauth.com/oauth2-servers/client-registration/client-id-secret/) в OAuth 2.0.

### Типы приложений \{#application-types}

_Приложение_ может быть одним из следующих типов приложений:

- **Нативное приложение** — это приложение, которое работает в нативной среде. Например, приложение для iOS, приложение для Android.
- **Одностраничное приложение** — это приложение, которое работает в веб-браузере и обновляет страницу новыми данными с сервера без загрузки полностью новых страниц. Например, приложение React DOM, приложение Vue.
- **Традиционное веб-приложение** — это приложение, которое рендерит и обновляет страницы только веб-сервером. Например, JSP, PHP.
- **Приложение машина-машина (M2M)** — это приложение, которое работает в машинной среде для прямой связи сервис-сервис без взаимодействия с пользователем.

### Секрет приложения \{#application-secret}

_Секрет приложения_ — это ключ, используемый для аутентификации приложения в системе аутентификации, специально для частных клиентов (Традиционные веб-приложения и M2M приложения) в качестве частного защитного барьера.

### Имя приложения \{#application-name}

_Имя приложения_ — это читаемое человеком имя приложения, которое будет отображаться в консоли администратора.

_Имя приложения_ является важным компонентом управления приложениями в Logto, так как позволяет администраторам легко идентифицировать и отслеживать активность отдельных приложений на платформе.

:::note
Важно отметить, что _Имя приложения_ должно быть выбрано тщательно, так как оно будет видно всем пользователям, имеющим доступ к консоли администратора. Оно должно точно отражать цель и функцию приложения, а также быть легким для понимания и распознавания.
:::

### Описание \{#description}

Краткое описание приложения будет отображаться на странице деталей приложения в консоли администратора. Описание предназначено для предоставления администраторам дополнительной информации о приложении, такой как его цель, функциональность и любые другие соответствующие детали.

### URI перенаправления \{#redirect-uris}

_URI перенаправления_ — это список допустимых URI перенаправления, которые были предварительно настроены для приложения. Когда пользователь входит в Logto и пытается получить доступ к приложению, он перенаправляется на один из разрешенных URI, указанных в настройках приложения.

Список разрешенных URI используется для проверки URI перенаправления, который включен в запрос авторизации, отправленный приложением в Logto в процессе аутентификации. Если URI перенаправления, указанный в запросе авторизации, совпадает с одним из разрешенных URI в настройках приложения, пользователь перенаправляется на этот URI после успешной аутентификации. Если URI перенаправления не находится в разрешенном списке, пользователь не будет перенаправлен, и процесс аутентификации завершится неудачей.

:::note
Важно убедиться, что все допустимые URI перенаправления добавлены в разрешенный список для приложения в Logto, чтобы пользователи могли успешно получить доступ к приложению после аутентификации.
:::

Вы можете ознакомиться с [Конечной точкой перенаправления](https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2) для получения дополнительной информации.

<Url href="https://blog.logto.io/redirect-uri-in-authorization-code-flow">
  Понимание URI перенаправления в OIDC с потоком кода авторизации
</Url>

### URI перенаправления после выхода \{#post-sign-out-redirect-uris}

_URI перенаправления после выхода_ — это список допустимых URI, которые были предварительно настроены для приложения для перенаправления пользователя после того, как он вышел из Logto.

Использование разрешенных _URI перенаправления после выхода_ для выхода является частью спецификации RP-Initiated (Инициированный доверяющей стороной) Logout в OIDC. Эта спецификация предоставляет стандартизированный метод для приложений инициировать запрос на выход для пользователя, который включает перенаправление пользователя на предварительно настроенную конечную точку после выхода.

Когда пользователь выходит из Logto, его сессия завершается, и он перенаправляется на один из разрешенных URI, указанных в настройках приложения. Это гарантирует, что пользователь направляется только на авторизованные и допустимые конечные точки после выхода, помогая предотвратить несанкционированный доступ и риски безопасности, связанные с перенаправлением пользователей на неизвестные или непроверенные конечные точки.

Вы можете ознакомиться с [RP-initiated logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html#RPLogout) для получения дополнительной информации.

### Разрешенные источники CORS \{#cors-allowed-origins}

_Разрешенные источники CORS (Cross-origin resource sharing)_ — это список разрешенных источников, с которых приложение может делать запросы к сервису Logto. Любой источник, не включенный в разрешенный список, не сможет делать запросы к сервису Logto.

Список разрешенных источников CORS используется для ограничения доступа к сервису Logto с неавторизованных доменов и для предотвращения атак с подделкой межсайтовых запросов (CSRF). Указав разрешенные источники для приложения в Logto, сервис может гарантировать, что только авторизованные домены могут делать запросы к сервису.

:::note
Список разрешенных источников должен содержать источник, где будет обслуживаться приложение. Это гарантирует, что запросы от приложения разрешены, в то время как запросы с неавторизованных источников блокируются.
:::

### Конечная точка конфигурации провайдера OpenID \{#openid-provider-configuration-endpoint}

Конечная точка для [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfigurationRequest).

### Конечная точка авторизации \{#authorization-endpoint}

_Конечная точка авторизации_ — это термин OIDC, и это обязательная конечная точка, которая используется для инициирования процесса аутентификации для пользователя. Когда пользователь пытается получить доступ к защищенному ресурсу или приложению, зарегистрированному на платформе Logto, он будет перенаправлен на _Конечную точку авторизации_ для аутентификации своей личности и получения авторизации для доступа к запрашиваемому ресурсу.

Вы можете ознакомиться с [Конечной точкой авторизации](https://openid.net/specs/openid-connect-core-1_0.html#AuthorizationEndpoint) для получения дополнительной информации.

### Конечная точка токена \{#token-endpoint}

_Конечная точка токена_ — это термин OIDC, это веб-API конечная точка, которая используется клиентом OIDC для получения токена доступа, ID токена или токена обновления от провайдера OIDC.

Когда клиент OIDC нуждается в получении токена доступа или ID токена, он отправляет запрос на Конечную точку токена с авторизационным грантом, который обычно является кодом авторизации или токеном обновления. Конечная точка токена затем проверяет авторизационный грант и выдает токен доступа или ID токен клиенту, если грант действителен.

Вы можете ознакомиться с [Конечной точкой токена](https://openid.net/specs/openid-connect-core-1_0.html#TokenEndpoint) для получения дополнительной информации.

### Конечная точка информации о пользователе \{#userinfo-endpoint}

Конечная точка [UserInfo](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) OpenID Connect.

### Всегда выдавать токен обновления \{#always-issue-refresh-token}

_Доступность: Традиционные веб-приложения, SPA_

Когда включено, Logto всегда будет выдавать токены обновления, независимо от того, представлен ли `prompt=consent` в запросе аутентификации или `offline_access` представлен в областях действия.

Однако, эта практика не рекомендуется, если это не необходимо (обычно это полезно для некоторых сторонних OAuth интеграций, которые требуют токен обновления), так как это не совместимо с OpenID Connect и может потенциально вызвать проблемы.

### Ротация токена обновления \{#rotate-refresh-token}

_По умолчанию: `true`_

Когда включено, Logto будет выдавать новый токен обновления для запросов токена при следующих условиях:

- Если токен обновления был ротационным (его TTL продлен путем выдачи нового) в течение одного года; **ИЛИ**
- Если токен обновления близок к истечению срока действия (>=70% от его первоначального времени жизни (TTL) прошло); **ИЛИ**
- Если клиент является публичным клиентом, например, нативное приложение или одностраничное приложение (SPA).

:::note
Для публичных клиентов, когда эта функция включена, новый токен обновления всегда будет выдаваться, когда клиент обменивается на новый токен доступа, используя токен обновления.
Хотя вы все еще можете отключить функцию для этих публичных клиентов, настоятельно рекомендуется оставить ее включенной по соображениям безопасности.
:::

<Url href="https://blog.logto.io/understanding-refresh-token-rotation">
  Понимание ротации токена обновления
</Url>

### Время жизни токена обновления (TTL) в днях \{#refresh-token-time-to-live-ttl-in-days}

_Доступность: Не SPA; По умолчанию: 14 дней_

Продолжительность, в течение которой токен обновления может использоваться для запроса новых токенов доступа до его истечения и аннулирования. Запросы токенов продлят TTL токена обновления до этого значения.

Обычно предпочтительнее более низкое значение.

Примечание: Обновление TTL недоступно в SPA (одностраничное приложение) по соображениям безопасности. Это означает, что Logto не будет продлевать TTL через запросы токенов. Чтобы улучшить пользовательский опыт, вы можете включить функцию "Ротация токена обновления", позволяя Logto выдавать новый токен обновления при необходимости.

### URI выхода через backchannel \{#backchannel-logout-uri}

Конечная точка выхода через backchannel OpenID Connect. См. [Federated sign-out: Back-channel logout](#) для получения дополнительной информации.

### Пользовательские данные \{#custom-data}

Дополнительная информация о приложении, не перечисленная в предопределенных свойствах приложения, пользователи могут определять свои собственные пользовательские поля данных в соответствии с их конкретными потребностями, такими как настройки и конфигурации, специфичные для бизнеса.
