---
sidebar_position: 2
---

# Загрузка пользовательских UI-ресурсов с использованием CLI

После разработки вашего пользовательского интерфейса входа вы можете развернуть его в Logto Cloud для обслуживания пользователей вашего арендатора. Как мы уже упоминали в документации "[Bring your UI](/customization/bring-your-ui/)", вы можете сделать это, загрузив заархивированные UI-ресурсы в Logto Console.

Здесь мы предлагаем другой вариант развертывания ваших UI-ресурсов в Cloud с использованием команды CLI, что будет полезно, если вы хотите интегрировать процесс развертывания в NPM-скрипт или CI / CD-пайплайн.

## Инструкции \{#instructions}

:::note
Предполагается, что ваши пользовательские UI-ресурсы для входа находятся в директории `/path/to/your/custom/ui/dist`.
:::

Команда развертывания автоматически заархивирует ваши UI-ресурсы, загрузит их в Logto Cloud и установит пользовательский интерфейс в качестве опыта входа для пользователей вашего арендатора.

### Предварительные условия \{#prerequisites}

Поскольку эта команда взаимодействует с Logto Management API, требуется приложение машина-машина для аутентификации запроса. Обратитесь к [этой документации](/integrate-logto/interact-with-management-api/), чтобы узнать, что такое Logto Management API и как создать приложение машина-машина с необходимыми разрешениями.

### Опции команды \{#command-options}

```
--help                                 Показать помощь
--version                              Показать версию CLI
--auth                                 Учетные данные аутентификации вашего Logto M2M приложения. Например: <app-id>:<app-secret>
--endpoint                             URI конечной точки Logto, указывающий на ваш экземпляр Logto Cloud. Например: https://<tenant-id>.logto.app/
--path, --experience-path              Локальный путь к папке с вашими пользовательскими ресурсами опыта входа.
--resource, --management-api-resource  Индикатор ресурса Logto Management API. Требуется, если используется пользовательский домен.
--verbose                              Показать подробный вывод. [по умолчанию: false]
```

### Запуск команды \{#run-the-command}

Предположим, ваш ID приложения — `foo`, секрет приложения — `bar`, а ID арендатора — `baz`.

```bash
npx @logto/tunnel deploy --auth foo:bar --endpoint https://baz.logto.app --experience-path /path/to/your/custom/ui/dist
```

Если вы используете пользовательский домен для вашей конечной точки Logto, необходимо указать дополнительную опцию `--management-api-resource` (или `--resource`).

Учитывая, что ресурс Logto Management API всегда фиксирован на `https://<tenant-id>.logto.app/api`, вы можете запустить команду следующим образом:

```bash
npx @logto/tunnel deploy --resource https://baz.logto.app/api --auth foo:bar --endpoint https://your.custom.domain --experience-path /path/to/your/custom/ui/dist
```

Примечание:

1. Эта опция может быть опущена при использовании домена Logto по умолчанию, так как CLI может автоматически определить ресурс.
2. Использование как пользовательского домена, так и домена Logto по умолчанию в качестве конечной точки приведет к одинаковым результатам.

Кроме того, если у вас уже есть существующий zip-файл и вы предпочитаете использовать его напрямую, вы можете указать опцию `--zip-path`.

```bash
npx @logto/tunnel deploy --auth foo:bar --endpoint https://baz.logto.app --zip-path /path/to/your/custom/ui/dist.zip
```

### Поддерживаемые переменные окружения \{#supported-environment-variables}

Команда развертывания также поддерживает переменные окружения и автоматически сопоставляет их с соответствующими опциями.

Все поддерживаемые переменные окружения перечислены ниже с префиксом `LOGTO_`.

| Переменная окружения          | Опция CLI                 |
| ----------------------------- | ------------------------- |
| LOGTO_AUTH                    | --auth                    |
| LOGTO_ENDPOINT                | --endpoint                |
| LOGTO_EXPERIENCE_PATH         | --experience-path         |
| LOGTO_PATH                    | --path                    |
| LOGTO_MANAGEMENT_API_RESOURCE | --management-api-resource |
| LOGTO_RESOURCE                | --resource                |
| LOGTO_ZIP_PATH                | --zip-path                |

### Использование переменных окружения \{#use-environment-variables}

1. Вы можете создать файл `.env` в корневой директории CLI или в любой родительской директории, где находится CLI.

```bash title=".env"
LOGTO_AUTH=foo:bar
LOGTO_ENDPOINT=https://your.custom.domain
LOGTO_EXPERIENCE_PATH=/path/to/your/custom/ui/dist
LOGTO_RESOURCE=https://baz.logto.app/api
```

Затем запустите команду без указания опций.

```bash
npx @logto/tunnel deploy
```

2. Кроме того, укажите эти переменные окружения напрямую при запуске команды.

```bash
LOGTO_AUTH=foo:bar LOGTO_ENDPOINT=https://your.custom.domain LOGTO_EXPERIENCE_PATH=/path/to/your/custom/ui/dist LOGTO_RESOURCE=https://baz.logto.app/api npx @logto/tunnel deploy
```
