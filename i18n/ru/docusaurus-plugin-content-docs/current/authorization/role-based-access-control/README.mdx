---
sidebar_position: 2
---

import bookstoreRolesImage from '../assets/bookstore-roles.png';
import bookstoreSetupImage from '../assets/bookstore-setup.png';
import permissionsImage from '../assets/permissions.png';
import Rbac from '../assets/rbac.svg';
import roleOrderAdminImage from '../assets/role-order-admin.png';

# Управление доступом на основе ролей

[Управление доступом на основе ролей (RBAC)](https://auth.wiki/rbac) — это метод назначения разрешений пользователям на основе их ролей. Рассмотрите возможность использования RBAC в следующих сценариях:

- **У вас есть несколько пользователей с разными потребностями в доступе**: RBAC идеально подходит, когда пользователям нужны различные разрешения на основе ролей, таких как администратор, редактор или зритель.
- **Вам нужно упростить управление разрешениями**: Это эффективно для управления большими группами пользователей путем назначения ролей, а не установки разрешений индивидуально.
- **Ваше приложение обслуживает разные отделы или команды**: Это полезно в сценариях, когда разные группы требуют различных уровней доступа к ресурсам.

## Понимание работы управления доступом на основе ролей \{#understand-how-role-based-access-control-work}

<Rbac style={{ maxWidth: '100%' }} />

### Разрешения (Области действия) \{#permissionsscopes}

Разрешение относится к авторизации для доступа к [ресурсу API](/authorization/api-resources). В реальном мире такие сущности, как заказы, продукты и документы, могут быть обозначены как ресурсы, и к ним могут быть назначены различные действия.

Примеры разрешений, включая возможность редактировать заказ, читать документ и удалять продукт, следующие:

- `write:orders`
- `read:documents`
- `delete:products`

<img src={permissionsImage} width="60%" alt="Permissions" />

На рисунке выше показано, что разрешение `read:item` в ресурсе `https://api-1.store.io` отличается от разрешения `read:item` в ресурсе `https://api-2.store.io`.

Если ресурс API не указан, разрешение будет рассматриваться как "для OIDC". Обычно это не то, что вам нужно в RBAC.

Узнайте, как [настроить разрешения API](/authorization/role-based-access-control/configure-permissions) в Logto.

### Роли \{#roles}

Роли — это _группировка разрешений_, которые могут быть назначены пользователям. Они также предоставляют способ агрегировать разрешения, определенные для различных API, что делает добавление, удаление или корректировку разрешений более эффективным, чем назначение их индивидуально пользователям.

Вот пример роли `order_admin` с несколькими разрешениями для двух ресурсов:

<img src={roleOrderAdminImage} width="60%" alt="Order Admin Role" />

Допустимо, чтобы разрешения пересекались между ролями.

Узнайте, как [настроить роли](/authorization/role-based-access-control/configure-roles) в Logto.

### Пример: Интернет-магазин книг \{#example-an-online-bookstore}

Предположим, у вас есть интернет-магазин книг для управления. Здесь мы значительно упрощаем модель управления доступом для демонстрационных целей.

Модель разделена на два основных ресурса API: заказы и продукты. У них разные индикаторы ресурсов, как показано ниже:

- Заказы: `https://api.store.io/orders`
- Продукты: `https://api.store.io/products`

Для каждого ресурса вы хотите разделить разрешения на чтение, запись и удаление. Таким образом, вы определяете всего шесть разрешений:

- `https://api.store.io/orders`
  - Разрешение `read:order`
  - Разрешение `write:order`
  - Разрешение `delete:order`
- `https://api.store.io/products`
  - Разрешение `read:product`
  - Разрешение `write:product`
  - Разрешение `delete:product`

Вот иллюстрация этой модели:

<img src={bookstoreSetupImage} width="60%" alt="Bookstore API and Permissions" />

Вы хотите иметь два типа администраторов: администратор заказов и администратор продуктов:

- **_Администратор заказов_** может управлять заказами и видеть продукты (так как заказы состоят из продуктов), но не может управлять продуктами.
- **_Администратор продуктов_** может управлять продуктами и не должен знать о каких-либо заказах.

Таким образом, вы создаете две роли, `order_admin` и `product_admin`, с разрешениями:

- `order_admin`
  - `https://api.store.io/orders`
    - `read:order`, `write:order`, `delete:order`
  - `https://api.store.io/products`
    - `read:product`
- `product_admin`
  - `https://api.store.io/products`
    - `read:product`, `write:product`, `delete:product`

Вот иллюстрация этих двух ролей:

<img src={bookstoreRolesImage} width="60%" alt="Bookstore Roles" />

Допустимо назначить пользователю обе роли `order_admin` и `product_admin`, тогда у него будут все шесть разрешений, которые вы только что определили.

Обратите внимание, что администратор заказов делится разрешением `read:product` с администратором продуктов, и конечные разрешения, которые имеет пользователь, являются объединением всех разрешений из ролей, которые ему назначены.

## Связанные ресурсы \{#related-resources}

<Url href="https://blog.logto.io/mastering-rbac">
  Освоение RBAC в Logto: Комплексный пример из реальной жизни
</Url>
<Url href="https://blog.logto.io/ciam-102-authz-and-rbac">
  CIAM 102: Авторизация и управление доступом на основе ролей
</Url>
