---
sidebar_position: 3
---

import organizationExampleImage from '../assets/organization-example.webp';
import organizationPermissionImage from '../assets/organization-permissions.webp';
import organizationRoleImage from '../assets/organization-role.webp';

# Шаблон организации

**Шаблон организации** — это дизайн управления доступом для многопользовательских приложений. Он основывается на основах [управления доступом на основе ролей (RBAC)](/authorization/role-based-access-control), но адаптирован для многопользовательских сред, где организации представляют собой бизнесы, группы или пользователей.

На уровне организации необходимо управление доступом для управления разрешениями на ресурсы.

Вот пример с использованием Notion, популярного инструмента для совместной работы, и типичного [многопользовательского приложения](https://auth.wiki/multi-tenancy). Он поддерживает различные функции для [аутентификации](https://auth.wiki/authentication) и [авторизации](https://auth.wiki/authorization):

- Вы можете создавать и присоединяться к нескольким рабочим пространствам с одной учетной записью, вместо того чтобы иметь отдельные учетные записи для каждого рабочего пространства.
- Notion использует **один и тот же набор** уровней доступа, таких как "Владелец рабочего пространства" и "Участник", во всех рабочих пространствах, хотя вы могли бы ожидать разные уровни доступа для каждого из них.

В этой главе мы сосредоточимся на шаблоне организации, который относится к дизайну авторизации на уровне организации.

Чтобы правильно его настроить, вам нужно понять [как работают организации](/organizations/understand-how-organizations-work) и различные вовлеченные сущности. Если вы еще не ознакомились с этим, обязательно прочитайте эти главы.

# Понимание шаблона организации

### Разрешение организации \{#organization-permission}

Разрешение организации относится к авторизации на выполнение действия в контексте организации. Разрешение организации должно быть представлено в виде значимой строки, также служащей именем и уникальным идентификатором.

<img src={organizationPermissionImage} width="100%" alt="Разрешения организации" />

Например, `edit:resource`.

Разрешения организации не имеют смысла без контекста организации. Например, `edit:resource` в контексте организации `org1` отличается от `edit:resource` в контексте организации `org2`, потому что они указывают на разные ресурсы (`org 1` против `org 2`).

### Роль организации \{#organization-role}

Роль организации — это набор [разрешений организации](#organization-permission) или [разрешений API](/authorization/role-based-access-control/configure-permissions) (разрешения API, определенные непосредственно в <CloudLink to="/api-resources">ресурсах API в Logto Console</CloudLink>), которые могут быть назначены пользователям.

<img src={organizationRoleImage} width="100%" alt="Роли организации" />

Роли организации не имеют смысла без контекста организации. Например, `admin` в контексте организации `org1` отличается от `admin` в контексте организации `org2`.

:::note

**Могу ли я назначать разрешения, определенные на уровне ресурса API, ролям организации?**

Да, вы можете назначать [разрешения API](/authorization/role-based-access-control#permissionsscopes) ролям организации, а не только [разрешениям на уровне организации](/authorization/organization-template#organization-permission).

[Ресурсы API](/authorization/api-resources) в Logto Cloud в основном защищают ресурсы на уровне пользователя / системы, но когда системы и организации используют одни и те же конечные точки, Logto позволяет назначать разрешения API ролям организации для гибкости.

:::

## Шаблон организации \{#organization-template}

Шаблон организации относится к набору разрешений и ролей организации, которые применяются ко всем [организациям.](/organizations) Он рассматривается как управление доступом на основе ролей на уровне организации.

Подумайте о типичном приложении для совместной работы, и они естественным образом используют один и тот же "шаблон" управления доступом, который определяет уровни доступа и то, что пользователи могут делать в организации. Мы называем это "шаблоном организации" в Logto.

Рассмотрим пример, чтобы понять, как все связано:

**Джон** и **Сара** находятся в разных организациях с разными ролями в контексте разных организаций.

<img src={organizationExampleImage} width="100%" alt="Шаблон организации" />

Из этой диаграммы вам нужно знать следующее:

1. **Джон** связан с двумя организациями, используя электронную почту `john@email.com` в качестве своего уникального идентификатора. Он занимает должность `admin` в `Организации A` и является `гостем` в `Организации B`.
2. **Сара** связана с одной организацией и использует электронную почту `sarah@email.com` в качестве своего уникального идентификатора. Она является `администратором` `Организации B`.
3. Роли `Администратор`, `Участник` и `Гость` назначаются в организациях, и эти роли согласованы между различными организациями.
4. Дополнительные роли могут быть созданы в настройках шаблона организации. Эти вновь созданные роли будут применяться и использоваться во всех организациях.

:::note

В Logto шаблон организации — это модель управления доступом, разработанная специально для организаций. Хотя он основан на управлении доступом на основе ролей (RBAC), он предназначен для различных сценариев.

Используйте шаблон организации, когда вам нужно настроить роли и разрешения для организации.

Для простого B2C приложения без уровня организации используйте RBAC на уровне пользователя / системы.

Вы можете использовать как [шаблон организации](/authorization/organization-template), так и [RBAC на уровне пользователя / системы](/authorization/role-based-access-control/) в Logto, что позволяет более надежно подходить к удовлетворению ваших конкретных бизнес- и продуктовых требований.

:::

## Связанные ресурсы \{#related-resources}

<Url href="https://blog.logto.io/case-study-multi-tenancy">
  Исследование: Создание многопользовательской среды с помощью Logto Organizations
</Url>
