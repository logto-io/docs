---
sidebar_position: 3
---

import organizationTemplateImage from './assets/organization-template.webp';

# Управление организацией

При разработке [мультитенантного приложения](https://auth.wiki/multi-tenancy) часто возникает сценарий, когда у вас есть платформа для членов вашей организации, чтобы самостоятельно управлять ресурсами своей организации.

Возьмем в качестве примера базовую настройку организации, которая содержит как роль администратора, так и роль обычного члена.

| Роль  | Разрешения                                                                                                                                                                                                                                         |
| ----- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Админ | Управление членами организации, например, приглашение, обновление роли члена, удаление члена и т. д.<br />Управление информацией об организации, например, обновление названия организации и пользовательских данных, удаление организации и т. д. |
| Член  | Может только приглашать пользователей в организацию.                                                                                                                                                                                               |

Таким образом, мы можем определить следующий [шаблон организации](/authorization/organization-template):

<center>
  <img src={organizationTemplateImage} width="100%" alt="Шаблон организации" />
</center>

После установки шаблона организации вы также можете создать набор API в вашем сервисе, которые вызывают Management API для выполнения действий по управлению в конкретной организации. API в вашем сервисе должны проверять токен организации, чтобы убедиться, что у пользователя есть необходимые разрешения.

## Примеры самостоятельного управления пользователями своими организациями \{#examples-of-user-self-manage-their-own-organizations}

Вот список вещей, которые вы можете позволить вашим пользователям делать в вашем мультитенантном приложении:

### Позволить всем приглашать членов: \{#let-everyone-invite-members}

Вы можете позволить как администраторам, так и членам приглашать других в организацию. Ознакомьтесь с [этой документацией](/end-user-flows/organization-experience/invite-organization-members) для получения подробной информации о приглашении членов.

### Администратор может изменять роли членов: \{#admin-can-modify-member-roles}

Администратор может иметь привилегию изменять роли других членов. Администратор может создавать более специфические роли для организации, такие как руководитель отдела, менеджер проекта, координатор и т. д. Это можно реализовать с помощью этих Management API:

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users/{userId}/roles \
 -H "Authorization: Bearer $ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"organizationRoleIds":["admin"]}'
```

Или массовым способом:

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users/roles \
 -H "Authorization: Bearer $ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"userIds":["userId1", "userId2"],"organizationRoleIds":["admin"]}'
```

### Добавление ботов в организацию \{#add-bots-to-organization}

Вы также можете реализовать функцию, позволяющую администраторам добавлять ботов в конкретную организацию. Это можно сделать, сначала создав приложения Машина-машина (M2M), а затем добавив эти M2M приложения в организации как ботов.

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/applications \
 -H "Authorization: Bearer $ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"applicationIds":["botAppId"]}'
```

Затем вы также можете назначить роли организации этим ботам.

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/applications/roles \
 -H "Authorization: Bearer $ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"applicationIds":["botApp1"],"organizationRoleIds":["botRoleId"]}'
```

## Откройте больше возможностей с Management API \{#unlock-more-possibilities-with-management-api}

Приведенные выше примеры - это лишь некоторые из множества возможностей, которые вы можете реализовать с помощью Management API. Ознакомьтесь с полным списком конечных точек Logto Management API и узнайте, что еще вы можете с ними сделать:

<Url href="https://openapi.logto.io/operation/operation-listorganizations">
  Получить организации
</Url>
<Url href="https://openapi.logto.io/operation/operation-listorganizationscopes">
  Получить области организации
</Url>
<Url href="https://openapi.logto.io/operation/operation-getorganizationrole">
  Получить роль организации
</Url>
<Url href="https://openapi.logto.io/operation/operation-getorganizationinvitation">
  Получить приглашения в организацию
</Url>
