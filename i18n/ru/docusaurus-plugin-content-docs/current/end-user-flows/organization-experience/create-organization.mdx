---
sidebar_position: 1
---

# Создание организации

Представьте, что вы создаете [мультитенантное приложение](https://auth.wiki/multi-tenancy) (например, мультитенантное SaaS-приложение), которое обслуживает множество клиентов, и каждый клиент владеет выделенным арендатором. Когда приходит новый клиент, он создает новую учетную запись, а также нового арендатора для своего бизнеса.

Точно так же, как вы зарегистрировали свою учетную запись в [Logto Cloud](https://cloud.logto.io/) и имеете своего собственного арендатора Logto. Вы можете реализовать ту же архитектуру в своем приложении, используя функцию Logto "[организация](/organizations)".

## Создание ваших организаций \{#create-your-organizations}

Существует два способа создания организаций для вашего приложения.

### Создание через Logto Console \{#create-via-logto-console}

Создавайте свои организации вручную через интерфейс Logto Console. Перейдите в <CloudLink to="/organizations">Console > Organizations</CloudLink>, чтобы создать организацию, назначить участников и роли, а также настроить интерфейс входа в организацию.

Создайте "[шаблон организации](/authorization/organization-template)", если вы хотите массово создавать похожие организации, которые имеют одинаковые настройки [роли](/authorization/organization-template/configure-organization-template#create-organization-role) и [разрешения](/authorization/organization-template/configure-organization-template#create-organization-permission).

### Создание через Logto Management API \{#create-via-logto-management-api}

Нажатие кнопок в интерфейсе Console работает отлично, но мы действительно хотим, чтобы конечные пользователи могли самостоятельно создавать организации и управлять ими в **ВАШЕМ приложении**. Таким образом, вам придется реализовать эти функции в вашем приложении с помощью Logto Management API.

:::note

Если вы не знакомы с Logto Management API, пожалуйста, убедитесь, что вы сначала прочитали эти документы.

<Url href="/concepts/core-service/#management-api">Management API</Url>
<Url href="/integrate-logto/interact-with-management-api">Взаимодействие с Management API</Url>

:::

Предположим, вы уже подключили свой сервер API к конечной точке Logto Management API через механизм Машина-машина (M2M) и получили токен доступа M2M.

Создайте организацию с помощью Management API ([API ссылки](https://openapi.logto.io/operation/operation-createorganization)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}'
```

Пример ответа (201)

```json
{
  "tenantId": "string",
  "id": "string",
  "name": "string",
  "description": "string",
  "customData": {},
  "isMfaRequired": false,
  "branding": {
    "logoUrl": "string",
    "darkLogoUrl": "string",
    "favicon": "string",
    "darkFavicon": "string"
  },
  "createdAt": 1234567890
}
```

Далее вы можете реализовать свой собственный API для вашего приложения. Таким образом, когда ваши пользователи выполняют действие "создать организацию" в вашем приложении, вы можете проверить запрос, проверив их разрешения, а затем вызвать Logto Management API для выполнения остальной работы.

## Проверка токена организации в запросе пользователя \{#validating-organization-token-in-user-request}

В вашем приложении, когда пользователи выполняют действия в контексте организации, они должны использовать токен организации вместо обычного токена доступа. Токен организации — это особый вид [JWT](https://auth.wiki/jwt), который содержит разрешения организации. И, как и любой JWT [токен доступа](https://auth.wiki/access-token), вы можете декодировать утверждения токена и проверить утверждение "scope" для проверки разрешений.

Ознакомьтесь с этими документами для получения более подробной информации:

<Url href="/authorization/organization-template/protect-organization-resources">
  Проверка токенов организации
</Url>
<Url href="/authorization/api-resources/protect-your-api">Защита вашего API</Url>

## Связанные ресурсы \{#related-resources}

<Url href="https://blog.logto.io/implement-multi-tenancy">
  Реализация мультитенантности с Postgres
</Url>
