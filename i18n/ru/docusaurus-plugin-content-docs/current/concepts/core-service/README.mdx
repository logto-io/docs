---
sidebar_label: Logto core service
sidebar_position: 3
---

# Основной сервис

## Введение \{#introduction}

_Основной сервис_ — это монолитный сервис для критически важных задач Logto. Исходный код находится в [`@logto/core`](https://github.com/logto-io/logto/tree/master/packages/core).

:::note
_Основной сервис_ и _SDK core_ — это два отдельных понятия. См. [конвенции SDK](/developers/sdk-conventions) для различий.
:::

Для упрощения мы делим Основной сервис на четыре основных модуля:

<table>
  <thead>
    <tr>
      <td>Название</td>
      <td>Описание</td>
      <td>Путь монтирования</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OIDC Provider</td>
      <td>[OpenID Provider](https://openid.net/specs/openid-connect-core-1_0.html).</td>
      <td>
        <code>/oidc</code>
      </td>
    </tr>
    <tr>
      <td>Logto API</td>
      <td>Management API, Experience API и Account API.</td>
      <td>
        <code>/api</code>
      </td>
    </tr>
    <tr>
      <td>Frontend proxies</td>
      <td>HTTP-прокси или обслуживание статических файлов для фронтенд-проектов.</td>
      <td>
        См. <a href="#frontend-proxies">Frontend proxies</a> для деталей.
      </td>
    </tr>
  </tbody>
</table>

Бэкенд API, включая OIDC, построены в пакете `core`, в то время как фронтенд-прокси зависят от соответствующих соседних пакетов в монорепозитории Logto.

## OIDC Provider \{#oidc-provider}

Logto использует замечательную сертифицированную реализацию [OpenID Connect](https://openid.net/connect/) [node-oidc-provider](https://github.com/panva/node-oidc-provider) под капотом. Провайдер монтируется на `/oidc`, и вы можете проверить соответствующие конфигурации и файлы в [packages/core/src/oidc](https://github.com/logto-io/logto/tree/master/packages/core/src/oidc).

[Userinfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) OIDC доступен и монтируется на `/oidc/me`.

:::info
Если вы хотите напрямую вызывать OIDC API, не забудьте установить заголовок `Content-Type: application/x-www-form-urlencoded`.
:::

### Включенные функции OpenID \{#enabled-openid-features}

- [OpenID Connect Core](https://openid.net/specs/openid-connect-core-1_0.html)
- [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)
- [OpenID Connect RP-Initiated Logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html)
- [OpenID Connect Back-Channel Logout](https://openid.net/specs/openid-connect-backchannel-1_0-final.html)
- [OAuth 2.0](https://www.rfc-editor.org/rfc/rfc6749.html)
- [OAuth 2.0 Token Introspection](https://www.rfc-editor.org/rfc/rfc7662.html)
- [OAuth 2.0 Token Revocation](https://www.rfc-editor.org/rfc/rfc7009.html)
- [OAuth 2.0 Resource Indicators](https://www.rfc-editor.org/rfc/rfc8707.html)
- [Proof Key for Code Exchange (PKCE)](https://www.rfc-editor.org/rfc/rfc7636.html)

## Logto API \{#logto-api}

### Management API \{#management-api}

_Management API_ — это набор API, которые управляют и обновляют данные Logto. Только пользователи с ролью `admin` имеют к ним доступ.

Перейдите к [API references](https://openapi.logto.io), чтобы увидеть детали.

Чтобы программно получить доступ к API, см. [Взаимодействие с Management API](/integrate-logto/interact-with-management-api).

### Experience API \{#experience-api}

Experience API — это набор специализированных конечных точек, которые поддерживают взаимодействие с пользовательским интерфейсом входа.

Эти API позволяют разработчикам реализовать основные функции аутентификации, включая вход, регистрацию, сброс пароля, привязку социальных аккаунтов и многофакторную аутентификацию (MFA). Чтобы реализовать эти функции, ваш пользовательский интерфейс должен взаимодействовать с Experience API.

Чтобы лучше понять пользовательские потоки и детали реализации:

- Ознакомьтесь с руководством [Разработка вашего пользовательского интерфейса](/customization/bring-your-ui/#develop-your-custom-ui), чтобы узнать, как использовать Experience API для создания вашего пользовательского интерфейса
- Обратитесь к [Experience API references](https://openapi.logto.io/group/endpoint-experience) для подробной документации API
- Прочтите [Experience API design RFC](https://github.com/logto-io/rfcs/blob/master/draft/0004-experience-api.md) для углубленных технических спецификаций и примеров

### Account API \{#account-api}

Account API — это обширный набор API, который предоставляет конечным пользователям прямой доступ к API без необходимости проходить через Management API, вот основные моменты:

- Прямой доступ: Account API позволяет конечным пользователям напрямую получать доступ и управлять своим профилем учетной записи без необходимости использования Management API.
- Управление профилем пользователя и идентификациями: Пользователи могут полностью управлять своими профилями и настройками безопасности, включая возможность обновления информации об идентификации, такой как электронная почта, телефон и пароль, а также управление социальными связями. Поддержка MFA и SSO скоро появится.
- Глобальное управление доступом: Администратор имеет полный глобальный контроль над настройками доступа, может настраивать каждое поле.
- Бесшовная авторизация: Авторизация стала проще, чем когда-либо! Просто используйте `client.getAccessToken()`, чтобы получить непрозрачный токен доступа для OP (Logto), и прикрепите его к заголовку Authorization как `Bearer <access_token>`.

С помощью Logto Account API вы можете создать пользовательскую систему управления учетными записями, такую как страница профиля, полностью интегрированную с Logto.

Ознакомьтесь с [Настройками учетной записи через Account API](/end-user-flows/account-settings/by-account-api), чтобы узнать, как использовать Account API для создания собственной страницы настроек учетной записи.

Обратитесь к [Account API references](https://openapi.logto.io/group/endpoint-my-account) для подробной документации API.

## Frontend proxies \{#frontend-proxies}

_Frontend proxy_ — это функция промежуточного программного обеспечения, которая обслуживает фронтенд-проект в зависимости от среды:

- Если это разработка, он проксирует HTTP-запросы на сервер разработки фронтенда.
- Если это производство, он напрямую обслуживает статические файлы фронтенда.

Logto имеет три фронтенд-прокси:

<table>
  <thead>
    <tr>
      <td>Название</td>
      <td>Фронтенд-пакет</td>
      <td>Путь монтирования</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Admin Console proxy</td>
      <td>
        <code>/packages/console</code>
      </td>
      <td>
        <code>/console</code>
      </td>
    </tr>
    <tr>
      <td>Demo app proxy</td>
      <td>
        <code>/packages/demo-app</code>
      </td>
      <td>
        <code>/demo-app</code>
      </td>
    </tr>
    <tr>
      <td>UI (опыт входа) proxy</td>
      <td>
        <code>/packages/ui</code>
      </td>
      <td>
        <code>/</code>
      </td>
    </tr>
  </tbody>
</table>

:::note
Вы можете заметить, что UI proxy использует корневой путь. В отличие от других прокси, UI proxy является резервным прокси, что означает, что он вступает в действие только тогда, когда не совпадает ни один другой прокси.
:::
