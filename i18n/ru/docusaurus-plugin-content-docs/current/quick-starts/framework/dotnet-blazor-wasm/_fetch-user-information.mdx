import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

### Отображение информации о пользователе \{#display-user-information}

Вот несколько примеров того, как отображать информацию о пользователе на странице `Home.razor`:

```cshtml
<AuthorizeView>
    <Authorized>
        @* Вид для вошедших пользователей *@
        @* ... *@
        <p>Вы вошли как @(@User?.Profile?.Name ?? "(неизвестное имя)").</p>
    </Authorized>
    @* ... *@
</AuthorizeView>
```

Для получения дополнительных свойств и утверждений ознакомьтесь с классами `User` и `Profile` в пакете `Blorc.OpenIdConnect`.

### Запрос дополнительных утверждений \{#request-additional-claims}

<FindUserInfoMissing method="User" />

<ScopesAndClaimsIntroduction />

Чтобы запросить дополнительные области действия, вы можете добавить допустимые области в свойство `IdentityServer.Scope` в файле `appsettings.json`.

{/* eslint-disable prettier/prettier */}
```json5
{
  // ...
  "IdentityServer": {
    // ...
    // highlight-next-line
    "Scope": "openid profile email phone"
  }
}
```
{/* eslint-enable prettier/prettier */}

### Утверждения, требующие сетевого запроса \{#claims-that-need-network-request}

Чтобы избежать перегрузки объекта пользователя, некоторые утверждения требуют сетевых запросов для получения. Например, утверждение custom_data не включено в объект пользователя, даже если оно запрошено в областях действия. Чтобы получить эти утверждения, вы можете установить свойство `IdentityServer.LoadUserInfo` в `true` в файле `appsettings.json`.

Например, чтобы получить адрес электронной почты пользователя и пользовательские данные, вы можете использовать следующую конфигурацию:

{/* eslint-disable prettier/prettier */}
```json5
{
  // ...
  "IdentityServer": {
    // ...
    // highlight-start
    "Scope": "openid profile email custom_data",
    "LoadUserInfo": true
    // highlight-end
  }
}
```
{/* eslint-enable prettier/prettier */}

### Области действия и утверждения \{#scopes-and-claims}

<ScopesAndClaims />
