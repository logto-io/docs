import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

### Отображение информации о пользователе \{#display-user-information}

Чтобы узнать, аутентифицирован ли пользователь, вы можете проверить свойство `User.Identity?.IsAuthenticated`.

Чтобы получить утверждения профиля пользователя, вы можете использовать свойство `User.Claims`:

```csharp title="Controllers/HomeController.cs"
var claims = User.Claims;

// Получить ID пользователя
var userId = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Subject)?.Value;
```

Смотрите [`LogtoParameters.Claims`](https://github.com/logto-io/csharp/blob/master/src/Logto.AspNetCore.Authentication/LogtoParameters.cs) для списка имен утверждений и их значений.

### Запрос дополнительных утверждений \{#request-additional-claims}

<FindUserInfoMissing method="User.Claims" />

<ScopesAndClaimsIntroduction />

Чтобы запросить дополнительные области действия, вы можете настроить свойство `Scopes` в объекте `options`:

```csharp title="Program.cs"
builder.Services.AddLogtoAuthentication(options =>
{
  // ...
  // highlight-start
  options.Scopes = new string[] {
    LogtoParameters.Scopes.Email,
    LogtoParameters.Scopes.Phone
  }
  // highlight-end
});
```

Затем вы можете получить доступ к дополнительным утверждениям через `User.Claims`:

```csharp title="Controllers/HomeController.cs"
var claims = User.Claims;

// Получить email пользователя
var email = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Email)?.Value;
```

### Утверждения, требующие сетевого запроса \{#claims-that-need-network-request}

Чтобы избежать перегрузки объекта пользователя, некоторые утверждения требуют сетевых запросов для получения. Например, утверждение custom_data не включено в объект пользователя, даже если оно запрошено в областях действия. Чтобы получить эти утверждения, вы можете установить `GetClaimsFromUserInfoEndpoint` в `true` в объекте `options`:

```csharp title="Program.cs"
builder.Services.AddLogtoAuthentication(options =>
{
  // ...
  // highlight-next-line
  options.GetClaimsFromUserInfoEndpoint = true;
});
```

### Области действия и утверждения \{#scopes-and-claims}

<ScopesAndClaims />
