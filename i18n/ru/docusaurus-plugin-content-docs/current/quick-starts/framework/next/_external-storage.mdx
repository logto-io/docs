SDK по умолчанию использует cookies для хранения зашифрованных данных сессии. Этот подход безопасен, не требует дополнительной инфраструктуры и особенно хорошо работает в безсерверных средах, таких как Vercel.

Однако бывают случаи, когда вам может понадобиться хранить данные сессии внешне. Например, когда ваши данные сессии становятся слишком большими для cookies, особенно когда вам нужно поддерживать несколько активных сессий организации одновременно. В таких случаях вы можете реализовать внешнее хранилище сессий, используя опцию `sessionWrapper`:

```ts
import { MemorySessionWrapper } from './storage';

export const config = {
  // ...
  sessionWrapper: new MemorySessionWrapper(),
};
```

```ts
import { randomUUID } from 'node:crypto';

import { type SessionWrapper, type SessionData } from '@logto/next';

export class MemorySessionWrapper implements SessionWrapper {
  private readonly storage = new Map<string, unknown>();

  async wrap(data: unknown, _key: string): Promise<string> {
    const sessionId = randomUUID();
    this.storage.set(sessionId, data);
    return sessionId;
  }

  async unwrap(value: string, _key: string): Promise<SessionData> {
    if (!value) {
      return {};
    }

    const data = this.storage.get(value);
    return data ?? {};
  }
}
```

В приведенной выше реализации используется простое хранилище в памяти. В производственной среде вы можете захотеть использовать более устойчивое решение для хранения, такое как Redis или база данных.
