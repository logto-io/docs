---
slug: /quick-starts/flutter
sidebar_label: Flutter
sidebar_custom_props:
  description: Flutter — это фреймворк для создания гибридных мобильных приложений.
language: dart
official_link: https://flutter.dev
app_type: Native app
framework: Flutter
---

import FurtherReadings from '../../fragments/_further-readings.md';

import ApiResources from './_api-resources.mdx';
import Dependency from './_dependency.mdx';
import GetUserInfo from './_get-user-info.mdx';
import Installation from './_installation.mdx';
import Integration from './_integration.mdx';
import Organization from './_organization.mdx';
import Tip from './_tip.md';

# Добавление аутентификации в ваше приложение на Flutter

Этот учебник покажет вам, как интегрировать Logto в ваше приложение на Flutter.

<Tip />

## Предварительные требования \{#prerequisites}

- Аккаунт [Logto Cloud](https://cloud.logto.io) или [самостоятельно размещенный Logto](/introduction/set-up-logto-oss).
- Созданное нативное приложение Logto.
- Среда разработки Flutter или Dart.

## Установка \{#installation}

<Installation />

## Настройка \{#set-up}

<Dependency />

## Интеграция \{#integration}

<Integration />

## Получение информации о пользователе \{#get-user-information}

<GetUserInfo />

## Ресурсы API и организации \{#api-resources-and-organizations}

<ApiResources />

<Organization />

## Руководство по миграции \{#migration-guide}

Если вы переходите с предыдущей версии Logto Dart SDK, версии < 3.0.0:

1. Обновите ваш файл `pubspec.yaml`, чтобы использовать последнюю версию Logto Dart SDK.

   ```yaml title="pubspec.yaml"
   dependencies:
     logto_dart_sdk: ^3.0.0
   ```

2. Обновите файл Android manifest, заменив устаревшую `flutter_web_auth` callback activity на новую `flutter_web_auth_2`.

   - `FlutterWebAuth` -> `FlutterWebAuth2`
   - `flutter_web_auth` -> `flutter_web_auth_2`

3. Передайте `redirectUri` в метод `signOut`.

   `redirectUri` теперь требуется при вызове метода `signOut`. Для платформы iOS этот параметр бесполезен, но для платформ Android и Web, которые требуют дополнительного запроса `end_session` для очистки сессии входа, этот параметр будет использоваться как параметр `post_logout_redirect_uri` в запросе `end_session`.

   ```dart
   await logtoClient.signOut(redirectUri);
   ```

## Устранение неполадок \{#troubleshooting}

### Устранение неполадок на Android \{#troubleshooting-android}

- Вам нужно будет обновить ваш AndroidManifest.xml, чтобы включить activity `com.linusu.flutter_web_auth_2.CallbackActivity`, что-то вроде:

  ```xml title="android/app/src/main/AndroidManifest.xml"
    <manifest>
    <application>

      <!-- добавьте activity com.linusu.flutter_web_auth_2.CallbackActivity -->
      <activity
        android:name="com.linusu.flutter_web_auth_2.CallbackActivity"
        android:exported="true">
        <intent-filter android:label="flutter_web_auth_2">
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.DEFAULT" />
          <category android:name="android.intent.category.BROWSABLE" />
          <data android:scheme="YOUR_CALLBACK_URL_SCHEME_HERE" />
        </intent-filter>
      </activity>

    </application>
  </manifest>
  ```

- Если вы нацелены на S+ (версия SDK 31 и выше), вам нужно указать явное значение для `android:exported`. Если вы следовали предыдущим инструкциям по установке, это не было включено. Убедитесь, что вы добавили `android:exported="true"` в activity `com.linusu.flutter_web_auth.CallbackActivity` в вашем файле `AndroidManifest.xml`.

- Браузер не закрывается после успешного входа:

  Чтобы `flutter_web_auth_2` работал правильно, вам нужно удалить все записи `android:taskAffinity` из вашего файла `AndroidManifest.xml`. Установите `android:launchMode="singleTop"` для основной activity в вашем файле `AndroidManifest.xml`.

  ```xml title="android/app/src/main/AndroidManifest.xml"
  <activity
    android:name=".MainActivity"
    android:launchMode="singleTop"
    android:theme="@style/LaunchTheme"
    // ...
  />
  ```

## Дополнительные материалы \{#further-readings}

<FurtherReadings />
