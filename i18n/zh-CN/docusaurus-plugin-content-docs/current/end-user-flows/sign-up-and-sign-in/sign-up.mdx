---
sidebar_position: 1
---

# 邮箱 / 手机号 / 用户名注册

用户注册是用户参与你的应用程序的第一步。Logto 支持多种注册方式，包括用户名密码、邮箱或手机号验证、[社交注册](/end-user-flows/sign-up-and-sign-in/social-sign-in) 和 [企业单点登录 (SSO)](/end-user-flows/enterprise-sso)。你可以根据应用需求设置最合适的注册方式。

前往 <CloudLink to="/sign-in-experience/sign-up-and-sign-in">控制台 > 登录体验 > 注册与登录</CloudLink> 开始配置标识符注册流程。

<img src="/img/assets/sign-in-experience-sign-up.png" alt="注册设置" />

## 设置注册标识符 \{#set-up-the-sign-up-identifier}

为了在 Logto 中成功创建新用户账户，用户必须至少提供一个**标识符**，以在 Logto 系统内唯一标识他们。第一步，选择用户在注册过程中必须提供的标识符。可选项包括：

- **用户名**：用户可用于登录应用的唯一 [用户名](/user-management/user-data#username)。
- **邮箱地址**：用户可用于登录应用的有效 [邮箱地址](/user-management/user-data#primary_email)。
- **手机号**：用户可用于登录应用的有效 [手机号](/user-management/user-data#primary_phone)。
- **邮箱地址或手机号**：允许用户使用有效邮箱地址或手机号注册。

在注册过程中收集的所有标识符，在同一租户下必须是唯一的。它们会被存储在[用户资料](/user-management/user-data#user-profile)中，并可用于登录集成了 Logto 的应用。

如果未选择任何标识符，则适用于仅 [社交](/end-user-flows/sign-up-and-sign-in/social-sign-in) 或仅 [企业单点登录 (SSO)](/end-user-flows/enterprise-sso) 的注册方式。

你可以调整注册标识符的顺序，以优先让用户首先填写你希望的标识符。这个顺序会体现在注册流程中，第一个标识符会出现在初始注册界面，其余的在后续步骤收集。

:::tip
如需在注册时屏蔽特定类型的邮箱地址（如一次性邮箱、带加号 (+) 的子地址、指定邮箱或整个域名），可在安全设置中使用 **黑名单** 功能。详见 [黑名单](/security/blocklist)。
:::

:::tip
手机号的**国家区号**默认根据用户浏览器的语言环境自动选择。例如，若用户浏览器语言为 `fr`，则默认区号为法国 (+33)。

你也可以使用 [`ui_locales`](/end-user-flows/authentication-parameters/ui-locales) 认证参数设置登录体验的语言，这也会影响默认国家区号。
:::

## 设置注册验证方式 \{#set-up-the-sign-up-verification-settings}

为确保用户注册及后续登录过程的安全，你还需要为注册时收集的标识符配置验证方式。可用设置包括：

- **创建密码**：要求用户在注册时创建一个符合你登录体验设置中密码策略的密码。该密码与用户标识符一起作为登录凭证。如果你将**用户名**设为注册标识符，则此项会自动启用，因为**用户名**只能与密码配合使用以有效验证用户身份。[密码策略](/security/password-policy) 可自定义以满足你的安全需求。
- **注册时验证**：要求用户在注册时验证邮箱地址或手机号。目前，Logto 仅接受已验证的邮箱和手机号作为标识符。当**邮箱地址**或**手机号**作为注册标识符时，此项会自动启用。用户需在注册过程中输入发送到邮箱或手机号的验证码以确认归属权。

| 标识符       | 创建用户密码 | 注册时验证 |
| ------------ | ------------ | ---------- |
| 用户名       | 可选         | 不适用     |
| 邮箱地址     | 可选         | 必须       |
| 手机号       | 可选         | 必须       |
| 邮箱或手机号 | 可选         | 必须       |

## 注册流程示例 \{#sign-up-flow-examples}

<details>
  <summary>

### 类型 1：用户名 + 创建密码 \{#type-1-username-with-password-creation}

</summary>

选择**用户名**作为注册标识符。创建密码自动启用。

<img src="/img/assets/sign-up-username-password.png" alt="用户名和密码注册" />

</details>

<details>
  <summary>

### 类型 2：邮箱或手机号 + 验证流程 \{#type-2-email-address-or-phone-number-with-verification-flow}

</summary>

选择**邮箱地址或手机号**作为注册标识符。**注册时验证**强制启用。

<img src="/img/assets/sign-up-email-verification.png" alt="邮箱或手机号注册并验证" />

</details>

<details>
  <summary>

### 类型 3：邮箱 + 验证 + 创建密码 \{#type-3-email-address-with-verification-and-password-creation}

</summary>

选择**邮箱地址**作为注册标识符。**注册时验证**强制启用。启用**创建密码**，要求用户注册时创建密码。（手机号注册流程同理）

<img src="/img/assets/sign-up-email-password.png" alt="邮箱注册并验证及创建密码" />

</details>

<details>
  <summary>

### 类型 4：邮箱 + 验证 + 用户名 + 创建密码 \{#type-4-email-address-with-verification-username-and-password-creation}

</summary>

选择**邮箱地址**和**用户名**作为注册标识符。**注册时验证**强制启用。启用**创建密码**，要求用户注册时创建密码。

<img src="/img/assets/sign-up-email-username-password.png" alt="邮箱和用户名注册并验证及创建密码" />

</details>

## 使用社交或企业单点登录 (SSO) 注册 \{#sign-up-with-social-or-enterprise-sso}

除了这些传统的标识符注册方式，Logto 还支持通过社交和企业单点登录 (SSO) 身份提供商实现无密码注册，让用户注册流程更加顺畅和友好。

一旦在 Logto 配置并启用了 [社交连接器](/connectors/social-connectors) 或 [企业单点登录 (SSO) 连接器](/connectors/enterprise-connectors)，用户即可使用已有的社交或企业身份便捷注册。社交和企业单点登录 (SSO) 注册方式允许用户跳过创建密码或验证邮箱 / 手机号等额外步骤。Logto 会自动通过已验证的社交或企业身份同步用户信息，并存储到用户资料中。

详见 [社交登录](/end-user-flows/sign-up-and-sign-in/social-sign-in/) 和 [企业单点登录 (SSO)](/end-user-flows/enterprise-sso/) 章节，了解社交和企业单点登录 (SSO) 注册流程。

:::note
注意：如需自定义注册流程，请参考 [自定义界面 (Bring your UI)](/customization/bring-your-ui/) 功能。
:::

## 注册时收集更多用户信息 \{#collect-additional-user-info-on-sign-up}

如需在注册时收集更多用户资料信息（如姓名、生日、公司名等），你有两种灵活选择：

**方式一：收集用户资料**

直接在注册流程中加入 Logto 预设的“完善个人信息”步骤。用户需填写所有必填项后才算注册完成。这种方式无需编写代码，开箱即用。

通过 <CloudLink to="/sign-in-experience/collect-user-profile">控制台 > 登录体验 > 收集用户资料</CloudLink> 设置，选择预设基础字段或自定义字段并灵活校验。了解更多：[收集用户资料](/end-user-flows/collect-user-profile)

**方式二：自托管引导流程**

注册成功后将用户重定向到你自定义的引导流程，实现完全自定义的数据收集体验。适合需要复杂多步引导的场景。

可通过 [Account API](/end-user-flows/account-settings/by-account-api) 编程方式管理用户资料数据。

## 常见问题 \{#faqs}

<details>
  <summary>

### 管理员创建用户 / 邀请用户 \{#admin-created-users--invited-users}

</summary>

了解如何实现 [仅邀请注册流程](/end-user-flows/sign-up-and-sign-in/disable-user-registration/#implement-an-invitation-only-sign-up-flow)。

</details>

<details>
  <summary>

### 网站内嵌注册表单 \{#embedded-sign-up-forms-on-your-website}

</summary>
  
Logto 目前不支持无界面 API 方式注册和登录。你可以使用 [自定义界面 (Bring your UI)](/customization/bring-your-ui/) 功能上传自定义注册表单，或通过登录参数将用户信息从你的网站传递到 Logto。了解更多用户标识符传递方式见 [认证参数](/end-user-flows/authentication-parameters/)。

</details>

<details>
  <summary>

### 向新用户发送欢迎邮件 \{#sending-welcome-emails-to-new-users}

</summary>

订阅 `User.Created` webhook 事件，即可在新用户注册时触发欢迎邮件。详见 [webhook 事件](/developers/webhooks/webhooks-events/#data-mutation-hook-events)。

</details>

<details>
  <summary>

### 注册时跳过邮箱验证 \{#skip-email-verification-on-sign-up}

</summary>

目前，Logto 仅支持已验证的邮箱和手机号作为标识符。验证流程是确保用户标识符安全和归属的必要步骤。
对未验证邮箱或手机号的支持已在我们的 [路线图](https://feedback.logto.io/roadmap) 上，敬请关注后续更新！

</details>

## 相关资源 \{#related-resources}

<Url href="https://www.youtube.com/watch?v=64rBXpWbScc">邮箱注册与登录体验</Url>

<Url href="https://www.youtube.com/watch?v=chQxCJX6e6w">用户名注册与登录体验</Url>
