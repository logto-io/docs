---
description: Logto 开源服务 (OSS) 初始化的快速入门指南。
sidebar_position: 1
---

import LogtoIcon from '@site/src/assets/logto-logo.svg';
import CoolifyIcon from '@site/src/assets/oss-coolify.svg';
import DokployIcon from '@site/src/assets/oss-dokploy.svg';
import EasypanelIcon from '@site/src/assets/oss-easypanel.svg';
import ElestioIcon from '@site/src/assets/oss-elestio.svg';
import RailwayIcon from '@site/src/assets/oss-railway.svg';
import ZeaburIcon from '@site/src/assets/oss-zeabur.svg';
import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# 开始使用 OSS

## GitPod \{#gitpod}

要在线启动 Logto 的 GitPod 工作区，<a href="https://gitpod.io/#https://github.com/logto-io/demo" target="_blank" rel="noopener">点击这里</a>。稍等片刻，你会看到类似如下的信息：

<p>
  <img
    src="/img/assets/gitpod-running.png"
    alt="Gitpod 正在运行"
    width="720px"
    style={{ borderRadius: '4px' }}
  />
</p>

Logto 默认使用端口 `3001` 作为核心服务端口，端口 `3002` 作为交互式管理控制台端口。

要继续你的 Logto 之旅，按下 Ctrl（或 Cmd）并点击以 `https://3002-...` 开头的链接。祝你玩得开心！

## 本地 \{#local}

托管 Logto 的最低推荐硬件要求为：

- **vCPU**：2
- **内存**：8 GiB
- **磁盘**：256 GiB

<Tabs>

<TabItem value="docker-compose" label="Docker Compose">

Docker Compose CLI 通常随 [Docker Desktop](https://www.docker.com/products/docker-desktop) 一起提供。

:::caution
不要在生产环境中使用我们的 docker compose 命令！由于我们目前在 `docker-compose.yml` 中将内置的 Postgres 数据库与 Logto 应用程序捆绑在一起，
每次你重新执行该命令时都会创建一个新的数据库实例，之前持久化的数据将会丢失。
:::

```bash
curl -fsSL https://raw.githubusercontent.com/logto-io/logto/HEAD/docker-compose.yml | docker compose -p logto -f - up
```

组合成功后，你会看到类似如下的信息：

</TabItem>

<TabItem value="docker" label="Docker">

<h3>步骤 1</h3>

准备一个 [PostgreSQL](https://www.postgresql.org/)@^14.0 实例，并使用 [Logto CLI](/logto-oss/using-cli) 为 Logto 初始化数据库：

<Tabs groupId="cmd">

  <TabItem value="cli" label="CLI">

```bash
logto db seed
```

  </TabItem>
  <TabItem value="npx" label="npx">

```bash
npx @logto/cli db seed
```

  </TabItem>

</Tabs>

<h3>步骤 2</h3>

拉取镜像：

```bash
# ghcr
docker pull ghcr.io/logto-io/logto:latest
# DockerHub
docker pull svhd/logto:latest
```

<h3>步骤 3</h3>

将容器端口映射到 Logto 核心和管理应用，例如 `3001:3001` 和 `3002:3002`；并为容器设置以下环境变量：

```yml
TRUST_PROXY_HEADER: 1 # 如果你在 Logto 前面有 HTTPS 代理（如 Nginx），请设置为 1
ENDPOINT: https://<your-logto-domain> # （可选）如果你使用自定义域名，请替换为你的 Logto 端点 URL
ADMIN_ENDPOINT: https://<your-logto-admin-domain> # （可选）如果你使用自定义域名，请替换为你的 Logto 管理端点 URL
DB_URL: postgres://username:password@your_postgres_url:port/db_name # 替换为你的 Postgres DSN
```

使用上述所有环境变量运行容器：

```bash
docker run \
  --name logto \
  -p 3001:3001 \
  -p 3002:3002 \
  -e TRUST_PROXY_HEADER=1 \
  -e ENDPOINT=https://<your-logto-domain> \
  -e ADMIN_ENDPOINT=https://<your-logto-admin-domain> \
  -e DB_URL=postgres://username:password@your_postgres_url:port/db_name \
  ghcr.io/logto-io/logto:latest
```

:::tip

- 如果你使用 Docker Hub，请将 `ghcr.io/logto-io/logto:latest` 替换为 `svhd/logto:latest`。
- 在 `DB_URL` 中使用 `host.docker.internal` 或 `172.17.0.1` 指向主机 IP。

:::

最后，你会看到类似如下的信息：

</TabItem>

<TabItem value="npm" label="npm-init">

**前置条件**

- [Node.js](https://nodejs.org/) `^18.12.0`
- [PostgreSQL](https://postgresql.org/) `^14.0`

更高版本通常也可用，但不保证兼容。

我们建议为 Logto 使用一个新的空数据库，虽然这不是硬性要求。

**下载并启动**

在你的终端中：

```bash
npm init @logto@latest
```

完成初始化流程并启动 Logto 后，你会看到类似如下的信息：

</TabItem>

</Tabs>

```text
Core app is running at http://localhost:3001
Core app is running at https://your-domain-url
Admin app is running at http://localhost:3002
Admin app is running at https://your-admin-domain-url
```

前往 `http://localhost:3002/` 继续你的 Logto 之旅。祝你玩得开心！

<details>

<summary>

### 使用备用 URL 下载 \{#using-an-alternative-url-for-downloading}

</summary>

如果你想为 Logto zip 文件指定下载 URL，可以使用 `--download-url` 选项。例如：

```
npm init @logto@latest -- --download-url=https://github.com/logto-io/logto/releases/download/v1.2.2/logto.tar.gz
```

注意需要额外的 `--`，以便 NPM 传递参数。

</details>

<details>

<summary>

### 配置（可选）\{#configuration-optional}

</summary>

Logto 使用环境变量进行配置，并支持 `.env` 文件。详细用法和完整变量列表请参见 [配置](/concepts/core-service/configuration)。

</details>

_如果你需要更高级的控制或以编程方式访问 Logto，请查看 [核心服务](/concepts/core-service)。_

## 托管服务商 \{#hosting-providers}

这些可靠的托管服务商为 Logto 提供了一键安装模板。通过便捷的可部署服务，你可以在几秒钟内使用 Logto 搭建并启动你的 CIAM 系统。

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Logto Cloud',
      href: 'https://cloud.logto.io',
      description: '一个高性价比的云服务，提供免费的开发租户，便于集成认证 (Authentication)。',
      customProps: {
        icon: <LogtoIcon />,
      },
    },
    {
      type: 'link',
      label: 'Coolify',
      href: 'https://coolify.io/docs/services/logto/',
      description: '一个可自托管的 Heroku/Netlify 替代方案，便于应用和数据库管理。',
      customProps: {
        icon: <CoolifyIcon />,
      },
    },
    {
      type: 'link',
      label: 'Dokploy',
      href: 'https://docs.dokploy.com/docs/core',
      description: '轻量级工具，可在你自己的基础设施上部署应用。',
      customProps: {
        icon: <DokployIcon />,
      },
    },
    {
      type: 'link',
      label: 'Easypanel',
      href: 'https://easypanel.io/docs/templates/logto',
      description: '一个现代化的控制面板，用于管理带有 Docker 的云服务器。',
      customProps: {
        icon: <EasypanelIcon />,
      },
    },
    {
      type: 'link',
      label: 'Elestio',
      href: 'https://elest.io/open-source/logto',
      description: '全托管 DevOps 平台，部署你的代码和开源软件。',
      customProps: {
        icon: <ElestioIcon />,
      },
    },
    {
      type: 'link',
      label: 'Railway',
      href: 'https://railway.com/template/07_f_Z',
      description: '简化应用部署和基础设施管理。',
      customProps: {
        icon: <RailwayIcon />,
      },
    },
    {
      type: 'link',
      label: 'Zeabur',
      href: 'https://zeabur.com/docs/marketplace/logto',
      description: '为开发者简化应用部署、扩容和监控。',
      customProps: {
        icon: <ZeaburIcon />,
      },
    },
  ]}
/>

请注意，我们不为第三方服务商提供客户支持。如需访问我们的支持渠道，请在 [Logto Cloud](https://cloud.logto.io) 上部署。谢谢！

## 创建账户 \{#create-an-account}

当你成功在服务器上托管 Logto 后，在欢迎页面点击“创建账户”。请注意，Logto 开源版仅允许在首次启动时创建一个账户，不支持多账户。账户创建过程仅限于用户名和密码组合。

:::tip
Logto OSS（自托管）不支持配置多个管理员。如需团队协作或需要多个管理员用户的项目，建议使用 [Logto Cloud](https://cloud.logto.io)，它提供完整的团队管理功能。
:::

## 相关资源 \{#related-resources}

<Url href="https://blog.logto.io/local-https">本地 HTTPS 开发处理方法</Url>
