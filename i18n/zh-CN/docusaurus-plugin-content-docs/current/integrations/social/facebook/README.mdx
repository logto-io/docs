---
slug: /integrations/facebook
sidebar_label: Facebook
sidebar_custom_props:
  description: Facebook 是一个拥有数十亿用户的全球社交媒体平台。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 设置 Facebook 社交登录

官方 Logto (Logto) 连接器用于 Facebook 社交登录。

<GuideTip />

## 开始 \{#get-started}

Facebook 连接器为你的应用程序提供了一种简洁的方式来使用 Facebook 的 OAuth 2.0 认证系统。

### 注册 Facebook 开发者账号 \{#register-a-facebook-developer-account}

[注册为 Facebook 开发者](https://developers.facebook.com/docs/development/register/) 如果你还没有账号

### 设置 Facebook 应用 \{#set-up-a-facebook-app}

1. 访问 [Apps](https://developers.facebook.com/apps) 页面。
2. 点击你现有的应用或[创建一个新应用](https://developers.facebook.com/docs/development/create-an-app) 如果需要。
   - 选择的 [应用类型](https://developers.facebook.com/docs/development/create-an-app/app-dashboard/app-types) 由你决定，但它应该包含产品 _Facebook 登录_。
3. 在应用仪表板页面，滚动到“添加产品”部分，点击“Facebook 登录”卡片上的“设置”按钮。
4. 跳过 Facebook 登录快速入门页面，点击侧边栏 -> “产品” -> “Facebook 登录” -> “设置”。
5. 在 Facebook 登录设置页面，填写 `${your_logto_origin}/callback/${connector_id}` 在“有效的 OAuth 重定向 URI”字段中。`connector_id` 可以在 Logto 管理控制台连接器详情页面的顶部栏找到。例如：
   - `https://logto.dev/callback/${connector_id}` 用于生产环境
   - `https://localhost:3001/callback/${connector_id}` 用于本地环境测试
6. 点击右下角的“保存更改”按钮。

## 编写连接器 JSON \{#compose-the-connector-json}

1. 在 Facebook 应用仪表板页面，点击侧边栏 -> “设置” -> “基本信息”。
2. 你将在面板上看到“App ID”和“App secret”。
3. 点击 App secret 输入框后的“显示”按钮以复制其内容。
4. 填写 Logto (Logto) 连接器设置：
   - 在 `clientId` 字段中填写来自 _App ID_ 的字符串。
   - 在 `clientSecret` 字段中填写来自 _App secret_ 的字符串。
   - 在 `scope` 字段中填写以逗号或空格分隔的 [权限](https://developers.facebook.com/docs/permissions/reference) 列表字符串。如果你没有指定权限，默认权限是 `email,public_profile`。

## 使用 Facebook 的测试用户测试登录 \{#test-sign-in-with-facebooks-test-users}

你可以使用测试、开发者和管理员用户的账户来测试相关应用在开发和实时 [应用模式](https://developers.facebook.com/docs/development/build-and-test/app-modes) 下的登录。

你也可以直接 [将应用上线](#take-the-facebook-app-live)，以便任何 Facebook 用户都可以使用该应用登录。

- 在应用仪表板页面，点击侧边栏 -> “角色” -> “测试用户”。
- 点击“创建测试用户”按钮以创建一个测试用户。
- 点击现有测试用户的“选项”按钮，你将看到更多操作，例如“更改姓名和密码”。

## 发布 Facebook 登录设置 \{#publish-facebook-sign-in-settings}

通常，只有测试、管理员和开发者用户可以在 [开发模式](https://developers.facebook.com/docs/development/build-and-test/app-modes#development-mode) 下使用相关应用登录。

为了使普通 Facebook 用户能够在生产环境中使用该应用登录，你可能需要将你的 Facebook 应用切换到 _[实时模式](https://developers.facebook.com/docs/development/build-and-test/app-modes#live-mode)_，这取决于应用类型。
例如，纯 _商业类型_ 应用没有“实时”切换按钮，但这不会阻止你的使用。

1. 在 Facebook 应用仪表板页面，点击侧边栏 -> “设置” -> “基本信息”。
2. 如果需要，在面板上填写“隐私政策 URL”和“用户数据删除”字段。
3. 点击右下角的“保存更改”按钮。
4. 点击应用顶部栏的“实时”切换按钮。

## 配置类型 \{#config-types}

| 名称         | 类型   |
| ------------ | ------ |
| clientId     | string |
| clientSecret | string |
| scope        | string |

## 参考资料 \{#references}

- [Facebook 登录 - 文档 - Facebook for Developers](https://developers.facebook.com/docs/facebook-login/)
  - [手动构建登录流程](https://developers.facebook.com/docs/facebook-login/guides/advanced/manual-flow/)
  - [权限指南](https://developers.facebook.com/docs/facebook-login/guides/permissions)
