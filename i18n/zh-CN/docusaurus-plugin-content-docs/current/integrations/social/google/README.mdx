---
slug: /integrations/google
sidebar_label: Google
sidebar_custom_props:
  description: Google 是主要的搜索引擎技术和电子邮件服务提供商。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 设置 Google 社交登录

Google 连接器为你的应用程序提供了一种简洁的方式来使用 Google 的 OAuth 2.0 认证系统。

<GuideTip />

## 在 Google API Console 中设置项目

- 访问 [Google API Console](https://console.developers.google.com) 并使用你的 Google 账户登录。
- 点击顶部菜单栏的 **Select a project** 按钮，然后点击 **New Project** 按钮创建一个项目。
- 在你新创建的项目中，点击 **APIs & Services** 进入 **APIs & Services** 菜单。

## 配置你的用户授权页面

### 配置并注册你的应用程序

- 在左侧的 **APIs & Services** 菜单中，点击 **OAuth consent screen** 按钮。
- 选择你想要的 **User Type**，然后点击 **Create** 按钮。（注意：如果你选择 **External** 作为你的 **User Type**，你需要稍后添加测试用户。）

现在你将进入 **Edit app registration** 页面。

### 编辑应用程序注册

#### 配置 OAuth 用户授权页面

- 按照说明填写 **OAuth consent screen** 表单。
- 点击 **SAVE AND CONTINUE** 继续。

#### 配置权限

- 点击 **ADD OR REMOVE SCOPES** 并在弹出抽屉中选择 `../auth/userinfo.email`、`../auth/userinfo.profile` 和 `openid`，然后点击 **UPDATE** 完成。建议你考虑添加所有可能使用的权限，否则你在配置中添加的一些权限可能无法正常工作。
- 根据需要填写表单。
- 点击 **SAVE AND CONTINUE** 继续。

#### 添加测试用户（仅限外部用户类型）

- 点击 **ADD USERS** 并添加测试用户，以允许这些用户在测试时访问你的应用程序。
- 点击 **SAVE AND CONTINUE** 继续。

现在你应该已经配置好了 Google OAuth 2.0 用户授权页面。

## 获取 OAuth 2.0 凭据

- 在左侧的 **APIs & Services** 菜单中，点击 **Credentials** 按钮。
- 在 **Credentials** 页面，点击顶部菜单栏的 **+ CREATE CREDENTIALS** 按钮，并选择 **OAuth client ID**。
- 在 **Create OAuth client ID** 页面，选择 **Web application** 作为应用程序类型。
- 填写你的应用程序的基本信息。
- 点击 **+ Add URI** 以在 **Authorized JavaScript origins** 部分添加授权域名。这是你的 logto 授权页面将从中提供服务的域名。在我们的例子中，这将是 `${your_logto_origin}`。例如 `https://logto.dev`。
- 在 \***\*Authorized redirect URIs\*\*** 部分点击 **+ Add URI** 以设置 \***\*Authorized redirect URIs\*\***，登录后将用户重定向到应用程序。在我们的例子中，这将是 `${your_logto_endpoint}/callback/${connector_id}`。例如 `https://logto.dev/callback/${connector_id}`。`connector_id` 可以在 Logto Admin Console 连接器详情页面的顶部栏找到。
- 点击 **Create** 完成，然后你将获得 **Client ID** 和 **Client Secret**。

## 配置你的连接器

在 `clientId` 和 `clientSecret` 字段中填写你从上一节中提到的 OAuth 应用程序详细信息页面获得的 _Client ID_ 和 _Client Secret_。

`scope` 是一个以空格分隔的 [scopes](https://developers.google.com/identity/protocols/oauth2/scopes) 列表。如果未提供，scope 默认为 `openid profile email`。

### 配置类型

| 名称         | 类型   |
| ------------ | ------ |
| clientId     | string |
| clientSecret | string |
| scope        | string |

## 参考资料

- [Google Identity: Setting up OAuth 2.0](https://developers.google.com/identity/protocols/oauth2/openid-connect#appsetup)
