## 入门指南 \{#get-started}

1. 在 [小米开放平台](https://dev.mi.com/) 创建开发者账号
2. 访问 [小米账号服务](https://dev.mi.com/passport/oauth2/applist)
3. 如果你还没有应用，请创建一个新应用

## 配置小米 OAuth 应用 \{#configure-xiaomi-oauth-application}

1. 访问 [小米账号服务](https://dev.mi.com/passport/oauth2/applist)
2. 配置 OAuth 设置：
   - 打开你想用于登录的应用，点击“回调地址”（如果你还没有编辑回调地址，会显示为“已启用”）
   - 添加授权回调地址：`${your_logto_origin}/callback/${connector_id}`
   - `connector_id` 可以在 Logto 控制台连接器详情页顶部找到
3. 在应用详情页获取 `AppID` 和 `AppSecret`
4. 在 Logto 控制台将第 3 步获取的值填写到 `clientId` 和 `clientSecret` 字段中
5. 可选配置：
   - `skipConfirm`：当用户已登录小米账号时，是否跳过小米授权确认页，默认为 false

## 权限 (Scopes) 说明 \{#scopes-description}

默认情况下，连接器会请求以下权限 (Scope)：

- `1`：读取用户资料

可用权限 (Scopes)：

| Scope 值 | 描述                   | API 接口      |
| -------- | ---------------------- | ------------- |
| 1        | 获取用户资料           | user/profile  |
| 3        | 获取用户 open_id       | user/openIdV2 |
| 1000     | 获取小米路由器信息     | Mi Router     |
| 1001     | 访问所有小米路由器信息 | Mi Router     |
| 2001     | 访问小米云日历         | Mi Cloud      |
| 2002     | 访问小米云闹钟         | Mi Cloud      |
| 6000     | 使用米家智能家居服务   | Mi Home       |
| 6002     | 向米家添加第三方设备   | Mi Home       |
| 6003     | Alexa 控制小米设备     | Mi Home       |
| 6004     | 第三方服务访问小米设备 | Mi Home       |
| 7000     | 关注黄页服务号         | Mi Cloud      |
| 11000    | 获取小米云相册         | Mi Cloud      |
| 12001    | 保存应用数据到小米云   | Mi Cloud      |
| 12005    | 使用健康 ECG 服务      | Health        |
| 16000    | 获取米钱包卡券         | app/get_pass  |
| 20000    | 启用小爱同学语音服务   | XiaoAI        |
| 40000    | 启用云端 AI 服务       | 内部使用      |

多个权限 (Scopes) 可用空格分隔进行配置，例如：`1 3 6000`。

## 测试小米连接器 \{#test-xiaomi-connector}

就是这样。别忘了在登录体验中[启用社交登录](https://docs.logto.io/connectors/social-connectors#enable-social-sign-in)。
