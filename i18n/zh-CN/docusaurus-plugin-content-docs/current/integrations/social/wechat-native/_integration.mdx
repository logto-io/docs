## åœ¨å¾®ä¿¡å¼€æ”¾å¹³å°åˆ›å»ºç§»åŠ¨åº”ç”¨ \{#create-a-mobile-app-in-the-wechat-open-platform}

:::tip

å¦‚æœä½ å·²ç»å®Œæˆäº†éƒ¨åˆ†æ­¥éª¤ï¼Œå¯ä»¥è·³è¿‡ç›¸å…³ç« èŠ‚ã€‚

:::

### åˆ›å»ºè´¦å· \{#create-an-account}

æ‰“å¼€ https://open.weixin.qq.com/ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œæ³¨å†Œâ€æŒ‰é’®ï¼Œç„¶åå®Œæˆæ³¨å†Œæµç¨‹ã€‚

### åˆ›å»ºç§»åŠ¨åº”ç”¨ \{#create-a-mobile-app}

ä½¿ç”¨ä½ åˆšåˆšåˆ›å»ºçš„è´¦å·ç™»å½•ã€‚åœ¨â€œç§»åŠ¨åº”ç”¨â€æ ‡ç­¾é¡µï¼Œç‚¹å‡»ç»¿è‰²å¤§æŒ‰é’®â€œåˆ›å»ºç§»åŠ¨åº”ç”¨â€ã€‚

<img src="/img/assets/app-tabs.png" alt="App tabs" />

è®©æˆ‘ä»¬åœ¨åº”ç”¨è¡¨å•ä¸­å¡«å†™æ‰€éœ€ä¿¡æ¯ã€‚

<img src="/img/assets/create-mobile-app.png" alt="Create mobile app" />

#### åŸºæœ¬ä¿¡æ¯ \{#basic-info}

å¤§éƒ¨åˆ†å†…å®¹éƒ½å¾ˆç›´è§‚ï¼Œè¿™é‡Œæœ‰ä¸€äº›å°æç¤ºï¼š

- å¦‚æœä½ åªæ˜¯æƒ³æµ‹è¯•å¾®ä¿¡ç™»å½•ï¼Œä¸”åº”ç”¨è¿˜æœªä¸Šæ¶ App Storeï¼Œåœ¨â€œåº”ç”¨å·²ä¸Šæ¶â€éƒ¨åˆ†é€‰æ‹©â€œå¦â€ï¼Œå³å¯è·³è¿‡â€œåº”ç”¨ä¸‹è½½é“¾æ¥â€ã€‚
- â€œåº”ç”¨æ“ä½œæµç¨‹å›¾â€çœ‹èµ·æ¥æœ‰ç‚¹æ£˜æ‰‹ã€‚æ ¹æ®æˆ‘ä»¬çš„ç»éªŒï¼Œä½ éœ€è¦å‡†å¤‡ä¸€ä¸ªç®€å•çš„æµç¨‹å›¾å’Œå‡ å¼ åº”ç”¨æˆªå›¾ï¼Œä»¥æé«˜å®¡æ ¸é€šè¿‡çš„å¯èƒ½æ€§ã€‚

ç‚¹å‡»â€œä¸‹ä¸€æ­¥â€ç»§ç»­ã€‚

#### å¹³å°ä¿¡æ¯ \{#platform-info}

ä½ å¯ä»¥é…ç½® iOS å’Œ / æˆ– Android å¹³å°ï¼Œä»¥ä¾¿å°† Logto ä¸å¾®ä¿¡åŸç”Ÿç™»å½•é›†æˆã€‚

**iOS åº”ç”¨**

å‹¾é€‰â€œiOS åº”ç”¨â€ï¼Œç„¶åæ ¹æ®ä½ çš„åº”ç”¨é€‰æ‹©ç›®æ ‡è®¾å¤‡ç±»å‹ã€‚

<img src="/img/assets/platform.png" alt="App platform" />

å¦‚æœä½ åœ¨ App Store ä¸Šæ¶æƒ…å†µé€‰æ‹©äº†â€œå¦â€ï¼Œè¿™é‡Œå¯ä»¥è·³è¿‡å¡«å†™â€œAppStore ä¸‹è½½åœ°å€â€ã€‚

å¡«å†™ _Bundle ID_ã€_æµ‹è¯•ç‰ˆ Bundle ID_ å’Œ _Universal Links_ï¼ˆå®é™…ä¸Šåªéœ€è¦ä¸€ä¸ªé“¾æ¥ ğŸ˜‚ï¼‰ã€‚

:::note

_Bundle ID_ å’Œ _æµ‹è¯•ç‰ˆ Bundle ID_ å¯ä»¥å¡«å†™ç›¸åŒçš„å€¼ã€‚

:::

:::tip

å¾®ä¿¡åŸç”Ÿç™»å½•è¦æ±‚é…ç½® universal linkã€‚å¦‚æœä½ è¿˜æ²¡æœ‰è®¾ç½®æˆ–ä¸äº†è§£ universal linkï¼Œè¯·å‚è€ƒ [Apple å®˜æ–¹æ–‡æ¡£](https://developer.apple.com/ios/universal-links/)ã€‚

:::

**Android åº”ç”¨**

å‹¾é€‰â€œAndroid åº”ç”¨â€ã€‚

<img src="/img/assets/platform-android-app.png" alt="Android app platform" />

å¡«å†™ _åº”ç”¨ç­¾å_ å’Œ _åº”ç”¨åŒ…å_ã€‚

:::note

ä½ éœ€è¦ä¸ºä½ çš„åº”ç”¨ç­¾åä»¥è·å–ç­¾åä¿¡æ¯ã€‚è¯¦æƒ…è¯·å‚è€ƒ [ç­¾ç½²ä½ çš„åº”ç”¨](https://developer.android.com/studio/publish/app-signing)ã€‚

:::

ç­¾åå®Œæˆåï¼Œä½ å¯ä»¥æ‰§è¡Œ `signingReport` ä»»åŠ¡æ¥è·å–ç­¾åä¿¡æ¯ã€‚

```bash
./gradlew your-android-project:signingReport
```

å¯¹åº”æ„å»ºå˜ä½“æŠ¥å‘Šä¸­çš„ `MD5` å€¼å³ä¸º _åº”ç”¨ç­¾å_ï¼Œä½†è®°å¾—å»æ‰æ‰€æœ‰åˆ†å·å¹¶è½¬ä¸ºå°å†™ã€‚

ä¾‹å¦‚ï¼š`1A:2B:3C:4D` -> `1a2b3c4d`ã€‚

#### ç­‰å¾…å®¡æ ¸ç»“æœ \{#waiting-for-the-review-result}

å®Œæˆå¹³å°ä¿¡æ¯åï¼Œç‚¹å‡»â€œæäº¤å®¡æ ¸â€ç»§ç»­ã€‚é€šå¸¸å®¡æ ¸é€Ÿåº¦è¾ƒå¿«ï¼Œä¸€èˆ¬ 1-2 å¤©å†…ä¼šæœ‰ç»“æœã€‚

æˆ‘ä»¬çŒœæµ‹æ¯æ¬¡æäº¤åˆ†é…çš„å®¡æ ¸å‘˜æ˜¯éšæœºçš„ï¼Œå› ä¸ºæ ‡å‡†æœ‰æ³¢åŠ¨ã€‚ä½ å¯èƒ½ç¬¬ä¸€æ¬¡ä¼šè¢«æ‹’ç»ï¼Œä½†ä¸è¦ç°å¿ƒï¼å¦‚å®è¯´æ˜ä½ çš„ç°çŠ¶ï¼Œå¹¶å‘å®¡æ ¸å‘˜è¯¢é—®å¦‚ä½•ä¿®æ”¹ã€‚

## åœ¨ä½ çš„åº”ç”¨ä¸­å¯ç”¨å¾®ä¿¡åŸç”Ÿç™»å½• \{#enable-wechat-native-sign-in-in-your-app}

### iOS \{#ios}

æˆ‘ä»¬å‡è®¾ä½ å·²ç»åœ¨åº”ç”¨ä¸­é›†æˆäº† <MainSiteUrl href="/quick-starts/swift">Logto iOS SDK</MainSiteUrl>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ“ä½œéå¸¸ç®€å•ï¼Œç”šè‡³æ— éœ€é˜…è¯»å¾®ä¿¡ SDK æ–‡æ¡£ï¼š

**1. åœ¨ Xcode é¡¹ç›®ä¸­é…ç½® universal link å’Œ URL scheme**

åœ¨ Xcode é¡¹ç›® -> Signing & Capabilities æ ‡ç­¾é¡µï¼Œæ·»åŠ â€œAssociated Domainsâ€èƒ½åŠ›ï¼Œå¹¶å¡«å†™ä½ ä¹‹å‰é…ç½®çš„ universal linkã€‚

<img src="/img/assets/universal-link.png" alt="Universal link" />

ç„¶åè¿›å…¥â€œInfoâ€æ ‡ç­¾é¡µï¼Œæ·»åŠ ä¸€ä¸ª [è‡ªå®šä¹‰ URL scheme](https://developer.apple.com/documentation/xcode/defining-a-custom-url-scheme-for-your-app)ï¼Œå†…å®¹ä¸ºå¾®ä¿¡ App IDã€‚

<img src="/img/assets/custom-url-scheme.png" alt="Custom URL scheme" />

æœ€åæ‰“å¼€ä½ çš„ `Info.plist`ï¼Œåœ¨ `LSApplicationQueriesSchemes` ä¸‹æ·»åŠ  `weixinULAPI` å’Œ `weixin`ã€‚

<img src="/img/assets/plist.png" alt="Plist" />

:::note

æˆ‘ä»¬çŸ¥é“è¿™äº›æ“ä½œçœ‹èµ·æ¥ä¸å¤ªåˆç†ï¼Œä½†è¿™æ˜¯æˆ‘ä»¬æ‰¾åˆ°çš„æœ€å°å¯è¡Œæ–¹æ¡ˆã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ [ç¥å¥‡çš„å®˜æ–¹æŒ‡å—](https://developers.weixin.qq.com/doc/oplatform/en/Mobile_App/Access_Guide/iOS.html)ã€‚

:::

**2. å°† `LogtoSocialPluginWechat` æ·»åŠ åˆ°ä½ çš„ Xcode é¡¹ç›®**

æ·»åŠ è¯¥ frameworkï¼š

<img src="/img/assets/add-framework.png" alt="Add framework" />

å¹¶åœ¨ Build Settings > Linking > Other Linker Flags ä¸­æ·»åŠ  `-ObjC`ï¼š

<img src="/img/assets/linker-flags.png" alt="Linker flags" />

:::note

è¯¥æ’ä»¶å†…ç½®äº† WeChat Open SDK 1.9.2ã€‚å¯¼å…¥æ’ä»¶åå¯ä»¥ç›´æ¥ä½¿ç”¨ `import WechatOpenSDK`ã€‚

:::

**3. åœ¨ `LogtoClient` åˆå§‹åŒ–é€‰é¡¹ä¸­æ·»åŠ æ’ä»¶**

```swift
let logtoClient = LogtoClient(
  useConfig: config,
  socialPlugins: [LogtoSocialPluginWechat()]
)
```

**4. æ­£ç¡®å¤„ç† `onOpenURL`**

:::note

`LogtoClient.handle(url:)` ä¼šå¤„ç†ä½ å¯ç”¨çš„æ‰€æœ‰åŸç”Ÿè¿æ¥å™¨ã€‚ä½ åªéœ€è°ƒç”¨ä¸€æ¬¡å³å¯ã€‚

:::

```swift
// SwiftUI
YourRootView()
  .onOpenURL { url in
      LogtoClient.handle(url: url)
  }

// æˆ– AppDelegate
func application(_ app: UIApplication, open url: URL, options: /*...*/) -> Bool {
  LogtoClient.handle(url: url)
}
```

### Android \{#android}

æˆ‘ä»¬å‡è®¾ä½ å·²ç»åœ¨åº”ç”¨ä¸­é›†æˆäº† <MainSiteUrl href="/quick-starts/android">Logto Android SDK</MainSiteUrl>ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ“ä½œéå¸¸ç®€å•ï¼Œç”šè‡³æ— éœ€é˜…è¯»å¾®ä¿¡ SDK æ–‡æ¡£ï¼š

**1. å°† `Wechat Open SDK` æ·»åŠ åˆ°ä½ çš„é¡¹ç›®**

ç¡®ä¿ä½ çš„ Gradle é¡¹ç›®ä»“åº“ä¸­åŒ…å« `mavenCentral()`ï¼š

```kotlin
repositories {
  // ...
  mavenCentral()
}
```

åœ¨ä¾èµ–ä¸­æ·»åŠ  Wechat Open SDKï¼š

```kotlin
dependencies {
  // ...
  api("com.tencent.mm.opensdk:wechat-sdk-android:6.8.0")  // kotlin-script
  // æˆ–
  api 'com.tencent.mm.opensdk:wechat-sdk-android:6.8.0'   // groovy-script
}
```

**2. åœ¨é¡¹ç›®ä¸­å¼•å…¥ `WXEntryActivity`**

åœ¨ä½ çš„åŒ…æ ¹ç›®å½•ä¸‹åˆ›å»º `wxapi` åŒ…ï¼Œå¹¶åœ¨è¯¥åŒ…ä¸‹æ·»åŠ  `WXEntryActivity`ï¼ˆä»¥ `com.sample.app` ä¸ºä¾‹ï¼‰ï¼š

```kotlin
// WXEntryActivity.kt
package com.sample.app.wxapi

import io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity

class WXEntryActivity: WechatSocialResultActivity()
```

```java
// WXEntryActivity.java
package com.sample.app.wxapi

import io.logto.sdk.android.auth.social.wechat.WechatSocialResultActivity

public class WXEntryActivity extends WechatSocialResultActivity {}
```

æœ€ç»ˆ `WXEntryActivity` åœ¨é¡¹ç›®ä¸­çš„ä½ç½®åº”å¦‚ä¸‹ï¼ˆä»¥ Kotlin ä¸ºä¾‹ï¼‰ï¼š

```bash
src/main/kotlin/com/sample/app/wxapi/WXEntryActivity.kt
```

**3. ä¿®æ”¹ `AndroidManifest.xml`**

åœ¨ä½ çš„ `AndroidManifest.xml` ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.sample.app">

  <application>
    <!-- éœ€è¦æ·»åŠ çš„è¡Œ -->
    <activity android:name=".wxapi.WXEntryActivity" android:exported="true"/>
  </application>

</manifest>
```
