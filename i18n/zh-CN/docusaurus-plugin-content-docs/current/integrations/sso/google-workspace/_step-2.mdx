import googleWorkspaceConsentScreenScopesImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_scopes.webp';
import googleWorkspaceConsentScreenSettingsImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_settings.webp';
import googleWorkspaceConsentScreenUserTypeImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_user_type.webp';

为了创建新的 OIDC 凭证，你需要为你的应用程序配置用户授权页面 (Consent screen)。

1. 访问 [OAuth 用户授权页面 (Consent screen)](https://console.cloud.google.com/apis/credentials/consent) 页面并选择 `Internal` 用户类型。这将使 OAuth 应用程序仅对你的组织内的用户可用。

<img
  src={googleWorkspaceConsentScreenUserTypeImage}
  alt="Google Workspace 用户授权页面 (Consent screen) 用户类型"
/>

2. 按照页面上的说明填写 `Consent Screen` 设置。你需要提供以下最少信息：

- **Application name**: 你的应用程序名称。它将显示在用户授权页面 (Consent screen) 上。
- **Support email**: 你的应用程序的支持电子邮件。它将显示在用户授权页面 (Consent screen) 上。

<img
  src={googleWorkspaceConsentScreenSettingsImage}
  alt="Google Workspace 用户授权页面 (Consent screen) 设置"
/>

3. 为你的应用程序设置 `Scopes`。为了正确检索用户的身份信息和电子邮件地址，Logto SSO 连接器需要从 IdP 授予以下权限 (Scopes)：

<img
  src={googleWorkspaceConsentScreenScopesImage}
  alt="Google Workspace 用户授权页面 (Consent screen) 权限 (Scopes)"
/>

- **openid**: 此权限 (Scope) 是 OIDC 认证 (Authentication) 所必需的。它用于检索 ID 令牌 (ID token) 并访问 IdP 的 userInfo 端点。
- **profile**: 此权限 (Scope) 是访问用户基本个人信息所必需的。
- **email**: 此权限 (Scope) 是访问用户电子邮件地址所必需的。

点击 `Save` 按钮以保存用户授权页面 (Consent screen) 设置。
