import azureAdDefaultAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_default_attribute_mapping.webp';
import azureAdLogtoAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_logto_attribute_mapping.webp';

Logto 提供了一种灵活的方法，将 IdP 返回的用户属性映射到 Logto 中的用户属性。Logto 默认会从 IdP 同步以下用户属性：

- id：用户的唯一标识符。Logto 将从 SAML 响应中读取 `nameID` 声明作为用户 SSO 身份 id。
- email：用户的电子邮件地址。Logto 默认将从 SAML 响应中读取 `email` 声明作为用户的主要电子邮件。
- name：用户的姓名。

你可以在 Azure AD 端或 Logto 端管理用户属性映射逻辑。

1. 在 Logto 端将 AzureAD 用户属性映射到 Logto 用户属性。

   访问你的 Azure AD SSO 应用程序的 `Attributes & Claims` 部分。

   复制以下属性名称（带有命名空间前缀）并粘贴到 Logto 中的相应字段。

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` （建议：将此属性值映射更新为 `user.displayname` 以获得更好的用户体验）

<img src={azureAdDefaultAttributeMappingImage} alt="Azure AD 默认属性映射" />

1. 在 AzureAD 端将 AzureAD 用户属性映射到 Logto 用户属性。

   访问你的 Azure AD SSO 应用程序的 `Attributes & Claims` 部分。

   点击 `Edit`，并根据 Logto 用户属性设置更新 `Additional claims` 字段：

   - 根据 Logto 用户属性设置更新声明名称值。
   - 移除命名空间前缀。
   - 点击 `Save` 继续。

   最终应得到以下设置：

<img src={azureAdLogtoAttributeMappingImage} alt="Azure AD_Logto 属性映射" />

你还可以在 Azure AD 端指定其他用户属性。Logto 将在用户的 `sso_identity` 字段下记录 IdP 返回的原始用户属性。
