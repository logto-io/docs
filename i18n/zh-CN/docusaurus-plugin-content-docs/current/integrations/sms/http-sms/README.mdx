---
slug: /integrations/http-sms
sidebar_label: HTTP SMS
sidebar_custom_props:
  description: 通过 HTTP 调用发送短信。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 使用 HTTP SMS 设置短信验证

Logto 官方的 HTTP SMS 连接器 (Connector)。

<GuideTip />

## 入门 \{#get-started}

HTTP SMS 连接器 (Connector) 允许你通过 HTTP 调用发送短信。要使用 HTTP SMS 连接器 (Connector)，你需要拥有自己的短信服务，并且该服务需要提供用于发送短信的 HTTP API。当 Logto 需要发送短信时，会调用这个 API。例如，当用户注册时，Logto 会调用 HTTP API 发送验证短信。

## 设置 HTTP SMS 连接器 (Connector) \{#set-up-http-sms-connector}

要使用 HTTP SMS 连接器 (Connector)，你需要设置一个 Logto 可以调用的 HTTP 端点，以及一个可选的端点授权令牌。

:::tip

请注意，为了防止认证 (Authentication) 流程出错，配置的 `endpoint` 在收到 webhook 后必须返回 2xx 响应，以告知 Logto 已收到发送短信的通知。

同时，在这种场景下，你需要监控短信服务以确保短信成功送达。或者，你也可以为你的短信发送 API 添加监控，以便及时发现短信发送失败。

:::

## 负载 \{#payload}

HTTP SMS 连接器 (Connector) 在需要发送短信时会向端点发送如下负载：

```json
{
  "to": "+1234567890",
  "type": "SignIn",
  "payload": {
    "code": "123456"
  },
  "ip": "192.168.1.1"
}
```

`ip` 字段是可选的，包含客户端的 IP 地址（如果有）。它可以用于限流、欺诈检测或增强日志记录。

你可以在 [短信模板](/connectors/sms-connectors/sms-templates) 中找到所有类型，在 [connector-kit](https://github.com/logto-io/logto/tree/master/packages/toolkit/connector-kit/src/types/passwordless.ts) 中找到 `SendMessageData` 的完整类型定义。
