## 设置 SMTP 连接器 \{#set-up-smtp-connector}

SMTP 是一种传输协议，不专属于某些特定的邮件服务提供商，可以与所有提供商配合使用。

我们现在提供了如何使用 SMTP 连接器发送邮件的指南，涵盖以下服务商，帮助你更好地理解：

- _Gmail_ 是全球最流行的邮件服务商。
- _阿里云邮件推送 (Aliyun direct mail)_ 和 _SendGrid 邮件 (SendGrid mail)_。你可能对这两个邮件服务提供商比较熟悉，因为 Logto 团队提供了相应的连接器，你大致会有一些了解。

我们希望你能通过以下示例，搞定其他所有邮件服务商的配置 :rocket:

### Gmail 使用配置 \{#set-up-for-gmail-use}

你可以在 [Gmail](https://mail.google.com/) 获取一个新的 Gmail 账号，或者使用你已有的账号。

[Gmail 官方帖子](https://support.google.com/a/answer/176600) 展示了如何确定通过 SMTP 连接器操作 Gmail 所需属性的值。

### 集成 SendGrid SMTP API \{#integrate-with-sendgrid-smtp-api}

我们假设你已经有一个 SendGrid 账号。如果没有，可以在 [SendGrid 官网](https://app.sendgrid.com/) 注册新账号。

你可以在 ["Integrating with the SMTP API"](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api) 找到详细的分步指南。

开发者可以在 ["Sender Management"](https://mc.sendgrid.com/senders) 页面获取 _发件人_ 相关信息。

### 配置阿里云邮件推送账号 \{#configure-with-aliyun-direct-mail-account}

登录 [阿里云官网](https://cn.aliyun.com/)。如果没有账号，请注册一个新账号。

按照 [使用 SMTP 发送邮件指南](https://www.alibabacloud.com/help/en/directmail/latest/send-emails-using-smtp) 完成相关“任务”，以获取所需的配置信息。

你可以前往 [SMTP 服务地址页面](https://www.alibabacloud.com/help/en/directmail/latest/smtp-service-address) 选择合适的 SMTP 服务地址主机和端口号。

要查看“发信地址”，可以在 [DirectMail 控制台](https://dm.console.aliyun.com/) 左侧导航栏找到入口。你应该能在这里看到 `发信地址` 和 `SMTP 密码`。

:::note
前面的案例仅提供了一个示例模板以保持简洁。你应该为其他使用场景添加更多模板。
你需要根据你的 Gmail、SendGrid 或阿里云账号设置，修改用 "\<" 和 ">" 包裹的值，其他没有 "\<" 和 ">" 的字段可保持不变。
在模板内容中添加 `{{code}}` 作为占位符，用于在发送邮件时显示随机验证码。
:::

### 测试 SMTP 连接器 \{#test-smtp-connector}

你可以输入一个邮箱地址并点击“发送”，在“保存并完成”之前测试设置是否可用。

就是这样。别忘了<MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">在登录体验中启用连接器</MainSiteUrl>。

### 配置类型 \{#config-types}

| Name      | Type       |
| --------- | ---------- |
| host      | string     |
| port      | string     |
| fromEmail | string     |
| templates | Template[] |

| Template Properties | Type        | Enum values                                          |
| ------------------- | ----------- | ---------------------------------------------------- |
| subject             | string      | N/A                                                  |
| content             | string      | N/A                                                  |
| usageType           | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
| contentType         | enum string | 'text/plain' / 'text/html'                           |

**用户名和密码认证选项**

| Name | Type               | Enum values |
| ---- | ------------------ | ----------- |
| user | string             | N/A         |
| pass | string             | N/A         |
| type | enum string (可选) | 'login'     |

你还可以配置 [OAuth2 认证选项](https://nodemailer.com/smtp/oauth2/) 及其他高级配置。详情见 [这里](https://nodemailer.com/smtp/)。

我们在文本框中给出了包含所有可配置参数的示例配置，帮助你设置自己的配置。（你需要对配置负责，部分值仅为演示用途，可能不适用于你的实际场景。）
