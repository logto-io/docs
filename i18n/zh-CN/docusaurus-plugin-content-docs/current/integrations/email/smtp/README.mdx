---
slug: /integrations/smtp
sidebar_label: SMTP
sidebar_custom_props:
  description: SMTP 是一种用于电子邮件传输的互联网标准通信协议。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 使用 SMTP 设置电子邮件验证

Logto 的官方 SMTP 连接器。

<GuideTip />

## 开始使用 \{#get-started}

SMTP（简单邮件传输协议）是一种用于电子邮件传输的互联网标准通信协议。邮件服务器和其他消息传输代理使用 SMTP 来发送和接收消息。

## 设置 SMTP 连接器 \{#set-up-smtp-connector}

SMTP 是一种传输协议，不专属于某些特定的电子邮件服务提供商，而是可以与所有提供商一起使用。

我们现在提供有关如何使用 SMTP 连接器发送电子邮件的指南，以便你更好地理解以下提供商：

- _Gmail_ 是全球最受欢迎的电子邮件服务供应商。
- _阿里云邮件推送_ 和 _SendGrid 邮件_。你们中的一些人可能对这两个电子邮件服务提供商比较熟悉，因为 Logto 团队提供了相应的连接器；你可能对它们有一个大致的了解。

我们希望你能通过以下示例弄清楚其他所有电子邮件供应商的设置 :rocket:

### 设置 Gmail 使用 \{#set-up-for-gmail-use}

你可以在 [Gmail](https://mail.google.com/) 获取一个新的 Gmail 帐户，或者如果你已有帐户，可以使用现有帐户。

一篇 [Gmail 官方文章](https://support.google.com/a/answer/176600) 显示了如何确定通过 SMTP 连接器操作 Gmail 所需属性的值。

### 集成 SendGrid SMTP API \{#integrate-with-sendgrid-smtp-api}

首先，我们假设你已经有一个 SendGrid 帐户。如果没有，请在 [SendGrid 网站](https://app.sendgrid.com/) 创建一个新帐户。

你可以在 ["Integrating with the SMTP API"](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api) 找到逐步指南。

开发人员可以在 ["Sender Management"](https://mc.sendgrid.com/senders) 访问 _发送者_ 详细信息。

### 配置阿里云邮件推送帐户 \{#configure-with-aliyun-direct-mail-account}

登录 [阿里云网站](https://cn.aliyun.com/)。如果你没有帐户，请注册一个新帐户。

按照 [使用 SMTP 发送电子邮件指南](https://www.alibabacloud.com/help/en/directmail/latest/send-emails-using-smtp) 并完成这些“任务”以获取所需的设置和信息。

你可以访问 [SMTP 服务地址页面](https://www.alibabacloud.com/help/en/directmail/latest/smtp-service-address) 选择合适的 SMTP 服务地址主机和端口号。

要检查“发件人地址”，你可以在 [DirectMail 控制台](https://dm.console.aliyun.com/) 的左侧导航窗格中找到入口。你应该在这里看到 `发件人地址` 和 `SMTP 密码`。

> ℹ️ **注意**
>
> 为了简化，我们在前面的案例中仅提供了一个示例模板。你应该为其他用例添加更多模板。
> 你应该根据你的 Gmail、SendGrid 或阿里云帐户设置更改用 "\<" 和 ">" 包裹的值，并选择保留其他没有 "\<" 和 ">" 的字段。
> 在模板内容中添加 `{{code}}` 作为占位符，以在发送电子邮件时显示随机验证码。

### 测试 SMTP 连接器 \{#test-smtp-connector}

你可以输入一个电子邮件地址并点击“发送”以查看设置是否可以在“保存并完成”之前工作。

就是这样。别忘了 [在登录体验中启用连接器](/connectors/email-connectors/#enable-email-sign-up-or-sign-in)。

### 配置类型 \{#config-types}

| 名称      | 类型       |
| --------- | ---------- |
| host      | string     |
| port      | string     |
| fromEmail | string     |
| templates | Template[] |

| 模板属性    | 类型        | 枚举值                                                  |
| ----------- | ----------- | ------------------------------------------------------- |
| subject     | string      | N/A                                                     |
| content     | string      | N/A                                                     |
| usageType   | enum string | 'Register' \| 'SignIn' \| 'ForgotPassword' \| 'Generic' |
| contentType | enum string | 'text/plain' \| 'text/html'                             |

**用户名和密码认证选项**

| 名称 | 类型               | 枚举值  |
| ---- | ------------------ | ------- |
| user | string             | N/A     |
| pass | string             | N/A     |
| type | enum string (可选) | 'login' |

你还可以配置 [OAuth2 认证选项](https://nodemailer.com/smtp/oauth2/) 和其他高级配置。详情请参见 [此处](https://nodemailer.com/smtp/)。

我们在文本框中提供了一个包含所有可配置参数的示例配置，以帮助你设置自己的配置。（你对配置负责，某些值仅用于演示目的，可能不适合你的用例。）
