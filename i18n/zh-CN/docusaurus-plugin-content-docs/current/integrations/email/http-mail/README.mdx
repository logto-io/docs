---
slug: /integrations/http-email
sidebar_label: HTTP Email
sidebar_custom_props:
  description: 通过 HTTP 调用发送邮件。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 使用 HTTP 调用设置邮件验证

官方 Logto HTTP 邮件连接器 (Connector)。

<GuideTip />

## 入门 \{#get-started}

HTTP 邮件连接器 (Connector) 允许你通过 HTTP 调用发送邮件。要使用 HTTP 邮件连接器 (Connector)，你需要拥有自己的邮件服务，并为其提供用于发送邮件的 HTTP API。当 Logto 需要发送邮件时，会调用该 API。例如，当用户注册时，Logto 会调用 HTTP API 发送验证邮件。

## 设置 HTTP 邮件连接器 (Connector) \{#set-up-http-email-connector}

要使用 HTTP 邮件连接器 (Connector)，你需要设置一个 Logto 可以调用的 HTTP 端点。你还可以为该端点配置可选的授权令牌 (Authorization token)。

## 负载 \{#payload}

HTTP 邮件连接器 (Connector) 在触发邮件时会向端点发送一个负载。它包含收件人的邮箱（`to`）、表示认证流程的邮件 [usageType](/connectors/email-connectors/email-templates#email-template-types)（`type`）、包含可用[变量](/connectors/email-connectors/email-templates#email-template-variables)（如验证码、链接、应用信息、组织信息、用户信息）的 `payload`，以及用户的[语言环境](/connectors/email-connectors/email-templates#email-template-localization)，还有一个可选的 `ip` 字段，包含客户端的 IP 地址（如果可用）。

示例：

```json
{
  "to": "foo@logto.io",
  "type": "SignIn",
  "payload": {
    "code": "123456",
    "locale": "de"
  },
  "ip": "192.168.1.1"
}
```

`ip` 字段可用于限流、防欺诈或增强日志记录。

你可以利用这些信息在邮件投递服务商中自定义邮件模板。

所有可用类型请参见 [邮件模板](/connectors/email-connectors/email-templates#email-template-types)。完整的 `SendMessageData` 类型定义可在 [connector-kit](https://github.com/logto-io/logto/tree/master/packages/toolkit/connector-kit/src/types/passwordless.ts) 中查看。
