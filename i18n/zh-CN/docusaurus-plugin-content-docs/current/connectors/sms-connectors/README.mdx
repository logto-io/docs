---
id: sms-connectors
title: 短信连接器
sidebar_label: 短信连接器
sidebar_position: 1
---

# 短信连接器

配置短信连接器可以向用户的手机号发送[一次性密码 (OTPs)](https://auth.wiki/otp)。这种无密码认证 (Authentication) 机制可用于多种场景，包括[注册](/end-user-flows/sign-up-and-sign-in/sign-up)、[登录](/end-user-flows/sign-up-and-sign-in/sign-in)、[忘记密码](/end-user-flows/sign-up-and-sign-in/reset-password)、[账号关联流程](/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking)、[成员邀请](/end-user-flows/organization-experience/invite-organization-members)以及[验证用户身份](/end-user-flows/security-verification)。它简化了用户认证 (Authentication) 并通过降低与密码相关的泄露风险来提升安全性。

## 选择你的短信连接器 \{#choose-your-sms-connector}

通过 Logto 的分步指南，连接你喜欢的短信服务商。

我们为以下短信服务商提供开箱即用的支持：

```mdx-code-block
import DocCardList from '@theme/DocCardList';
import Twilio from '@site/docs/connectors/assets/icons/twilio.svg';
import SmsAero from '@site/docs/connectors/assets/icons/smsaero.svg';
import Gateway from '@site/docs/connectors/assets/icons/gateway.svg';
import AliyunSms from '@site/docs/connectors/assets/icons/aliyun-sms.svg';
import TencentSms from '@site/docs/connectors/assets/icons/tencent-sms.svg';
import Vonage from '@site/docs/connectors/assets/icons/vonage.svg';
import Http from '@site/docs/connectors/assets/icons/http.svg';

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Twilio SMS',
      href: '/integrations/twilio-sms',
      description: 'Twilio 短信服务的官方 Logto 连接器。',
      customProps: {
        icon: <Twilio />,
      }
    },
    {
      type: 'link',
      label: 'SMS Aero',
      href: '/integrations/smsaero',
      description: 'SMSAero 短信服务的官方 Logto 连接器。',
      customProps: {
        icon: <SmsAero />,
      }
    },
    {
      type: 'link',
      label: 'GatewayAPI SMS',
      href: '/integrations/gatewayapi',
      description: 'GatewayAPI SMS 的官方 Logto 连接器。',
      customProps: {
        icon: <Gateway />,
      }
    },
    {
      type: 'link',
      label: 'Vonage SMS',
      href: '/integrations/vonage-sms',
      description: 'Vonage SMS 的官方 Logto 连接器。',
      customProps: {
        icon: <Vonage />,
      }
    },
    {
      type: 'link',
      label: 'Aliyun SMS',
      href: '/integrations/aliyun-sms',
      description: '阿里云短信服务的官方 Logto 连接器。',
      customProps: {
        icon: <AliyunSms />,
      }
    },
    {
      type: 'link',
      label: 'Tencent SMS',
      href: '/integrations/tencent-sms',
      description: '腾讯云短信服务的官方 Logto 连接器。',
      customProps: {
        icon: <TencentSms />,
      }
    },
  ]}
/>
```

对于其他短信服务商，可以使用我们的 HTTP 短信连接器，通过 HTTP API 集成任意服务。

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'HTTP SMS',
      href: '/integrations/http-sms',
      description: '通过 HTTP 调用发送短信。',
      customProps: {
        icon: <Http />,
      }
    },
  ]}
/>
```

如果我们的标准连接器无法满足你的特定需求，欢迎[联系我们](https://feedback.logto.io/roadmap)。对于 OSS 用户，如果需求紧急，你可以[自行实现连接器 (OSS)](/logto-oss/develop-your-connector/implement-connectors#build-a-passwordless-connector)。我们始终欢迎[贡献](/logto-oss/contribution)；你的努力也许能帮助有相同需求的其他社区成员。

## 配置步骤 \{#configuration-steps}

按照以下步骤添加短信连接器：

1. 进入 <CloudLink to="/connectors/passwordless">控制台 > 连接器 > 邮箱与短信连接器</CloudLink>。
2. 若要添加新的短信连接器，点击“设置”按钮并选择你想要的短信服务商。
3. 阅读所选服务商的 README 文档。
4. 在“参数配置”部分填写必填项。
5. 使用 JSON 编辑器自定义短信模板。
6. 通过“通用”模板向你的手机发送验证码，测试配置是否成功。
7. 点击“保存并完成”结束配置。

## 更换短信连接器 \{#change-sms-connector}

如需更换为其他短信连接器：

- 进入连接器详情页，点击右上角的“更换连接器”
- 或者删除现有连接器后新建一个

注意：你只能同时启用 _一个短信连接器_。

当你已有短信连接器时，只能选择“更换短信连接器”。在控制台执行此操作时，保存后会立即生效，因此请务必在保存前测试你的配置。

为确保服务稳定，Cloud 用户可以为开发环境创建一个[开发租户](/logto-cloud/tenant-settings#development)。在开发环境测试配置后，将配置“迁移”到[生产环境](/logto-cloud/tenant-settings#production)，再进行保存。

## 为终端用户流程启用手机号 \{#enable-phone-number-for-end-user-flows}

添加并配置短信连接器后，你可以启用基于手机号的认证 (Authentication) 流程：

- [**设置注册方式**](/end-user-flows/sign-up-and-sign-in/sign-up)：前往 <CloudLink to="/sign-in-experience/sign-up-and-sign-in">登录体验 > 注册与登录</CloudLink>。在注册部分，添加“手机号”或“邮箱或手机号”作为标识符。注意：注册时必须进行手机号验证。
- [**设置登录方式**](/end-user-flows/sign-up-and-sign-in/sign-in)：在登录部分，添加“手机号”作为登录方式。可选择密码或短信验证码进行认证 (Authentication)。点击“添加其他”可配置更多选项。
- [**设置忘记密码**](/end-user-flows/sign-up-and-sign-in/reset-password)：在登录部分，如果启用了密码登录，将看到“忘记密码”设置。启用“手机验证码”即可通过短信重置密码。
- [**为 MFA 设置短信**](/end-user-flows/mfa/sms-mfa)：前往 <CloudLink to="/mfa">登录体验 > 多因素认证 (MFA)</CloudLink>。启用“短信验证码”作为第二重安全验证。
- [**设置账号管理**](/end-user-flows/account-settings/by-account-api#manage-phone)：使用 [Account API](/end-user-flows/account-settings/by-account-api) 自定义你的账号中心，允许用户管理手机号。

:::warning
由于我们的配置会立即生效，删除现有短信连接器可能会影响终端用户的正常登录和注册流程。

例如，如果登录标识符包含“手机号 + 验证码”组合，删除现有短信连接器后，用户将无法通过短信收到验证码，登录流程会报错。

请在操作连接器时注意潜在风险。
:::

## 常见问题 \{#faqs}

<details>
<summary>

### Logto 没有我想用的短信连接器怎么办？ \{#logto-doesnt-have-the-sms-connector-i-want-to-use-what-should-i-do}

</summary>

我们还在持续开发更多连接器。如果你有进一步的需求，请在 Discord 告诉我们，并在 [GitHub](https://github.com/logto-io/logto/issues) 提交功能请求。如果需要进一步帮助，也可以[通过邮件联系我们](mailto:contact@logto.io)。

对于开源版 Logto 用户，我们提供了易于扩展的连接器开发方式，允许你根据具体场景[自定义你的连接器](/logto-oss/develop-your-connector)。我们也欢迎你向 Logto 提交 pull request，让社区中的其他人也能受益于你的工作。

</details>
