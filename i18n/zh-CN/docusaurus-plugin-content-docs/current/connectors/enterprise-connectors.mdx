---
id: enterprise-connectors
title: 企业连接器
sidebar_label: 企业连接器
sidebar_position: 4
---

import MicrosoftEntraId from '@site/docs/connectors/assets/icons/sso-entra-id.svg';
import GoogleWorkspace from '@site/docs/connectors/assets/icons/sso-google-workspace.svg';
import Oidc from '@site/docs/connectors/assets/icons/sso-oidc.svg';
import Okta from '@site/docs/connectors/assets/icons/sso-okta.svg';
import Saml from '@site/docs/connectors/assets/icons/sso-saml.svg';

Logto 的 [单点登录 (SSO) 方案](/end-user-flows/enterprise-sso) 简化了企业客户的访问管理。企业 SSO 连接器对于为不同企业客户启用 SSO 至关重要。

这些连接器促进了你的服务与企业身份提供商 (IdP) 之间的认证 (Authentication) 过程。Logto 支持 [SP 发起的 SSO](/end-user-flows/enterprise-sso/sp-initiated-sso) 和 [IdP 发起的 SSO](/end-user-flows/enterprise-sso/idp-initiated-sso)，允许组织成员使用其现有的公司凭据访问你的服务，从而提升安全性和生产力。

## 企业连接器 \{#enterprise-connectors}

Logto 为主流企业身份提供商提供了预构建的连接器，便于快速集成。对于自定义需求，我们支持通过 [OpenID Connect (OIDC)](https://auth.wiki/openid-connect) 和 [SAML](https://auth.wiki/saml) 协议集成。

### 主流企业连接器 \{#popular-enterprise-connectors}

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Microsoft Entra ID (OIDC)',
      href: '/integrations/entra-id-oidc',
      customProps: {
        icon: <MicrosoftEntraId />,
      },
    },
    {
      type: 'link',
      label: 'Microsoft Entra ID (SAML)',
      href: '/integrations/entra-id-saml',
      customProps: {
        icon: <MicrosoftEntraId />,
      },
    },
    {
      type: 'link',
      label: 'Google Workspace (OIDC)',
      href: '/integrations/google-workspace',
      customProps: {
        icon: <GoogleWorkspace />,
      },
    },
    {
      type: 'link',
      label: 'Okta (OIDC)',
      href: '/integrations/okta',
      customProps: {
        icon: <Okta />,
      },
    },
  ]}
/>

### 自定义你的企业连接器 \{#customize-your-enterprise-connectors}

<DocCardList
  items={[
    {
      type: 'link',
      label: 'OIDC (企业)',
      href: '/integrations/oidc-sso',
      customProps: {
        icon: <Oidc />,
      },
    },
    {
      type: 'link',
      label: 'SAML (企业)',
      href: '/integrations/saml-sso',
      customProps: {
        icon: <Saml />,
      },
    },
  ]}
/>

如果我们的标准连接器无法满足你的特定需求，欢迎随时联系我们。

## 配置企业连接器 \{#configuring-enterprise-connectors}

1. 前往：<CloudLink to="/enterprise-sso">控制台 > 企业 SSO</CloudLink>。
2. 点击“添加企业连接器”按钮并选择连接器类型。
3. 提供一个唯一名称（例如，Acme 公司用的 Okta）。
4. 在“连接”标签页中配置与 IdP 的连接。每种连接器类型的配置请参考上方指南。
5. 在“体验”标签页自定义 SSO 体验和**邮箱域名**。
6. 对于 SAML 企业连接器，可以在“IdP 发起的 SSO”标签页中选择性启用 IdP 发起的 SSO。[参考指南](/end-user-flows/enterprise-sso/idp-initiated-sso) 获取详情。
7. 保存更改。

请注意以下设置：

- **邮箱域名**：如果用户输入的邮箱的域名在某些企业 SSO 连接器的“企业邮箱域名”字段中，用户将被重定向到该 SSO 连接器对应的登录地址。

  :::note
  需要注意的是，在 SSO 连接器中配置相关邮箱域名后，属于这些域名的邮箱用户将被强制使用 [SSO 登录](/end-user-flows/enterprise-sso)。

  换句话说，只有未在 SSO 连接器中配置的邮箱域名，才能使用“邮箱 + 验证码”或“邮箱 + 密码”登录（前提是登录体验中已启用这两种登录方式）。
  :::

- **同步用户资料**：选择何时同步用户资料信息（如头像、姓名）。默认行为为“仅首次登录时同步”。“每次登录时都同步”也是一个选项，但可能导致自定义用户数据被覆盖。
- **启用令牌存储**：对于 OIDC 企业连接器，你可以启用令牌存储功能，在用户通过企业 IdP 登录时，将访问令牌 (Access token) 和刷新令牌 (Refresh token) 安全地保存到 Logto 的 [密钥保险库](/secret-vault)。这样你的应用可以代表用户访问第三方 API，无需用户再次认证 (Authentication)。了解更多关于 [联合令牌存储](/secret-vault/federated-token-set)。
- **显示信息**：可选，自定义连接器的显示名称和 Logo。当多个连接器关联到同一个邮箱域名时非常有用。用户会在被重定向到 IdP 登录页前，从 SSO 连接器按钮列表中选择所需的 IdP。

## 启用企业 SSO \{#enabling-enterprise-sso}

1. 前往：<CloudLink to="/sign-in-experience/sign-up-and-sign-in">控制台 > 登录体验 > 注册与登录</CloudLink>。
2. 启用“企业 SSO”开关。
3. 保存更改。

启用后，你的登录页面会出现“单点登录 (Single Sign-On)”按钮。拥有 SSO 启用邮箱域名的企业用户可以通过其企业身份提供商 (IdP) 访问你的服务。想了解更多 SSO 用户体验，请参考用户流程：[企业 SSO](/end-user-flows/enterprise-sso)。

## 即时加入组织 \{#just-in-time-to-organization}

在 Logto 中，[即时 (JIT) 供应](https://auth.wiki/jit-provisioning) 是一种在用户首次登录系统时，自动为其分配组织成员身份和角色的流程。

Logto 提供了在组织内配置 SSO 连接器 JIT 供应的入口，详见 [参考文档](/organizations/just-in-time-provisioning)。

## 常见问题 \{#faqs}

<details>
<summary>

### 更改企业 SSO 连接器后对现有用户有何影响？\{#impact-on-existing-users-after-enterprise-sso-connector-changes}

</summary>

- 添加 SSO：如果邮箱匹配，SSO 身份会与现有账户关联。
- 移除 SSO：会移除账户关联的 SSO 身份，但保留用户账户，并提示用户设置其他验证方式。

</details>

## 相关资源 \{#related-resources}

<Url href="https://blog.logto.io/idp-vs-sp-initiated-sso">IdP 发起的 SSO & SP 发起的 SSO</Url>
<Url href="https://blog.logto.io/differences-between-saml-and-oidc">SAML 与 OpenID Connect</Url>
<Url href="https://blog.logto.io/sso-vs-saml">SAML 与 SSO</Url>
