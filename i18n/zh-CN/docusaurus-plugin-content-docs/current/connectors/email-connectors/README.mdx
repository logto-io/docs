---
id: email-connectors
title: 邮件连接器
sidebar_label: 邮件连接器
sidebar_position: 1
---

# 邮件连接器

邮件连接器将你的邮件发送服务与 Logto 集成，以通过邮件实现安全的用户验证。配置完成后，你可以发送一次性密码（OTP）用于用户注册、登录、密码重置、账户关联、成员邀请和高风险操作验证。

## 选择你的邮件连接器

Logto 提供三种类型的邮件连接器选项：

### 免费 Logto 邮件服务（仅限 Cloud）

这个内置的邮件服务选项非常适合快速入门，无论是测试还是生产环境。它无需第三方集成，提供免费且可靠的邮件发送服务。只需为预设计的邮件模板自定义你的基本品牌。

Logto 邮件服务连接器现在提供品牌定制功能，包括徽标、公司信息和发件人名称。

:::info

1. 邮件将从固定地址 `no-reply@logto.email` 发送。
2. 你不能在邮件中添加链接或任何其他自定义内容。
   :::

```mdx-code-block
import DocCardList from '@theme/DocCardList';
import LogtoEmailService from '../assets/icons/logto-email-service.svg';
import AwsDm from '../assets/icons/aws-direct-mail.svg';
import SendGrid from '../assets/icons/sendgrid.svg';
import Mailgun from '../assets/icons/mailgun.svg';
import Postmark from '../assets/icons/postmark.svg';
import AliyunDm from '../assets/icons/aliyun-direct-mail.svg';
import Smtp from '../assets/icons/smtp.svg';
import Http from '../assets/icons/http.svg';

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Logto Email Service',
      href: '/connectors/email-connectors/built-in-email-service',
      description: 'Official connector for Logto Email Service.',
      customProps: {
        icon: <LogtoEmailService />,
      }
    },
  ]}
/>
```

### 流行的邮件服务提供商

使用 Logto 的分步指南连接你首选的邮件服务提供商（ESP）。

这些选项允许你完全自定义邮件模板、发件人名称等，以最佳方式服务于你的品牌。

我们为以下邮件服务提供商提供开箱即用的支持：

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'AWS Direct Mail',
      href: '/integrations/aws-ses',
      description: 'The official Logto connector for AWS connector for direct mail service.',
      customProps: {
        icon: <AwsDm />,
      }
    },
    {
      type: 'link',
      label: 'Mailgun',
      href: '/integrations/mailgun',
      description: 'The official Logto connector for Mailgun email service.',
      customProps: {
        icon: <Mailgun />,
      }
    },
    {
      type: 'link',
      label: 'SendGrid Email',
      href: '/integrations/sendgrid-email',
      description: 'The official Logto connector for SendGrid email service.',
      customProps: {
        icon: <SendGrid />,
      }
    },
    {
      type: 'link',
      label: 'Aliyun Direct Mail',
      href: '/integrations/aliyun-dm',
      description: 'The official Logto connector for Aliyun connector for direct mail service.',
      customProps: {
        icon: <AliyunDm />,
      }
    },
    {
      type: 'link',
      label: 'Postmark Mail',
      href: '/integrations/postmark',
      description: 'Logto connector for Postmark email service.',
      customProps: {
        icon: <Postmark />,
      }
    },
  ]}
/>
```

### 自定义你的邮件连接器

如果上述解决方案都不符合你的需求，你还可以选择使用简单邮件传输协议（SMTP）连接到你想要的邮件服务。

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'SMTP',
      href: '/integrations/smtp',
      description: 'The official Logto connector for SMTP.',
      customProps: {
        icon: <Smtp />,
      }
    },
  ]}
/>
```

如果你已经有自己的邮件服务且不适合使用 SMTP 连接，我们还提供 "HTTP 邮件连接器"。

当需要发送邮件时，它会向配置的 `endpoint` 发送一个 API 调用以完成依赖邮件的认证流程。请注意，为防止认证流程错误，配置的 endpoint 在收到 WebHook 后需要返回 200 响应，以通知 Logto 已收到发送邮件的通知。在这种情况下，你需要监控自己的邮件服务以确保成功发送。

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'HTTP email connector',
      href: '/integrations/http-email',
      description: 'The official Logto connector for HTTP email.',
      customProps: {
        icon: <Http />,
      }
    },
  ]}
/>
```

:::note

你可能会注意到只能添加一个邮件连接器。

当你已经有一个邮件连接器时，你只能选择 "更改邮件连接器"。在控制台执行此操作时，一旦保存就会立即生效，因此请务必在保存前测试你的配置。

为了确保服务的稳定性，Cloud 用户可以为开发环境创建一个开发租户。在开发环境中测试配置后，将配置 "迁移" 到生产环境，然后保存设置。
:::

## 启用邮件注册或登录

一旦你成功添加邮件连接器并完成配置，你可以根据业务需求启用依赖于邮件 + 验证码的登录和注册配置。

1. **导航到：** <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > Sign-in experience > Sign-up and sign-in</CloudLink>
2. **设置注册方式：** 选择 "电子邮件地址" 或 "电子邮件地址或电话号码" 作为注册标识符。**注意：注册期间目前必须进行邮件验证。**
3. **设置登录方式：** 选择的注册标识符会自动成为登录方式。点击 "添加另一个" 以获取其他登录选项。
4. **保存更改并测试：** 点击 "保存更改" 以实施新的登录体验。记得使用 "实时预览" 测试功能。

:::warning
由于我们的配置会立即生效，删除现有邮件连接器可能会影响终端用户的正常登录和注册流程。

例如，如果登录标识符包括 "邮件 + 验证码" 组合，删除现有邮件连接器将阻止用户通过邮件接收验证码，并导致登录流程出错。

在操作连接器时，请注意潜在风险。
:::

## 常见问题解答

<details>
<summary>如何自定义邮件发件人名称？</summary>

我们仍在开发更多连接器。如果你需要更多选项，请在 Discord 上告诉我们你的需求，并在 [GitHub](https://github.com/logto-io/logto/issues) 上提交功能请求。如果你需要进一步的帮助，你也可以 [通过电子邮件联系我们](mailto:contact@logto.io)。

对于贡献者，我们提供了一种易于扩展的连接器创建方法，允许你根据具体场景 [自定义自己的连接器](/logto-oss/develop-your-connector)。我们欢迎你向 Logto 提交 pull request，以便社区中的其他人也能从你的工作中受益。

</details>

<details>
<summary>如何在 Logto 邮件连接器中限制邮件请求的 IP 地址？</summary>

一种解决方法是使用 Logto HTTP 邮件连接器。

在你的服务器上实现一个调用相关邮件服务的 API endpoint，并通过 Logto HTTP 邮件连接器触发此 API endpoint。这样，你将能够完全控制 API endpoint 的 IP 地址，并可以在邮件服务提供商的配置中将相应的 IP 地址添加到白名单中。

</details>
