---
id: built-in-email-service
title: Logto 内置邮件服务
sidebar_label: Logto 内置邮件服务
sidebar_position: 2
---

Logto 为你在以下场景中提供了内置邮件服务，方便快捷：

1. 快速探索或测试 Logto 的邮箱登录体验。
2. 直接用于你的线上产品。主要适用于愿意使用 `logto.email` 作为发件邮箱域名的新创公司。

Logto 邮件服务的特点：

- **免费使用**：完全免费，无每日邮件发送量限制，帮你节省成本。
- **无需操心**：无需配置任何第三方邮件服务提供商。只需自定义邮件模板的基础品牌信息。如果你还没有自己的品牌信息，也可以选择几步即用。
- **投递保障**：基于 Logto 邮件服务，你可以获得稳定的服务和可靠的邮件投递，确保用户能够顺利访问你的产品。

不过，虽然便捷，也有一些需要注意的限制：

1. 邮件将从固定地址 `no-reply@logto.email` 发送。
2. 你无法在邮件中添加链接或任何其他自定义内容。

随着业务需求的发展，你可以随时选择其他邮件服务提供商。我们提供多种[开箱即用的邮件服务连接器](/connectors/email-connectors#popular-email-providers)，同时也支持 [SMTP](/integrations/smtp)、[HTTP](/integrations/http-email) 和 [WebHook](/developers/webhooks) 触发邮件发送，总有一种方式适合你。

:::note
Logto 内置免费邮件服务目前仅对 [Cloud](https://cloud.logto.io/) 用户开放。对于开源服务用户，你可以灵活配置自己的邮件服务提供商来实现邮箱登录。
:::

## 配置步骤 \{#configuration-steps}

按照以下步骤配置 Logto 邮件服务：

1. 前往 <CloudLink to="/connectors/passwordless">连接器 > 邮箱和短信连接器</CloudLink>。
2. 若要添加新的邮箱连接器，点击“**设置**”按钮并选择“**Logto 邮件服务**”连接器。
3. 成功创建“Logto 邮件服务”连接器后，你可以自定义邮件模板中展示的基础品牌信息。
4. 完成修改后，记得在保存更改前，先向你的邮箱地址发送测试邮件模板。

可自定义选项：

- **发件邮箱**：发件邮箱固定为 `no-reply@logto.email`，不可修改。
- **发件人名称**：设置你的品牌名称作为发件人名称，提升用户识别度。
- **公司信息**：展示你的公司名称、地址或邮编，增强用户信任并满足合规要求。_注意：不允许填写 URL。_
- **应用 Logo**：上传你的应用品牌 Logo，让用户收到的邮件中能体现应用品牌价值。

## 统一邮件模板 \{#unified-email-templates}

Logto 邮件服务采用统一邮件模板，针对不同认证 (Authentication) 场景定制：

| 用途                                    | 场景说明                                                                                                                                                                                        |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 注册 (Register)                         | 用户使用邮箱创建账号，并通过输入 Logto 发送到邮箱的验证码进行验证。                                                                                                                             |
| 登录 (SignIn)                           | 用户使用邮箱登录，并通过输入验证码而非密码进行验证。                                                                                                                                            |
| 忘记密码 (ForgotPassword)               | 用户在登录时忘记密码，可以选择通过已在 Logto 验证过的邮箱进行身份验证。                                                                                                                         |
| 通用 (Generic)                          | 此模板可作为多种场景的通用备选方案，包括测试连接器配置等。                                                                                                                                      |
| 组织邀请 (OrganizationInvitation)       | 使用此模板向用户发送加入组织的邀请链接。                                                                                                                                                        |
| 用户权限验证 (UserPermissionValidation) | 在应用使用过程中，某些高风险操作或风险较高的操作需要额外的用户验证，如银行转账、删除正在使用的资源、注销会员等。`UserPermissionValidation` 模板可用于定义用户在这些场景下收到的邮件验证码内容。 |
| 绑定新标识 (BindNewIdentifier)          | 当用户修改个人资料时，可能会将邮箱地址绑定到当前账号。在这种情况下，可以使用 `BindNewIdentifier` 模板自定义验证邮件内容。                                                                       |
| 邮箱 MFA 验证 (MfaVerification)         | 启用邮箱 MFA 时，该模板用于在多因素认证 (MFA) 过程中向用户发送验证码。                                                                                                                          |
| 绑定 MFA (BindMfa)                      | 启用邮箱 MFA 时，该模板用于设置 MFA 的邮箱验证码。用户在将邮箱地址作为 MFA 因素绑定或配置到账号时，会收到此验证码。                                                                             |

“注册 (Register)”用途类型下自定义品牌信息的邮件模板示例：

<img src="/img/assets/logto-email-service-template-sample.png" alt="Logto 内置邮件服务示例" />

如果未提供自定义品牌信息，邮件模板也会以默认展示和布局使用：

<img
  src="/img/assets/logto-email-service-template-sample-without-branding.png"
  alt="Logto 内置邮件服务无品牌示例"
/>

### 多语言支持 \{#localization}

Logto 内置邮件服务支持多语言。它会自动检测用户的登录体验 (Sign-in Experience) 设置，并以用户偏好的语言发送邮件。

通过 Management API 发送组织邀请时，你可以在请求体中指定 `locale` 参数。例如：

```json
{
  "inviterId": "inviter-user-id",
  "invitee": "invitee-email-address",
  "expiresAt": "epoch-timestamp",
  "organizationId": "organization-id",
  "messagePayload": {
    "link": "https://your-app.com/invite-accept?invitation-id=abcd1234",
    // highlight-start
    "locale": "fr"
    // highlight-end
  }
}
```

## 常见问题 \{#faqs}

<details>
<summary>

### 可以为 Logto 邮件服务添加自定义 CSS 或 HTML 吗？\{#is-it-possible-to-add-custom-css-or-html-to-logto-email-service}

</summary>

Logto 内置邮件服务不支持自定义 CSS 或 HTML。你只能修改通用品牌元素。此限制是为了保障内置邮件服务的稳定性，因为所有租户共用同一 IP 地址和发件地址。详情请参考「[提升邮件投递率的因素](https://blog.logto.io/verification-email-delivery#factors-to-improve-email-delivery)」。

如需自定义邮件模板，建议使用其他邮件连接器，如 AWS Direct Mail、SendGrid、Mailgun、Postmark 或 SMTP。

</details>
