---
sidebar_position: 1
---

# Configurar MFA

## Configurar los ajustes de MFA en Logto \{#configure-mfa-settings-in-logto}

Logto proporciona opciones flexibles de configuración de MFA para satisfacer diferentes requisitos de seguridad. Puedes configurar MFA a nivel global para todos los usuarios o habilitarlo por organización para aplicaciones multi-inquilino.

### Configuración global de MFA \{#global-mfa-configuration}

Sigue estos pasos para habilitar MFA en el flujo de inicio de sesión de los usuarios de Logto:

1. Navega a: <CloudLink to="/mfa">Consola > Autenticación multifactor</CloudLink>.
2. Habilita los factores de verificación compatibles para tus usuarios.
   1. Factores primarios:
      - [OTP de aplicación autenticadora](/end-user-flows/mfa/authenticator-app-otp): El método más común y ampliamente aceptado. Utiliza una contraseña de un solo uso basada en tiempo (TOTP) generada por una aplicación autenticadora como Google Authenticator o Authy.
      - [Passkeys (WebAuthn)](/end-user-flows/mfa/webauthn): Una opción de alta seguridad adecuada para productos web que admiten biometría de dispositivos o llaves de seguridad, etc., asegurando una protección robusta.
   2. Factores de respaldo:
      - [Códigos de respaldo](/end-user-flows/mfa/backup-codes): Sirve como opción de respaldo cuando los usuarios no pueden verificar ninguno de los factores primarios mencionados anteriormente. Habilitar esta opción reduce la fricción para que los usuarios accedan exitosamente.
3. Elige si deseas habilitar **Requerir MFA**:
   - **Habilitar**: Se pedirá a los usuarios que configuren MFA durante el proceso de inicio de sesión, el cual no se puede omitir. Si el usuario no configura MFA o elimina sus ajustes de MFA, quedará bloqueado de su cuenta hasta que configure MFA nuevamente.
   - **Deshabilitar**: Los usuarios pueden omitir el proceso de configuración de MFA durante el flujo de registro. Pueden configurar MFA más tarde a través de la página de configuración de cuenta de autoservicio. [Aprende más](/end-user-flows/account-settings/) sobre cómo implementar una página de configuración de cuenta de usuario. Y continúa eligiendo la política para el aviso de configuración de MFA:
     - **No pedir a los usuarios que configuren MFA**: No se pedirá a los usuarios que configuren MFA durante el inicio de sesión.
     - **Pedir a los usuarios que configuren MFA durante el registro**: Se pedirá a los nuevos usuarios que configuren MFA durante el registro, y los usuarios existentes verán el aviso en su próximo inicio de sesión. Los usuarios pueden omitir este paso y no volverá a aparecer.
     - **Pedir a los usuarios que configuren MFA en su inicio de sesión después del registro**: Se pedirá a los nuevos usuarios que configuren MFA en su segundo inicio de sesión después del registro, y los usuarios existentes verán el aviso en su próximo inicio de sesión. Los usuarios pueden omitir este paso y no volverá a aparecer.

<img src="/img/assets/configure-mfa.png" alt="Configuración de MFA" />

### Configuración de MFA a nivel de organización \{#organization-level-mfa-configuration}

Para productos con una arquitectura multi-inquilino que admiten [Organizaciones](/organizations), en la mayoría de los casos no necesitas requerir MFA para todos los usuarios. En su lugar, MFA puede habilitarse por organización, lo que te permite adaptar los requisitos según las necesidades de cada cliente. Para comenzar, consulta [Requerir MFA para miembros de la organización](/organizations/organization-management#require-mfa-for-organization-members).

## Flujo de usuario de MFA \{#mfa-user-flow}

### Flujo de configuración de MFA \{#mfa-set-up-flow}

Una vez que MFA está habilitado, se pedirá a los usuarios que configuren MFA durante el proceso de inicio de sesión y registro. Los usuarios pueden optar por omitir este proceso de configuración solo si la política de “MFA controlado por el usuario“ está habilitada.

1. **Visitar la página de inicio de sesión o registro**: El usuario navega a la página de inicio de sesión o registro.
2. **Completa el inicio de sesión o registro**: El usuario completa el proceso de verificación de identidad dentro del flujo de inicio de sesión o registro.
3. **Configurar el factor primario de MFA**: Se solicita al usuario que configure su factor primario de MFA (ya sea OTP de aplicación autenticadora o WebAuthn). Si hay varios factores primarios habilitados, pueden elegir la opción que prefieran. Si la política de “MFA controlado por el usuario” está habilitada, también pueden omitir este paso seleccionando el botón "Omitir".
4. **Configurar el factor de respaldo de MFA**: Si los **Códigos de respaldo** están habilitados, se solicitará al usuario que configure los códigos de respaldo después de configurar exitosamente su factor de autenticación primario. Se mostrarán los códigos de respaldo generados automáticamente, que el usuario puede descargar y almacenar de forma segura. El usuario debe confirmar manualmente los códigos de respaldo para completar el proceso de configuración de MFA.

<img src="/img/assets/link-mfa.png" alt="Flujo de configuración de MFA" />

### Flujo de verificación de MFA \{#mfa-verification-flow}

A los usuarios que hayan configurado MFA se les pedirá verificar su identidad utilizando los factores de MFA configurados durante el inicio de sesión. El factor de verificación dependerá de la configuración de MFA en Logto y de los ajustes del usuario.

- Si un usuario ha configurado solo un factor, lo verificará directamente.
- Si un usuario ha configurado varios factores como 2FA, deberá elegir uno para verificar.
- Si todos los factores primarios habilitados no están disponibles para el usuario, y el código de respaldo está habilitado, pueden usar el código de respaldo de un solo uso para verificar su identidad.

<img src="/img/assets/verify-mfa.png" alt="Flujo de verificación de MFA" />

## Gestión de MFA \{#mfa-management}

Más allá de la configuración inicial durante el inicio de sesión / registro, los usuarios pueden gestionar sus ajustes de MFA a través de un centro de cuentas de autoservicio. Esto proporciona flexibilidad para que los usuarios vinculen o desvinculen factores de MFA según sus necesidades.

### Construir un centro de cuentas \{#building-an-account-center}

Puedes construir un centro de cuentas completo utilizando la [Account API](/end-user-flows/account-settings/by-account-api) de Logto, que permite a los usuarios:

- **Vincular nuevos factores de MFA**: Añadir aplicaciones autenticadoras adicionales, passkeys o regenerar códigos de respaldo
- **Desvincular factores de MFA existentes**: Eliminar métodos de MFA que ya no deseen usar
- **Ver el estado actual de MFA**: Ver qué factores de MFA están configurados actualmente

### Avisos de configuración de MFA después del inicio de sesión \{#post-login-mfa-setup-prompts}

Para aplicaciones que no requieren MFA durante el registro inicial, puedes implementar avisos inteligentes para fomentar la configuración de MFA:

- **Avisos condicionales**: Mostrar recomendaciones de configuración de MFA basadas en el comportamiento del usuario o el valor de la cuenta
- **Paneles de seguridad**: Mostrar puntuaciones de seguridad que mejoran cuando MFA está habilitado
- **Incorporación gradual**: Presentar la configuración de MFA como parte de un flujo progresivo de mejora de seguridad

Aprende más sobre cómo implementar estos patrones con la [Account API](/end-user-flows/account-settings/by-account-api).
