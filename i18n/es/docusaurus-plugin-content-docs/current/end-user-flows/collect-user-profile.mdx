---
sidebar_position: 7
---

import Availability from '@components/Availability';

# Recopilar perfil de usuario

<Availability cloud oss={{ major: 1, minor: 31 }} />

Más allá de los identificadores de autenticación y credenciales requeridos para el inicio de sesión del usuario, tu aplicación puede necesitar recopilar información adicional del perfil de usuario almacenada en Logto para facilitar su recuperación mediante reclamos JWT o APIs y así ofrecer experiencias de producto personalizadas. Puedes recopilar datos de usuario a través de los siguientes métodos:

- **Durante el registro de nuevos usuarios**: Utiliza la función [Recopilar perfil de usuario](#quick-start) para añadir un paso listo para usar de "Cuéntanos sobre ti" que recopila información adicional del perfil de usuario durante el registro. Los nuevos usuarios deben completar todos los campos obligatorios antes de que el registro se considere finalizado. Este documento se centra en este enfoque.

- **Después del registro del usuario**: Utiliza la [Account API](/end-user-flows/account-settings/by-account-api) para implementar experiencias de autoservicio durante los flujos de incorporación, centros de cuentas o a lo largo del uso del producto para actualizar la información del perfil de usuario.

## Beneficios clave \{#key-benefits}

La función **Recopilar perfil de usuario** te permite obtener información adicional del usuario durante la experiencia de registro del usuario final. Recomendamos recopilar solo la información esencial requerida para tu producto para evitar flujos de registro extensos que puedan afectar las tasas de conversión de usuarios.

Esta función te permite:

- **Capturar datos de usuario completos**: Recopila cualquier [dato de usuario](/user-management/user-data) para fines comerciales o de cumplimiento, incluyendo [propiedades estándar de usuario OIDC](#basic-user-data-fields) y [datos personalizados](#custom-user-data-fields).

- **Personalización flexible de campos**: Elige entre varios [tipos de campo](#field-types) incluyendo texto, número, fecha, casilla de verificación, lista desplegable (selección), URL y validación por expresión regular para adaptarse a tus necesidades específicas de datos.

- **Experiencia de usuario optimizada**: Personaliza la visualización con etiquetas, descripciones, marcadores de posición y reglas de validación. Configura los campos como obligatorios u opcionales según las necesidades de tu negocio.

- **Configuraciones de campo integradas**: Utiliza campos de datos básicos preconfigurados para propiedades comunes de usuario con configuración plug-and-play. Aprovecha los campos compuestos (dirección, nombre completo) para recopilar datos estructurados de manera eficiente en un solo paso.

## Inicio rápido \{#quick-start}

1. Ve a <CloudLink to="/sign-in-experience/collect-user-profile">Consola Logto > Experiencia de inicio de sesión > Recopilar perfil de usuario</CloudLink>.
2. Haz clic en "Agregar campos de perfil" y elige un [campo integrado](#basic-user-data-fields) o define un [dato personalizado](#custom-user-data-fields) (clave alfanumérica) para crear.
3. Abre los detalles del campo para establecer el tipo de campo, etiqueta, descripción, indicador de obligatorio y configuraciones específicas del tipo (longitud, rango, formato, opciones, etc.). Haz clic en "Guardar cambios".
4. Regresa a Experiencia de inicio de sesión > Recopilar perfil de usuario, arrastra y suelta los campos para reordenarlos y los cambios se aplicarán automáticamente.
5. Prueba la experiencia de usuario con [Logto live preview](/customization/live-preview) o tu aplicación de prueba. Ya sea que los usuarios creen una nueva cuenta mediante [identificador (correo electrónico / número de teléfono / nombre de usuario)](/end-user-flows/sign-up-and-sign-in/sign-up), [inicio de sesión social](/end-user-flows/sign-up-and-sign-in/social-sign-in) o [SSO empresarial](/end-user-flows/enterprise-sso), todos verán la página de "Cuéntanos sobre ti" durante el registro.

<img
  src="/img/assets/collect-user-profile-during-sign-up.png"
  alt="Recopilar perfil de usuario durante el registro"
/>

## Tipos de datos de usuario \{#user-data-types}

Los datos de usuario pueden verse en cada [perfil de usuario](/user-management/manage-users). Para una visión general completa de todas las categorías de datos de usuario, consulta la documentación de [Estructura de datos de usuario](/user-management/user-data). La función Recopilar perfil de usuario te permite recopilar tanto datos básicos de usuario como datos personalizados durante el registro.

### Campos básicos de datos de usuario \{#basic-user-data-fields}

Los campos básicos de datos de usuario proporcionados por Logto se almacenan directamente en la propiedad `user` o `user.profile`. Estos campos vienen con valores de configuración predeterminados y traducciones i18n, listos para usar inmediatamente después de su creación. También puedes personalizar los tipos de campo y parámetros según tus necesidades específicas.

| Nombre del campo (13%) | Clave de dato de usuario (44%)                                                                                                                                                                                                                                                                  | Descripción                                                                                                                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Nombre                 | <code>user.name</code>                                                                                                                                                                                                                                                                          | El nombre completo del usuario en forma visible, incluyendo todos los componentes del nombre (ejemplo: "Jane Doe").                                                                                                                  |
| Nombre completo        | <code>user.profile.givenName</code><br /><code>user.profile.middleName</code><br /><code>user.profile.familyName</code>                                                                                                                                                                         | El nombre legal completo del usuario. Combina de manera flexible familyName, givenName y middleName según la configuración.                                                                                                          |
| Apodo                  | <code>user.profile.nickname</code>                                                                                                                                                                                                                                                              | Nombre casual o familiar para el usuario, que puede diferir de su nombre legal.                                                                                                                                                      |
| Fecha de nacimiento    | <code>user.profile.birthdate</code>                                                                                                                                                                                                                                                             | Fecha de nacimiento del usuario en un formato especificado (ejemplo: "MM-dd-yyyy").                                                                                                                                                  |
| Género                 | <code>user.profile.gender</code>                                                                                                                                                                                                                                                                | Género autoidentificado del usuario (ejemplo: "Femenino", "Masculino", "Prefiero no decirlo").                                                                                                                                       |
| Perfil                 | <code>user.profile.profile</code>                                                                                                                                                                                                                                                               | URL de la página de perfil legible del usuario (ejemplo: perfil de red social).                                                                                                                                                      |
| Sitio web              | <code>user.profile.website</code>                                                                                                                                                                                                                                                               | URL del sitio web personal o blog del usuario.                                                                                                                                                                                       |
| Dirección              | <code>user.profile.address.formatted</code><br /><code>user.profile.address.streetAddress</code><br /><code>user.profile.address.region</code><br /><code>user.profile.address.zoneinfo</code><br /><code>user.profile.address.postalCode</code><br /><code>user.profile.address.country</code> | Dirección completa del usuario (ejemplo: "123 Main St, Anytown, USA 12345"). Elige entre una sola línea (<code>address.formatted</code>) o varias líneas con componentes configurables (calle, ciudad, estado, código postal, país). |

### Campos personalizados de datos de usuario \{#custom-user-data-fields}

Los campos personalizados de datos de usuario son campos definidos por el usuario que capturan información adicional no cubierta por los campos básicos, como preferencias, intereses, tamaño de la empresa u otros atributos específicos del negocio.

Al crear campos personalizados, utiliza solo caracteres alfanuméricos para la clave de dato de usuario (ejemplo: `customData.companySize`). Luego puedes configurar el [tipo de campo](#field-types) y personalizar propiedades adicionales para satisfacer tus necesidades específicas.

Para más información sobre cómo recuperar y actualizar datos personalizados de usuario después de la creación del usuario, consulta [estructura de datos de usuario](/user-management/user-data#custom-data).

## Tipos de campo \{#field-types}

Podemos categorizar los campos por simplicidad:

- Primitivos: Texto, Número, Fecha, Casilla de verificación (Booleano), Lista desplegable (Selección única), URL, Expresión regular.
- Compuestos: Nombre completo, Dirección.

### Propiedades comunes \{#common-properties}

| Propiedad (14%)      | Aplica a (36%)           | Notas                                                                                                                               |
| -------------------- | ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------- |
| Etiqueta             | Todos                    | Nombre visible mostrado a los usuarios. Flota hacia arriba cuando el campo tiene valor o está enfocado. Obligatorio.                |
| Marcador de posición | Todos (excepto Checkbox) | Pista en línea visible cuando la etiqueta está flotando (texto de ejemplo / guía de formato).                                       |
| Descripción          | Todos (excepto Checkbox) | Texto de apoyo debajo del campo para instrucciones más largas o contexto adicional.                                                 |
| Obligatorio          | Todos (excepto Checkbox) | Si está habilitado, el envío se bloquea cuando está vacío. Si está deshabilitado, se añade una etiqueta "(Opcional)" a la etiqueta. |

### Configuraciones específicas por tipo \{#type-specific-configurations}

| Tipo (14%)                    | Aspectos configurables (36%)                   | Notas                                                                                                                                                                                                                                                                                                        |
| ----------------------------- | ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Texto                         | longitud mínima / máxima                       | Limita la longitud mínima y máxima del texto ingresado por el usuario.                                                                                                                                                                                                                                       |
| Número                        | valor mínimo / máximo                          | Limita el rango numérico mínimo y máximo del valor ingresado.                                                                                                                                                                                                                                                |
| Fecha                         | Formato de fecha (predefinido / personalizado) | Elige formatos predefinidos (MM/dd/yyyy, dd/MM/yyyy, yyyy-MM-dd). Cambiar el marcador de posición sobrescribe las interacciones predeterminadas. O utiliza patrones totalmente personalizables de <a href="https://date-fns.org/v2.30.0/docs/format" target="_blank" rel="noopener noreferrer">date-fns</a>. |
| Casilla de verificación       | Valor predeterminado                           | Marcado (Verdadero) / No marcado (Falso).                                                                                                                                                                                                                                                                    |
| Lista desplegable (Selección) | Lista de opciones (≥1)                         | Usa <code>valor:etiqueta</code> por línea. Si se omite la etiqueta, se muestra el valor.                                                                                                                                                                                                                     |
| URL                           | N/A                                            | N/A                                                                                                                                                                                                                                                                                                          |
| Expresión regular             | Expresión regular                              | Patrón de validación (omite las barras iniciales / finales). Ejemplo: <code>^\d{3}-\d{2}-\d{4}$</code> para SSN.                                                                                                                                                                                             |
| Dirección                     | Componentes                                    | Una o varias líneas; subcomponentes: calle, ciudad, estado, código postal, país.                                                                                                                                                                                                                             |
| Nombre completo               | Componentes                                    | Subcomponentes: nombre, segundo nombre, apellido.                                                                                                                                                                                                                                                            |

## Validación \{#validation}

La validación de campos se realiza en el envío del usuario en el paso final del registro. Se aplican las siguientes comprobaciones:

- Presencia obligatoria (excepto Checkbox).
- Límites de longitud (Texto).
- Rango numérico (Número).
- Coincidencia de patrón (Expresión regular, Fecha con formato, URL, pertenencia a opción de selección).
- Estructura de URL (validación sintáctica básica, no comprobación de accesibilidad).

También se aplica a los subcomponentes de los dos campos compuestos: `address` y `fullname`. Los componentes individuales también deben cumplir los mismos criterios de validación.

## Localización \{#localization}

Logto proporciona traducciones a nivel de sistema para los campos básicos de datos de usuario, como `firstName`, `lastName`, `gender` y `birthdate`. La etiqueta de estos campos es configurable en la Consola Logto.
Puedes sobrescribir estas etiquetas proporcionando tus propias traducciones en [Logto > Experiencia de inicio de sesión > Contenido](https://cloud.logto.io/to/sign-in-experience/content)

Los campos personalizados dependen completamente de las etiquetas, marcadores de posición y descripciones que proporciones. Para la localización de campos personalizados, puedes gestionar las traducciones utilizando [Bring your UI](/customization/bring-your-ui) o [contactarnos](https://logto.io/contact) con tus comentarios.

## Management API (puntos clave) \{#management-api-key-endpoints}

| Método (10%) | Endpoint                                                     | Propósito                                                                |
| ------------ | ------------------------------------------------------------ | ------------------------------------------------------------------------ |
| GET          | <code>/api/custom-profile-fields</code>                      | Listar todos los campos.                                                 |
| GET          | <code>/api/custom-profile-fields/:name</code>                | Obtener la definición de un campo por nombre.                            |
| POST         | <code>/api/custom-profile-fields</code>                      | Crear un campo.                                                          |
| POST         | <code>/api/custom-profile-fields/batch</code>                | Crear en lote (≤20 elementos por solicitud).                             |
| PUT          | <code>/api/custom-profile-fields/:name</code>                | Actualizar campo por nombre y conjunto completo de datos.                |
| DELETE       | <code>/api/custom-profile-fields/:name</code>                | Eliminar un campo.                                                       |
| POST         | <code>/api/custom-profile-fields/properties/sie-order</code> | Actualizar el orden de los campos en la Experiencia de inicio de sesión. |

## Mejores prácticas \{#best-practices}

- Recopila solo los datos esenciales en el registro; deja la información adicional para completar el perfil más adelante.
- Utiliza campos compuestos para datos estructurados (dirección, nombre completo) para coherencia y localización.
- Proporciona ejemplos claros / marcadores de posición para campos sensibles al formato (expresión regular, fecha, rangos numéricos).

## Preguntas frecuentes \{#faqs}

<details>

<summary>

### ¿Los campos de perfil recopilan datos de usuarios existentes? \{#do-the-profile-fields-collect-existing-user-data}

</summary>

No, solo recopilan información del paso final del registro de nuevos usuarios.

</details>

<details>

<summary>

### ¿Qué sucede si elimino un campo? ¿Se elimina el dato del usuario? \{#what-if-i-delete-a-field-does-it-remove-the-user-data}

</summary>

No, no se eliminarán los datos de usuario existentes. Solo se eliminará el campo del formulario de registro en la experiencia del usuario final.

</details>

<details>

<summary>

### ¿Puedo recopilar el país con una lista controlada en lugar de un campo de texto normal? \{#can-i-collect-country-with-a-controlled-list-instead-of-a-regular-text-field}

</summary>

Sí, puedes cambiar el componente "País" a un campo de "Lista desplegable (Selección única)" con opciones estandarizadas.

</details>
