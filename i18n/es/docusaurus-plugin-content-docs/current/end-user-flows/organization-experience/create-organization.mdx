---
sidebar_position: 3
---

# Crear organización

Imagina que estás construyendo una [aplicación multi-inquilino](https://auth.wiki/multi-tenancy) (por ejemplo, una aplicación SaaS multi-inquilino) que atiende a muchos clientes, y cada cliente posee un inquilino dedicado.

Las organizaciones suelen crearse cuando:

1. Nuevos clientes se registran y crean tanto una cuenta como un inquilino para su negocio.
2. Los usuarios existentes pueden crear una nueva organización desde dentro de la aplicación.

<img src="/img/assets/new-account-creates-org.png" alt="Nueva cuenta crea organización" />
<img src="/img/assets/existing-user-creates-org.png" alt="Usuario existente crea organización" />

## Implementar la creación de organizaciones \{#implement-organization-creation}

Hay dos formas de crear organizaciones para tu aplicación.

### Crear a través de Logto Console \{#create-via-logto-console}

Crea organizaciones manualmente en la interfaz de usuario de Logto Console. Ve a <CloudLink to="/organizations">Console > Organizations</CloudLink> para crear organizaciones, asignar miembros y roles, y personalizar la experiencia de inicio de sesión de la organización.

Crea una [plantilla de organización](/authorization/organization-template) para crear en lote organizaciones similares que compartan los mismos roles y permisos.

### Crear a través de Logto Management API \{#create-via-logto-management-api}

La consola es ideal para la configuración manual, pero la mayoría de las aplicaciones permiten a los usuarios finales autogestionarse: crear y administrar organizaciones directamente en tu aplicación. Para ello, implementa estas funciones con la Logto Management API.

:::note

Si eres nuevo en la Logto Management API o no has leído la introducción básica sobre el uso de la Logto Management API para la experiencia de organización, lee esto primero:

<Url href="/end-user-flows/organization-experience/setup-app-service-with-management-api">
  Configura tu servicio de aplicación con la Logto Management API
</Url>
<Url href="/concepts/core-service/#management-api">Management API</Url>
<Url href="/integrate-logto/interact-with-management-api">Interactúa con Management API</Url>

:::

Supón que tu backend está conectado a la Logto Management API mediante el mecanismo máquina a máquina (M2M), y que has obtenido un token de acceso M2M.

Crea una organización con la Management API ([referencias de API](https://openapi.logto.io/operation/operation-createorganization)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}'
```

Luego añade el usuario como miembro de la organización ([referencia de API](https://openapi.logto.io/operation/operation-addorganizationusers)):

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"userIds":["string"]}'
```

Opcionalmente, asigna roles específicos de la organización al usuario ([referencia de API](https://openapi.logto.io/operation/operation-assignorganizationrolestousers)).

Consulta las [especificaciones completas de la API](https://openapi.logto.io/group/endpoint-organizations) para más detalles.

Envuelve estas llamadas en tu propia capa de API. Cuando los usuarios realicen la acción de “crear organización” en tu aplicación, valida la solicitud comprobando sus permisos y luego llama a la Logto Management API para completar la operación.

## Validar el token de organización en las solicitudes de usuario \{#validating-organization-token-in-user-request}

En tu aplicación, cuando los usuarios realicen acciones en el contexto de una organización, deben usar un token de organización en lugar de un token de acceso regular. El token de organización es un [JWT](https://auth.wiki/jwt) que contiene permisos de organización. Al igual que cualquier [token de acceso](https://auth.wiki/access-token), puedes decodificar los reclamos y verificar el reclamo "scope" para hacer cumplir los permisos.

Consulta <Url href="/authorization">Autorización (Authorization)</Url> para más información sobre escenarios de autorización y cómo validar tokens de organización.
