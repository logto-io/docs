---
sidebar_position: 4
---

# Restablecer contraseña

La función de recuperación de contraseña se habilitará automáticamente cuando tengas configurado un [conector de correo electrónico](/connectors/email-connectors) o un [conector de SMS](/connectors/sms-connectors) válido. El usuario puede restablecer su contraseña proporcionando su dirección de correo electrónico o número de teléfono registrado.

## Olvidé mi contraseña para recuperar la cuenta \{#forgot-password-for-account-recovery}

Una vez que la función de restablecimiento de contraseña esté habilitada, se mostrará un botón de enlace "¿Olvidaste tu contraseña?" debajo del formulario de inicio de sesión. Los usuarios pueden hacer clic en el enlace "¿Olvidaste tu contraseña?" para iniciar el proceso de restablecimiento de contraseña.

:::note
¿No ves el enlace "¿Olvidaste tu contraseña?"? Asegúrate de tener configurado un conector de **correo electrónico** o **SMS** válido.
:::

1. **Visitar la página de inicio de sesión**: El usuario visita la página de inicio de sesión.
2. **Hacer clic en el enlace Olvidé mi contraseña**: El usuario hace clic en el enlace "¿Olvidaste tu contraseña?".
3. **Ingresar correo electrónico / teléfono**: Después de hacer clic en el enlace "¿Olvidaste tu contraseña?", el usuario será redirigido a una nueva página donde podrá ingresar su dirección de correo electrónico o número de teléfono registrado.
4. **Enviar código de verificación**: Logto enviará un código de verificación al correo electrónico o número de teléfono proporcionado por el usuario y lo redirigirá a la página de verificación de código.
5. **Ingresar código de verificación**: El usuario ingresa el código de verificación recibido en su correo electrónico o teléfono. Logto verificará el código y la identidad del usuario asociado con la dirección de correo electrónico o número de teléfono.
6. **Ingresar nueva contraseña**: Se le pedirá al usuario que ingrese una nueva contraseña una vez que el código de verificación haya sido verificado con éxito.
7. **Restablecimiento de contraseña exitoso:** Si la contraseña proporcionada cumple con los requisitos de la política de contraseñas, la contraseña se actualizará correctamente.
8. **Redirigir a la página de inicio de sesión**: El usuario será redirigido a la página de inicio de sesión para iniciar sesión con la nueva contraseña.

<img src="/img/assets/reset-password.png" alt="Flujo de restablecimiento de contraseña" />

## Actualizar la contraseña después de iniciar sesión \{#update-password-after-sign-in}

Los usuarios autenticados pueden cambiar (o establecer inicialmente) su contraseña a través de la experiencia de configuración de cuenta dentro de tu aplicación. Consulta [Configuración de cuenta](/end-user-flows/account-settings/by-account-api#update-users-password) para saber cómo construir esto con la Account API.

## Comprobar si el usuario tiene una contraseña \{#check-if-user-has-a-password}

Los datos del usuario exponen un campo booleano `hasPassword` que indica si el usuario actualmente tiene una credencial de contraseña almacenada.

Puedes obtener `hasPassword` mediante:

- [Management API](/integrate-logto/interact-with-management-api): por ejemplo, `GET /api/users/:id` (incluido en el objeto de usuario)
- [Reclamos personalizados de token](/developers/custom-token-claims): Inyecta `hasPassword` en los tokens de ID / acceso (para que tu frontend pueda modificar la interfaz sin una llamada API adicional)

Luego llama al endpoint de la Account API para establecer o actualizar la contraseña (consulta la guía de configuración de cuenta para detalles de la solicitud). Para los usuarios que nunca han tenido una contraseña, NO necesitas (y no deberías requerir) el campo de contraseña anterior.

:::tip

Incluso si tus métodos de registro requieren "Establecer una contraseña" para registros por correo electrónico / teléfono / nombre de usuario, los usuarios creados mediante **inicio de sesión social** puro omiten la creación de contraseña por defecto para reducir la fricción. Estos usuarios tendrán `hasPassword = false` hasta que establezcan una explícitamente más adelante. Evita forzar la configuración inmediata de contraseña justo después del registro social a menos que tu modelo de seguridad lo requiera; los avisos contextuales y diferidos suelen convertir mejor.

:::

## Política de contraseña personalizada \{#custom-password-policy}

Personaliza la longitud de la contraseña, los requisitos de caracteres y las restricciones de palabras para satisfacer las necesidades de seguridad de tu negocio mientras ofreces una buena experiencia de usuario. Estas configuraciones pueden ajustarse en la sección <CloudLink to="/security/password-policy">Seguridad > Política de contraseñas</CloudLink>. Consulta la documentación de la [política de contraseñas](/security/password-policy) para obtener más información.

## Preguntas frecuentes \{#faqs}

<details>
  <summary>

### ¿Cómo cerrar la sesión de un usuario después de un restablecimiento de contraseña exitoso? \{#how-to-sign-out-a-user-after-a-successful-password-reset}

</summary>

Suscríbete al evento `PostResetPassword` del [webhook](/developers/webhooks/webhooks-events#user-interaction-hook-events) para recibir una notificación cuando un usuario restablezca su contraseña con éxito. Luego puedes activar una acción de [cerrar sesión](/end-user-flows/sign-out) para invalidar la sesión actual del usuario y redirigirlo a la página de inicio de sesión.

</details>

<details>
  <summary>

### ¿Cómo implementar el flujo de restablecimiento de contraseña en mi interfaz personalizada? \{#how-to-implement-the-password-reset-flow-on-my-custom-ui}

</summary>

Puedes implementar tu propio flujo de restablecimiento de contraseña utilizando la **Management API** y la **Account API** de Logto. Consulta [configuración de cuenta](/end-user-flows/account-settings/) para más detalles.

</details>

<details>
  <summary>

### ¿Cómo puedo enviar un enlace de restablecimiento de contraseña al correo electrónico del usuario? \{#how-can-i-send-a-password-reset-link-to-the-users-email}

</summary>

Puedes crear un endpoint de restablecimiento de contraseña autoalojado y utilizar el SDK de Logto para iniciar una solicitud de inicio de sesión con [`first_screen`](/end-user-flows/authentication-parameters/first-screen) configurado en `reset-password`. Esto redirigirá al usuario sin problemas a la página de restablecimiento de contraseña.

</details>
