### Opcional: Manejar el cambio de permisos de usuario \{#optional-handle-user-permission-change}

Los permisos de usuario pueden cambiar en cualquier momento. Debido a que Logto emite JWTs para RBAC, las actualizaciones de permisos solo aparecen en los tokens emitidos recientemente y nunca modifican los JWTs existentes.

:::info Regla de subconjunto de alcances (Scope subset rule)
Un token de acceso solo puede incluir alcances que fueron solicitados en el flujo de autorización OAuth original.
Incluso si un usuario obtiene nuevos permisos, el token emitido posteriormente solo puede contener un subconjunto de los alcances solicitados originalmente.
Para acceder a los nuevos alcances concedidos que no formaban parte de la solicitud inicial, el cliente debe ejecutar un nuevo flujo de autorización.
:::

#### Permisos reducidos (Downscoped permissions) \{#downscoped-permissions}

Cuando un usuario pierde permisos:

- Los tokens emitidos recientemente reflejan inmediatamente los alcances reducidos.
- Los JWTs existentes mantienen los antiguos alcances hasta que expiran.
- Tu API siempre debe validar los alcances y depender de tiempos de vida de token cortos.

Si necesitas reacciones más rápidas, implementa tu propia señal que indique a los clientes que refresquen sus tokens.

#### Permisos ampliados (Enlarged permissions) \{#enlarged-permissions}

{props.type === "global" && <p>Para recursos de API globales, cuando un usuario obtiene permisos, los permisos ampliados NO aparecerán mediante refresh. El cliente debe realizar un nuevo flujo de autorización OAuth para obtener un token que incluya los nuevos alcances. Esto puede suceder de forma silenciosa si el usuario tiene una sesión activa en Logto.</p>}

{props.type === "organization" && <p>Para tokens de organización, cuando un usuario obtiene permisos, los permisos ampliados aparecerán en la próxima emisión (refresh o solicitud de token). Aún se requiere un nuevo token, pero no es necesario un re-autenticación completa a menos que los nuevos alcances excedan el conjunto de la solicitud original.</p>}

#### Recomendaciones \{#recommendations}

- Valida los alcances en tu API en cada llamada.
- Mantén la expiración de los tokens corta.
- Añade notificaciones opcionales si necesitas una propagación inmediata de los cambios de permisos.
