## Configura un servicio de correo electrónico en la Consola DirectMail de Aliyun \{#set-up-an-email-service-in-aliyun-directmail-console}

### Crea una cuenta de Aliyun \{#create-an-aliyun-account}

Dirígete a [Aliyun](https://aliyun.com/) y crea tu cuenta de Aliyun si aún no tienes una.

### Habilita y configura Aliyun Direct Mail \{#enable-and-configure-aliyun-direct-mail}

Ve a la [página de la consola del servicio DM](https://www.aliyun.com/product/directmail) e inicia sesión. Habilita el servicio Direct Mail haciendo clic en el botón "Solicitar apertura" (申请开通) en la parte superior izquierda de la página y comienza el proceso de configuración.

Desde la [página de la consola de administración de DM](https://dm.console.aliyun.com/), debes:

1. Ir a "Dominios de correo electrónico" (发信域名) desde la barra lateral y agregar un "Nuevo dominio" (新建域名) siguiendo las instrucciones.
2. Personalizar "Direcciones del remitente" (发信地址) y "Etiquetas de correo electrónico" (邮件标签) respectivamente.

Después de finalizar la configuración, hay dos formas diferentes de probar:

- Ve a la [página de resumen de DirectMail](https://dm.console.aliyun.com/), encuentra "Guía de operación" (操作引导) en la parte inferior de la página y haz clic en "Enviar correos electrónicos" (发送邮件). Encontrarás todos los diferentes tipos de métodos de prueba.
- Sigue la ruta "Enviar correos electrónicos" (发送邮件) -> "Tareas de correo electrónico" (发送邮件) en la barra lateral para crear una tarea de prueba.

## Redacta el JSON del conector \{#compose-the-connector-json}

1. Desde la [página de la consola de administración de DM](https://dm.console.aliyun.com/), pasa el cursor sobre tu avatar en la esquina superior derecha y ve a "Gestión de AccessKey" (AccessKey 管理), y haz clic en "Crear AccessKey" (创建 AccessKey). Obtendrás un par de "AccessKey ID" y "AccessKey Secret" después de completar la verificación de seguridad. Por favor, guárdalos adecuadamente.
2. Ve a la pestaña "Direcciones del remitente" (发信地址) o "Etiquetas de correo electrónico" (邮件标签) que acabas de visitar desde la [página de la consola de administración de DM](https://dm.console.aliyun.com/), podrás encontrar fácilmente la _Dirección del remitente_ o la _Etiqueta de correo electrónico_.
3. Completa la configuración del conector Aliyun DM:
   - Completa los campos `accessKeyId` y `accessKeySecret` con el par de claves de acceso que obtuviste en el paso 1.
   - Completa los campos `accountName` y `fromAlias` con la "Dirección del remitente" y la "Etiqueta de correo electrónico" que encontraste en el paso 2. Todas las plantillas compartirán este nombre de firma. (Puedes dejar `fromAlias` en blanco ya que es OPCIONAL.)
   - Puedes agregar múltiples plantillas de conector DM para diferentes casos. Aquí tienes un ejemplo de cómo agregar una sola plantilla:
     - Completa el campo `subject`, que funcionará como el título del correo electrónico enviado.
     - Completa el campo `content` con cualquier contenido de tipo cadena. No olvides dejar el marcador `{{code}}` para el código de verificación aleatorio.
     - Completa el campo `usageType` con `Register`, `SignIn`, `ForgotPassword` o `Generic` para diferentes casos de uso. (`usageType` es una propiedad de Logto para identificar el caso de uso adecuado.) Para habilitar todos los flujos de usuario, se requieren plantillas con usageType `Register`, `SignIn`, `ForgotPassword` y `Generic`.

### Prueba el conector Aliyun DM \{#test-aliyun-dm-connector}

Puedes escribir una dirección de correo electrónico y hacer clic en "Enviar" para ver si la configuración funciona antes de "Guardar y finalizar".

Eso es todo. No olvides <MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">Habilitar el conector en la experiencia de inicio de sesión</MainSiteUrl>.

### Tipos de configuración \{#config-types}

| Nombre          | Tipo              |
| --------------- | ----------------- |
| accessKeyId     | string            |
| accessKeySecret | string            |
| accountName     | string            |
| fromAlias       | string (OPCIONAL) |
| templates       | Template[]        |

| Propiedades de la plantilla | Tipo        | Valores de enumeración                               |
| --------------------------- | ----------- | ---------------------------------------------------- |
| subject                     | string      | N/A                                                  |
| content                     | string      | N/A                                                  |
| usageType                   | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
