## Paso 1: Crea una aplicación OAuth en GitHub \{#step-1-create-an-oauth-app-on-github}

Antes de poder usar GitHub como proveedor de autenticación, debes crear una aplicación OAuth en GitHub para obtener credenciales de OAuth 2.0.

1. Ve a [GitHub](https://github.com/) e inicia sesión con tu cuenta, o crea una nueva si es necesario.
2. Navega a [Settings > Developer settings > OAuth apps](https://github.com/settings/developers).
3. Haz clic en **New OAuth App** para registrar una nueva aplicación:
   - **Application name**: Ingresa un nombre descriptivo para tu aplicación.
   - **Homepage URL**: Ingresa la URL de la página principal de tu aplicación.
   - **Authorization callback URL**: Copia el **Callback URI** de tu conector de GitHub en Logto y pégalo aquí. Después de que los usuarios inicien sesión con GitHub, serán redirigidos aquí con un código de autorización que Logto utiliza para completar la autenticación.
   - **Application description**: (Opcional) Agrega una breve descripción de tu aplicación.
4. Haz clic en **Register application** para crear la aplicación OAuth.

:::note
Sugerimos no marcar la casilla **Enable Device Flow**, ya que los usuarios que inicien sesión con GitHub en dispositivos móviles tendrían que confirmar la acción inicial de inicio de sesión en la aplicación móvil de GitHub. Muchos usuarios de GitHub no instalan la aplicación móvil de GitHub en sus teléfonos, lo que podría bloquear el flujo de inicio de sesión. Solo habilita esto si esperas que los usuarios finales confirmen su flujo de inicio de sesión a través de la aplicación móvil de GitHub. Consulta los detalles sobre el [device flow](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#device-flow).

Para más detalles sobre cómo configurar aplicaciones OAuth en GitHub, consulta [Creating an OAuth App](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app).
:::

## Paso 2: Configura tu conector de Logto \{#step-2-configure-your-logto-connector}

Después de crear la aplicación OAuth en GitHub, serás redirigido a una página de detalles donde podrás copiar el Client ID y generar un Client secret.

1. Copia el **Client ID** de tu aplicación OAuth de GitHub y pégalo en el campo `clientId` en Logto.
2. Haz clic en **Generate a new client secret** en GitHub para crear un nuevo secreto, luego cópialo y pégalo en el campo `clientSecret` en Logto.
3. Haz clic en **Save and Done** en Logto para conectar tu sistema de identidad con GitHub.

:::warning
Mantén tu Client secret seguro y nunca lo expongas en código del lado del cliente. Los client secrets de GitHub no se pueden recuperar si se pierden; tendrás que generar uno nuevo.
:::

## Paso 3: Configura los alcances (Scopes) (Opcional) \{#step-3-configure-scopes-optional}

Los alcances (Scopes) definen los permisos que tu aplicación solicita a los usuarios y controlan a qué datos puede acceder tu aplicación desde sus cuentas de GitHub.

Utiliza el campo `Scopes` en Logto para solicitar permisos adicionales a GitHub. Elige uno de los siguientes enfoques según tus necesidades:

### Opción 1: No se necesitan alcances de API adicionales \{#option-1-no-extra-api-scopes-needed}

- Deja el campo `Scopes` en tu conector de GitHub en Logto en blanco.
- Se solicitará el alcance predeterminado `read:user` para asegurar que Logto pueda obtener correctamente la información básica del usuario (por ejemplo, correo electrónico, nombre, avatar).

### Opción 2: Solicitar alcances adicionales al iniciar sesión \{#option-2-request-additional-scopes-at-sign-in}

- Consulta todos los [alcances de GitHub para aplicaciones OAuth](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps) disponibles y agrega solo los que tu aplicación necesite.
- Ingresa todos los alcances deseados en el campo **Scopes**, separados por espacios.
- Cualquier alcance que listes aquí sobrescribe los valores predeterminados, así que siempre incluye el alcance de autenticación: `read:user`.
- Alcances adicionales comunes incluyen:
  - `repo`: Control total de repositorios privados
  - `public_repo`: Acceso a repositorios públicos
  - `user:email`: Acceso a direcciones de correo electrónico del usuario
  - `notifications`: Acceso a notificaciones
- Asegúrate de que todos los alcances estén escritos correctamente y sean válidos. Un alcance incorrecto o no soportado resultará en un error de "Invalid scope" por parte de GitHub.

### Opción 3: Solicitar alcances incrementales más adelante \{#option-3-request-incremental-scopes-later}

- Después de que el usuario inicie sesión, puedes solicitar alcances adicionales bajo demanda reiniciando un flujo de autorización social federado y actualizando el conjunto de tokens almacenados del usuario.
- Estos alcances adicionales no necesitan ser ingresados en el campo `Scopes` de tu conector de GitHub en Logto, y pueden lograrse a través de la Social Verification API de Logto.

Siguiendo estos pasos, tu conector de GitHub en Logto solicitará exactamente los permisos que tu aplicación necesita, ni más ni menos.

:::tip
Si tu aplicación solicita estos alcances para acceder a la API de GitHub y realizar acciones, asegúrate de habilitar **Store tokens for persistent API access** en el conector de GitHub de Logto. Consulta la siguiente sección para más detalles.
:::

## Paso 4: Configuración general \{#step-4-general-settings}

Aquí tienes algunas configuraciones generales que no bloquearán la conexión con GitHub pero pueden afectar la experiencia de autenticación del usuario final.

### Sincronizar información del perfil \{#sync-profile-information}

En el conector de GitHub, puedes establecer la política para sincronizar la información del perfil, como nombres de usuario y avatares. Elige entre:

- **Solo sincronizar al registrarse**: La información del perfil se obtiene una vez cuando el usuario inicia sesión por primera vez.
- **Siempre sincronizar al iniciar sesión**: La información del perfil se actualiza cada vez que el usuario inicia sesión.

### Almacenar tokens para acceder a las APIs de GitHub (Opcional) \{#store-tokens-to-access-github-apis-optional}

Si deseas acceder a las APIs de GitHub y realizar acciones con la autorización del usuario (ya sea mediante inicio de sesión social o vinculación de cuentas), Logto necesita obtener alcances de API específicos y almacenar los tokens.

1. Agrega los alcances requeridos siguiendo las instrucciones anteriores.
2. Habilita **Store tokens for persistent API access** en el conector de GitHub de Logto. Logto almacenará de forma segura los tokens de acceso de GitHub en el Secret Vault.

:::note
Cuando usas una **OAuth App** de GitHub como se describe en este tutorial, no puedes obtener un refresh token de GitHub porque su token de acceso no expira a menos que el usuario lo revoque manualmente. Por lo tanto, no necesitas agregar `offline_access` en el campo `Scopes`; hacerlo puede causar un error.

Si deseas que el token de acceso expire o usar refresh tokens, considera integrar con una **GitHub App** en su lugar. Aprende sobre las [diferencias entre GitHub Apps y OAuth Apps](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps).
:::

## Paso 5: Prueba tu integración (Opcional) \{#step-5-test-your-integration-optional}

Antes de lanzar, prueba tu integración con GitHub:

1. Usa el conector en un tenant de desarrollo de Logto.
2. Verifica que los usuarios puedan iniciar sesión con GitHub.
3. Comprueba que se soliciten los alcances correctos.
4. Prueba las llamadas a la API si estás almacenando tokens.

Las aplicaciones OAuth de GitHub funcionan con cualquier cuenta de usuario de GitHub de inmediato; no es necesario tener usuarios de prueba ni aprobación de la aplicación como en otras plataformas.
