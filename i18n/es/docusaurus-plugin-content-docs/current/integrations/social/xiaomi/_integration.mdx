## Comenzar \{#get-started}

1. Crea una cuenta de desarrollador en [Xiaomi Open Platform](https://dev.mi.com/)
2. Visita [Xiaomi Account Service](https://dev.mi.com/passport/oauth2/applist)
3. Crea una nueva aplicación si no tienes una

## Configurar la aplicación OAuth de Xiaomi \{#configure-xiaomi-oauth-application}

1. Visita [Xiaomi Account Service](https://dev.mi.com/passport/oauth2/applist)
2. Configura los ajustes de OAuth:
   - Abre la aplicación que deseas usar para el inicio de sesión, haz clic en "Callback URL" (si no has editado la URL de callback, aparecerá como "Enabled")
   - Añade la URL de callback de autorización: `${your_logto_origin}/callback/${connector_id}`
   - El `connector_id` se puede encontrar en la parte superior de la página de detalles del conector en Logto Console
3. Obtén el `AppID` y el `AppSecret` desde la página de detalles de la aplicación
4. Rellena los campos `clientId` y `clientSecret` en Logto Console con los valores del paso 3
5. Configuración opcional:
   - `skipConfirm`: Si se debe omitir la página de confirmación de autorización de Xiaomi cuando el usuario ya ha iniciado sesión en la cuenta de Xiaomi, por defecto es false

## Descripción de los alcances (Scopes) \{#scopes-description}

Por defecto, el conector solicita el siguiente alcance:

- `1`: Leer el perfil del usuario

Alcances disponibles:

| Valor del Scope | Descripción                                           | Interfaz API  |
| --------------- | ----------------------------------------------------- | ------------- |
| 1               | Obtener el perfil del usuario                         | user/profile  |
| 3               | Obtener el open_id del usuario                        | user/openIdV2 |
| 1000            | Obtener información del router Xiaomi                 | Mi Router     |
| 1001            | Acceder a toda la información del router Xiaomi       | Mi Router     |
| 2001            | Acceder al calendario en la nube de Xiaomi            | Mi Cloud      |
| 2002            | Acceder a la alarma en la nube de Xiaomi              | Mi Cloud      |
| 6000            | Usar el servicio de hogar inteligente Mi Home         | Mi Home       |
| 6002            | Añadir dispositivos de terceros a Mi Home             | Mi Home       |
| 6003            | Controlar dispositivos Xiaomi con Alexa               | Mi Home       |
| 6004            | Acceso de servicios de terceros a dispositivos Xiaomi | Mi Home       |
| 7000            | Seguir la cuenta de servicio Yellow Pages             | Mi Cloud      |
| 11000           | Obtener fotos de la nube de Xiaomi                    | Mi Cloud      |
| 12001           | Guardar datos de la app en Mi Cloud                   | Mi Cloud      |
| 12005           | Usar el servicio de ECG de salud                      | Health        |
| 16000           | Obtener pases de Mi Wallet                            | app/get_pass  |
| 20000           | Habilitar el servicio de voz XiaoAI                   | XiaoAI        |
| 40000           | Habilitar el servicio de IA en la nube                | Uso interno   |

Se pueden configurar múltiples alcances separándolos con espacios, por ejemplo: `1 3 6000`.

## Probar el conector de Xiaomi \{#test-xiaomi-connector}

Eso es todo. No olvides [habilitar el inicio de sesión social](https://docs.logto.io/connectors/social-connectors#enable-social-sign-in) en la experiencia de inicio de sesión.
