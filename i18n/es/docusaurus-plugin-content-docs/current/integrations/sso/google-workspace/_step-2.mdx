import googleWorkspaceConsentScreenScopesImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_scopes.webp';
import googleWorkspaceConsentScreenSettingsImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_settings.webp';
import googleWorkspaceConsentScreenUserTypeImage from '@site/docs/integrations/sso/google-workspace/assets/google_workspace_consent_screen_user_type.webp';

Para crear una nueva credencial OIDC, necesitas configurar la pantalla de consentimiento para tu aplicación.

1. Navega a la página de la [pantalla de consentimiento de OAuth](https://console.cloud.google.com/apis/credentials/consent) y selecciona el tipo de usuario `Interno`. Esto hará que la aplicación OAuth solo esté disponible para usuarios dentro de tu organización.

<img
  src={googleWorkspaceConsentScreenUserTypeImage}
  alt="Tipo de usuario de la pantalla de consentimiento de Google Workspace"
/>

2. Completa la configuración de la `Pantalla de consentimiento (Consent Screen)` siguiendo las instrucciones en la página. Necesitas proporcionar la siguiente información mínima:

- **Nombre de la aplicación**: El nombre de tu aplicación. Se mostrará en la pantalla de consentimiento.
- **Correo electrónico de soporte**: El correo electrónico de soporte de tu aplicación. Se mostrará en la pantalla de consentimiento.

<img
  src={googleWorkspaceConsentScreenSettingsImage}
  alt="Configuración de la pantalla de consentimiento de Google Workspace"
/>

3. Establece los `Alcances (Scopes)` para tu aplicación. Para recuperar correctamente la información de identidad del usuario y la dirección de correo electrónico del IdP, los conectores SSO de Logto necesitan otorgar los siguientes alcances del IdP:

<img
  src={googleWorkspaceConsentScreenScopesImage}
  alt="Alcances de la pantalla de consentimiento de Google Workspace"
/>

- **openid**: Este alcance es necesario para la autenticación OIDC. Se utiliza para recuperar el Token de ID y obtener acceso al endpoint userInfo del IdP.
- **profile**: Este alcance es necesario para acceder a la información básica del perfil del usuario.
- **email**: Este alcance es necesario para acceder a la dirección de correo electrónico del usuario.

Haz clic en el botón `Guardar` para guardar la configuración de la pantalla de consentimiento.
