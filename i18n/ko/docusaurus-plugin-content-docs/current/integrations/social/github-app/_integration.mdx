## 1단계: GitHub 앱 생성하기 \{#step-1-create-a-github-app}

GitHub을 인증 (Authentication) 제공자로 사용하려면, 먼저 GitHub에서 GitHub 앱을 생성하여 OAuth 2.0 자격 증명을 얻어야 합니다.

1. [GitHub](https://github.com/)에 접속하여 계정으로 로그인하거나, 필요하다면 새 계정을 만드세요.
2. [설정 > 개발자 설정 > GitHub Apps](https://github.com/settings/apps)로 이동하세요.
3. **New GitHub App**을 클릭하여 새 애플리케이션을 등록하세요:
   - **GitHub App name**: 앱의 고유한 이름을 입력하세요. 이름은 34자를 초과할 수 없으며 GitHub 전체에서 고유해야 합니다.
   - **Homepage URL**: 애플리케이션의 홈페이지 URL을 입력하세요.
   - **Callback URL**: Logto GitHub 커넥터에서 **Callback URI**를 복사하여 여기에 붙여넣으세요. 필요하다면 여러 개의 콜백 URL을 추가할 수 있습니다. 사용자가 GitHub로 로그인하면, 인가 코드와 함께 이곳으로 리디렉션되며, Logto가 인증 (Authentication)을 완료하는 데 사용합니다.
   - **Expire user authorization tokens**: 이 옵션을 **체크된 상태로 유지**하세요 (권장). 이 설정은 토큰 만료 및 리프레시 토큰을 활성화하여 보안을 강화합니다.
   - **Request user authorization (OAuth) during installation**: 설치 중에 사용자가 앱을 인가하도록 요청하려면 선택적으로 체크하세요.
   - **Webhook**: Webhook 이벤트가 필요 없다면 **Active**를 체크 해제하세요. 인증 (Authentication)만 사용하는 경우, 일반적으로 Webhook은 필요하지 않습니다.
4. **Permissions**에서 앱에 필요한 권한을 설정하세요 (아래 2단계 참고).
5. **Where can this GitHub App be installed?**에서 모든 GitHub 계정 사용자가 인증 (Authentication)에 앱을 사용할 수 있도록 하려면 **Any account**를 선택하세요.
6. **Create GitHub App**을 클릭하여 GitHub 앱을 생성하세요.

:::note
OAuth 앱과 달리, GitHub 앱은 광범위한 스코프 대신 세분화된 권한을 사용합니다. 앱 생성 시 GitHub 대시보드에서 권한을 설정하며, 사용자는 인가 (Authorization) 시 특정 리포지토리에 대한 접근을 허용합니다.

GitHub 앱 설정에 대한 자세한 내용은 [Registering a GitHub App](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app) 을 참고하세요.
:::

## 2단계: GitHub에서 권한 설정하기 \{#step-2-configure-permissions-in-github}

GitHub 앱은 OAuth 스코프 대신 세분화된 권한을 사용합니다. GitHub 앱을 생성하거나 수정할 때 **GitHub 대시보드에서** 권한을 설정해야 합니다. 이 권한은 앱이 어떤 데이터에 접근할 수 있는지 결정합니다.

### GitHub 앱 권한 이해하기 \{#understanding-github-app-permissions}

권한은 세 가지 유형으로 분류됩니다:

- **리포지토리 권한**: 리포지토리 수준 리소스 (코드, 이슈, 풀 리퀘스트 등)에 대한 접근
- **조직 권한**: 조직 수준 리소스 (멤버, 팀, 프로젝트 등)에 대한 접근
- **계정 권한**: 사용자 계정 데이터 (이메일, 프로필, 팔로워 등)에 대한 접근

각 권한마다 다음 중 하나를 선택할 수 있습니다:

- **No access**: 앱이 이 리소스에 접근할 수 없음
- **Read-only**: 앱이 이 리소스를 읽을 수만 있음
- **Read & write**: 앱이 이 리소스를 읽고 수정할 수 있음

### 인증 (Authentication)에 권장되는 권한 \{#recommended-permissions-for-authentication}

기본적인 "GitHub로 로그인" 기능을 위해서는 최소한 다음 **계정 권한**을 설정하세요:

| 권한                | 접근 수준 | 목적                                       |
| ------------------- | --------- | ------------------------------------------ |
| **Email addresses** | Read-only | 계정 생성을 위한 사용자의 이메일 주소 획득 |

:::tip
GitHub 앱은 사용자를 대신하여 동작할 때 공개 프로필 정보(사용자명, 아바타, 공개 프로필 URL 등)를 읽을 수 있는 권한을 암묵적으로 가집니다. 기본 프로필 데이터에 대해 별도의 권한 요청이 필요하지 않습니다.
:::

### API 접근을 위한 추가 권한 \{#additional-permissions-for-api-access}

애플리케이션이 인증 (Authentication) 외에 GitHub API에 접근해야 한다면, GitHub 대시보드에서 해당 권한을 추가하세요. 다음은 일반적인 예시입니다:

| 권한 유형      | 권한          | 접근 수준                | 사용 사례                                     |
| -------------- | ------------- | ------------------------ | --------------------------------------------- |
| **리포지토리** | Contents      | Read-only / Read & write | 리포지토리 파일 및 코드 접근                  |
| **리포지토리** | Issues        | Read & write             | 이슈 생성 및 관리                             |
| **리포지토리** | Pull requests | Read & write             | 풀 리퀘스트 생성 및 관리                      |
| **리포지토리** | Metadata      | Read-only                | 리포지토리 메타데이터 접근 (많은 작업에 필요) |
| **조직**       | Members       | Read-only                | 조직 멤버 목록 조회                           |
| **계정**       | Followers     | Read-only                | 사용자의 팔로워 및 팔로잉 정보 접근           |

이 목록은 전체가 아니며, GitHub 앱은 훨씬 더 많은 세분화된 권한을 지원합니다. 전체 목록은 [Permissions required for GitHub Apps](https://docs.github.com/en/rest/overview/permissions-required-for-github-apps) 를 참고하세요.

:::tip[OAuth 앱과의 주요 차이점]
OAuth 앱에서는 Logto 커넥터에서 스코프를 설정하지만, GitHub 앱 권한은 전적으로 GitHub 대시보드에서 관리됩니다. Logto GitHub 커넥터의 `Scope` 필드는 비워두어도 됩니다 — GitHub 앱은 기존 OAuth 스코프를 사용하지 않기 때문입니다.

필요한 권한을 GitHub에서 설정하면, 사용자는 인가 (Authorization) 과정에서 접근 허용을 요청받게 됩니다.
:::

## 3단계: Logto 커넥터 설정하기 \{#step-3-configure-your-logto-connector}

GitHub 앱을 생성한 후, 설정 페이지로 이동하면 자격 증명을 얻을 수 있습니다.

1. GitHub 앱의 설정 페이지에서 **Client ID**를 복사하여 Logto의 `clientId` 필드에 붙여넣으세요.
2. **Client secrets**에서 **Generate a new client secret**을 클릭하세요. 생성된 시크릿을 복사하여 Logto의 `clientSecret` 필드에 붙여넣으세요.
3. Logto에서 **Save and Done**을 클릭하여 아이덴티티 시스템을 GitHub와 연결하세요.

:::warning
Client secret은 안전하게 보관하고, 클라이언트 측 코드에 노출하지 마세요. GitHub client secret을 분실하면 복구할 수 없으므로, 새로 생성해야 합니다.
:::

:::note
GitHub 앱의 Client ID는 App ID와 다릅니다. 반드시 설정 페이지에 "Client ID"로 표시된 값을 사용하세요. App ID가 아닙니다.
:::

## 4단계: 일반 설정 \{#step-4-general-settings}

다음은 GitHub 연결에는 영향을 주지 않지만, 최종 사용자 인증 (Authentication) 경험에 영향을 줄 수 있는 일반 설정입니다.

### 프로필 정보 동기화 \{#sync-profile-information}

GitHub 커넥터에서 GitHub 사용자 정보의 프로필 정보를 Logto 사용자 프로필로 어떻게 동기화할지 설정할 수 있습니다. `name`, `avatar`, `email` 등이 포함됩니다. 다음 옵션 중에서 선택하세요:

- **가입 시에만 동기화**: 사용자가 처음 로그인할 때 한 번만 프로필 정보를 가져옵니다.
- **매 로그인 시마다 동기화**: 사용자가 로그인할 때마다 프로필 정보를 업데이트합니다.

### GitHub API 접근을 위한 토큰 저장 (선택 사항) \{#store-tokens-to-access-github-apis-optional}

GitHub API에 접근하거나 사용자 인가 (Authorization)로 작업을 수행하려면 (소셜 로그인 또는 계정 연동을 통해), Logto에서 토큰 저장을 활성화하세요:

1. GitHub 앱 설정에서 필요한 권한을 구성하세요 (2단계 참고).
2. Logto GitHub 커넥터에서 **Store tokens for persistent API access**를 활성화하세요. Logto는 액세스 토큰과 리프레시 토큰을 Secret Vault에 안전하게 저장합니다.

:::note
GitHub 앱은 항상 리프레시 토큰을 발급하므로, Logto는 두 토큰을 자동으로 저장합니다. 액세스 토큰은 8시간 후 만료되지만, Logto는 리프레시 토큰을 사용해 새로운 액세스 토큰을 받아 최대 6개월간 API 접근을 지속할 수 있습니다.
:::

## 5단계: 통합 테스트하기 (선택 사항) \{#step-5-test-your-integration-optional}

실서비스에 적용하기 전에, GitHub 앱 통합을 테스트하세요:

1. Logto 개발 테넌트에서 커넥터를 사용하세요.
2. 사용자가 GitHub로 로그인할 수 있는지 확인하세요.
3. 인가 (Authorization) 과정에서 올바른 권한 요청이 표시되는지 확인하세요.
4. 토큰 저장을 활성화했다면, 액세스 토큰 (및 리프레시 토큰)이 올바르게 저장되는지 확인하세요.
5. 저장된 토큰을 사용해 API 호출을 테스트하여 권한이 정상적으로 동작하는지 확인하세요.

GitHub 앱은 모든 GitHub 사용자 계정과 즉시 작동합니다 — 다른 플랫폼처럼 테스트 사용자나 앱 승인 절차가 필요하지 않습니다. 단, 앱이 조직에 설치된 경우 조직 소유자가 설치 승인을 해야 할 수 있습니다.
