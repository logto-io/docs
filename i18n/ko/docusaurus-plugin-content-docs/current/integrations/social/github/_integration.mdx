## 1단계: GitHub에서 OAuth 앱 생성하기 \{#step-1-create-an-oauth-app-on-github}

GitHub를 인증 (Authentication) 제공자로 사용하려면, 먼저 GitHub에서 OAuth 앱을 생성하여 OAuth 2.0 자격 증명을 받아야 합니다.

1. [GitHub](https://github.com/)에 접속하여 계정으로 로그인하거나, 필요하다면 새 계정을 만드세요.
2. [Settings > Developer settings > OAuth apps](https://github.com/settings/developers)로 이동하세요.
3. **New OAuth App**을 클릭하여 새 애플리케이션을 등록하세요:
   - **Application name**: 앱의 설명이 잘 드러나는 이름을 입력하세요.
   - **Homepage URL**: 애플리케이션의 홈페이지 URL을 입력하세요.
   - **Authorization callback URL**: Logto GitHub 커넥터에서 **Callback URI**를 복사하여 여기에 붙여넣으세요. 사용자가 GitHub로 로그인하면, 인가 (Authorization) 코드와 함께 이곳으로 리디렉션되며, Logto가 인증 (Authentication)을 완료하는 데 사용합니다.
   - **Application description**: (선택 사항) 앱에 대한 간단한 설명을 추가하세요.
4. **Register application**을 클릭하여 OAuth 앱을 생성하세요.

:::note
**Enable Device Flow** 체크박스는 선택하지 않는 것을 권장합니다. GitHub 모바일 기기에서 로그인하는 사용자는 GitHub 모바일 앱에서 최초 로그인 동작을 확인해야 합니다. 많은 GitHub 사용자가 휴대폰에 GitHub 모바일 앱을 설치하지 않아 로그인 흐름이 차단될 수 있습니다. 최종 사용자가 GitHub 모바일 앱을 통해 로그인 흐름을 확인할 것으로 예상되는 경우에만 활성화하세요. [디바이스 플로우](https://docs.github.com/en/developers/apps/building-oauth-apps/authorizing-oauth-apps#device-flow)에 대한 자세한 내용을 참고하세요.

GitHub OAuth 앱 설정에 대한 자세한 내용은 [Creating an OAuth App](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app)을 참고하세요.
:::

## 2단계: Logto 커넥터 구성하기 \{#step-2-configure-your-logto-connector}

GitHub에서 OAuth 앱을 생성한 후, 상세 페이지로 리디렉션되며 여기서 Client ID를 복사하고 Client secret을 생성할 수 있습니다.

1. GitHub OAuth 앱에서 **Client ID**를 복사하여 Logto의 `clientId` 필드에 붙여넣으세요.
2. GitHub에서 **Generate a new client secret**을 클릭하여 새 시크릿을 생성한 뒤, 이를 복사하여 Logto의 `clientSecret` 필드에 붙여넣으세요.
3. Logto에서 **Save and Done**을 클릭하여 아이덴티티 시스템을 GitHub와 연결하세요.

:::warning
Client secret은 안전하게 보관하고, 클라이언트 측 코드에 노출하지 마세요. GitHub client secret은 분실 시 복구할 수 없으므로, 새로 생성해야 합니다.
:::

## 3단계: 스코프 구성하기 (선택 사항) \{#step-3-configure-scopes-optional}

스코프 (Scope)는 앱이 사용자로부터 요청하는 권한을 정의하며, 앱이 사용자의 GitHub 계정에서 접근할 수 있는 데이터를 제어합니다.

Logto의 `Scopes` 필드를 사용하여 GitHub에서 추가 권한을 요청할 수 있습니다. 필요에 따라 다음 중 한 가지 방법을 선택하세요:

### 옵션 1: 추가 API 스코프가 필요 없는 경우 \{#option-1-no-extra-api-scopes-needed}

- Logto GitHub 커넥터의 `Scopes` 필드를 비워두세요.
- 기본 스코프인 `read:user`가 요청되어 Logto가 기본 사용자 정보(예: 이메일, 이름, 아바타)를 올바르게 가져올 수 있습니다.

### 옵션 2: 로그인 시 추가 스코프 요청 \{#option-2-request-additional-scopes-at-sign-in}

- 모든 [GitHub OAuth 앱용 스코프](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps)를 확인하고, 앱에 필요한 스코프만 추가하세요.
- 원하는 모든 스코프를 **Scopes** 필드에 공백으로 구분하여 입력하세요.
- 여기에 입력한 스코프는 기본값을 덮어쓰므로, 항상 인증 (Authentication) 스코프인 `read:user`를 포함해야 합니다.
- 자주 사용되는 추가 스코프 예시:
  - `repo`: 비공개 저장소 전체 제어
  - `public_repo`: 공개 저장소 접근
  - `user:email`: 사용자 이메일 주소 접근
  - `notifications`: 알림 접근
- 모든 스코프가 올바르게 입력되었는지, 유효한지 확인하세요. 잘못되었거나 지원되지 않는 스코프는 GitHub에서 "Invalid scope" 오류를 발생시킵니다.

### 옵션 3: 나중에 점진적으로 스코프 요청 \{#option-3-request-incremental-scopes-later}

- 사용자가 로그인한 후, 필요에 따라 연합 소셜 인가 (Authorization) 플로우를 다시 시작하고 사용자의 저장된 토큰 세트를 업데이트하여 추가 스코프를 요청할 수 있습니다.
- 이러한 추가 스코프는 Logto GitHub 커넥터의 `Scopes` 필드에 입력할 필요가 없으며, Logto의 Social Verification API를 통해 달성할 수 있습니다.

이 과정을 따르면, Logto GitHub 커넥터는 앱에 꼭 필요한 권한만 요청하게 됩니다.

:::tip
앱이 GitHub API에 접근하여 작업을 수행하기 위해 이러한 스코프를 요청한다면, Logto GitHub 커넥터에서 **Store tokens for persistent API access**를 반드시 활성화하세요. 자세한 내용은 다음 섹션을 참고하세요.
:::

## 4단계: 일반 설정 \{#step-4-general-settings}

다음은 GitHub와의 연결에는 영향을 주지 않지만, 최종 사용자 인증 (Authentication) 경험에 영향을 줄 수 있는 일반 설정입니다.

### 프로필 정보 동기화 \{#sync-profile-information}

GitHub 커넥터에서 사용자 이름, 아바타 등 프로필 정보 동기화 정책을 설정할 수 있습니다. 다음 중에서 선택하세요:

- **Only sync at sign-up**: 사용자가 처음 로그인할 때 한 번만 프로필 정보를 가져옵니다.
- **Always sync at sign-in**: 사용자가 로그인할 때마다 프로필 정보를 업데이트합니다.

### GitHub API 접근을 위한 토큰 저장 (선택 사항) \{#store-tokens-to-access-github-apis-optional}

소셜 로그인 또는 계정 연동을 통해 사용자 인가 (Authorization)로 GitHub API에 접근하고 작업을 수행하려면, Logto가 특정 API 스코프를 받아 토큰을 저장해야 합니다.

1. 위의 안내에 따라 필요한 스코프를 추가하세요.
2. Logto GitHub 커넥터에서 **Store tokens for persistent API access**를 활성화하세요. Logto는 GitHub 액세스 토큰을 Secret Vault에 안전하게 저장합니다.

:::note
이 튜토리얼에서 설명한 GitHub **OAuth App**을 사용할 때는, GitHub에서 리프레시 토큰 (Refresh token)을 받을 수 없습니다. GitHub의 액세스 토큰 (Access token)은 사용자가 직접 토큰을 취소하지 않는 한 만료되지 않기 때문입니다. 따라서 `Scopes` 필드에 `offline_access`를 추가할 필요가 없으며, 추가할 경우 오류가 발생할 수 있습니다.

액세스 토큰이 만료되거나 리프레시 토큰을 사용하고 싶다면, **GitHub App**과의 연동을 고려하세요. [GitHub Apps와 OAuth Apps의 차이점](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps)을 참고하세요.
:::

## 5단계: 통합 테스트하기 (선택 사항) \{#step-5-test-your-integration-optional}

실서비스에 적용하기 전에 GitHub 연동을 테스트하세요:

1. Logto 개발 테넌트에서 커넥터를 사용하세요.
2. 사용자가 GitHub로 로그인할 수 있는지 확인하세요.
3. 올바른 스코프가 요청되는지 확인하세요.
4. 토큰을 저장하는 경우 API 호출도 테스트하세요.

GitHub OAuth 앱은 모든 GitHub 사용자 계정과 즉시 작동하므로, 다른 플랫폼처럼 테스트 사용자나 앱 승인 절차가 필요하지 않습니다.
