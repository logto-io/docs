Logto는 IdP에서 반환된 사용자 속성을 Logto의 사용자 속성에 매핑하는 유연한 방법을 제공합니다. Logto는 기본적으로 IdP에서 다음 사용자 속성을 동기화합니다:

- id: 사용자의 고유 식별자. Logto는 SAML 응답에서 `nameID` 클레임을 읽어 사용자 SSO 아이덴티티 id로 사용합니다.
- email: 사용자의 이메일 주소. Logto는 기본적으로 SAML 응답에서 `email` 클레임을 읽어 사용자 기본 이메일로 사용합니다.
- name: 사용자의 이름.

사용자 속성 매핑 로직은 Azure AD 측 또는 Logto 측에서 관리할 수 있습니다.

1. AzureAD 사용자 속성을 Logto 사용자 속성에 Logto 측에서 매핑합니다.

   Azure AD SSO 애플리케이션의 `Attributes & Claims` 섹션을 방문하세요.

   다음 속성 이름 (네임스페이스 접두사 포함)을 복사하여 Logto의 해당 필드에 붙여넣으세요.

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` (권장: 더 나은 사용자 경험을 위해 이 속성 값 맵을 `user.displayname`으로 업데이트하세요)

<img src="/img/assets/azure_ad_default_attribute_mapping.webp" alt="Azure AD 기본 속성 매핑" />

1. AzureAD 사용자 속성을 AzureAD 측에서 Logto 사용자 속성에 매핑합니다.

   Azure AD SSO 애플리케이션의 `Attributes & Claims` 섹션을 방문하세요.

   `Edit`을 클릭하고, Logto 사용자 속성 설정에 따라 `Additional claims` 필드를 업데이트하세요:

   - Logto 사용자 속성 설정에 따라 클레임 이름 값을 업데이트하세요.
   - 네임스페이스 접두사를 제거하세요.
   - 계속하려면 `Save`를 클릭하세요.

   다음 설정으로 끝나야 합니다:

<img src="/img/assets/azure_ad_logto_attribute_mapping.webp" alt="Azure AD_Logto 속성 매핑" />

Azure AD 측에서 추가 사용자 속성을 지정할 수도 있습니다. Logto는 사용자의 `sso_identity` 필드 아래에 IdP에서 반환된 원래 사용자 속성을 기록으로 유지합니다.
