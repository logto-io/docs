---
sidebar_position: 2
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

import JavaSetupCode from '../integrate-logto/fragments/_android_sdk_setup_code_java.md';
import KotlinSetupCode from '../integrate-logto/fragments/_android_sdk_setup_code_kotlin.md';
import CreateApiResource from './assets/create-api-resource.png';
import SecretKey from './fragments/_secret_key.md';
import TokenExtract from './fragments/_token_extract.mdx';
import TokenValidation from './fragments/_token_validation.mdx';

# âš”ï¸ ä¿æŠ¤ä½ çš„ API

é™¤äº†æä¾›ä¸€ä¸ªæµç•…çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼ŒLogto é»˜è®¤è¿˜é›†æˆäº† [API èµ„æº](../../references/resources/README.md) çš„æˆæƒæœåŠ¡ï¼Œä»è€Œæ›´å¥½çš„ä¿æŠ¤ä½ çš„ API èµ„æºå…å—åŒ¿åèº«ä»½çš„è®¿é—®å’Œä¾µå®³ã€‚è®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤ï¼Œä½¿ç”¨ Logto æ¥å®ç°ä¸€ä¸ªä½ è‡ªå·±çš„æœåŠ¡ç«¯èµ„æºæƒé™ä¿æŠ¤ç³»ç»Ÿã€‚

## åœ¨ Logto ç®¡æ§åˆ¶å°å†…æ³¨å†Œ API èµ„æº

Logto æœåŠ¡å¯ä»¥ä»æ¯ä¸€ä¸ªæˆæƒè¯·æ±‚ä¸­è¯†åˆ«å‡ºæ‰€ç”³è¯·çš„ç›®æ ‡ [API èµ„æº](../../references/resources/README.md)ï¼Œå¹¶ç›¸åº”çš„é¢å‘å…¶ä¸“å±çš„ `access_token` ä»¤ç‰Œã€‚

è®¿é—® Logto ç®¡ç†æ§åˆ¶å°çš„ **API èµ„æº** é¡µé¢ã€‚åœ¨åˆ—è¡¨ä¸­ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ‹¥æœ‰ `https://api.logto.io` ä½œä¸º `API identifier` çš„å†…ç½® API èµ„æºã€‚è¯¥èµ„æºä»£è¡¨äº†æ‰€æœ‰æ³¨å†Œåœ¨æ­¤è·¯ç”±åœ°å€ä¸‹ï¼ŒLogto æœåŠ¡æ‰€æä¾›çš„ç®¡ç† APIã€‚å®ƒå°†ä¿è¯æˆ‘ä»¬æ‰€æœ‰çš„ API éƒ½è®¾ç½®äº†æƒé™ä¿æŠ¤ï¼Œä»…å…·æœ‰ç®¡ç†å‘˜è§’è‰²çš„ Logto æˆæƒç”¨æˆ·æ‰å¯ä»¥è®¿é—®ã€‚

![API èµ„æº](./assets/api-resources.png)

æ¥ä¸‹æ¥ï¼Œç‚¹æŒ‰ **åˆ›å»º API èµ„æº** æŒ‰é’®ï¼Œå¹¶è¾“å…¥ä¸€ä¸‹ä¿¡æ¯ï¼Œæ¥æ³¨å†Œä¸€ä¸ªä½ è‡ªå·±çš„ API èµ„æºï¼š

- ä¸€ä¸ªå¯è¯»æ€§é«˜çš„ **API åç§°**ï¼Œä»¥æ›´å¥½çš„å¸®åŠ©ä½ åœ¨æœªæ¥èƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«æ­¤ API èµ„æº
- ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ï¼Œ **URI** æ ¼å¼çš„ï¼Œ**API Identifier** (åˆå¯ç§°ä¹‹ä¸º [Resource Indicator](../../references/resources/README.md#resource-indicator))ã€‚ç”¨æ¥è¯†åˆ«å—ä¿æŠ¤çš„ API èµ„æºã€‚

<img src={CreateApiResource} alt="åˆ›å»º API èµ„æº" width="700px" />
<br />
<br />

:::caution
API Identifier å°†è¢« Logto ç”¨ä½œå…¨å±€å”¯ä¸€çš„ API èµ„æºæ ‡è¯†ç¬¦ã€‚ ä¸€ç»åˆ›å»º**ä¸å¯**ç¼–è¾‘ã€‚è¯·å°å¿ƒå¡«å†™ã€‚
:::

åˆ›å»ºåï¼Œæ–°çš„ API èµ„æºå°†æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­ã€‚ä½ å¯ä»¥è¿‡ç‚¹æŒ‰è¯¥ API èµ„æºï¼Œ åœ¨ API è¯¦æƒ…é¡µé¢å†…å¯¹å…¶è¿›è¡Œç®¡ç†æˆ–åˆ é™¤æ“ä½œã€‚

![API èµ„æºè¯¦æƒ…](./assets/api-resource-details.png)

æœ‰å…³è¯¦ç»†çš„ API è®¾ç½®å®šä¹‰ï¼Œè¯·å‚é˜… [API èµ„æºæ•°æ®æ ¼å¼](../../references/resources/README.md#Logto API èµ„æºçš„æ•°æ®æ ¼å¼)ã€‚

:::info
æ‰€æœ‰åœ¨ Logto ç®¡ç†æ§åˆ¶å°å†…æ³¨å†Œçš„ API èµ„æºä¿¡æ¯å¯ä»¥è¢«æ‰€æœ‰çš„åº”ç”¨æ‰€å…±äº«ã€‚
:::

## å°†èµ„æºæˆæƒæµç¨‹é›†æˆåˆ°ä½ çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­

ä¸€æ—¦åœ¨ Logto æœåŠ¡å™¨ä¸ŠæˆåŠŸåœ°æ³¨å†Œäº†ä½ çš„ API èµ„æºï¼Œæˆ‘ä»¬å°±å¯ä»¥å›åˆ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ï¼Œæ¥çœ‹çœ‹ Logto SDK æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

:::note
å¦‚æœä½ å°šæœªå°† Logto SDK é›†æˆåˆ°ä½ çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ï¼Œè¯·é˜…è¯»æˆ‘ä»¬ SDK çš„ [**é›†æˆæŒ‡å—**](../integrate-logto/README.md)ã€‚ Logto æä¾›äº†å¤šç§å¹³å° SDK æ¥æ»¡è¶³ä¸åŒçš„å®¢æˆ·ç«¯éœ€æ±‚ã€‚ä¸“æ³¨äºä½ çš„äº§å“ï¼Œè®©æˆ‘ä»¬æ¥å¤„ç†ç¹ççš„æµç¨‹ã€‚
:::

ä½¿ç”¨ Logto SDKï¼Œä½ åªéœ€åœ¨å¯åŠ¨æ—¶å°†è¿™äº›èµ„æºçš„ **API Identifier** ä½œä¸ºé…ç½®ä¼ ç»™ SDKã€‚

<Tabs>

<TabItem value="kotlin" label="Kotlin">

<KotlinSetupCode />

</TabItem>

<TabItem value="java" label="Java">

<JavaSetupCode />

</TabItem>

<TabItem value="swift" label="Swift">

```swift
import Logto
import LogtoClient

let config = try? LogtoConfig(
  endpoint: "<your-logto-endpoint>",
  appId: "<your-application-id>",
  resources: ["<your-api-resource>"]
)
let client = LogtoClient(useConfig: config)
```

</TabItem>

<TabItem value="react" label="React">

```js
import { LogtoProvider, LogtoConfig } from '@logto/react';

const config: LogtoConfig = {
  appId: '<your-application-id>',
  endpoint: '<your-logto-endpoint>',
  resources: ['<your-api-resource>'],
};

const App = () => <LogtoProvider config={config}>{/* Your app content */}</LogtoProvider>;
```

</TabItem>
<TabItem value="vue" label="Vue">

```js
import { createLogto, LogtoConfig } from '@logto/vue';

const config: LogtoConfig = {
  appId: '<your-application-id>',
  endpoint: '<your-logto-endpoint>',
  resources: ['<your-api-resource>'],
};

const app = createApp(App);

app.use(createLogto, config);
app.mount('#app');
```

</TabItem>
<TabItem value="js" label="VanillaJs">

```js
import LogtoClient from '@logto/browser';

const logtoClient = new LogtoClient({
  appId: '<your-application-id>',
  endpoint: '<your-logto-endpoint>',
  resources: ['<your-api-resource>'],
});
```

</TabItem>
</Tabs>

æˆªæ­¢åˆ°è¿™é‡Œï¼Œä½ åº”ç”¨ç¨‹åºå°±å·²ç»æ¥è¿‘å®Œæˆäº† ğŸ˜Šã€‚æ­¤æ—¶å·²ç»æˆåŠŸé…ç½®å¥½äº† Logto SDKã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ Logto UI æ¥å®Œæˆç™»å½•å’Œæ³¨å†Œçš„æµç¨‹äº†ã€‚

ç”¨æˆ·æˆåŠŸç™»å½•åä¾¿å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯çš„æ“ä½œæ¥å¯¹ä½ çš„åç«¯ API èµ„æºè¿›è¡Œè®¿é—®ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦å†æ¬¡å€ŸåŠ© Logtoï¼Œåœ¨å®¢æˆ·ç«¯å‘å‡º API è¯·æ±‚ä¹‹å‰ï¼Œé€šè¿‡ Logto SDK è°ƒç”¨ Logto æœåŠ¡å™¨æ¥ç”³è¯·ä¸€ä¸ª `access_token` æˆæƒä»¤ç‰Œã€‚

:::note
è¢«ç”³è¯·è®¿é—®çš„ API èµ„æºåº”è¯¥æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š

1. é€šè¿‡ç®¡ç†æ§åˆ¶å°å°æˆåŠŸæ³¨å†Œåœ¨ Logto æœåŠ¡å™¨ä¸­
2. åœ¨å®¢æˆ·ç«¯å¯åŠ¨æ—¶ä½œä¸ºé…ç½®å‚æ•°ä¼ ç»™äº† Logto SDK

:::

<Tabs>
<TabItem value="kotlin" label="Kotlin">

```kotlin
logtoClient.getAccessToken("<your-target-api-resource>", { logtoException, accessToken ->
    // custom logic
})
```

</TabItem>
<TabItem value="java" label="Java">

```java
logtoClient.getAccessToken("<your-target-api-resource>", (logtoException, accessToken) -> {
    // custom logic
});
```

</TabItem>
<TabItem value="swift" label="Swift">

```swift
  let token = try await client.getAccessToken(for: "<your-target-api-resource>")
  // custom logic
```

</TabItem>
<TabItem value="react" label="React">

```js
const { getAccessToken } = useLogto();
const token = await getAccessToken('<your-target-api-resource>');
// custom logic
```

</TabItem>

<TabItem value="vue" label="Vue">

```js
const { getAccessToken } = useLogto();
const token = await getAccessToken('<your-target-api-resource>');
// custom logic
```

</TabItem>

<TabItem value="js" label="VanillaJs">

```js
const token = await logtoClient.getAccessToken('<your-target-api-resource>');
// custom logic
```

</TabItem>

</Tabs>

å¦‚æœè¯¥ç”¨æˆ·æˆåŠŸæˆæƒï¼ŒLogto å°†ç”Ÿæˆå¹¶é¢å‘ä¸€ä¸ªä¸“å± [JWT](https://datatracker.ietf.org/doc/html/rfc7519) æ ¼å¼çš„ `access_token` ä»¤ç‰Œã€‚è¯¥ä»¤ç‰Œç»è¿‡åŠ å¯†ï¼Œä¸”æºå¸¦äº†å—ä¼—ç›®æ ‡ï¼Œé¢å‘æ¥æºï¼Œä½¿ç”¨æ—¶æ•ˆç­‰ä»£è¡¨äº†æ‰€è¯·æ±‚æƒé™çš„å¿…è¦ä¿¡æ¯ã€‚

å°†æ­¤ä»¤ç‰Œä½œä¸ºä¸è®°åï¼ˆBearerï¼‰ä»¤ç‰Œé™„åŠ åˆ°ä½ çš„ Authorization è¯·æ±‚å¤´ä¸­ã€‚

ä¾‹å¦‚ï¼š

```bash
GET https://logto.dev/api/users

Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwiYXVkIjoiaHR0cHM6Ly9sb2d0by5kZXYvYXBpL3VzZXJzIiwiaXNzIjoiaHR0cHM6Ly9sb2d0by5kZXYvb2lkYyIsIm5hbWUiOiJKb2huIERvZSIsImlhdCI6MTUxNjIzOTAyMiwiZXhwIjoxNTE2MzI1NDIyfQ.PjIJl00YNC84EPNYLEdpEEAdAxqhekCYhFEckvRokek

```

ç°åœ¨ä½ çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå·²ç»é…ç½®å®Œå–„ã€‚ç™»å½•ç”¨æˆ·é€šè¿‡è¿™ä¸ªå®¢æˆ·ç«¯æ‰€å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚éƒ½å°†å¾—åˆ°å……åˆ†æˆæƒã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬å›åˆ°ä½ çš„æœåŠ¡å™¨ç«¯å»å±è”½é‚£äº›æœªè¢«æˆæƒçš„åŒ¿åè¯·æ±‚ã€‚

## è§£æå¹¶éªŒè¯ API è¯·æ±‚çš„æƒé™ä»¤ç‰Œ

æœ€å…³é”®çš„ä¸€æ­¥ä¾¿æ˜¯é€šè¿‡å¯¹ä¸€ä¸ªå¯ä¿¡èµ–çš„ä»¤ç‰Œè¿›è¡ŒéªŒè¯æ¥ä¿æŠ¤æ‚¨çš„ API èµ„æºã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæ‰€æœ‰ç»è¿‡æˆæƒçš„è¯·æ±‚éƒ½åº”åœ¨å…¶ Authorization è¯·æ±‚å¤´ä¸­æºå¸¦ç”± Logto é¢å‘çš„ [JWT](https://datatracker.ietf.org/doc/html/rfc7519) æ ¼å¼çš„ `assess_token` ä»¤ç‰Œã€‚

<SecretKey />

<TokenExtract />

<TokenValidation />

## å‚è€ƒ

Logto ä½¿ç”¨åŸºäº authorization code-based OAuth 2.0 æˆæƒåè®®ä½¿ API è¯·æ±‚æµç¨‹å˜å¾—æ›´åŠ å®‰å…¨ã€‚å¦‚æœä½ å¯¹å…¶èƒŒåçš„å®ç°æ„Ÿå…´è¶£ï¼Œè¯·å‚é˜… OAuth 2.0 çš„[å®˜æ–¹æ–‡æ¡£](https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.1) äº†è§£æ›´å¤šè¯¦æƒ…ã€‚
