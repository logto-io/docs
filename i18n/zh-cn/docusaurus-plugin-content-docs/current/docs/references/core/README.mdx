import BasicTokenRequirements from './fragments/_basic-token-requirements.mdx';
import BearerAuth from './fragments/_bearer-auth.md';

# ğŸ§± æ ¸å¿ƒæœåŠ¡

## ç®€ä»‹

_æ ¸å¿ƒæœåŠ¡_ æ˜¯æ‹…ä»» Logto å…³é”®èŒè´£çš„å•ä½“æœåŠ¡ã€‚æºä»£ç ä½äº [`/packages/core`](https://github.com/logto-io/logto/tree/master/packages/core)ã€‚

:::note
_æ ¸å¿ƒæœåŠ¡_ ä¸ _SDK æ ¸å¿ƒ_ æ˜¯ä¸¤ä¸ªæ¦‚å¿µã€‚é˜…è¯» [SDK Convention](../sdk-convention/README.md) ä»¥äº†è§£ä¸åŒä¹‹å¤„ã€‚
:::

ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å°†ã€Œæ ¸å¿ƒæœåŠ¡ã€åˆ†ä¸ºå››ä¸ªä¸»è¦æ¨¡å—ï¼š

<table>
  <thead>
    <tr>
      <td>åç§°</td>
      <td>æè¿°</td>
      <td>è½½å…¥è·¯å¾„</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OIDC Provider</td>
      <td>
        ä¸€ä¸ª{' '}
        <a
          href="https://openid.net/specs/openid-connect-core-1_0.html"
          target="_blank"
          rel="noopener"
        >
          OpenID Provider
        </a>
        ã€‚
      </td>
      <td>
        <code>/oidc</code>
      </td>
    </tr>
    <tr>
      <td>ç®¡ç† API</td>
      <td>ç”¨äºç®¡ç† Logto çš„ API é›†åˆã€‚è¦æ±‚å…·æœ‰ admin è§’è‰²ã€‚</td>
      <td>
        <code>/api</code>
      </td>
    </tr>
    <tr>
      <td>å‰ç«¯ä»£ç†</td>
      <td>ç”¨äºå‰ç«¯é¡¹ç›®çš„ HTTP ä»£ç†æˆ–é™æ€æ–‡ä»¶åˆ†å‘ã€‚</td>
      <td>
        é˜…è¯» <a href="#å‰ç«¯ä»£ç†">å‰ç«¯ä»£ç†</a> ä»¥äº†è§£æ›´å¤šã€‚
      </td>
    </tr>
  </tbody>
</table>

åŒ…æ‹¬ OIDC åœ¨å†…çš„åç«¯ API å·²é›†æˆäº `core` è½¯ä»¶åŒ…å†…ï¼›å‰ç«¯ä»£ç†åˆ™ä¾èµ–äº Logto monorepo ä¸­ç›¸å…³çš„å…„å¼Ÿè½¯ä»¶åŒ…ã€‚

## OIDC Provider

Logto åœ¨åº•å±‚ä½¿ç”¨äº†è¶…èµçš„ã€å¹¶ç»è¿‡ [OpenID Connect](https://openid.net/connect/) è®¤è¯çš„é¡¹ç›® [`node-oidc-provider`](https://github.com/panva/node-oidc-provider)ã€‚è¯¥ provider è¢«åŠ è½½äºè·¯å¾„ `/oidc`ï¼›ä½ å¯ä»¥åœ¨ [`packages/core/src/oidc`](https://github.com/logto-io/logto/tree/master/packages/core/src/oidc) æ‰¾åˆ°ç›¸å…³çš„æ–‡ä»¶å’Œé…ç½®ã€‚

### å·²å¯ç”¨çš„ OpenID åŠŸèƒ½

- [OpenID Connect Core](https://openid.net/specs/openid-connect-core-1_0.html)
- [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)
- [OpenID Connect RP-Initiated Logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html)
- [OAuth 2.0 Token Revocation](https://www.rfc-editor.org/rfc/rfc7009.html)
- [OAuth 2.0 Resource Indicators](https://www.rfc-editor.org/rfc/rfc8707.html)

<h2 id="management-api">ç®¡ç† API</h2>

_ç®¡ç† API_ æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†å’Œæ›´æ–° Logto æ•°æ®çš„ API é›†åˆã€‚åªæœ‰å…·æœ‰ `admin` è§’è‰²çš„ç”¨æˆ·å¯ä»¥è®¿é—®ã€‚

å®ƒè¢«åŠ è½½äºè·¯å¾„ `/api`ã€‚å‰å¾€ [API å‚è€ƒ](/api) ä»¥åœ¨æµè§ˆå™¨ä¸­äº†è§£ç»†èŠ‚ï¼Œæˆ–è€…é€šè¿‡ `GET /api/swagger.json` æ¥è·å– JSON æ ¼å¼çš„ Swagger æ•°æ®ã€‚

### è®¤è¯ï¼ˆAuthenticationï¼‰

ã€Œç®¡ç†æ§åˆ¶å°ã€éå¸¸ä¾èµ–è¿™äº› APIï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ã€‚

<BasicTokenRequirements>
  å®ƒçš„ <code>role_names</code> æ•°ç»„é‡ŒåŒ…å« <code>&quot;admin&quot;</code>ã€‚
</BasicTokenRequirements>

<BearerAuth />

## ç”¨æˆ· API

æˆ‘ä»¬æä¾›æ ‡å‡†çš„ OIDC [Userinfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo)ï¼Œè¢«åŠ è½½äºè·¯å¾„ `/oidc/me`.

### è®¤è¯ï¼ˆAuthenticationï¼‰

<BasicTokenRequirements />

<BearerAuth />

## å‰ç«¯ä»£ç†

_å‰ç«¯ä»£ç†_ æ˜¯ä¸€ä¸ªç”¨äºåˆ†å‘å‰ç«¯é¡¹ç›®çš„ä¸­é—´ä»¶å‡½æ•°ï¼Œæ ¹æ®ç¯å¢ƒæ‰§è¡Œï¼š

- å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œå®ƒå°†è½¬å‘ HTTP è¯·æ±‚è‡³å‰ç«¯å¼€å‘æœåŠ¡å™¨ã€‚
- å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œå®ƒå°†ç›´æ¥åˆ†å‘é™æ€å‰ç«¯æ–‡ä»¶ã€‚

Logto å«æœ‰ä¸‰ä¸ªå‰ç«¯ä»£ç†ï¼š

<table>
  <thead>
    <tr>
      <td>åç§°</td>
      <td>å‰ç«¯è½¯ä»¶åŒ…</td>
      <td>åŠ è½½è·¯å¾„</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ã€Œç®¡ç†æ§åˆ¶å°ã€ä»£ç†</td>
      <td>
        <code>/packages/console</code>
      </td>
      <td>
        <code>/console</code>
      </td>
    </tr>
    <tr>
      <td>æ¼”ç¤ºåº”ç”¨ä»£ç†</td>
      <td>
        <code>/packages/demo-app</code>
      </td>
      <td>
        <code>/demo-app</code>
      </td>
    </tr>
    <tr>
      <td>UIï¼ˆç™»å½•ä½“éªŒï¼‰ä»£ç†</td>
      <td>
        <code>/packages/ui</code>
      </td>
      <td>
        <code>/</code>
      </td>
    </tr>
  </tbody>
</table>

:::note
ä½ ä¹Ÿè®¸æ³¨æ„åˆ°äº† UI ä»£ç†ä½¿ç”¨äº†æ ¹è·¯å¾„ã€‚ä¸å…¶ä»–ä»£ç†ä¸åŒï¼ŒUI ä»£ç†æ˜¯ä¸€ä¸ªå¤‡é€‰ï¼ˆfallbackï¼‰ä»£ç†ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“å…¶ä»–ä»£ç†éƒ½ä¸åŒ¹é…æ—¶ï¼Œè¯¥ä»£ç†æ‰ä¼šç”Ÿæ•ˆã€‚
:::
