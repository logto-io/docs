---
slug: /integrations/github-app
sidebar_label: GitHub（GitHub App）
sidebar_custom_props:
  darkLogoFilename: 'github-dark.svg'
  description: GitHub 是一個線上軟體開發與版本控制社群。
tutorial_config_name: GitHub（GitHub App）
---

import GuideTip from '../../fragments/_guide-tip.mdx';

import Integration from './_integration.mdx';

# 設定 GitHub App 社交登入

整合 GitHub App 以啟用「使用 GitHub 登入」、帳號連結，以及以細緻權限和重新整理權杖 (Refresh tokens) 安全存取 GitHub API。

<GuideTip />

## GitHub App 與 OAuth App 比較 \{#github-app-vs-oauth-app}

GitHub 提供兩種應用程式類型用於驗證 (Authentication) 與 API 存取：**GitHub Apps** 和 **OAuth Apps**。以下比較協助你選擇：

| 功能                              | GitHub App                                                     | OAuth App                                   |
| --------------------------------- | -------------------------------------------------------------- | ------------------------------------------- |
| **權限 (Permissions)**            | 細緻權限 — 僅請求特定資源存取權                                | 廣泛權限範圍 — 通常給予超出需求的存取權     |
| **權限管理**                      | 僅能在 GitHub 控制台設定；Logto 的 `Scope` 欄位可留空          | 透過 Logto 連接器中的權限範圍 (Scopes) 設定 |
| **重新整理權杖 (Refresh tokens)** | OAuth 流程中一律發放                                           | 不支援 — 權杖除非撤銷否則永不過期           |
| **權杖過期時間**                  | 存取權杖 (Access tokens) 8 小時後過期；重新整理權杖有效 6 個月 | 存取權杖永不過期                            |
| **使用者控制**                    | 使用者可選擇 App 可存取哪些儲存庫                              | 可存取使用者有權限的所有儲存庫              |
| **速率限制**                      | 安裝數量越多速率限制越高                                       | 速率限制較低（每使用者每小時 5,000 次請求） |
| **安裝方式**                      | 安裝於帳號／組織，並可細緻設定儲存庫存取權                     | 由使用者授權，存取權較廣                    |
| **Webhook**                       | 內建集中式 Webhook 支援                                        | 每個儲存庫需分別設定 Webhook                |
| **獨立運作**                      | 可獨立代表自己行動（伺服器對伺服器）                           | 一律代表使用者行動                          |

**適合使用 GitHub App 的情境：**

- 你需要細緻控制權限與儲存庫存取
- 你希望獲得重新整理權杖 (Refresh tokens) 以長期安全存取 API
- 你需要更高的 API 速率限制
- 你想執行不依賴使用者會話的自動化任務

**適合使用 OAuth App 的情境：**

- 僅需簡單登入整合且 API 存取需求極少
- 你需要永不過期的權杖（舊系統整合）
- 你需要存取企業級資源（GitHub Apps 目前尚未支援企業級權限）

:::tip
GitHub 建議大多數情境優先使用 GitHub Apps，因其安全性更高且權限更細緻。詳見 [GitHub Apps 與 OAuth Apps 差異](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps)。
:::

## 開始使用 \{#get-started}

GitHub App 連接器支援 OAuth 2.0 整合，讓你的應用程式可以：

- 新增「使用 GitHub 登入」驗證 (Authentication)
- 將使用者帳號與 GitHub 身分連結
- 從 GitHub 同步使用者個人資訊
- 透過 Logto Secret Vault 安全儲存權杖存取 GitHub API，實現自動化任務（如建立 GitHub 問題、從你的應用程式管理儲存庫）
- 使用 **重新整理權杖 (Refresh tokens)**（GitHub Apps 一律發放）以維持長期 API 存取，無需使用者重複驗證

要設定這些驗證功能，請先在 Logto 建立 GitHub 連接器：

1. 前往 <CloudLink to="/connectors/social">Logto 控制台 > 連接器 > 社交連接器</CloudLink>。
2. 點擊 **新增社交連接器**，選擇 **GitHub App**，點擊 **下一步**，並依照教學步驟完成整合。

<Integration />

## 使用 GitHub 連接器 \{#utilize-the-github-connector}

建立 GitHub 連接器並連結至 GitHub 後，你可以將其整合進終端使用者流程。請依需求選擇下列方式：

### 啟用「使用 GitHub 登入」 \{#enable-sign-in-with-github}

1. 在 Logto 控制台，前往 <CloudLink to="/sign-in-experience/sign-up-and-sign-in">登入體驗 > 註冊與登入</CloudLink>。
2. 在 **社交登入** 區塊新增 GitHub 連接器，讓使用者可用 GitHub 驗證 (Authentication)。

深入瞭解 [社交登入體驗](/end-user-flows/sign-up-and-sign-in/social-sign-in)。

### 連結或解除連結 GitHub 帳號 \{#link-or-unlink-a-github-account}

使用 Account API 在你的應用程式中打造自訂帳號中心，讓已登入使用者連結或解除 GitHub 帳號。[參考 Account API 教學](/end-user-flows/account-settings/by-account-api#link-a-new-social-connection)

:::tip
你可以僅啟用 GitHub 連接器作為帳號連結與 API 存取用途，而不啟用社交登入。
:::

### 存取 GitHub API 並執行操作 \{#access-github-apis-and-perform-actions}

你的應用程式可從 Secret Vault 取得儲存的 GitHub 權杖，呼叫 GitHub API 並自動化後端任務（如建立 issue、管理儲存庫或自動化工作流程）。請參考相關教學以取得 API 存取所需權杖。

由於 GitHub Apps 在 OAuth 流程中一律發放重新整理權杖 (Refresh tokens)，Logto 會同時儲存存取權杖 (Access tokens) 與重新整理權杖。存取權杖 8 小時後過期，但 Logto 會自動使用有效期 6 個月的重新整理權杖取得新存取權杖，確保 API 存取不中斷。

## 管理使用者的 GitHub 身分 \{#manage-user-s-github-identity}

使用者連結 GitHub 帳號後，管理員可在 Logto 控制台管理該連結：

1. 前往 <CloudLink to="/users">Logto 控制台 > 使用者管理</CloudLink> 並開啟該使用者個人檔案。
2. 在 **社交連結** 區塊找到 GitHub 項目並點擊 **管理**。
3. 在此頁面，管理員可管理使用者的 GitHub 連結，檢視所有從 GitHub 帳號授權並同步的個人資訊，以及檢查存取權杖 (Access token) 與重新整理權杖 (Refresh token) 狀態。

:::note
與使用權限範圍 (Scopes) 的 OAuth Apps 不同，GitHub Apps 採用細緻權限，需在 GitHub 控制台設定。使用者存取權杖僅限於你的 App 與使用者雙方皆有的權限。Logto 無法直接顯示權限清單，但你的應用程式將依 GitHub App 設定的權限存取資源。
:::

## 參考資料 \{#reference}

<Url href="https://docs.github.com/en/apps/creating-github-apps/about-creating-github-apps/about-creating-github-apps">
  GitHub 開發者文件 - 關於 GitHub Apps
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">
  GitHub 開發者文件 - 註冊 GitHub App
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/generating-a-user-access-token-for-a-github-app">
  GitHub 開發者文件 - 產生使用者存取權杖
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/refreshing-user-access-tokens">
  GitHub 開發者文件 - 重新整理使用者存取權杖
</Url>

<Url href="https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps">
  GitHub Apps 與 OAuth Apps 差異
</Url>
