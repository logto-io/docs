## 開始使用 \{#get-started}

1. 前往 [小米開放平台 (Xiaomi Open Platform)](https://dev.mi.com/) 建立開發者帳號
2. 訪問 [小米帳號服務 (Xiaomi Account Service)](https://dev.mi.com/passport/oauth2/applist)
3. 若尚未建立應用程式，請新增一個應用程式

## 設定小米 OAuth 應用程式 \{#configure-xiaomi-oauth-application}

1. 訪問 [小米帳號服務 (Xiaomi Account Service)](https://dev.mi.com/passport/oauth2/applist)
2. 設定 OAuth 相關資訊：
   - 開啟你要用於登入的應用程式，點擊「Callback URL」（若尚未編輯 callback URL，會顯示為「已啟用」）
   - 新增授權 callback URL：`${your_logto_origin}/callback/${connector_id}`
   - `connector_id` 可在 Logto Console 連接器詳細頁面頂部找到
3. 從應用程式詳細頁取得 `AppID` 與 `AppSecret`
4. 將步驟 3 取得的值填入 Logto Console 的 `clientId` 與 `clientSecret` 欄位
5. 可選設定：
   - `skipConfirm`：當使用者已登入小米帳號時，是否略過小米授權確認頁，預設為 false

## 權限範圍 (Scopes) 說明 \{#scopes-description}

預設情況下，連接器會請求以下權限範圍 (scope)：

- `1`：讀取使用者個人資料

可用權限範圍如下：

| 權限範圍值 (Scope Value) | 說明 (Description)         | API 介面 (API Interface) |
| ------------------------ | -------------------------- | ------------------------ |
| 1                        | 取得使用者個人資料         | user/profile             |
| 3                        | 取得使用者 open_id         | user/openIdV2            |
| 1000                     | 取得小米路由器資訊         | Mi Router                |
| 1001                     | 存取所有小米路由器資訊     | Mi Router                |
| 2001                     | 存取小米雲端行事曆         | Mi Cloud                 |
| 2002                     | 存取小米雲端鬧鐘           | Mi Cloud                 |
| 6000                     | 使用米家智慧家庭服務       | Mi Home                  |
| 6002                     | 新增第三方裝置至米家       | Mi Home                  |
| 6003                     | Alexa 控制小米裝置         | Mi Home                  |
| 6004                     | 第三方服務存取小米裝置     | Mi Home                  |
| 7000                     | 關注黃頁服務帳號           | Mi Cloud                 |
| 11000                    | 取得小米雲端相片           | Mi Cloud                 |
| 12001                    | 儲存應用程式資料至小米雲端 | Mi Cloud                 |
| 12005                    | 使用健康 ECG 服務          | Health                   |
| 16000                    | 取得米錢包通行證           | app/get_pass             |
| 20000                    | 啟用小愛語音服務           | XiaoAI                   |
| 40000                    | 啟用雲端 AI 服務           | Internal Use             |

多個權限範圍可用空格分隔設定，例如：`1 3 6000`。

## 測試小米連接器 \{#test-xiaomi-connector}

就是這麼簡單。別忘了在登入體驗中 [啟用社交登入 (Enable social sign-in)](https://docs.logto.io/connectors/social-connectors#enable-social-sign-in)。
