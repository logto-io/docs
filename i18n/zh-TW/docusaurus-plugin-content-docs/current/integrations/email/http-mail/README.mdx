---
slug: /integrations/http-email
sidebar_label: HTTP Email
sidebar_custom_props:
  description: 透過 HTTP 呼叫發送電子郵件。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# 使用 HTTP 呼叫設定電子郵件驗證 (Set up email verification via HTTP call)

官方 Logto HTTP 電子郵件連接器 (connector)。

<GuideTip />

## 開始使用 \{#get-started}

HTTP 電子郵件連接器允許你透過 HTTP 呼叫發送電子郵件。要使用 HTTP 電子郵件連接器，你需要有自己的電子郵件服務，並且該服務需提供用於發送郵件的 HTTP API。Logto 會在需要發送郵件時呼叫這個 API。例如，當使用者註冊時，Logto 會呼叫 HTTP API 發送驗證郵件。

## 設定 HTTP 電子郵件連接器 \{#set-up-http-email-connector}

要使用 HTTP 電子郵件連接器，你需要設定一個 Logto 可以呼叫的 HTTP 端點，並可選擇性地為該端點設置授權權杖 (authorization token)。

## 載荷 (Payload) \{#payload}

HTTP 電子郵件連接器在觸發郵件時會將載荷傳送至端點。內容包含收件者電子郵件（`to`）、電子郵件 [用途類型](/connectors/email-connectors/email-templates#email-template-types)（`type`，表示驗證流程）、`payload`（包含可用的 [變數](/connectors/email-connectors/email-templates#email-template-variables)，例如驗證碼、連結、應用程式資訊、組織資訊、使用者資訊）、使用者的 [語系](/connectors/email-connectors/email-templates#email-template-localization)，以及可選的 `ip` 欄位（若有）記錄用戶端 IP 位址。

範例：

```json
{
  "to": "foo@logto.io",
  "type": "SignIn",
  "payload": {
    "code": "123456",
    "locale": "de"
  },
  "ip": "192.168.1.1"
}
```

`ip` 欄位可用於速率限制、詐騙偵測或加強日誌記錄。

你可以利用這些資訊在郵件發送服務商自訂郵件模板。

所有可用類型請參見 [電子郵件模板](/connectors/email-connectors/email-templates#email-template-types)。完整的 `SendMessageData` 型別定義可參考 [connector-kit](https://github.com/logto-io/logto/tree/master/packages/toolkit/connector-kit/src/types/passwordless.ts)。
