## 設定 SMTP 連接器 \{#set-up-smtp-connector}

SMTP 是一種傳輸協定，並不限於特定電子郵件服務供應商，可與所有供應商搭配使用。

我們提供了如何使用 SMTP 連接器發送郵件的教學，涵蓋以下供應商，幫助你更好地理解：

- _Gmail_ 是全球最受歡迎的電子郵件服務供應商。
- _阿里雲 Direct Mail_ 及 _SendGrid mail_。部分使用者可能對這兩家電子郵件服務供應商較為熟悉，因為 Logto 團隊提供了對應的連接器，你可能已對它們有基本認識。

我們希望你能透過以下範例，舉一反三，設定其他郵件供應商 :rocket:

### Gmail 設定方式 \{#set-up-for-gmail-use}

你可以在 [Gmail](https://mail.google.com/) 申請新帳號，或使用現有帳號。

[Gmail 官方說明](https://support.google.com/a/answer/176600) 介紹了如何查找操作 Gmail 所需的 SMTP 連接器屬性值。

### 整合 SendGrid SMTP API \{#integrate-with-sendgrid-smtp-api}

我們假設你已擁有 SendGrid 帳號。若尚未註冊，請至 [SendGrid 官網](https://app.sendgrid.com/) 建立新帳號。

你可以參考 ["Integrating with the SMTP API"](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api) 的逐步教學。

開發者可於 ["Sender Management"](https://mc.sendgrid.com/senders) 查看 _寄件人 (sender)_ 詳細資訊。

### 阿里雲 Direct Mail 帳號設定 \{#configure-with-aliyun-direct-mail-account}

登入 [阿里雲官網](https://cn.aliyun.com/)，若無帳號請先註冊。

請依照 [使用 SMTP 發送郵件教學](https://www.alibabacloud.com/help/en/directmail/latest/send-emails-using-smtp) 完成相關「任務」，以取得所需設定與資訊。

你可以前往 [SMTP 服務地址頁面](https://www.alibabacloud.com/help/en/directmail/latest/smtp-service-address) 選擇合適的 SMTP 服務主機與連接埠號碼。

如需查詢「寄件地址 (Sender Addresses)」，可於 [DirectMail 控制台](https://dm.console.aliyun.com/) 左側導覽欄找到入口。你應該會看到 `寄件地址 (Sender address)` 與 `SMTP 密碼 (SMTP Password)`。

:::note
為簡化說明，前述案例僅提供一個範本。你應根據不同情境新增更多範本。
請依據你的 Gmail、SendGrid 或阿里雲帳號設定，修改以「\<」和「>」包裹的值，其他未包裹的欄位可保留不變。
在範本內容中加入 `{{code}}` 作為佔位符，以顯示隨機驗證碼於發送郵件時。
:::

### 測試 SMTP 連接器 \{#test-smtp-connector}

你可以輸入一個電子郵件地址並點擊「發送」，以確認設定是否可用，再點選「儲存並完成」。

就是這麼簡單。別忘了 <MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">在登入體驗中啟用連接器</MainSiteUrl>。

### 設定類型 \{#config-types}

| 名稱      | 類型       |
| --------- | ---------- |
| host      | string     |
| port      | string     |
| fromEmail | string     |
| templates | Template[] |

| 範本屬性 (Template Properties) | 類型        | 列舉值                                               |
| ------------------------------ | ----------- | ---------------------------------------------------- |
| subject                        | string      | N/A                                                  |
| content                        | string      | N/A                                                  |
| usageType                      | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
| contentType                    | enum string | 'text/plain' / 'text/html'                           |

**使用者名稱與密碼驗證選項 (Username and password Auth Options)**

| 名稱 | 類型                   | 列舉值  |
| ---- | ---------------------- | ------- |
| user | string                 | N/A     |
| pass | string                 | N/A     |
| type | enum string (OPTIONAL) | 'login' |

你也可以設定 [OAuth2 驗證選項 (OAuth2 Auth Options)](https://nodemailer.com/smtp/oauth2/) 及其他進階設定。詳情請參閱 [這裡](https://nodemailer.com/smtp/)。

我們在文字框中提供了一個包含所有可設定參數的範例設定，協助你自行設置（你需自行負責設定內容，部分值僅供展示，可能不適用於你的情境）。
