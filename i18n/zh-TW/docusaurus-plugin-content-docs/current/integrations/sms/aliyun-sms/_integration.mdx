## 在阿里雲 SMS 控制台設定簡訊服務 \{#set-up-a-short-message-service-in-aliyun-sms-console}

### 建立阿里雲帳號 \{#create-an-aliyun-account}

前往 [阿里雲官網](https://cn.aliyun.com/)，如果你還沒有阿里雲帳號，請先註冊一個。

### 啟用並設定阿里雲簡訊服務 \{#enable-and-configure-aliyun-short-message-service}

1. 使用你的阿里雲帳號登入 [阿里雲官網](https://cn.aliyun.com/)，然後進入 [簡訊服務控制台頁面](https://www.aliyun.com/product/sms)。
2. 點擊簡訊服務頁面左上角的「免費開通」按鈕，開始設定流程。
3. 閱讀並同意「簡訊服務開通條款」，然後點擊「開通服務」繼續。
4. 你現在已進入 [簡訊服務控制台頁面](https://dysms.console.aliyun.com/overview)，根據你的需求，點擊側邊欄的「中國大陸」或「國際 / 港澳台」按鈕。
5. 按照指引新增簽名與模板，並提供審核所需的資料或資訊。
   - 填寫簽名申請時，請記得選擇「驗證碼」作為「適用場景」；申請模板審核時，「模板類型」也請選擇「驗證碼」，因為我們將使用這些簽名與模板來發送驗證碼。目前僅支援發送與驗證碼相關的簡訊。
   - 在模板內容中，請使用 `{{code}}` 作為你想放置數位驗證碼的位置。
6. 提交簡訊簽名與模板申請後，需等待其生效。此時可以回到 [簡訊服務控制台頁面](https://dysms.console.aliyun.com/overview) 發送測試簡訊。如果你的簽名與模板已可用，可以直接測試；若尚未生效，阿里雲也提供測試模板。
   - 發送測試簡訊前，可能需要先儲值少量金額。
   - 發送測試簡訊前，也可能需要先綁定測試手機號碼。更多細節請參閱 [簡訊服務控制台頁面](https://dysms.console.aliyun.com/overview) 側邊欄的「快速學習」分頁。

## 編寫連接器 JSON \{#compose-the-connector-json}

1. 在 [簡訊服務控制台頁面](https://dysms.console.aliyun.com/overview) 右上角將滑鼠移到你的頭像，進入「AccessKey 管理」，點擊「創建 AccessKey」。完成安全驗證後，你會獲得一組「AccessKey ID」與「AccessKey Secret」，請妥善保存。
2. 前往你剛剛使用的「中國大陸」或「國際 / 港澳台」分頁，可以輕鬆找到「簽名名稱」與「模板 CODE」。
   - 若要使用僅供測試的簽名與模板，請改到「快速學習」分頁，在「簽名與模板（僅供測試）」下方即可找到。
3. 填寫阿里雲 SMS 連接器設定：
   - 將步驟 1 取得的 access key 對應填入 `accessKeyId` 與 `accessKeySecret` 欄位。
   - 將步驟 2 提到的「簽名名稱」填入 `signName` 欄位，所有模板將共用此簽名名稱。
   - 你可以為不同情境新增多個 SMS 連接器模板。以下為新增單一模板的範例：
     - 將步驟 2 的「模板 CODE」填入 `templateCode` 欄位，這將決定簡訊內容。
     - `usageType` 欄位請依不同用途填入 `Register`、`SignIn`、`ForgotPassword` 或 `Generic`。(`usageType` 是 Logto 用來識別用途的屬性。) 若要啟用完整的使用者流程，需提供 `Register`、`SignIn`、`ForgotPassword` 與 `Generic` 這四種 usageType 的模板。

### 測試阿里雲 SMS 連接器 \{#test-aliyun-sms-connector}

你可以輸入手機號碼並點擊「發送」，在「儲存並完成」前測試設定是否可用。

就是這麼簡單。別忘了<MainSiteUrl href="/connectors/sms-connectors/#enable-phone-number-sign-up-or-sign-in">在登入體驗中啟用連接器</MainSiteUrl>。

### 設定類型 \{#config-types}

| 名稱            | 類型       |
| --------------- | ---------- |
| accessKeyId     | string     |
| accessKeySecret | string     |
| signName        | string     |
| templates       | Template[] |

| Template 屬性 | 類型        | 列舉值                                               |
| ------------- | ----------- | ---------------------------------------------------- |
| templateCode  | string      | N/A                                                  |
| usageType     | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
