import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

<Tabs groupId="api-framework">
  <TabItem value="fastapi" label="FastAPI">

```py title="app.py"
from fastapi import FastAPI, Depends
from auth_middleware import verify_access_token, AuthInfo

app = FastAPI()

@app.get("/api/protected")
async def protected_endpoint(auth: AuthInfo = Depends(verify_access_token)):
    # 直接從 auth 參數取得驗證資訊
    return {"auth": auth.to_dict()}

@app.get("/api/protected/detailed")
async def detailed_endpoint(auth: AuthInfo = Depends(verify_access_token)):
    # 你的受保護端點邏輯
    return {
        "auth": auth.to_dict(),
        "message": "成功存取受保護資料"
    }
```

  </TabItem>
  <TabItem value="flask" label="Flask">

```py title="app.py"
from flask import Flask, g, jsonify
from auth_middleware import verify_access_token

app = Flask(__name__)

@app.route('/api/protected', methods=['GET'])
@verify_access_token
def protected_endpoint():
    # 從 g.auth 取得驗證資訊
    return jsonify({"auth": g.auth.to_dict()})

@app.route('/api/protected/detailed', methods=['GET'])
@verify_access_token
def detailed_endpoint():
    # 你的受保護端點邏輯
    return jsonify({
        "auth": g.auth.to_dict(),
        "message": "成功存取受保護資料"
    })
```

  </TabItem>
  <TabItem value="django" label="Django">

```py title="views.py"
from django.http import JsonResponse
from auth_middleware import require_access_token

@require_access_token
def protected_view(request):
    # 從 request.auth 取得驗證資訊
    return JsonResponse({"auth": request.auth.to_dict()})

@require_access_token
def detailed_view(request):
    # 你的受保護端點邏輯
    return JsonResponse({
        "auth": request.auth.to_dict(),
        "message": "成功存取受保護資料"
    })
```

  </TabItem>
  <TabItem value="django-rest-framework" label="Django REST Framework">

```py title="views.py"
from rest_framework.decorators import api_view, authentication_classes
from rest_framework.response import Response
from auth_middleware import AccessTokenAuthentication

@api_view(['GET'])
@authentication_classes([AccessTokenAuthentication])
def protected_view(request):
    # 從 request.user.auth 取得驗證資訊
    return Response({"auth": request.user.auth.to_dict()})

@api_view(['GET'])
@authentication_classes([AccessTokenAuthentication])
def detailed_view(request):
    # 你的受保護端點邏輯
    return Response({
        "auth": request.user.auth.to_dict(),
        "message": "成功存取受保護資料"
    })
```

**或使用類別型視圖：**

```py title="views.py"
from rest_framework.views import APIView
from rest_framework.response import Response
from auth_middleware import AccessTokenAuthentication

class ProtectedView(APIView):
    authentication_classes = [AccessTokenAuthentication]

    def get(self, request):
        # 從 request.user.auth 取得驗證資訊
        return Response({"auth": request.user.auth.to_dict()})

class DetailedView(APIView):
    authentication_classes = [AccessTokenAuthentication]

    def get(self, request):
        # 你的受保護端點邏輯
        return Response({
            "auth": request.user.auth.to_dict(),
            "message": "成功存取受保護資料"
        })
```

  </TabItem>
</Tabs>
