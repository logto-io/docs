---
sidebar_position: 1
---

# メール / 電話番号 / ユーザー名でのサインアップ

ユーザー登録は、アプリケーションとユーザーの最初の接点です。Logto は、ユーザー名とパスワード、メールアドレスや電話番号の認証、[ソーシャルサインアップ](/end-user-flows/sign-up-and-sign-in/social-sign-in)、[エンタープライズシングルサインオン (SSO)](/end-user-flows/enterprise-sso) など、さまざまなサインアップ方法をサポートしています。アプリケーションの要件に最適なサインアップ方法を設定できます。

<CloudLink to="/sign-in-experience/sign-up-and-sign-in">
  コンソール > サインイン体験 > サインアップとサインイン
</CloudLink>
から識別子サインアップフローの設定を開始できます。

<img src="/img/assets/sign-in-experience-sign-up.png" alt="サインアップ設定" />

## サインアップ識別子の設定 \{#set-up-the-sign-up-identifier}

Logto で新しいユーザーアカウントを作成するには、ユーザーが Logto システム内で一意に識別される **識別子** を少なくとも 1 つ提供する必要があります。最初のステップとして、サインアップ時にユーザーが入力する必要がある識別子を選択します。利用可能なオプションは次の通りです：

- **ユーザー名**：[ユーザー名](/user-management/user-data#username) を使ってアプリケーションにサインインできる一意の値。
- **メールアドレス**：[メールアドレス](/user-management/user-data#primary_email) を使ってアプリケーションにサインインできる有効な値。
- **電話番号**：[電話番号](/user-management/user-data#primary_phone) を使ってアプリケーションにサインインできる有効な値。
- **メールアドレスまたは電話番号**：有効なメールアドレスまたは電話番号のいずれかでサインアップを許可。

サインアップ時に収集されるすべての識別子は、同じテナント内のユーザー間で一意でなければなりません。これらは [ユーザープロファイル](/user-management/user-data#user-profile) に保存され、Logto と連携したアプリケーションへのサインインに利用できます。

識別子を選択しない場合は、[ソーシャル](/end-user-flows/sign-up-and-sign-in/social-sign-in) のみ、または [エンタープライズ SSO](/end-user-flows/enterprise-sso) のみのサインアップ方法が適用されます。

サインアップ識別子の順序を調整して、サインアップ時に最初に入力してほしい項目を優先できます。この順序はサインアッププロセスに反映され、最初の識別子が登録画面の最初に表示され、残りは後続のステップで収集されます。

:::tip
サインアップ時に特定の種類のメールアドレス（使い捨てメール、プラス記号（+）付きのサブアドレス、特定のメールアドレスやドメイン全体など）をブロックしたい場合は、セキュリティセクションの **ブロックリスト** 機能を利用してください。詳細は [ブロックリスト](/security/blocklist) をご覧ください。
:::

:::tip
電話番号の **国コード** は、ユーザーのブラウザロケールをデフォルト値として使用します。たとえば、ユーザーのブラウザ言語が `fr` の場合、国コードはフランス（+33）になります。

サインイン体験の言語を [`ui_locales`](/end-user-flows/authentication-parameters/ui-locales) 認証パラメーターで設定することもでき、これによりデフォルトの国コードも決まります。
:::

## サインアップ認証設定の構成 \{#set-up-the-sign-up-verification-settings}

ユーザーのサインアップおよび今後のサインインプロセスのセキュリティを確保するため、サインアップ時に収集する識別子に対して認証設定も構成する必要があります。利用可能な設定は次の通りです：

- **パスワードの作成：** サインアップ時にユーザーにパスワードの作成を求めます。これはサインイン体験設定で構成したパスワードポリシーに準拠する必要があります。このパスワードとユーザーの識別子が、アプリケーションへのサインイン資格情報となります。**ユーザー名** をサインアップ識別子に設定した場合、この要件は自動的に有効になります。**ユーザー名** はパスワードと組み合わせてのみユーザーの本人確認ができるためです。[パスワードポリシー](/security/password-policy) はセキュリティ要件に合わせてカスタマイズできます。
- **サインアップ時の認証：** サインアップ時にメールアドレスまたは電話番号の認証を必須にします。現在、Logto では認証済みのメールアドレスと電話番号のみを識別子として受け付けています。この設定は **メールアドレス** または **電話番号** をサインアップ識別子にした場合、自動的に有効になります。ユーザーはサインアップ時に、メールまたは電話番号に送信された認証コードを入力して所有権を確認する必要があります。

| 識別子               | パスワード作成 | サインアップ時の認証 |
| -------------------- | -------------- | -------------------- |
| ユーザー名           | 任意           | 該当なし             |
| メールアドレス       | 任意           | 必須                 |
| 電話番号             | 任意           | 必須                 |
| メールまたは電話番号 | 任意           | 必須                 |

## サインアップフロー例 \{#sign-up-flow-examples}

<details>
  <summary>

### タイプ 1: ユーザー名とパスワード作成 \{#type-1-username-with-password-creation}

</summary>

**ユーザー名** をサインアップ識別子として選択します。パスワード作成は自動的に有効になります。

<img src="/img/assets/sign-up-username-password.png" alt="ユーザー名とパスワードでのサインアップ" />

</details>

<details>
  <summary>

### タイプ 2: メールアドレスまたは電話番号での認証フロー \{#type-2-email-address-or-phone-number-with-verification-flow}

</summary>

**メールアドレスまたは電話番号** をサインアップ識別子として選択します。**サインアップ時の認証** は強制的に有効になります。

<img
  src="/img/assets/sign-up-email-verification.png"
  alt="メールまたは電話番号での認証付きサインアップ"
/>

</details>

<details>
  <summary>

### タイプ 3: メールアドレスでの認証とパスワード作成 \{#type-3-email-address-with-verification-and-password-creation}

</summary>

**メールアドレス** をサインアップ識別子として選択します。**サインアップ時の認証** は強制的に有効になります。**パスワードの作成** を有効にして、サインアップ時にユーザーにパスワード作成を必須にします。（電話番号サインアップフローも同様です）

<img
  src="/img/assets/sign-up-email-password.png"
  alt="メール認証とパスワード作成付きサインアップ"
/>

</details>

<details>
  <summary>

### タイプ 4: メールアドレス認証、ユーザー名とパスワード作成 \{#type-4-email-address-with-verification-username-and-password-creation}

</summary>

**メールアドレス** と **ユーザー名** をサインアップ識別子として選択します。**サインアップ時の認証** は強制的に有効になります。**パスワードの作成** を有効にして、サインアップ時にユーザーにパスワード作成を必須にします。

<img
  src="/img/assets/sign-up-email-username-password.png"
  alt="メール認証・ユーザー名・パスワード作成付きサインアップ"
/>

</details>

## ソーシャルまたはエンタープライズ SSO でのサインアップ \{#sign-up-with-social-or-enterprise-sso}

これらの従来型識別子サインアップ方法に加え、Logto はソーシャルおよびエンタープライズ SSO アイデンティティプロバイダーによるパスワードレスサインアップもサポートしており、オンボーディングプロセスをよりシームレスかつユーザーフレンドリーにします。

Logto で [ソーシャルコネクター](/connectors/social-connectors) または [エンタープライズ SSO コネクター](/connectors/enterprise-connectors) を設定・有効化すると、ユーザーはコネクターが提供する既存のソーシャルまたはエンタープライズアイデンティティで簡単にサインアップできます。ソーシャルおよびエンタープライズ SSO サインアップ方法では、パスワード作成やメールアドレス・電話番号の認証などの追加ステップを省略できます。Logto は認証済みのソーシャルまたはエンタープライズアイデンティティを通じてユーザー情報を自動的に同期し、ユーザープロファイルに保存します。

ソーシャルおよびエンタープライズ SSO コネクターによるサインアップフローの詳細は、[ソーシャルサインイン](/end-user-flows/sign-up-and-sign-in/social-sign-in/) および [エンタープライズ SSO](/end-user-flows/enterprise-sso/) セクションをご覧ください。

:::note
カスタムサインアップフローについては、[Bring your UI](/customization/bring-your-ui/) 機能を参照してください。
:::

## サインアップ時に追加ユーザー情報を収集する \{#collect-additional-user-info-on-sign-up}

サインアップ時に追加のユーザープロファイル情報（例：氏名、生年月日、会社名など）を収集するには、次の 2 つの柔軟な方法があります：

**方法 1: ユーザープロファイル収集**

Logto の組み込み「あなたについて教えてください」ステップをサインアップフローに直接追加します。ユーザーは登録完了前にすべての必須項目を入力する必要があります。この方法はコード不要で簡単に導入できます。

<CloudLink to="/sign-in-experience/collect-user-profile">
  コンソール > サインイン体験 > ユーザープロファイル収集
</CloudLink>
から、あらかじめ用意された基本データ項目を選択したり、柔軟なバリデーション付きでカスタム項目を作成できます。詳細は
[ユーザープロファイル収集](/end-user-flows/collect-user-profile) をご覧ください。

**方法 2: 独自ホストのオンボーディングフロー**

サインアップ完了後に独自のカスタムオンボーディングフローへリダイレクトし、完全にカスタマイズ可能なデータ収集を行います。この方法ではユーザー体験を完全にコントロールでき、複雑な多段階オンボーディングも実現できます。

[Account API](/end-user-flows/account-settings/by-account-api) を利用してユーザープロファイルデータをプログラムで管理できます。

## よくある質問 \{#faqs}

<details>
  <summary>

### 管理者作成ユーザー / 招待ユーザー \{#admin-created-users--invited-users}

</summary>

[招待のみサインアップフローの実装方法](/end-user-flows/sign-up-and-sign-in/disable-user-registration/#implement-an-invitation-only-sign-up-flow) をご覧ください。

</details>

<details>
  <summary>

### Web サイトへの埋め込みサインアップフォーム \{#embedded-sign-up-forms-on-your-website}

</summary>
  
Logto は現在、サインイン・サインアップ用のヘッドレス API をサポートしていません。[Bring your UI](/customization/bring-your-ui/) 機能を使って独自のサインアップフォームを Logto にアップロードするか、サインインパラメーターを利用して Web サイトから Logto へユーザー情報を連携できます。ユーザー識別子の連携については [認証パラメーター](/end-user-flows/authentication-parameters/) をご覧ください。

</details>

<details>
  <summary>

### 新規ユーザーへのウェルカムメール送信 \{#sending-welcome-emails-to-new-users}

</summary>

`User.Created` Webhook イベントを購読して、新規ユーザーへのウェルカムメール送信をトリガーできます。[Webhook イベント](/developers/webhooks/webhooks-events/#data-mutation-hook-events) の詳細をご覧ください。

</details>

<details>
  <summary>

### サインアップ時のメール認証をスキップしたい \{#skip-email-verification-on-sign-up}

</summary>

現在、Logto では認証済みのメールアドレスおよび電話番号のみを識別子としてサポートしています。認証プロセスはユーザー識別子のセキュリティと所有権を確保するために必須です。
未認証のメールアドレスや電話番号のサポートは [ロードマップ](https://feedback.logto.io/roadmap) にあります。今後のアップデートをお待ちください！

</details>

## 関連リソース \{#related-resources}

<Url href="https://www.youtube.com/watch?v=64rBXpWbScc">メールサインアップとサインイン体験</Url>

<Url href="https://www.youtube.com/watch?v=chQxCJX6e6w">ユーザー名サインアップとサインイン体験</Url>
