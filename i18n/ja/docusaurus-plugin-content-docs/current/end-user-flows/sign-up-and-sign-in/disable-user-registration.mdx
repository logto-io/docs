---
sidebar_position: 6
---

# ユーザー登録を無効にする

特定の状況では、アプリケーションのユーザー登録を制限したい場合があります。Logto では、匿名ユーザー登録を無効にし、管理者によって招待されたユーザーのみがサインインできるように制限することができます。

エンドユーザー登録を無効にするには、次の手順に従ってください：

{/* eslint-disable-next-line prettier/prettier */}
1. <CloudLink to="/sign-in-experience/sign-up-and-sign-in">コンソール > サインイン体験 > サインアップとサインイン</CloudLink> ページに移動します。
2. **詳細オプション** セクションで、**ユーザー登録を有効にする** スイッチをオフにしてユーザー登録を無効にします。（デフォルトでは有効）

ユーザー登録が無効になると：

- サインインページから「アカウントを作成」リンクが削除されます。
- サインアップページが無効になり、訪問したユーザーはサインインページにリダイレクトされます。
- ソーシャルおよびエンタープライズ SSO サインアップフローも無効になります。未登録のソーシャルアカウントを持つユーザーは、ソーシャル認証後に「アカウントが見つかりません」エラーを受け取ります。
- システム内に一致するメールアドレスまたは電話番号アカウントを持つユーザーには、ソーシャルリンクアカウント機能が引き続き利用可能です。

## 招待制サインアップフローを実装する

Logto は組み込みの招待フローを提供していませんが、Logto のユーザー Management API を利用して、招待制のサインアップフローを簡単に実装できます。

### オプション 1: メールでユーザーを招待する

1. <CloudLink to="/sign-in-experience/sign-up-and-sign-in">コンソール > サインイン体験</CloudLink> でユーザー登録を無効にします。
2. アプリケーション内にカスタムの招待ベースのユーザー登録フォームを作成します。
3. ユーザーに一意の招待リンクを含む招待メールを送信します。
4. ユーザーが登録リンクをクリックすると、アプリケーションが [Logto Management API](https://openapi.logto.io/operation/operation-createuser) を呼び出してユーザーアカウントを作成します。
5. ユーザーアカウントが作成された後、ユーザーを Logto のサインインまたはパスワードリセットページにリダイレクトして登録を完了させます。サインインプロセスを簡素化するために、最初の画面をカスタマイズし、ユーザーのメールを事前入力する方法については、[認証パラメーター](/end-user-flows/authentication-parameters/) を参照してください。

### オプション 2: 手動登録時にユーザーに通知する

1. Logto コンソールでユーザー登録を無効にします。
2. <CloudLink to="/users">コンソール > ユーザー管理</CloudLink> または [Management
   API](https://openapi.logto.io/operation/operation-createuser)
   を使用して手動でユーザーアカウントを作成します。
3. ユーザーにメールでアカウントが作成されたことを通知します。
4. ユーザーを Logto のサインインまたはパスワードリセットページにリダイレクトして登録を完了させます。サインインプロセスを簡素化するために、最初の画面をカスタマイズし、ユーザーのメールを事前入力する方法については、[認証パラメーター](/end-user-flows/authentication-parameters/) を参照してください。

## 招待制サインアップのユーザー体験

ユーザー登録が無効になっている場合、サインアップページを訪れたユーザーはサインインページにリダイレクトされます。ユーザーは管理者によって、または Management API を使用してのみ作成できます。設定したサインアップおよびサインイン方法に応じて、ユーザーはサインイン時に異なる体験をする可能性があります：

- **メールまたは電話番号による認証コードでのサインイン**：**メールアドレス**または**電話番号**でユーザーアカウントを作成します。メールまたは電話番号の認証コードサインイン方法を有効にします。ユーザーが作成されると、認証コード認証方法を使用してメールまたは電話番号で直接サインインできます。
- **特定のメールまたは電話番号でのソーシャルサインイン**：ソーシャルアカウントに関連付けられた**メールアドレス**または**電話番号**でユーザーアカウントを作成します。特定のソーシャルプロバイダーのソーシャル接続を作成して有効にします。メールまたは電話番号に基づいてソーシャルアイデンティティをユーザーアカウントに自動的にリンクするために、[**自動アカウントリンク**](/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking) 機能を有効にします。ユーザーが作成されると、メールまたは電話番号に一致するソーシャルアカウントで直接サインインできます。
- **ユーザー名 / メール / 電話番号とパスワード**：**ユーザー名**、**メールアドレス**、または**電話番号**でユーザーアカウントを作成し、パスワードベースのサインインのために対応する識別子を有効にします。
  - 事前設定されたパスワードを使用する場合：アカウント作成時にパスワードを設定し、それをユーザーに安全に共有します。ユーザーは、事前設定されたパスワードを使用してユーザー名、メール、または電話番号で直接サインインし、必要に応じてパスワードをリセットできます。
  - 事前設定されたパスワードなしで：パスワードなしでアカウントを作成し、アカウントの有効化時にユーザーにパスワードを設定するよう促します。（パスワードリセットフローには**メールアドレス**または**電話番号**が必要です。）ユーザーを作成した後、メールまたは電話番号を事前入力してパスワードリセットページにリダイレクトします。事前入力された詳細でユーザーをパスワードリセットページにリダイレクトする方法については、[認証パラメーター](/end-user-flows/authentication-parameters/) を参照してください。ユーザーが新しいパスワードを設定すると、ユーザー名、メール、または電話番号と新しいパスワードで直接サインインできます。

## 関連リソース

<Url href="https://blog.logto.io/invitation-only-sign-up">
  ブログ: Logto で招待制サインアップを設定する方法
</Url>
