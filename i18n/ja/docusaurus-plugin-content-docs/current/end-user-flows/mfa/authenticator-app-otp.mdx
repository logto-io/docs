---
sidebar_position: 3
---

# 認証アプリ OTP

## 概念 \{#concepts}

認証アプリ（Authenticator app）、またはソフトウェアトークンとも呼ばれるものは、最も広く採用されている [多要素認証 (MFA)](https://auth.wiki/mfa) 方法の一つです。これは一時的な [ワンタイムパスワード (OTP)](https://auth.wiki/otp) を生成し、オンラインサービスの認証 (Authentication) のセキュリティを強化します。物理的なハードウェアトークンとは異なり、ソフトウェアトークンは通常、ユーザーがスマートフォンやコンピュータのブラウザなどのデバイスにインストールするアプリケーションやプラグインです。ソフトウェアトークンは、認証アプリの機能や個々のユーザー設定に応じて、単一デバイス上でローカルに動作したり、複数デバイス間で同期したりできます。

代表的なソフトウェアトークンには、Google Authenticator、Microsoft Authenticator、Duo、1Password、Authy などがあります。

## 認証 (Authentication) フロー \{#authentication-flows}

### 認証アプリ OTP 設定フロー \{#authentication-app-otp-setup-flows}

1. **QR コードまたはシークレットキー**：サービスからユーザーに QR コードまたはシークレットキーが提供されます。
2. **アカウント追加**：ユーザーは認証アプリを使い、QR コードをスキャンするかシークレットキーを手動で入力してアカウントを追加します。
3. **動的ワンタイムパスワード**：認証アプリは、追加されたアカウント用に 1 ～ 2 分ごとに更新される 6 桁のコードを表示します。
4. **MFA 設定完了**：ユーザーはこのコードの有効期間内に MFA 設定ページへ入力し、認証アプリ OTP の MFA 設定を完了します。

<img src="/img/assets/otp-set-up-flow.png" alt="OTP set up flow" />

### 認証アプリ OTP 検証フロー \{#authentication-app-otp-verification-flows}

1. **ログイン試行**：ログイン時に、ユーザーは MFA を求められます。
2. **OTP の取得**：認証アプリを開き、該当アカウントの OTP を取得します。
3. **OTP の入力**：ユーザーはアプリに表示された OTP を有効期間内に 2 段階認証ページへ入力します。
4. **認証 (Authentication)**：システムが OTP を検証し、認証に成功するとアクセスが許可されます。

<img src="/img/assets/otp-verification-flow.png" alt="OTP verification flow" />
