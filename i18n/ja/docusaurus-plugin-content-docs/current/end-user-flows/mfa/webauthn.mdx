---
sidebar_position: 2
---

# パスキー (Passkeys)（WebAuthn）

[パスキー (Passkey)](https://auth.wiki/passkey) は、従来のパスワードよりも安全でユーザーフレンドリーな代替手段を提供します。公開鍵暗号方式を利用することで、パスキーはユーザーのデバイス、サービスドメイン、ユーザー ID を結び付け、フィッシングやパスワード攻撃を効果的に防ぎます。さまざまなデバイスやブラウザに対応し、ユーザーは生体認証やハードウェアセキュリティ機能を使って便利に認証 (Authentication) できます。[WebAuthn](https://auth.wiki/webauthn) は、ウェブサイトがパスキーを実装できるようにする API を提供します。

Logto は現在、多要素認証 (MFA) のためにパスキー（WebAuthn）をサポートしています。パスキーによるサインイン機能は近日公開予定です。今後のアップデートにご期待ください。

## 概念 \{#concepts}

顧客は通常 WebAuthn よりもパスキー (Passkeys) を知っていますが、それらの関係や使い方はどうなっているのでしょうか？これらの概念を見てみましょう：

- **パスキー (Passkeys)**：パスキーは、パスワードに代わる FIDO ベースのフィッシング耐性のある認証情報です。非対称公開鍵暗号方式を利用してセキュリティを強化します。ハードウェアトークンやセキュリティキー（USB や Bluetooth デバイスなど）として利用できます。「パスキー (Passkeys)」はユーザーに表示される認証 (Authentication) 方法であるため、プロダクトクライアント内で使用するべきです。
- **WebAuthn**：W3C と FIDO Alliance によって開発された JavaScript API で、ウェブアプリケーションの認証 (Authentication) を FIDO2 標準で実現します。パスキー (Passkeys) は WebAuthn がサポートする認証 (Authentication) 方法の一つです。Logto コンソールでは、この統合を専門的に「WebAuthn」と呼んでいます。

WebAuthn はユーザーが選択できる多様な認証器を提供しており、ローカルとクラウド利用の 2 種類があります：

- **プラットフォーム認証器（内部認証器）**：特定のデバイス OS（コンピューター、ノートパソコン、スマートフォン、タブレットなど）に紐付いており、ユーザーがサインインする際に使用します。生体認証やデバイスパスコードなどの方法で、そのデバイス上でのみ認可 (Authorization) に利用できるため、迅速な認証 (Authentication) が可能です。例：macOS や iOS の Touch ID、Face ID、デバイスパスコードで認証された iCloud キーチェーン、Windows Hello の顔認証、指紋認証、PIN など。
- **ローミング認証器（外部認証器、クロスプラットフォーム認証器）**：ハードウェアセキュリティキーやスマートフォンなど、別の携帯型デバイスやソフトウェアアプリケーションです。USB 接続や NFC、Bluetooth をオンにしてデバイスをリンクする必要があります。ローミング認証器は特定のデバイスやブラウザに限定されず、より柔軟に利用できます。

WebAuthn の原理やプロセスについてさらに詳しく知りたい場合は、ブログ記事 [WebAuthn とパスキー 101](https://blog.logto.io/web-authn-and-passkey-101/) および [WebAuthn 統合前に知っておくべきこと](https://blog.logto.io/webauthn-base-knowledge/) をご参照ください。

## 制限事項に注意 \{#pay-attention-to-limitations}

WebAuthn を実装する際には、いくつかの制限事項に注意することが重要です：

1. **プラットフォームとブラウザの制限**：Logto は現在、ネイティブアプリケーション向けの WebAuthn サポートを提供していません。また、WebAuthn 認証器の利用可否はブラウザやデバイスの機能に依存します（[対応リストを確認](https://caniuse.com/?search=webauthn)）。そのため、WebAuthn は常に多要素認証 (MFA) の唯一の選択肢ではありません。必要に応じて、どのブラウザやデバイスがプロダクトにアクセスできるかを制御できます。
2. **ドメインの制限**：ドメインを変更すると、既存の WebAuthn アカウントによるユーザー認証 (Authentication) が妨げられる場合があります。パスキー (Passkeys) は現在のウェブページの特定のドメインに紐付いており、異なるドメイン間で利用できません。
3. **デバイスの制限**：「このデバイス」プラットフォーム認証器に依存している場合、デバイスを紛失するとアカウントへのアクセスを失う可能性があります。認証 (Authentication) アクセスを強化するために、ユーザーに複数の認証 (Authentication) 要素を提供することを推奨します。

## 認証 (Authentication) フロー \{#authentication-flows}

パスキー (Passkeys) の仕様では、ユーザーが現在のページでボタンを積極的にクリックして認証 (Authentication) コンポーネントを起動する必要があります。つまり、セットアップフローと検証フローの両方で、ユーザーはランディングページにリダイレクトされて WebAuthn を開始する必要があります。

- **パスキー (Passkey) セットアップフロー**

<img src="/img/assets/webauthn-setup-flow.png" alt="WebAuthn setup flow" />

- **パスキー (Passkey) 検証フロー**

<img src="/img/assets/webauthn-verification-flow.png" alt="WebAuthn verification flow" />

## 関連リソース \{#related-resources}

<Url href="https://blog.logto.io/webauthn-base-knowledge">WebAuthn 統合前に知っておくべきこと</Url>

<Url href="https://blog.logto.io/web-authn-and-passkey-101">WebAuthn とパスキー 101</Url>
