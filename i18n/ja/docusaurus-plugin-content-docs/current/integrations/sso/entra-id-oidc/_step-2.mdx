import applicationDetails from './assets/entra_id_oidc_application_details.webp';
import createSecret from './assets/entra_id_oidc_create_secret.webp';
import endpoints from './assets/entra_id_oidc_endpoints.webp';

Microsoft Entra OIDC アプリケーションを正常に作成した後、IdP 設定を Logto に戻す必要があります。Logto コンソールの `Connection` タブに移動し、次の設定を入力してください：

1. **Client ID**: Microsoft Entra によって OIDC アプリケーションに割り当てられた一意の識別子です。この識別子は、OIDC フロー中に Logto がアプリケーションを識別し認証するために使用されます。アプリケーションの概要ページで `Application (client) ID` として見つけることができます。

<center>
  <img src={applicationDetails} alt="アプリケーションの詳細" />
</center>

2. **Client Secret**: 新しいクライアントシークレットを作成し、その値を Logto にコピーします。このシークレットは、OIDC アプリケーションを認証し、Logto と IdP 間の通信を保護するために使用されます。

<center>
  <img src={createSecret} alt="シークレットを作成" />
</center>

3. **発行者 (Issuer)**: IdP の一意の識別子である発行者 URL で、OIDC アイデンティティプロバイダーの場所を指定します。これは OIDC 設定の重要な部分であり、Logto が必要なエンドポイントを発見するのに役立ちます。

   これらの OIDC エンドポイントを手動で提供する代わりに、Logto は提供された発行者 URL を利用して IdP のディスカバーエンドポイントに呼び出しを行い、必要な設定と IdP エンドポイントを自動的に取得します。

   発行者 URL を取得するには、アプリケーションの概要ページの `Endpoints` セクションで見つけることができます。

   `OpenID Connect metadata document` エンドポイントを見つけ、URL をコピーします。この際、末尾のパス `.well-known/openid-configuration` は含めないでください。これは、Logto が OIDC 設定を取得する際に発行者 URL に `.well-known/openid-configuration` を自動的に追加するためです。

<center>
  <img src={endpoints} alt="エンドポイント" />
</center>

4. **スコープ (Scope)**: OIDC 認証 (Authentication) プロセス中に Logto が要求する権限またはアクセスレベルを定義するスペースで区切られた文字列のリストです。スコープパラメータを使用して、Logto が IdP から要求する情報とアクセスを指定できます。

スコープパラメータはオプションです。カスタムスコープ設定に関係なく、Logto は常に `openid`、`profile`、および `email` スコープを IdP に送信します。

`Save` をクリックして設定プロセスを完了します。
