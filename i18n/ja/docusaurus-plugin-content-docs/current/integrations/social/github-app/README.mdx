---
slug: /integrations/github-app
sidebar_label: GitHub (GitHub App)
sidebar_custom_props:
  darkLogoFilename: 'github-dark.svg'
  description: GitHub はソフトウェア開発とバージョン管理のためのオンラインコミュニティです。
tutorial_config_name: GitHub (GitHub App)
---

import GuideTip from '../../fragments/_guide-tip.mdx';

import Integration from './_integration.mdx';

# GitHub を使用してソーシャルログインを設定する (Set up social login with GitHub via GitHub App)

GitHub App を統合することで、「Sign-in with GitHub」、アカウント連携、細かな権限管理とリフレッシュ トークンによる安全な GitHub API へのアクセスが可能になります。

<GuideTip />

## GitHub App と OAuth App の違い \{#github-app-vs-oauth-app}

GitHub では、認証 (Authentication) および API アクセスのために **GitHub Apps** と **OAuth Apps** の 2 種類のアプリが提供されています。選択の参考になる比較表は以下の通りです：

| 機能                      | GitHub App                                                               | OAuth App                                            |
| ------------------------- | ------------------------------------------------------------------------ | ---------------------------------------------------- |
| **権限**                  | 細かな権限管理 — 特定のリソースへのアクセスのみをリクエスト可能          | 広範なスコープ — 必要以上のアクセス権を付与しがち    |
| **権限管理**              | GitHub ダッシュボードでのみ設定可能。Logto の `Scope` フィールドは空で可 | Logto コネクターでスコープを設定                     |
| **リフレッシュ トークン** | OAuth フロー中に常に発行される                                           | サポートなし — トークンは取り消されない限り有効      |
| **トークン有効期限**      | アクセス トークンは 8 時間で失効。リフレッシュ トークンは 6 ヶ月有効     | アクセス トークンは失効しない                        |
| **ユーザーコントロール**  | アプリがアクセスできるリポジトリをユーザーが選択可能                     | ユーザーがアクセスできる全リポジトリにアクセス可能   |
| **レート制限**            | インストール数に応じて高いレート制限                                     | 低いレート制限（ユーザーごとに 5,000 リクエスト/時） |
| **インストール**          | アカウント/組織にインストールし、リポジトリ単位でアクセス制御            | ユーザーが広範なアクセス権で認可                     |
| **Webhook**               | 統合された Webhook サポート                                              | 各リポジトリごとに個別設定が必要                     |
| **独立動作**              | 自身の権限で動作可能（サーバー間通信）                                   | 常にユーザーの代理で動作                             |

**GitHub App を使うべき場合：**

- 権限やリポジトリアクセスを細かく制御したい場合
- 長期的な API アクセスのためにリフレッシュ トークンが必要な場合
- より高い API レート制限が必要な場合
- ユーザーセッションに依存しない自動化タスクを実行したい場合

**OAuth App を使うべき場合：**

- シンプルなサインイン連携と最小限の API アクセスが必要な場合
- 失効しないトークンが必要な場合（レガシー統合向け）
- エンタープライズレベルのリソースにアクセスしたい場合（GitHub App は現時点で未対応）

:::tip
GitHub は、強化されたセキュリティ機能と細かな権限管理の観点から、ほとんどのユースケースで OAuth App より GitHub App の利用を推奨しています。詳しくは [GitHub Apps と OAuth Apps の違い](https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps) をご覧ください。
:::

## はじめに \{#get-started}

GitHub App コネクターは OAuth 2.0 連携を可能にし、アプリケーションで以下が実現できます：

- 「Sign-in with GitHub」認証 (Authentication) の追加
- ユーザーアカウントと GitHub アイデンティティの連携
- GitHub からユーザープロフィール情報の同期
- Logto Secret Vault で安全にトークンを保管し、GitHub API への自動化タスク（例：GitHub issue 作成、アプリからのリポジトリ管理）を実行
- **リフレッシュ トークン**（GitHub App では常に発行）を利用し、ユーザーの再認証なしで長期的な API アクセスを維持

これらの認証 (Authentication) 機能を設定するには、まず Logto で GitHub コネクターを作成してください：

1. <CloudLink to="/connectors/social">
     Logto コンソール > コネクター > ソーシャルコネクター
   </CloudLink> にアクセスします。
2. **ソーシャルコネクターを追加** をクリックし、**GitHub App** を選択、**次へ** をクリックして、チュートリアルに従い統合を完了してください。

<Integration />

## GitHub コネクターの活用 \{#utilize-the-github-connector}

GitHub コネクターを作成し GitHub と連携したら、エンドユーザー向けフローに組み込むことができます。ニーズに合わせて以下のオプションを選択してください：

### 「Sign-in with GitHub」を有効化 \{#enable-sign-in-with-github}

1. Logto コンソールで <CloudLink to="/sign-in-experience/sign-up-and-sign-in">サインイン体験 > サインアップとサインイン</CloudLink> に移動します。
2. **ソーシャルサインイン** セクションで GitHub コネクターを追加し、ユーザーが GitHub で認証 (Authentication) できるようにします。

[ソーシャルサインイン体験](/end-user-flows/sign-up-and-sign-in/social-sign-in) について詳しく学ぶ。

### GitHub アカウントの連携 / 解除 \{#link-or-unlink-a-github-account}

Account API を利用して、サインイン済みユーザーが GitHub アカウントを連携 / 解除できるカスタムアカウントセンターをアプリ内に構築できます。[Account API チュートリアル](/end-user-flows/account-settings/by-account-api#link-a-new-social-connection) をご参照ください。

:::tip
GitHub コネクターは、ソーシャルサインインを有効化せず、アカウント連携や API アクセス専用として有効化することも可能です。
:::

### GitHub API へのアクセスとアクション実行 \{#access-github-apis-and-perform-actions}

アプリケーションは Secret Vault から保存された GitHub トークンを取得し、GitHub API を呼び出してバックエンドタスク（例：issue 作成、リポジトリ管理、ワークフロー自動化など）を自動化できます。API アクセス用の保存トークン取得ガイドを参照してください。

GitHub App は OAuth フロー中に必ずリフレッシュ トークンを発行するため、Logto はアクセス トークンとリフレッシュ トークンの両方を保存します。アクセス トークンは 8 時間で失効しますが、Logto は自動的にリフレッシュ トークン（6 ヶ月有効）を使って新しいアクセス トークンを取得し、途切れない API アクセスを実現します。

## ユーザーの GitHub アイデンティティ管理 \{#manage-user-s-github-identity}

ユーザーが GitHub アカウントを連携した後、管理者は Logto コンソールでその接続を管理できます：

1. <CloudLink to="/users">
     Logto コンソール > ユーザー管理
   </CloudLink> に移動し、対象ユーザーのプロフィールを開きます。
2. **ソーシャル接続** セクションで GitHub 項目を見つけ、**管理** をクリックします。
3. このページで管理者は、ユーザーの GitHub 接続を管理し、GitHub アカウントから付与・同期されたすべてのプロフィール情報や、アクセス トークン・リフレッシュ トークンの状態を確認できます。

:::note
OAuth App がスコープを使うのに対し、GitHub App は GitHub ダッシュボードで設定する細かな権限を利用します。ユーザーのアクセストークンは、アプリとユーザーの両方が持つ権限に限定されます。Logto で権限リストを直接表示することはできませんが、アプリケーションは GitHub App 設定で構成した権限に基づきアクセスできます。
:::

## 参考情報 \{#reference}

<Url href="https://docs.github.com/en/apps/creating-github-apps/about-creating-github-apps/about-creating-github-apps">
  GitHub 開発者ドキュメント - GitHub App について
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">
  GitHub 開発者ドキュメント - GitHub App の登録
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/generating-a-user-access-token-for-a-github-app">
  GitHub 開発者ドキュメント - ユーザーアクセストークンの生成
</Url>

<Url href="https://docs.github.com/en/apps/creating-github-apps/authenticating-with-a-github-app/refreshing-user-access-tokens">
  GitHub 開発者ドキュメント - ユーザーアクセストークンのリフレッシュ
</Url>

<Url href="https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/differences-between-github-apps-and-oauth-apps">
  GitHub App と OAuth App の違い
</Url>
