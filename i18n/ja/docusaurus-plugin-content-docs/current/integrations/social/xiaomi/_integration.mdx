## はじめに \{#get-started}

1. [Xiaomi Open Platform](https://dev.mi.com/) で開発者アカウントを作成します
2. [Xiaomi アカウントサービス](https://dev.mi.com/passport/oauth2/applist) にアクセスします
3. アプリケーションをまだお持ちでない場合は、新しいアプリケーションを作成します

## Xiaomi OAuth アプリケーションの設定 \{#configure-xiaomi-oauth-application}

1. [Xiaomi アカウントサービス](https://dev.mi.com/passport/oauth2/applist) にアクセスします
2. OAuth 設定を構成します：
   - ログインに使用したいアプリケーションを開き、「Callback URL」をクリックします（コールバック URL を編集していない場合、「Enabled」と表示されます）
   - 認可 (Authorization) コールバック URL を追加します：`${your_logto_origin}/callback/${connector_id}`
   - `connector_id` は Logto コンソールのコネクター詳細ページの上部で確認できます
3. アプリケーション詳細ページから `AppID` と `AppSecret` を取得します
4. Logto コンソールの `clientId` および `clientSecret` フィールドに、手順 3 で取得した値を入力します
5. オプション設定：
   - `skipConfirm`: ユーザーがすでに Xiaomi アカウントにログインしている場合に Xiaomi 認可 (Authorization) 確認ページをスキップするかどうか。デフォルトは false です

## スコープ (Scope) の説明 \{#scopes-description}

デフォルトでは、コネクターは次のスコープ (Scope) をリクエストします：

- `1`: ユーザープロファイルの読み取り

利用可能なスコープ (Scope)：

| Scope 値 | 説明                                                 | API インターフェース |
| -------- | ---------------------------------------------------- | -------------------- |
| 1        | ユーザープロファイルの取得                           | user/profile         |
| 3        | ユーザー open_id の取得                              | user/openIdV2        |
| 1000     | Xiaomi ルーター情報の取得                            | Mi Router            |
| 1001     | すべての Xiaomi ルーター情報へのアクセス             | Mi Router            |
| 2001     | Xiaomi クラウドカレンダーへのアクセス                | Mi Cloud             |
| 2002     | Xiaomi クラウドアラームへのアクセス                  | Mi Cloud             |
| 6000     | Mi Home スマートホームサービスの利用                 | Mi Home              |
| 6002     | サードパーティデバイスを Mi Home へ追加              | Mi Home              |
| 6003     | Alexa で Xiaomi デバイスを操作                       | Mi Home              |
| 6004     | サードパーティサービスによる Xiaomi デバイスアクセス | Mi Home              |
| 7000     | イエローページサービスアカウントのフォロー           | Mi Cloud             |
| 11000    | Xiaomi クラウド写真の取得                            | Mi Cloud             |
| 12001    | アプリデータを Mi Cloud へ保存                       | Mi Cloud             |
| 12005    | ヘルス ECG サービスの利用                            | Health               |
| 16000    | Mi Wallet パスの取得                                 | app/get_pass         |
| 20000    | XiaoAI 音声サービスの有効化                          | XiaoAI               |
| 40000    | クラウド AI サービスの有効化                         | 内部利用             |

複数のスコープ (Scope) を設定する場合は、スペースで区切って指定します。例：`1 3 6000`

## Xiaomi コネクターのテスト \{#test-xiaomi-connector}

これで完了です。サインイン体験で [ソーシャルサインインを有効化](https://docs.logto.io/connectors/social-connectors#enable-social-sign-in) するのを忘れずに行ってください。
