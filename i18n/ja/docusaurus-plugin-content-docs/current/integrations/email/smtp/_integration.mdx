## SMTP コネクターの設定 \{#set-up-smtp-connector}

SMTP は、特定のメールサービスプロバイダー専用の転送プロトコルではなく、すべてのプロバイダーで利用できます。

より理解を深めていただくために、以下のプロバイダーで SMTP コネクターを使用してメールを送信する方法のガイドを提供しています：

- _Gmail_ は世界で最も人気のあるメールサービスベンダーです。
- _Aliyun direct mail_ および _SendGrid mail_。これら 2 つのメールサービスプロバイダーについては、Logto チームが対応するコネクターを提供しているため、一般的なイメージを持っている方もいるでしょう。

以下の例を参考に、他のメールベンダーのセットアップも理解できることを願っています :rocket:

### Gmail 用の設定 \{#set-up-for-gmail-use}

[Gmail](https://mail.google.com/) で新しい Gmail アカウントを取得するか、既存のアカウントをお持ちの場合はそれを使用できます。

[Gmail 公式記事](https://support.google.com/a/answer/176600) では、SMTP コネクターを介して Gmail を操作するために必要なプロパティ値の決定方法が示されています。

### SendGrid SMTP API との統合 \{#integrate-with-sendgrid-smtp-api}

最初に、SendGrid アカウントをすでにお持ちであることを前提とします。まだの場合は、 [SendGrid ウェブサイト](https://app.sendgrid.com/) で新しいアカウントを作成してください。

["Integrating with the SMTP API"](https://docs.sendgrid.com/for-developers/sending-email/integrating-with-the-smtp-api) でステップバイステップのガイドを確認できます。

開発者は ["Sender Management"](https://mc.sendgrid.com/senders) で _sender_ の詳細にアクセスできます。

### Aliyun direct mail アカウントでの設定 \{#configure-with-aliyun-direct-mail-account}

[Aliyun ウェブサイト](https://cn.aliyun.com/) にサインインしてください。アカウントをお持ちでない場合は新規登録してください。

[SMTP を使用してメールを送信するガイド](https://www.alibabacloud.com/help/en/directmail/latest/send-emails-using-smtp) に従い、必要な設定や情報を取得するための「タスク」を完了してください。

[SMTP サービスアドレスページ](https://www.alibabacloud.com/help/en/directmail/latest/smtp-service-address) で、適切な SMTP サービスアドレスのホストとポート番号を選択できます。

「送信者アドレス」を確認するには、 [DirectMail コンソール](https://dm.console.aliyun.com/) の左側ナビゲーションペインからアクセスできます。ここで `Sender address` と `SMTP Password` を確認できます。

:::note
前述のケースではシンプルにするため、サンプルテンプレートは 1 つのみ提供しています。他のユースケース用にテンプレートを追加してください。
"\<" と ">" で囲まれた値は、ご自身の Gmail、SendGrid、または Aliyun アカウント設定に合わせて変更し、それ以外のフィールドはそのままにしてください。
テンプレートの内容に `{{code}}` をプレースホルダーとして追加すると、送信メール内でランダムな認証コードを表示できます。
:::

### SMTP コネクターのテスト \{#test-smtp-connector}

メールアドレスを入力し、「送信」をクリックして、設定が機能するかどうかを「保存して完了」前に確認できます。

以上です。 <MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">サインイン体験でコネクターを有効化</MainSiteUrl> するのをお忘れなく。

### 設定タイプ \{#config-types}

| Name      | Type       |
| --------- | ---------- |
| host      | string     |
| port      | string     |
| fromEmail | string     |
| templates | Template[] |

| Template Properties | Type        | Enum values                                          |
| ------------------- | ----------- | ---------------------------------------------------- |
| subject             | string      | N/A                                                  |
| content             | string      | N/A                                                  |
| usageType           | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
| contentType         | enum string | 'text/plain' / 'text/html'                           |

**ユーザー名とパスワード認証オプション**

| Name | Type                   | Enum values |
| ---- | ---------------------- | ----------- |
| user | string                 | N/A         |
| pass | string                 | N/A         |
| type | enum string (OPTIONAL) | 'login'     |

[OAuth2 認証オプション](https://nodemailer.com/smtp/oauth2/) やその他の高度な設定も可能です。詳細は [こちら](https://nodemailer.com/smtp/) をご覧ください。

すべての設定可能なパラメーターを含むサンプル設定例をテキストボックス内に記載しています。ご自身の設定に合わせてご利用ください。（設定内容はご自身で責任を持ってください。一部の値はデモ用であり、実際のユースケースに適合しない場合があります。）
