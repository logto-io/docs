---
slug: /integrations/http-email
sidebar_label: HTTP Email
sidebar_custom_props:
  description: HTTP コールでメールを送信します。
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# HTTP コールを使用したメール認証の設定

公式 Logto HTTP email コネクターです。

<GuideTip />

## はじめに \{#get-started}

HTTP email コネクターを使うと、HTTP コール経由でメールを送信できます。HTTP email コネクターを利用するには、メール送信用の HTTP API を公開している独自のメールサービスが必要です。Logto はメール送信が必要な際にこの API を呼び出します。例えば、ユーザーが登録したとき、Logto は HTTP API を呼び出して認証メールを送信します。

## HTTP email コネクターの設定 \{#set-up-http-email-connector}

HTTP email コネクターを利用するには、Logto から呼び出せる HTTP エンドポイントを設定する必要があります。また、エンドポイント用の認可トークン（オプション）も設定できます。

## ペイロード \{#payload}

HTTP email コネクターは、メール送信時にエンドポイントへペイロードを送信します。これには、受信者のメールアドレス（`to`）、認証フローを示すメール [usageType](/connectors/email-connectors/email-templates#email-template-types)（`type`）、利用可能な [変数](/connectors/email-connectors/email-templates#email-template-variables)（例：認証コード、リンク、アプリケーション情報、組織情報、ユーザー情報）を含む `payload`、ユーザーの [ロケール](/connectors/email-connectors/email-templates#email-template-localization)、およびクライアントの IP アドレス（利用可能な場合）の `ip` フィールド（オプション）が含まれます。

例：

```json
{
  "to": "foo@logto.io",
  "type": "SignIn",
  "payload": {
    "code": "123456",
    "locale": "de"
  },
  "ip": "192.168.1.1"
}
```

`ip` フィールドは、レート制限、不正検出、または詳細なログ記録に利用できます。

この情報を使って、メール配信プロバイダーでメールテンプレートをカスタマイズできます。

利用可能なすべての type については [メールテンプレート](/connectors/email-connectors/email-templates#email-template-types) を参照してください。`SendMessageData` 型の完全な定義は [connector-kit](https://github.com/logto-io/logto/tree/master/packages/toolkit/connector-kit/src/types/passwordless.ts) にあります。
