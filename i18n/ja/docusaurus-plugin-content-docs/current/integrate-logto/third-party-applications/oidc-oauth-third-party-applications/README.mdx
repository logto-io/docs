import AuthorizationIcon from '@site/src/assets/authorization.svg';
import CustomizationIcon from '@site/src/assets/customization.svg';

import ConsentScreen from './assets/consent-screen.webp';

# OIDC / OAuth サードパーティアプリケーション

Logto は [OpenID Connect (OIDC)](https://auth.wiki/openid-connect) プロトコルに基づいて構築されたアイデンティティサービスであり、[認証 (Authentication)](https://auth.wiki/authentication) と [認可 (Authorization)](https://auth.wiki/authorization) の機能を提供します。これにより、OIDC サードパーティアプリの統合は従来の Web アプリケーションと同様に簡単です。

OIDC は [OAuth 2.0](https://auth.wiki/oauth-2.0) に認証 (Authentication) レイヤーを追加して構築されているため、OAuth プロトコルを使用してサードパーティアプリを統合することもできます。

## OIDC 設定を設定する \{#set-up-the-oidc-configurations}

:::note
OIDC 設定を設定する前に、[OIDC サードパーティアプリケーションを作成した](/quick-starts/third-party-oidc) ことを確認してください。
:::

1. OIDC サードパーティアプリケーションの [**リダイレクト URI**](/integrate-logto/application-data-structure#redirect-uris) を提供します。これは、Logto によって認証 (Authentication) された後にサードパーティアプリケーションがユーザーをリダイレクトする URL です。
   通常、この情報はサードパーティアプリケーションの IdP 接続設定ページで見つけることができます。

2. Logto アプリケーション詳細ページから [**クライアント ID**](/integrate-logto/application-data-structure#application-id) と [**クライアントシークレット**](/integrate-logto/application-data-structure#application-secret) を取得し、それらをサービスプロバイダーの IdP 接続設定ページに入力します。

3. Logto アプリケーション詳細ページから [**認可 (Authorization) エンドポイント**](/integrate-logto/application-data-structure#authorization-endpoint) と [**トークンエンドポイント**](/integrate-logto/application-data-structure#token-endpoint) を取得し、それらをサービスプロバイダーに提供します。
   サービスプロバイダーが OIDC ディスカバリーをサポートしている場合、Logto アプリケーション詳細ページから **ディスカバリーエンドポイント** をコピーしてサービスプロバイダーに提供するだけで済みます。サービスプロバイダーは、ディスカバリーエンドポイントから最新の OIDC 認証 (Authentication) 情報を自動的に取得できます。
   そうでない場合は、**エンドポイントの詳細を表示** ボタンをクリックして、すべての OIDC 認証 (Authentication) エンドポイントを表示します。

## OIDC サードパーティアプリケーションの同意画面 \{#consent-screen-for-oidc-third-party-applications}

セキュリティ上の理由から、すべての OIDC サードパーティアプリケーションは、Logto によって認証 (Authentication) された後、ユーザーの認可 (Authorization) のために [同意画面](/end-user-flows/consent-screen) にリダイレクトされます。

すべてのサードパーティが要求した [ユーザープロファイル権限](/integrate-logto/third-party-applications/oidc-oauth-third-party-applications/permission-management#user-permissions-user-profile-scopes)、[API リソーススコープ](/integrate-logto/third-party-applications/oidc-oauth-third-party-applications/permission-management#api-resource-permissions-api-resource-scopes)、[組織権限](/integrate-logto/third-party-applications/oidc-oauth-third-party-applications/permission-management#organization-permissions-organization-scopes)、および組織メンバーシップ情報は、同意画面に表示されます。

これらの要求された権限は、ユーザーが「認可 (Authorize)」ボタンをクリックした後にのみサードパーティアプリケーションに付与されます。

<center>
  <img src={ConsentScreen} alt="consent screen" width={500} />
</center>

## さらなるアクション \{#further-actions}

<DocCardList
  items={[
    {
      type: 'link',
      label: '権限管理',
      href: '/integrate-logto/third-party-applications/oidc-oauth-third-party-applications/permission-management',
      description: 'OIDC サードパーティアプリケーションの権限を管理する方法を学びます。',
      customProps: {
        icon: <AuthorizationIcon width={20} height={20} />,
      },
    },
    {
      type: 'link',
      label: '同意画面のブランディング',
      href: '/integrate-logto/third-party-applications/oidc-oauth-third-party-applications/consent-screen-branding',
      description:
        '同意画面の外観をカスタマイズしてブランドアイデンティティに合わせ、一貫したユーザー体験を提供します。',
      customProps: {
        icon: <CustomizationIcon width={20} height={20} />,
      },
    },
  ]}
/>

## 関連リソース \{#related-resources}

<Url href="https://blog.logto.io/logto-as-idp">
  Logto をサードパーティアイデンティティプロバイダー (IdP) として使用する
</Url>
