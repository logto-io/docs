---
description: リダイレクト URI、エンドポイント、リフレッシュ トークン、バックチャネル ログアウトなど、OIDC 認証 (Authentication) 統合のための主要なアプリケーションパラメーターを参照してください。
sidebar_position: 5
---

# アプリケーションデータ構造

## はじめに \{#introduction}

Logto における _アプリケーション_ とは、Logto プラットフォームに登録され、ユーザー情報へのアクセスやユーザーの代わりにアクションを実行する権限を与えられた特定のソフトウェアプログラムまたはサービスを指します。アプリケーションは、Logto API に対するリクエストの発信元を識別し、これらのアプリケーションにアクセスするユーザーの認証 (Authentication) および認可 (Authorization) プロセスを管理するために使用されます。

Logto のサインイン体験におけるアプリケーションの使用により、ユーザーは一元的な場所から簡単に認可されたアプリケーションにアクセスし、管理することができ、一貫性のある安全な認証 (Authentication) プロセスが提供されます。これにより、ユーザー体験が簡素化され、組織の代わりに機密情報にアクセスしたりアクションを実行したりするのが認可された個人のみであることが保証されます。

アプリケーションはまた、Logto の監査ログでユーザーの活動を追跡し、潜在的なセキュリティ脅威や侵害を特定するためにも使用されます。特定のアクションを特定のアプリケーションに関連付けることにより、Logto はデータがどのようにアクセスされ使用されているかについての詳細な洞察を提供し、組織がセキュリティおよびコンプライアンス要件をより適切に管理できるようにします。
アプリケーションを Logto と統合したい場合は、[Logto の統合](/integrate-logto) を参照してください。

## プロパティ \{#properties}

### アプリケーション ID \{#application-id}

_アプリケーション ID_ は、Logto 内でアプリケーションを識別するための一意の自動生成キーであり、OAuth 2.0 では [client id](https://www.oauth.com/oauth2-servers/client-registration/client-id-secret/) として参照されます。

### アプリケーションタイプ \{#application-types}

_アプリケーション_ は次のいずれかのアプリケーションタイプであることができます：

- **ネイティブアプリ** はネイティブ環境で実行されるアプリです。例：iOS アプリ、Android アプリ。
- **シングルページアプリ** は、ウェブブラウザで実行され、サーバーからの新しいデータでページを更新するアプリです。例：React DOM アプリ、Vue アプリ。
- **従来のウェブアプリ** は、ウェブサーバーによってページをレンダリングおよび更新するアプリです。例：JSP、PHP。
- **マシン間通信 (M2M) アプリ** は、ユーザーの操作なしにサービス間の直接通信のためにマシン環境で実行されるアプリケーションです。

### アプリケーションシークレット \{#application-secret}

_アプリケーションシークレット_ は、認証 (Authentication) システム内でアプリケーションを認証するために使用されるキーであり、特にプライベートクライアント（従来のウェブアプリおよび M2M アプリ）に対するプライベートセキュリティバリアとして機能します。

### アプリケーション名 \{#application-name}

_アプリケーション名_ は、人間が読みやすいアプリケーションの名前であり、管理コンソールに表示されます。

_アプリケーション名_ は、Logto でアプリケーションを管理する上で重要な要素であり、管理者がプラットフォーム内の個々のアプリケーションの活動を簡単に識別し追跡できるようにします。

:::note
_アプリケーション名_ は、管理コンソールにアクセスできるすべてのユーザーに表示されるため、慎重に選択する必要があります。アプリケーションの目的と機能を正確に反映し、理解しやすく認識しやすいものであるべきです。
:::

### 説明 \{#description}

アプリケーションの簡単な説明が管理コンソールのアプリケーション詳細ページに表示されます。説明は、アプリケーションの目的、機能、およびその他の関連する詳細情報を管理者に提供することを目的としています。

### リダイレクト URI \{#redirect-uris}

_リダイレクト URI_ は、アプリケーションのために事前に設定された有効なリダイレクト URI のリストです。ユーザーが Logto にサインインし、アプリケーションにアクセスしようとすると、アプリケーション設定で指定された許可された URI のいずれかにリダイレクトされます。

許可された URI リストは、認証 (Authentication) プロセス中にアプリケーションから Logto に送信される認可 (Authorization) リクエストに含まれるリダイレクト URI を検証するために使用されます。認可 (Authorization) リクエストで指定されたリダイレクト URI がアプリケーション設定の許可された URI のいずれかと一致する場合、ユーザーは認証 (Authentication) に成功した後、その URI にリダイレクトされます。リダイレクト URI が許可リストにない場合、ユーザーはリダイレクトされず、認証 (Authentication) プロセスは失敗します。

:::note
すべての有効なリダイレクト URI が Logto のアプリケーションの許可リストに追加されていることを確認することが重要です。これにより、ユーザーが認証 (Authentication) 後にアプリケーションに正常にアクセスできるようになります。
:::

[Redirection endpoint](https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2) を参照して、詳細情報を確認できます。

<Url href="https://blog.logto.io/redirect-uri-in-authorization-code-flow">
  OIDC における認可コードフローでのリダイレクト URI の理解
</Url>

### サインアウト後のリダイレクト URI \{#post-sign-out-redirect-uris}

_サインアウト後のリダイレクト URI_ は、Logto からサインアウトした後にユーザーをリダイレクトするためにアプリケーションに事前に設定された有効な URI のリストです。

ログアウトのための許可された _サインアウト後のリダイレクト URI_ の使用は、OIDC の RP-Initiated (Relying Party Initiated) Logout 仕様の一部です。この仕様は、ユーザーのログアウトリクエストを開始するための標準化された方法を提供し、ユーザーがサインアウトした後に事前に設定されたエンドポイントにリダイレクトすることを含みます。

ユーザーが Logto からサインアウトすると、そのセッションは終了し、アプリケーション設定で指定された許可された URI のいずれかにリダイレクトされます。これにより、ユーザーがサインアウトした後に認可された有効なエンドポイントにのみ誘導され、未知または未確認のエンドポイントにユーザーをリダイレクトすることに関連する不正アクセスやセキュリティリスクを防ぐことができます。

[RP-initiated logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html#RPLogout) を参照して、詳細情報を確認できます。

### CORS 許可されたオリジン \{#cors-allowed-origins}

_CORS (クロスオリジンリソース共有) 許可されたオリジン_ は、アプリケーションが Logto サービスにリクエストを行うことができる許可されたオリジンのリストです。許可リストに含まれていないオリジンは、Logto サービスにリクエストを行うことができません。

CORS 許可されたオリジンリストは、未承認のドメインからの Logto サービスへのアクセスを制限し、クロスサイトリクエストフォージェリ (CSRF) 攻撃を防ぐのに役立ちます。Logto でアプリケーションの許可されたオリジンを指定することにより、サービスは承認されたドメインのみがサービスにリクエストを行うことができるようにします。

:::note
許可されたオリジンリストには、アプリケーションが提供されるオリジンを含める必要があります。これにより、アプリケーションからのリクエストが許可され、未承認のオリジンからのリクエストがブロックされます。
:::

### OpenID プロバイダー構成エンドポイント \{#openid-provider-configuration-endpoint}

[OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderConfigurationRequest) のエンドポイント。

### 認可 (Authorization) エンドポイント \{#authorization-endpoint}

_認可 (Authorization) エンドポイント_ は OIDC 用語であり、ユーザーの認証 (Authentication) プロセスを開始するために使用される必須のエンドポイントです。Logto プラットフォームに登録された保護されたリソースまたはアプリケーションにユーザーがアクセスしようとすると、_認可 (Authorization) エンドポイント_ にリダイレクトされ、アイデンティティを認証 (Authentication) し、要求されたリソースへのアクセスを認可 (Authorization) します。

[Authorization Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#AuthorizationEndpoint) を参照して、詳細情報を確認できます。

### トークンエンドポイント \{#token-endpoint}

_トークンエンドポイント_ は OIDC 用語であり、OIDC クライアントが OIDC プロバイダーからアクセス トークン、ID トークン、またはリフレッシュ トークンを取得するために使用される Web API エンドポイントです。

OIDC クライアントがアクセス トークンまたは ID トークンを取得する必要がある場合、通常は認可コードまたはリフレッシュ トークンである認可 (Authorization) グラントを使用してトークンエンドポイントにリクエストを送信します。トークンエンドポイントは認可 (Authorization) グラントを検証し、グラントが有効であればクライアントにアクセス トークンまたは ID トークンを発行します。

[Token Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#TokenEndpoint) を参照して、詳細情報を確認できます。

### ユーザー情報エンドポイント \{#userinfo-endpoint}

OpenID Connect の [UserInfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo)。

### 常にリフレッシュ トークンを発行する \{#always-issue-refresh-token}

_利用可能性: 従来のウェブ、SPA_

有効にすると、Logto は認証 (Authentication) リクエストに `prompt=consent` が提示されているかどうか、またはスコープに `offline_access` が提示されているかどうかに関係なく、常にリフレッシュ トークンを発行します。

ただし、これは OpenID Connect と互換性がなく、問題を引き起こす可能性があるため、必要でない限り（通常、リフレッシュ トークンを必要とする一部のサードパーティ OAuth 統合に役立ちます）、この方法は推奨されません。

### リフレッシュ トークンをローテーションする \{#rotate-refresh-token}

_デフォルト: `true`_

有効にすると、Logto は次の条件下でトークンリクエストに対して新しいリフレッシュ トークンを発行します：

- リフレッシュ トークンが 1 年間ローテーションされている場合（新しいものを発行して TTL を延長した場合）；**または**
- リフレッシュ トークンが有効期限に近い場合（元の Time to Live (TTL) の >=70% が経過した場合）；**または**
- クライアントがパブリッククライアントである場合、例：ネイティブアプリケーションまたはシングルページアプリケーション (SPA)。

:::note
パブリッククライアントの場合、この機能が有効になっていると、クライアントがリフレッシュ トークンを使用して新しいアクセス トークンを交換するたびに、新しいリフレッシュ トークンが常に発行されます。
これらのパブリッククライアントに対して機能をオフにすることもできますが、セキュリティ上の理由から有効にしておくことを強くお勧めします。
:::

<Url href="https://blog.logto.io/understanding-refresh-token-rotation">
  リフレッシュ トークンのローテーションの理解
</Url>

### リフレッシュ トークンの有効期間 (TTL) （日単位）\{#refresh-token-time-to-live-ttl-in-days}

_利用可能性: SPA ではない; デフォルト: 14 日_

リフレッシュ トークンが新しいアクセス トークンを要求するために使用できる期間であり、有効期限が切れて無効になるまでの期間です。トークンリクエストは、リフレッシュ トークンの TTL をこの値に延長します。

通常、より低い値が好まれます。

注意: セキュリティ上の理由から、SPA（シングルページアプリケーション）では TTL の更新は利用できません。これは、Logto がトークンリクエストを通じて TTL を延長しないことを意味します。ユーザー体験を向上させるために、「リフレッシュ トークンをローテーションする」機能を有効にし、必要に応じて Logto が新しいリフレッシュ トークンを発行できるようにすることができます。

### バックチャネルログアウト URI \{#backchannel-logout-uri}

OpenID Connect のバックチャネルログアウトエンドポイント。[フェデレーテッドサインアウト: バックチャネルログアウト](#) を参照して、詳細情報を確認できます。

### カスタムデータ \{#custom-data}

事前定義されたアプリケーションプロパティにリストされていない追加のカスタムアプリケーション情報であり、ユーザーはビジネス固有の設定や構成など、特定のニーズに応じて独自のカスタムデータフィールドを定義できます。
