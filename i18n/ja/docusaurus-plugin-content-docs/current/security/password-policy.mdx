---
slug: /security/password-policy
sidebar_label: パスワードポリシー
sidebar_position: 1
---

# パスワードポリシー

Logto では、パスワードの作成や更新方法に応じてパスワードポリシーの適用方法が異なります：

- [標準のサインイン体験](/end-user-flows/sign-up-and-sign-in/sign-up)、[体験 API](/customization/bring-your-ui)、[Account API](/end-user-flows/account-settings/by-account-api#update-users-password) などのエンドユーザーフローでは、常に現在の [パスワードポリシー](#set-up-password-policy) が適用されます。
- 管理者が Management API の [`patch /api/users/{userId}/password`](https://openapi.logto.io/operation/operation-updateuserpassword) を通じて操作する場合は例外となり、必要に応じてポリシーチェックなしで資格情報のプロビジョニングやリセットが可能です。
- 既存のパスワードが現在のルールに準拠しているか監査するには、[`POST /api/sign-in-exp/default/check-password`](https://openapi.logto.io/operation/operation-checkpasswordwithdefaultsigninexperience) を呼び出し、返されたバリデーション結果に基づいて対応します。詳細は [パスワード準拠チェック](#password-compliance-check) をご覧ください。

## パスワードポリシーの設定 \{#set-up-password-policy}

新規ユーザーやパスワードを更新するユーザーに対して、パスワードの強度要件を強制するためのパスワードポリシーを設定できます。<CloudLink to="/security/password-policy"> コンソール > セキュリティ > パスワードポリシー</CloudLink>
でパスワードポリシーの設定を行ってください。

1. **最小パスワード長**：パスワードに必要な最小文字数を設定します。（NIST は少なくとも 8 [文字](https://pages.nist.gov/800-63-3/sp800-63b.html#sec5) を推奨しています）
2. **必要な文字種の最小数**：パスワードに必要な文字種の最小数を設定します。利用可能な文字種は以下の通りです：
   1. 大文字：`(A-Z)`
   2. 小文字：`(a-z)`
   3. 数字：`(0-9)`
   4. 記号：``(!"#$%&'()\*+,-./:;<>=?@[]^\_`|{}~ )``
3. **漏洩履歴チェック**：この設定を有効にすると、過去にデータ漏洩で公開されたパスワードを拒否します。（[Have I Been Pwned](https://haveibeenpwned.com/Passwords) により提供）
4. **繰り返しチェック**：この設定を有効にすると、同じ文字が繰り返されているパスワードを拒否します。（例：「11111111」や「password123」など）
5. **ユーザー情報チェック**：この設定を有効にすると、ユーザー名、メールアドレス、電話番号などのユーザー情報を含むパスワードを拒否します。
6. **カスタムワード**：パスワードに含めたくないカスタムワード（大文字小文字を区別しない）をリストで指定できます。

## パスワード準拠チェック \{#password-compliance-check}

Logto でパスワードポリシーを更新した後も、既存ユーザーは現在のパスワードでサインインできます。新規作成されたアカウントのみが更新されたポリシーに従う必要があります。

より強力なセキュリティを実現するために、`POST /api/sign-in-exp/default/check-password` [API](https://openapi.logto.io/operation/operation-checkpasswordwithdefaultsigninexperience) を利用して、ユーザーのパスワードがデフォルトのサインイン体験で定義された現在のポリシーを満たしているか確認できます。満たしていない場合は、[Account API](/end-user-flows/account-settings/by-account-api) を使ったカスタムフローでパスワードの更新を促すことができます。

## 関連リソース \{#related-resources}

<Url href="/user-management/manage-users">ユーザー管理</Url>
<Url href="/end-user-flows/sign-up-and-sign-in">サインアップ / サインイン</Url>
<Url href="/end-user-flows/account-settings/by-account-api">Account API によるアカウント設定</Url>
<Url href="https://blog.logto.io/design-your-password-policy">パスワードポリシーの設計</Url>
