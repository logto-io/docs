---
id: built-in-email-service
title: Logto 組み込みメールサービス
sidebar_label: Logto 組み込みメールサービス
sidebar_position: 2
---

Logto は、以下のシナリオで便利に利用できる組み込みメールサービスを提供しています：

1. Logto のメールログイン体験を素早く試したりテストしたい場合。
2. オンライン製品で直接利用する場合。主に `logto.email` を送信元メールドメインとして利用しても問題ない新興スタートアップ向けです。

Logto メールサービスの特徴：

- **無料で利用可能**：完全に無料で、1 日あたりのメール送信数制限もありません。コスト削減につながります。
- **手間いらず**：サードパーティのメールサービスプロバイダーとの設定は不要です。メールテンプレートの基本的なブランディング情報をカスタマイズするだけで利用できます。独自のブランディング情報がまだない場合でも、数クリックで利用開始できます。
- **確実な配信**：Logto のメールサービスに基づき、安定したサービスと信頼性の高いメール配信が得られ、ユーザーが製品にアクセスできるようになります。

ただし、便利な一方で、いくつかの制限事項があります：

1. メールは固定アドレス `no-reply@logto.email` から送信されます。
2. メールにリンクやその他のカスタムコンテンツを追加することはできません。

ビジネスニーズの変化に応じて、後から他のメールサービスプロバイダーを利用することも可能です。Logto では、[すぐに使えるメールサービスコネクター](/connectors/email-connectors#popular-email-providers) を多数用意しており、[SMTP](/integrations/smtp)、[HTTP](/integrations/http-email)、[WebHook](/developers/webhooks) トリガーによるメール送信もサポートしています。必ず最適な方法が見つかります。

:::note
Logto 組み込み無料メールサービスは現在 [Cloud](https://cloud.logto.io/) ユーザーのみ利用可能です。オープンソース版のユーザーは、メールログイン用のメールサービスプロバイダーを自由に設定できます。
:::

## 設定手順 \{#configuration-steps}

Logto メールサービスを設定するには、以下の手順に従ってください：

1. <CloudLink to="/connectors/passwordless">コネクター > メールおよび SMS コネクター</CloudLink>
   にアクセスします。
2. 新しいメールコネクターを追加するには、「**セットアップ**」ボタンをクリックし、「**Logto メールサービス**」コネクターを選択します。
3. 「Logto メールサービス」コネクターが正常に作成されたら、メールテンプレートに表示される基本的なブランディング情報をカスタマイズできます。
4. 変更後は、保存する前に必ずテストメールテンプレートを自分のメールアドレスに送信してください。

カスタマイズ可能な項目：

- **送信元メール**：送信元メールは `no-reply@logto.email` に固定されており、変更できません。
- **送信者名**：ブランド名を送信者名として設定し、ユーザーに認識されやすくします。
- **会社情報**：会社名、住所、郵便番号などを表示し、ユーザーの信頼性向上やコンプライアンス要件を満たします。_URL の記載はできません。_
- **アプリロゴ**：アプリのブランドロゴをアップロードし、ユーザーが受信するメールでブランド価値をアピールできます。

## 統一メールテンプレート \{#unified-email-templates}

Logto メールサービスは、特定の認証 (Authentication) シナリオに合わせた統一メールテンプレートを使用しています：

| 用途                     | シナリオ                                                                                                                                                                                     |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Register                 | ユーザーがメールでアカウントを作成し、Logto から送信された認証コードを入力して認証 (Authentication) します。                                                                                 |
| SignIn                   | ユーザーがメールでサインインし、パスワードの代わりに認証コードを入力して認証 (Authentication) します。                                                                                       |
| ForgotPassword           | ログイン時にパスワードを忘れた場合、既に Logto で認証 (Authentication) 済みのメールを使って本人確認ができます。                                                                              |
| Generic                  | このテンプレートは、コネクター設定のテストなど、さまざまなシナリオの汎用バックアップオプションとして利用できます。                                                                           |
| OrganizationInvitation   | このテンプレートを使って、ユーザーに組織への招待リンクを送信します。                                                                                                                         |
| UserPermissionValidation | アプリ利用中に、銀行振込やリソース削除、会員解約などリスクの高い操作時に追加認証 (Authentication) が必要な場合、このテンプレートで認証コードメールの内容を定義できます。                     |
| BindNewIdentifier        | ユーザーがプロフィールを変更する際、現在のアカウントにメールアドレスを紐付ける場合、このテンプレートで認証メールの内容をカスタマイズできます。                                               |
| MfaVerification          | メール多要素認証 (MFA) が有効な場合、多要素認証プロセス中に認証コードを送信するためにこのテンプレートが使用されます。                                                                        |
| BindMfa                  | メール多要素認証 (MFA) が有効な場合、MFA 用メール認証コードの設定時にこのテンプレートが使用されます。ユーザーがメールアドレスを MFA 要素として紐付け・設定する際に認証コードを受け取ります。 |

「Register」用途でカスタムブランド情報を設定した場合のメールテンプレート例：

<img
  src="/img/assets/logto-email-service-template-sample.png"
  alt="Logto 組み込みメールサービスのサンプル"
/>

カスタムブランド情報を設定しない場合でも、デフォルトの表示とレイアウトでメールテンプレートを利用できます：

<img
  src="/img/assets/logto-email-service-template-sample-without-branding.png"
  alt="Logto 組み込みメールサービスのサンプル（ブランディングなし）"
/>

### ローカライズ対応 \{#localization}

Logto の組み込みメールサービスは多言語対応です。ユーザーのサインイン体験設定を自動検出し、ユーザーの優先言語でメールを送信します。

Management API を通じて組織招待メールを送信する場合、リクエストペイロードの `locale` パラメーターで言語を指定できます。例：

```json
{
  "inviterId": "inviter-user-id",
  "invitee": "invitee-email-address",
  "expiresAt": "epoch-timestamp",
  "organizationId": "organization-id",
  "messagePayload": {
    "link": "https://your-app.com/invite-accept?invitation-id=abcd1234",
    // highlight-start
    "locale": "fr"
    // highlight-end
  }
}
```

## よくある質問 \{#faqs}

<details>
<summary>

### Logto メールサービスでカスタム CSS や HTML を追加できますか？ \{#is-it-possible-to-add-custom-css-or-html-to-logto-email-service}

</summary>

Logto の組み込みメールサービスでは、カスタム CSS や HTML を追加できません。カスタマイズできるのは汎用的なブランディング要素のみです。この制限は、すべてのテナントが同じ IP アドレスと送信元アドレスを共有しているため、組み込みメールサービスの安定性を維持する目的で設けられています。詳細は「[メール配信を改善する要因](https://blog.logto.io/verification-email-delivery#factors-to-improve-email-delivery)」をご参照ください。

メールテンプレートをカスタマイズしたい場合は、AWS Direct Mail、SendGrid、Mailgun、Postmark、SMTP など他のメールコネクターの利用をおすすめします。

</details>
