---
id: built-in-email-service
title: Logto 組み込みメールサービス
sidebar_label: Logto 組み込みメールサービス
sidebar_position: 2
---

Logto は、以下のシナリオで便利に使える組み込みメールサービスを提供しています：

1. Logto のメールログイン体験を素早く試したりテストしたい場合。
2. オンラインプロダクトで直接利用したい場合。主に `logto.email` を送信元メールドメインとして利用しても問題ない新興スタートアップ向けです。

Logto メールサービスの特徴：

- **無料で利用可能**：完全無料で、1 日あたりのメール送信数制限もありません。コスト削減につながります。
- **手間いらず**：サードパーティのメールサービスプロバイダーとの設定は不要です。メールテンプレートの基本的なブランディング情報をカスタマイズするだけで利用できます。独自のブランディング情報がまだない場合でも、数クリックで利用開始できます。
- **確実な配信**：Logto のメールサービスを利用することで、安定したサービスと信頼性の高いメール配信が得られ、ユーザーがプロダクトにアクセスできるようになります。

ただし、便利な一方で、以下の制限があります：

1. メールは固定アドレス `no-reply@logto.email` から送信されます。
2. メールにリンクやその他のカスタムコンテンツを追加することはできません。

ビジネスの成長やニーズの変化に応じて、後から他のメールサービスプロバイダーを利用することも可能です。Logto では [すぐに使えるメールサービスコネクター](/connectors/email-connectors#popular-email-providers) を多数用意しており、[SMTP](/integrations/smtp)、[HTTP](/integrations/http-email)、[WebHook](/developers/webhooks) トリガーによるメール送信もサポートしています。必ず最適な方法が見つかります。

:::note
Logto 組み込み無料メールサービスは現在 [Cloud](https://cloud.logto.io/) ユーザーのみ利用可能です。オープンソース版のユーザーは、メールログイン用に任意のメールサービスプロバイダーを設定できます。
:::

## 設定手順 \{#configuration-steps}

Logto メールサービスを設定するには、以下の手順に従ってください：

1. <CloudLink to="/connectors/passwordless">
     コネクター > メールおよび SMS コネクター
   </CloudLink> にアクセスします。
2. 新しいメールコネクターを追加するには、「**セットアップ**」ボタンをクリックし、「**Logto メールサービス**」コネクターを選択します。
3. 「Logto メールサービス」コネクターが正常に作成されたら、メールテンプレートに表示される基本的なブランディング情報をカスタマイズできます。
4. 変更後は、保存する前に必ずテストメールテンプレートを自分のメールアドレスに送信してください。

カスタマイズ可能な項目：

- **送信元メールアドレス**：送信元メールは `no-reply@logto.email` に固定されており、変更できません。
- **送信者名**：ブランド名を送信者名として設定し、ユーザーに認識されやすくします。
- **会社情報**：会社名、住所、郵便番号などを表示し、ユーザーの信頼性向上やコンプライアンス要件を満たします。_URL の記載はできません。_
- **アプリロゴ**：アプリのブランドロゴをアップロードすることで、ユーザーが受信するメールにブランド価値をアピールできます。

## 統一メールテンプレート \{#unified-email-templates}

Logto メールサービスは、特定の認証 (Authentication) シナリオに合わせた統一メールテンプレートを使用します：

| 用途                     | シナリオ                                                                                                                                                                                                                                                        |
| ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Register                 | ユーザーがメールアドレスでアカウントを作成し、Logto から送信された認証コードを入力して認証 (Authentication) します。                                                                                                                                            |
| SignIn                   | ユーザーがメールアドレスでサインインし、パスワードの代わりに認証コードを入力して認証 (Authentication) します。                                                                                                                                                  |
| ForgotPassword           | ログイン時にパスワードを忘れた場合、Logto ですでに認証済みのメールアドレスを使って本人確認ができます。                                                                                                                                                          |
| Generic                  | このテンプレートは、さまざまなシナリオの一般的なバックアップオプションとして利用できます。コネクター設定のテストなどにも使えます。                                                                                                                              |
| OrganizationInvitation   | このテンプレートを使って、ユーザーに組織への招待リンクを送信します。                                                                                                                                                                                            |
| UserPermissionValidation | アプリ利用中に、銀行振込や利用中リソースの削除、会員解約など、リスクの高い操作時に追加のユーザー認証 (Authentication) が必要な場合があります。`UserPermissionValidation` テンプレートで、こうした状況でユーザーが受け取るメール認証コードの内容を定義できます。 |
| BindNewIdentifier        | ユーザーがプロフィールを変更する際、現在のアカウントにメールアドレスを紐付ける場合に `BindNewIdentifier` テンプレートで認証メールの内容をカスタマイズできます。                                                                                                 |
| MfaVerification          | メール多要素認証 (MFA) が有効な場合、このテンプレートで多要素認証 (MFA) プロセス中にユーザーへ認証コードを送信します。                                                                                                                                          |
| BindMfa                  | メール多要素認証 (MFA) が有効な場合、このテンプレートで MFA 用のメール認証コードを設定します。ユーザーが MFA 要素としてメールアドレスを紐付け・設定する際にこの認証コードを受け取ります。                                                                       |

「Register」用途でカスタムブランド情報を設定した場合のメールテンプレート例：

<img
  src="/img/assets/logto-email-service-template-sample.png"
  alt="Logto 組み込みメールサービスのサンプル"
/>

カスタムブランド情報を設定しない場合でも、デフォルトの表示とレイアウトでメールテンプレートを利用できます：

<img
  src="/img/assets/logto-email-service-template-sample-without-branding.png"
  alt="Logto 組み込みメールサービスのサンプル（ブランドなし）"
/>

## よくある質問 \{#faqs}

<details>
<summary>

### Logto メールサービスでカスタム CSS や HTML を追加できますか？ \{#is-it-possible-to-add-custom-css-or-html-to-logto-email-service}

</summary>

Logto の組み込みメールサービスでは、カスタム CSS や HTML はサポートされていません。変更できるのは汎用的なブランディング要素のみです。すべてのテナントが同じ IP アドレスと送信元アドレスを共有しているため、組み込みメールサービスの安定性を維持する目的でこの制限があります。詳細は「[メール配信を改善する要因](https://blog.logto.io/verification-email-delivery#factors-to-improve-email-delivery)」をご覧ください。

メールテンプレートをカスタマイズしたい場合は、AWS Direct Mail、SendGrid、Mailgun、Postmark、SMTP など他のメールコネクターの利用をおすすめします。

</details>
