---
id: custom-domain
title: โดเมนแบบกำหนดเอง
sidebar_position: 4
---

# โดเมนแบบกำหนดเอง

Logto tenant ของคุณมาพร้อมกับโดเมนฟรีเริ่มต้น `{{tenant-id}}.app.logto` อย่างไรก็ตาม คุณสามารถยกระดับประสบการณ์ผู้ใช้และการจดจำแบรนด์ของคุณได้ด้วยการใช้โดเมนแบบกำหนดเอง เช่น `auth.example.com`

โดเมนแบบกำหนดเองของคุณจะถูกใช้ในหลายฟังก์ชัน เช่น:

- URL ของ [หน้าลงชื่อเข้าใช้และลงทะเบียน](/end-user-flows/sign-up-and-sign-in)
- URL สำหรับเชื่อมโยง [Passkey](/end-user-flows/mfa/webauthn) (การเปลี่ยนโดเมนหลังจากที่ผู้ใช้เชื่อมโยง Passkey แล้ว อาจทำให้การยืนยันตัวตนของพวกเขาถูกบล็อก)
- Callback URI สำหรับ [ตัวเชื่อมต่อโซเชียล](/connectors/social-connectors) หรือ [ตัวเชื่อมต่อ SSO สำหรับองค์กร](/connectors/enterprise-connectors)
- [SDK endpoint](/integrate-logto/application-data-structure#openid-provider-configuration-endpoint) สำหรับการเชื่อมต่อ Logto กับแอปพลิเคชันของคุณ

:::note
การเปลี่ยนโดเมนหลังจากเผยแพร่บริการของคุณแล้ว อาจทำให้เกิดปัญหาได้ เนื่องจากโค้ดแอปพลิเคชันและการเชื่อมต่อของคุณอาจยังอ้างอิงโดเมนเดิมอยู่ เพื่อให้การเปลี่ยนผ่านเป็นไปอย่างราบรื่น **ควรกำหนดค่าโดเมนแบบกำหนดเองตั้งแต่เริ่มต้น** ขณะสร้าง Production tenant
:::

## กำหนดค่าโดเมนแบบกำหนดเองใน Console \{#configure-custom-domain-in-console}

เพื่อเพิ่มโดเมนแบบกำหนดเองใหม่ใน Logto Console ให้ทำตามขั้นตอนดังนี้:

1. ไปที่ <CloudLink to="/tenant-settings/domains">Console > การตั้งค่า > โดเมน</CloudLink>
2. ในส่วน "Custom Domain" ให้กรอกชื่อโดเมนของคุณแล้วคลิก "add domain"

   <img src="/img/assets/custom-domain-section.jpeg" alt="Add domain" />

3. คัดลอกค่า CNAME ในตาราง แล้วไปที่ผู้ให้บริการ DNS ของโดเมนคุณเพื่อเพิ่มเรคคอร์ด

   <img src="/img/assets/custom-domain-processing.jpeg" alt="Custom domain processing" />

4. รอการตรวจสอบและกระบวนการ SSL
   1. เราจะตรวจสอบเรคคอร์ดของคุณโดยอัตโนมัติทุก 10 วินาทีจนกว่าโดเมนแบบกำหนดเองจะถูกเพิ่ม เพียงตรวจสอบให้แน่ใจว่าชื่อโดเมนหรือ DNS Records ที่กรอกถูกต้อง
   2. การตรวจสอบมักใช้เวลาเพียงไม่กี่นาที แต่ในบางกรณีอาจใช้เวลาสูงสุด 24 ชั่วโมง ขึ้นอยู่กับผู้ให้บริการ DNS คุณสามารถเปลี่ยนหน้าไปทำอย่างอื่นระหว่างรอได้

## การแก้ไขปัญหา \{#troubleshooting}

<details>
<summary>

### ปัญหาใบรับรอง SSL \{#ssl-certificate-issues}

</summary>

หากคุณพบปัญหาใบรับรอง SSL ขณะตั้งค่าโดเมนแบบกำหนดเอง อาจเกี่ยวข้องกับเรคคอร์ด CAA ในการตั้งค่า DNS ของคุณ เรคคอร์ด CAA จะระบุว่า Certificate Authority (CA) ใดได้รับอนุญาตให้ออกใบรับรองสำหรับโดเมนของคุณ หากคุณใช้เรคคอร์ด CAA คุณจะต้องอนุญาตทั้ง "letsencrypt.org" และ "pki.goog" เพื่อให้ Logto สามารถออกใบรับรอง SSL ได้

สำหรับการแก้ไขปัญหาและรายละเอียดเพิ่มเติมเกี่ยวกับเรคคอร์ด CAA โปรดดู [เอกสาร Cloudflare](https://developers.cloudflare.com/ssl/edge-certificates/caa-records/) เกี่ยวกับ CAA Records

</details>

<details>
<summary>

### ข้อผิดพลาด "The hostname is associated with a held zone" \{#the-hostname-is-associated-with-a-held-zone-error}

</summary>

หากคุณพบข้อความแสดงข้อผิดพลาด "The hostname is associated with a held zone, please contact the owner to have the hold removed" ขณะเพิ่มโดเมนแบบกำหนดเอง หมายความว่าโดเมนนั้นอยู่ใน Cloudflare zone แล้ว และถูกตั้งสถานะเป็น "Zone Hold" ดู [เอกสาร Cloudflare](https://developers.cloudflare.com/fundamentals/setup/account/account-security/zone-holds/) สำหรับข้อมูลเพิ่มเติม

ในการแก้ไขปัญหานี้ คุณต้องปลดล็อก zone hold ดูวิธีการได้จากลิงก์ข้างต้น

</details>

## การใช้งานโดเมนแบบกำหนดเอง \{#use-custom-domain}

เมื่อคุณกำหนดค่าเสร็จแล้ว ทั้งชื่อโดเมนแบบกำหนดเองและชื่อโดเมน Logto เริ่มต้นจะพร้อมใช้งานสำหรับ tenant ของคุณ อย่างไรก็ตาม คุณต้องตั้งค่าบางอย่างเพิ่มเติมเพื่อเปิดใช้งานโดเมนแบบกำหนดเอง

:::note

ในบทความนี้ สมมติว่าโดเมนแบบกำหนดเองของคุณคือ `auth.example.com`

:::

### การอัปเดต SDK endpoint สำหรับแอปพลิเคชัน \{#updating-the-sdk-endpoint-for-applications}

ปรับเปลี่ยนโค้ดเริ่มต้นของ Logto SDK โดยแก้ไขชื่อโดเมนของ endpoint

```typescript
const client = new LogtoClient({
  ...,// ตัวเลือกอื่น ๆ
  endpoint: 'https://auth.example.com',
});
```

### การแก้ไข auth endpoints สำหรับแอปพลิเคชันอื่น ๆ \{#modifying-auth-endpoints-for-other-applications}

หากคุณมีแอปพลิเคชันที่ไม่ได้ใช้ Logto SDK จำเป็นต้องอัปเดต auth endpoints ของแอปเหล่านั้น

คุณสามารถค้นหา auth endpoints ได้ที่ URL มาตรฐานนี้:

```
https://auth.example.com/oidc/.well-known/openid-configuration
```

### การอัปเดต callback URI ของตัวเชื่อมต่อโซเชียล \{#updating-the-social-connectors-callback-uri}

callback URI ของตัวเชื่อมต่อโซเชียลจะถูกอัปเดตโดยอัตโนมัติหากผู้ใช้ของคุณใช้โดเมนแบบกำหนดเอง คุณจำเป็นต้องไปที่ developer console ของผู้ให้บริการโซเชียลเพื่ออัปเดต callback URI

เมื่อผู้ใช้ของคุณใช้โดเมนแบบกำหนดเอง callback URI ของตัวเชื่อมต่อโซเชียลจะใช้โดเมนใหม่นี้ ดังนั้นคุณต้องเข้าไปที่ developer console ของผู้ให้บริการโซเชียลเพื่ออัปเดต callback URI ด้วยตนเอง
