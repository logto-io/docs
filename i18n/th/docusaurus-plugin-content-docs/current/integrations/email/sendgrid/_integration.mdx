## ลงทะเบียนบัญชี SendGrid \{#register-sendgrid-account}

สร้างบัญชีใหม่ที่ [เว็บไซต์ SendGrid](https://app.sendgrid.com/) คุณสามารถข้ามขั้นตอนนี้ได้หากมีบัญชีอยู่แล้ว

## ยืนยันผู้ส่ง \{#verify-senders}

ไปที่ [หน้า SendGrid console](https://app.sendgrid.com/) และลงชื่อเข้าใช้ด้วยบัญชี SendGrid ของคุณ

ผู้ส่ง (Senders) หมายถึงที่อยู่อีเมลที่เราจะใช้ส่งอีเมลรหัสยืนยัน เพื่อส่งอีเมลผ่านเซิร์ฟเวอร์อีเมลของ SendGrid คุณต้องยืนยันผู้ส่งอย่างน้อยหนึ่งราย

เริ่มจาก [หน้า SendGrid console](https://app.sendgrid.com/) ไปที่ "Settings" -> "Sender Authentication" จากแถบด้านข้าง

แนะนำให้ใช้ Domain Authentication แต่ไม่จำเป็นต้องทำเสมอไป คุณสามารถคลิก "Get started" ในการ์ด "Authenticate Your Domain" และทำตามคำแนะนำเพื่อเชื่อมโยงและยืนยันผู้ส่งกับ SendGrid

โดยการคลิกปุ่ม "Verify a Single Sender" ในแผงควบคุม คุณจะพบกับฟอร์มที่ต้องกรอกข้อมูลสำคัญเพื่อสร้างผู้ส่งใหม่ ให้ทำตามคำแนะนำ กรอกข้อมูลให้ครบถ้วน แล้วกดปุ่ม "Create"

หลังจากสร้าง single sender แล้ว จะมีอีเมลพร้อมลิงก์ยืนยันส่งไปยังอีเมลของผู้ส่งนั้น ให้ไปที่กล่องจดหมายของคุณ ค้นหาอีเมลยืนยัน และคลิกลิงก์ในอีเมลเพื่อยืนยัน single sender ตอนนี้คุณสามารถส่งอีเมลผ่านตัวเชื่อมต่อ SendGrid โดยใช้ผู้ส่งที่เพิ่งยืนยันได้แล้ว

## สร้าง API keys \{#create-api-keys}

เริ่มจาก [หน้า SendGrid console](https://app.sendgrid.com/) ไปที่ "Settings" -> "API Keys" จากแถบด้านข้าง

คลิก "Create API Key" ที่มุมขวาบนของหน้า API Keys ตั้งชื่อ API key และปรับแต่ง "API Key Permission" ตามกรณีการใช้งานของคุณ ต้องตั้งค่า `Full Access` หรือ `Restricted Access` ที่มีสิทธิ์เต็มสำหรับ Mail Send ก่อนจึงจะสามารถส่งอีเมลด้วย API key นี้ได้

API Key จะแสดงบนหน้าจอทันทีหลังจากคุณดำเนินการ _Create API Key_ เสร็จสิ้น คุณควรบันทึก API Key นี้ไว้ในที่ปลอดภัย เพราะนี่เป็นโอกาสเดียวที่คุณจะเห็นมัน

## กำหนดค่าตัวเชื่อมต่อของคุณ \{#configure-your-connector}

กรอกฟิลด์ `apiKey` ด้วย API Key ที่สร้างในขั้นตอน "สร้าง API keys"

กรอกฟิลด์ `fromEmail` และ `fromName` ด้วย _From Address_ และ _Nickname_ ของผู้ส่ง คุณสามารถดูรายละเอียดของผู้ส่งได้ที่ ["Sender Management" page](https://mc.sendgrid.com/senders) `fromName` เป็นตัวเลือก (OPTIONAL) คุณสามารถข้ามได้

คุณสามารถเพิ่มเทมเพลตตัวเชื่อมต่ออีเมล SendGrid หลายรายการสำหรับกรณีต่าง ๆ ได้ นี่คือตัวอย่างการเพิ่มเทมเพลตเดียว:

- กรอกฟิลด์ `subject` ซึ่งจะเป็นหัวข้อของอีเมล
- กรอกฟิลด์ `content` ด้วยข้อความประเภท string ตามต้องการ อย่าลืมเว้นที่ว่างสำหรับ `{{code}}` ซึ่งเป็นรหัสยืนยันแบบสุ่ม
- กรอกฟิลด์ `usageType` ด้วยค่า `Register`, `SignIn`, `ForgotPassword`, `Generic` ตามกรณีการใช้งาน
- กรอกฟิลด์ `type` ด้วยค่า `text/plain` หรือ `text/html` ตามประเภทเนื้อหา

เพื่อเปิดใช้งาน user flows ได้ครบถ้วน จำเป็นต้องมีเทมเพลตที่มี usageType เป็น `Register`, `SignIn`, `ForgotPassword` และ `Generic`

นี่คือตัวอย่าง JSON ของเทมเพลตตัวเชื่อมต่อ SendGrid

```jsonc
[
  {
    "subject": "<register-template-subject>",
    "content": "<Logto: รหัสยืนยันของคุณคือ {{code}}. (register template)>",
    "usageType": "Register",
    "type": "text/plain",
  },
  {
    "subject": "<sign-in-template-subject>",
    "content": "<Logto: รหัสยืนยันของคุณคือ {{code}}. (sign-in template)>",
    "usageType": "SignIn",
    "type": "text/plain",
  },
  {
    "subject": "<forgot-password-template-subject>",
    "content": "<Logto: รหัสยืนยันของคุณคือ {{code}}. (forgot-password template)>",
    "usageType": "ForgotPassword",
    "type": "text/plain",
  },
  {
    "subject": "<generic-template-subject>",
    "content": "<Logto: รหัสยืนยันของคุณคือ {{code}}. (generic template)>",
    "usageType": "Generic",
    "type": "text/plain",
  },
]
```

### ทดสอบตัวเชื่อมต่ออีเมล SendGrid \{#test-sendgrid-email-connector}

คุณสามารถกรอกที่อยู่อีเมลแล้วคลิก "Send" เพื่อตรวจสอบว่าการตั้งค่าสามารถใช้งานได้ก่อนคลิก "Save and Done"

เรียบร้อยแล้ว อย่าลืม <MainSiteUrl href="/connectors/email-connectors/#enable-email-sign-up-or-sign-in">เปิดใช้งานตัวเชื่อมต่อในประสบการณ์การลงชื่อเข้าใช้</MainSiteUrl>

### ประเภทของการกำหนดค่า \{#config-types}

| ชื่อ      | ประเภท            |
| --------- | ----------------- |
| apiKey    | string            |
| fromEmail | string            |
| fromName  | string (OPTIONAL) |
| templates | Template[]        |

| คุณสมบัติของ Template | ประเภท      | ค่าที่เป็นไปได้                                      |
| --------------------- | ----------- | ---------------------------------------------------- |
| subject               | string      | N/A                                                  |
| content               | string      | N/A                                                  |
| usageType             | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
| type                  | enum string | 'text/plain' / 'text/html'                           |
