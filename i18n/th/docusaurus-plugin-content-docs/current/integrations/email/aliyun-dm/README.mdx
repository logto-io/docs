---
slug: /integrations/aliyun-dm
sidebar_label: Aliyun Direct Mail
sidebar_custom_props:
  description: Aliyun ให้บริการคลาวด์คอมพิวติ้งสำหรับธุรกิจออนไลน์
  logoFilename: 'aliyun.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# ตั้งค่าการยืนยันอีเมลด้วย Aliyun Direct Mail

ตัวเชื่อมต่อ Logto อย่างเป็นทางการสำหรับบริการ direct mail ของ Aliyun

<GuideTip />

## เริ่มต้นใช้งาน \{#get-started}

Aliyun เป็นผู้ให้บริการคลาวด์รายใหญ่ในเอเชีย ให้บริการคลาวด์หลากหลาย รวมถึง DM (direct mail) โดย Aliyun DM Connector เป็นปลั๊กอินที่ทีม Logto พัฒนาขึ้นเพื่อเรียกใช้งาน API ของบริการ Aliyun DM ซึ่งช่วยให้ผู้ใช้ปลายทางของ Logto สามารถลงทะเบียนและลงชื่อเข้าใช้บัญชี Logto ของตนผ่านรหัสยืนยันทางอีเมล (หรือที่เรียกว่ารหัสยืนยัน)

## ตั้งค่าบริการอีเมลใน Aliyun DirectMail Console \{#set-up-an-email-service-in-aliyun-directmail-console}

### สร้างบัญชี Aliyun \{#create-an-aliyun-account}

ไปที่ [Aliyun](https://aliyun.com/) และสร้างบัญชี Aliyun หากคุณยังไม่มีบัญชี

### เปิดใช้งานและตั้งค่า Aliyun Direct Mail \{#enable-and-configure-aliyun-direct-mail}

ไปที่ [หน้าคอนโซลบริการ DM](https://www.aliyun.com/product/directmail) และลงชื่อเข้าใช้ เปิดใช้งานบริการ Direct Mail โดยคลิกปุ่ม "Apply to enable" (申请开通) ที่มุมซ้ายบนของหน้า และเริ่มกระบวนการตั้งค่า

เริ่มต้นจาก [หน้าคอนโซลผู้ดูแล DM](https://dm.console.aliyun.com/) คุณควร:

1. ไปที่ "Email Domains" (发信域名) จากแถบด้านข้าง และเพิ่ม "New Domain" (新建域名) ตามคำแนะนำ
2. ปรับแต่ง "Sender Addresses" (发信地址) และ "Email Tags" (邮件标签) ตามต้องการ

หลังจากตั้งค่าเสร็จ มีสองวิธีในการทดสอบ:

- ไปที่ [หน้า DirectMail Overview](https://dm.console.aliyun.com/), ค้นหา "Operation Guide" (操作引导) ที่ด้านล่างของหน้า แล้วคลิก "Send Emails" (发送邮件) คุณจะพบวิธีการทดสอบหลากหลายรูปแบบ
- ไปที่ "Send Emails" (发送邮件) -> "Email Tasks" (发送邮件) ในแถบด้านข้างเพื่อสร้างภารกิจทดสอบ

## สร้าง JSON สำหรับตัวเชื่อมต่อ \{#compose-the-connector-json}

1. จาก [หน้าคอนโซลผู้ดูแล DM](https://dm.console.aliyun.com/), วางเมาส์เหนืออวาตาร์ของคุณที่มุมขวาบนแล้วไปที่ "AccessKey Management" (AccessKey 管理) จากนั้นคลิก "Create AccessKey" (创建 AccessKey) คุณจะได้รับคู่ "AccessKey ID" และ "AccessKey Secret" หลังจากผ่านการยืนยันความปลอดภัย กรุณาเก็บรักษาไว้ให้ดี
2. ไปที่แท็บ "Sender Addresses" (发信地址) หรือ "Email Tags" (邮件标签) ที่คุณเพิ่งเข้าไปจาก [หน้าคอนโซลผู้ดูแล DM](https://dm.console.aliyun.com/) คุณจะพบ _Sender Address_ หรือ _Email Tag_ ได้อย่างง่ายดาย
3. กรอกการตั้งค่า Aliyun DM Connector:
   - กรอกช่อง `accessKeyId` และ `accessKeySecret` ด้วยคู่ access key ที่คุณได้รับจากขั้นตอนที่ 1
   - กรอกช่อง `accountName` และ `fromAlias` ด้วย "Sender Address" และ "Email Tag" ที่พบในขั้นตอนที่ 2 ชื่อผู้ส่งนี้จะใช้ร่วมกันในทุกเทมเพลต (คุณสามารถเว้น `fromAlias` ว่างไว้ได้ เพราะเป็นตัวเลือก)
   - คุณสามารถเพิ่มเทมเพลต DM connector หลายรายการสำหรับแต่ละกรณีการใช้งาน ตัวอย่างเช่นการเพิ่มเทมเพลตเดียว:
     - กรอกช่อง `subject` ซึ่งจะเป็นหัวข้อของอีเมลที่ส่งออก
     - กรอกช่อง `content` ด้วยข้อความประเภท string ตามต้องการ อย่าลืมเว้นที่ว่าง `{{code}}` สำหรับรหัสยืนยันแบบสุ่ม
     - กรอกช่อง `usageType` ด้วยค่า `Register`, `SignIn`, `ForgotPassword` หรือ `Generic` สำหรับแต่ละกรณี (`usageType` เป็น property ของ Logto เพื่อระบุกรณีการใช้งานที่เหมาะสม) เพื่อให้รองรับ user flow ครบถ้วน จำเป็นต้องมีเทมเพลตที่มี usageType เป็น `Register`, `SignIn`, `ForgotPassword` และ `Generic`

### ทดสอบตัวเชื่อมต่อ Aliyun DM \{#test-aliyun-dm-connector}

คุณสามารถกรอกอีเมลและคลิก "Send" เพื่อตรวจสอบว่าการตั้งค่าสามารถใช้งานได้ก่อนที่จะ "Save and Done"

เพียงเท่านี้ อย่าลืม <MainSiteUrl href="/connectors/email-connectors/#enable-email-address-for-end-user-flows">เปิดใช้งานตัวเชื่อมต่อในประสบการณ์การลงชื่อเข้าใช้</MainSiteUrl>

### ประเภทของการตั้งค่า \{#config-types}

| ชื่อ            | ประเภท            |
| --------------- | ----------------- |
| accessKeyId     | string            |
| accessKeySecret | string            |
| accountName     | string            |
| fromAlias       | string (OPTIONAL) |
| templates       | Template[]        |

| คุณสมบัติของ Template | ประเภท      | ค่าที่เป็นไปได้                                      |
| --------------------- | ----------- | ---------------------------------------------------- |
| subject               | string      | N/A                                                  |
| content               | string      | N/A                                                  |
| usageType             | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |
