เพื่อสร้างข้อมูลรับรอง OIDC ใหม่ คุณต้องกำหนดค่าหน้าขอความยินยอม (Consent Screen) สำหรับแอปพลิเคชันของคุณ

1. ไปที่หน้า [OAuth consent screen](https://console.cloud.google.com/apis/credentials/consent) และเลือกประเภทผู้ใช้ `Internal` การตั้งค่านี้จะทำให้แอป OAuth สามารถใช้งานได้เฉพาะผู้ใช้ภายในองค์กรของคุณเท่านั้น

<img
  src="/img/assets/google_workspace_consent_screen_user_type.webp"
  alt="ประเภทผู้ใช้ในหน้าขอความยินยอมของ Google Workspace"
/>

2. กรอกการตั้งค่า `Consent Screen` ตามคำแนะนำบนหน้า คุณต้องระบุข้อมูลขั้นต่ำดังต่อไปนี้:

- **ชื่อแอปพลิเคชัน (Application name)**: ชื่อของแอปพลิเคชันของคุณ ซึ่งจะแสดงบนหน้าขอความยินยอม
- **อีเมลสำหรับติดต่อ (Support email)**: อีเมลสำหรับติดต่อของแอปพลิเคชัน ซึ่งจะแสดงบนหน้าขอความยินยอม

<img
  src="/img/assets/google_workspace_consent_screen_settings.webp"
  alt="การตั้งค่าหน้าขอความยินยอมของ Google Workspace"
/>

3. กำหนด `ขอบเขต (Scopes)` สำหรับแอปพลิเคชันของคุณ เพื่อดึงข้อมูลตัวตนและอีเมลของผู้ใช้อย่างถูกต้องจาก IdP ตัวเชื่อมต่อ SSO ของ Logto จำเป็นต้องขอขอบเขตต่อไปนี้จาก IdP:

<img
  src="/img/assets/google_workspace_consent_screen_scopes.webp"
  alt="ขอบเขตในหน้าขอความยินยอมของ Google Workspace"
/>

- **openid**: ขอบเขตนี้จำเป็นสำหรับการยืนยันตัวตน OIDC ใช้สำหรับดึงโทเค็น ID (ID token) และเข้าถึง endpoint userInfo ของ IdP
- **profile**: ขอบเขตนี้จำเป็นสำหรับการเข้าถึงข้อมูลโปรไฟล์พื้นฐานของผู้ใช้
- **email**: ขอบเขตนี้จำเป็นสำหรับการเข้าถึงที่อยู่อีเมลของผู้ใช้

คลิกปุ่ม `Save` เพื่อบันทึกการตั้งค่าหน้าขอความยินยอม
