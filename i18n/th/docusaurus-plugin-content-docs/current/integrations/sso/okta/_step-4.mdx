ขอบเขต (Scopes) กำหนดสิทธิ์ (Permissions) ที่แอปของคุณร้องขอจากผู้ใช้ และควบคุมว่าแอปของคุณสามารถเข้าถึงข้อมูลใดจากบัญชี Okta ของพวกเขาได้ การร้องขอสิทธิ์ Okta เพิ่มเติมจำเป็นต้องมีการกำหนดค่าทั้งสองฝั่ง:

**ใน Okta admin console:**

1. ไปที่ **Applications > Applications** และเลือกแอป OIDC ของคุณ
2. ไปที่แท็บ **Assignments** เพื่อให้แน่ใจว่าแอปของคุณสามารถเข้าถึงผู้ใช้และกลุ่มที่ต้องการได้
3. สำหรับขอบเขตแบบกำหนดเอง ให้ไปที่ **Security > API > Authorization Servers** และเลือก authorization server ของคุณ
4. เพิ่มขอบเขตแบบกำหนดเองหากจำเป็น:
   - คลิก **Scopes** แล้วเลือก **Add Scope**
   - กำหนดชื่อขอบเขต เช่น `okta.users.read` หรือ `okta.groups.read` สำหรับการเข้าถึง Okta APIs
   - กำหนดข้อกำหนดการขอความยินยอม (consent) สำหรับแต่ละขอบเขต

สำหรับรายการขอบเขตที่มีทั้งหมดและคำอธิบาย โปรดดูที่ [เอกสาร Okta OIDC](https://developer.okta.com/docs/api/openapi/okta-oauth/guides/overview/#scopes)

**ใน Logto Okta connector:**

1. Logto จะเพิ่มขอบเขต `openid`, `profile` และ `email` โดยอัตโนมัติเพื่อดึงข้อมูลตัวตนพื้นฐานของผู้ใช้ คุณสามารถเว้นว่างช่อง `Scopes` ได้หากต้องการเพียงข้อมูลผู้ใช้พื้นฐาน
2. เพิ่ม `offline_access` ในช่อง `Scopes` หากคุณต้องการจัดเก็บโทเค็นเพื่อเข้าถึง API แบบถาวร ขอบเขตนี้จะเปิดใช้งานโทเค็นรีเฟรช (Refresh token) สำหรับการเข้าถึง API ระยะยาว
3. เพิ่มขอบเขตเพิ่มเติม (คั่นด้วยช่องว่าง) ในช่อง `Scopes` เพื่อร้องขอข้อมูลเพิ่มเติมจาก Okta เช่น `okta.users.read okta.groups.read`

:::tip

หากแอปของคุณร้องขอขอบเขตเหล่านี้เพื่อเข้าถึง Okta APIs และดำเนินการต่าง ๆ โปรดตรวจสอบให้แน่ใจว่าได้เปิดใช้งาน **Store tokens for persistent API access** ใน Logto Okta connector ดูรายละเอียดในหัวข้อถัดไป

:::
