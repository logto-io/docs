หลังจากสร้างแอปพลิเคชัน Microsoft Entra OIDC สำเร็จแล้ว คุณจะต้องนำค่าการตั้งค่าของ IdP กลับมากำหนดใน Logto ให้ไปที่แท็บ `Connection` ใน Logto Console และกรอกค่าการตั้งค่าต่อไปนี้:

1. **Client ID**: ตัวระบุเฉพาะที่ Microsoft Entra กำหนดให้กับแอป OIDC ของคุณ ตัวระบุตัวนี้ใช้โดย Logto เพื่อระบุและยืนยันตัวตนของแอปพลิเคชันระหว่างกระบวนการ OIDC คุณสามารถค้นหาได้ในหน้า overview ของแอปพลิเคชันในส่วน `Application (client) ID`

<center>
  <img src="/img/assets/entra_id_oidc_application_details.webp" alt="รายละเอียดแอปพลิเคชัน" />
</center>

2. **Client Secret**: สร้าง client secret ใหม่และคัดลอกค่าที่ได้ไปใส่ใน Logto รหัสลับนี้ใช้สำหรับยืนยันตัวตนของแอป OIDC และรักษาความปลอดภัยในการสื่อสารระหว่าง Logto กับ IdP

<center>
  <img src="/img/assets/entra_id_oidc_create_secret.webp" alt="สร้าง Secret" />
</center>

3. **ผู้ออก (Issuer)**: URL ของผู้ออก ซึ่งเป็นตัวระบุเฉพาะของ IdP ที่ระบุที่ตั้งของผู้ให้บริการข้อมูลระบุตัวตน OIDC เป็นส่วนสำคัญของการตั้งค่า OIDC เพราะช่วยให้ Logto ค้นหา endpoint ที่จำเป็นได้

   แทนที่จะต้องกรอก endpoint OIDC ทั้งหมดด้วยตนเอง Logto จะดึงค่าการตั้งค่าและ endpoint ของ IdP ที่จำเป็นทั้งหมดโดยอัตโนมัติ โดยใช้ issuer url ที่คุณให้ไว้และเรียกไปยัง discover endpoint ของ IdP

   ในการรับ issuer URL คุณสามารถค้นหาได้ในส่วน `Endpoints` ของหน้า overview ของแอปพลิเคชัน

   ค้นหา endpoint `OpenID Connect metadata document` และคัดลอก URL **โดยไม่ต้อง**ใส่ path ต่อท้าย `.well-known/openid-configuration` เนื่องจาก Logto จะเติม `.well-known/openid-configuration` ต่อท้าย issuer URL ให้อัตโนมัติเมื่อดึงค่าการตั้งค่า OIDC

<center>
  <img src="/img/assets/entra_id_oidc_endpoints.webp" alt="Endpoints" />
</center>

4. **ขอบเขต (Scope)** (ไม่บังคับ): Logto จะเพิ่มขอบเขตที่จำเป็น (`openid`, `profile`, และ `email`) ในทุกคำขอโดยอัตโนมัติ คุณสามารถระบุขอบเขตเพิ่มเติมเป็นรายการที่คั่นด้วยช่องว่าง หากแอปของคุณต้องการสิทธิ์หรือระดับการเข้าถึงเพิ่มเติมจาก IdP

คลิก `Save` เพื่อเสร็จสิ้นกระบวนการตั้งค่า
