Logto มีวิธีที่ยืดหยุ่นในการแมปแอตทริบิวต์ของผู้ใช้ที่ได้รับจากผู้ให้บริการข้อมูลระบุตัวตน (IdP) ไปยังแอตทริบิวต์ของผู้ใช้ใน Logto โดย Logto จะซิงค์แอตทริบิวต์ของผู้ใช้ต่อไปนี้จาก IdP โดยอัตโนมัติ:

- id: ตัวระบุที่ไม่ซ้ำของผู้ใช้ Logto จะอ่านการอ้างสิทธิ์ (`nameID`) จาก SAML response เป็นรหัส SSO identity ของผู้ใช้
- email: ที่อยู่อีเมลของผู้ใช้ Logto จะอ่านการอ้างสิทธิ์ (`email`) จาก SAML response เป็นอีเมลหลักของผู้ใช้โดยค่าเริ่มต้น
- name: ชื่อของผู้ใช้

คุณสามารถจัดการตรรกะการแมปแอตทริบิวต์ของผู้ใช้ได้ทั้งฝั่ง Azure AD หรือฝั่ง Logto

1. แมปแอตทริบิวต์ของผู้ใช้ AzureAD ไปยังแอตทริบิวต์ของผู้ใช้ Logto ที่ฝั่ง Logto

   ไปที่ส่วน `Attributes & Claims` ของแอป Azure AD SSO ของคุณ

   คัดลอกชื่อแอตทริบิวต์ต่อไปนี้ (พร้อมคำนำหน้า namespace) แล้ววางลงในช่องที่เกี่ยวข้องใน Logto

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` (คำแนะนำ: อัปเดตการแมปค่านี้เป็น `user.displayname` เพื่อประสบการณ์ผู้ใช้ที่ดียิ่งขึ้น)

<img
  src="/img/assets/azure_ad_default_attribute_mapping.webp"
  alt="Azure AD default attribute mapping"
/>

1. แมปแอตทริบิวต์ของผู้ใช้ AzureAD ไปยังแอตทริบิวต์ของผู้ใช้ Logto ที่ฝั่ง AzureAD

   ไปที่ส่วน `Attributes & Claims` ของแอป Azure AD SSO ของคุณ

   คลิก `Edit` และอัปเดตช่อง `Additional claims` ตามการตั้งค่าแอตทริบิวต์ของผู้ใช้ Logto:

   - อัปเดตค่าชื่อการอ้างสิทธิ์ตามการตั้งค่าแอตทริบิวต์ของผู้ใช้ Logto
   - ลบคำนำหน้า namespace ออก
   - คลิก `Save` เพื่อดำเนินการต่อ

   ควรได้การตั้งค่าดังนี้:

<img
  src="/img/assets/azure_ad_logto_attribute_mapping.webp"
  alt="Azure AD_Logto attribute mapping"
/>

คุณยังสามารถระบุแอตทริบิวต์ของผู้ใช้เพิ่มเติมที่ฝั่ง Azure AD ได้ Logto จะเก็บบันทึกแอตทริบิวต์ของผู้ใช้ต้นฉบับที่ได้รับจาก IdP ไว้ในฟิลด์ `sso_identity` ของผู้ใช้
