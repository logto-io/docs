---
slug: /integrations/aliyun-sms
sidebar_label: ข้อความสั้น Aliyun
sidebar_custom_props:
  description: Aliyun ให้บริการคลาวด์คอมพิวติ้งสำหรับธุรกิจออนไลน์
  logoFilename: 'aliyun.svg'
---

import GuideTip from '../../fragments/_guide-tip.mdx';

# ตั้งค่าการยืนยัน SMS ด้วย Aliyun Short Message Service

ตัวเชื่อมต่อ Logto อย่างเป็นทางการสำหรับบริการข้อความสั้นของ Aliyun

<GuideTip />

## เริ่มต้นใช้งาน \{#get-started}

Aliyun เป็นผู้ให้บริการคลาวด์รายใหญ่ในเอเชียที่มีบริการคลาวด์หลากหลาย รวมถึง SMS (บริการข้อความสั้น) ตัวเชื่อมต่อ Aliyun SMS เป็นปลั๊กอินที่ทีม Logto จัดเตรียมไว้เพื่อเรียกใช้บริการ SMS ของ Aliyun ซึ่งช่วยให้ผู้ใช้ปลายทางของ Logto สามารถลงทะเบียนและลงชื่อเข้าใช้บัญชี Logto ของตนผ่านรหัสยืนยันทาง SMS

## ตั้งค่าบริการข้อความสั้นใน Aliyun SMS Console \{#set-up-a-short-message-service-in-aliyun-sms-console}

### สร้างบัญชี Aliyun \{#create-an-aliyun-account}

ไปที่ [เว็บไซต์ Aliyun](https://cn.aliyun.com/) และลงทะเบียนบัญชี Aliyun หากคุณยังไม่มีบัญชี

### เปิดใช้งานและตั้งค่าบริการข้อความสั้นของ Aliyun \{#enable-and-configure-aliyun-short-message-service}

1. ลงชื่อเข้าใช้ด้วยบัญชี Aliyun ของคุณที่ [เว็บไซต์ Aliyun](https://cn.aliyun.com/) และไปที่ [หน้าคอนโซลบริการ SMS](https://www.aliyun.com/product/sms)
2. คลิกปุ่ม "เปิดใช้งานฟรี" (免费开通) ที่มุมซ้ายบนของหน้าบริการ SMS เพื่อเริ่มกระบวนการตั้งค่า
3. อ่านและยอมรับ "ข้อตกลงการเปิดใช้งานบริการ SMS" (短信服务开通条款) แล้วคลิก "สมัครใช้บริการ" (开通服务) เพื่อดำเนินการต่อ
4. ตอนนี้คุณอยู่ที่ [หน้าคอนโซลบริการ SMS](https://dysms.console.aliyun.com/overview) ให้ไปที่ปุ่ม "จีนแผ่นดินใหญ่" (国内消息) หรือ "นอกจีนแผ่นดินใหญ่" (国际/港澳台消息) ที่แถบด้านข้างตามกรณีการใช้งานของคุณ
5. เพิ่มลายเซ็นและเทมเพลตตามแนวทางที่กำหนด และจัดเตรียมเอกสารหรือข้อมูลที่จำเป็นสำหรับการตรวจสอบ
   - อย่าลืมเลือก "ข้อความรหัสยืนยัน" (验证码) เป็น "สถานการณ์" (适用场景) ขณะกรอกใบสมัครลายเซ็น และเลือก "ข้อความรหัสยืนยัน" (验证码) สำหรับ "ประเภท" (模板类型) ขณะสมัครขอรีวิวเทมเพลต เพราะเราจะใช้ลายเซ็นและเทมเพลตเหล่านี้เพื่อส่งรหัสยืนยัน ปัจจุบันยังไม่รองรับการส่ง SMS ที่ไม่เกี่ยวข้องกับรหัสยืนยัน
   - ใช้ `{{code}}` เป็นตัวแทนตำแหน่งที่ต้องการแสดงรหัสยืนยันดิจิทัลในเนื้อหาเทมเพลต
6. หลังจากส่งใบสมัครลายเซ็นและเทมเพลต SMS แล้ว คุณต้องรอให้มีผล ในขั้นตอนนี้สามารถกลับไปที่ [หน้าคอนโซลบริการ SMS](https://dysms.console.aliyun.com/overview) และส่ง SMS ทดสอบได้ หากลายเซ็นและเทมเพลตของคุณพร้อมใช้งานแล้ว สามารถทดลองใช้ได้ทันที หากยังไม่พร้อมใช้งาน Aliyun ก็มีเทมเพลตสำหรับทดสอบให้ด้วย
   - อาจต้องเติมเงินเล็กน้อยก่อนส่งข้อความทดสอบ
   - อาจถูกขอให้ผูกเบอร์โทรศัพท์สำหรับทดสอบก่อนส่งข้อความทดสอบ รายละเอียดเพิ่มเติมดูที่แท็บ "เริ่มต้นอย่างรวดเร็ว" (快速学习) จากแถบด้านข้างของ [หน้าคอนโซลบริการ SMS](https://dysms.console.aliyun.com/overview)

## สร้าง JSON สำหรับตัวเชื่อมต่อ \{#compose-the-connector-json}

1. จาก [หน้าคอนโซลบริการ SMS](https://dysms.console.aliyun.com/overview) วางเมาส์เหนืออวาตาร์ของคุณที่มุมขวาบนแล้วไปที่ "การจัดการ AccessKey" (AccessKey 管理) และคลิก "สร้าง AccessKey" (创建 AccessKey) คุณจะได้รับคู่ "AccessKey ID" และ "AccessKey Secret" หลังจากผ่านการยืนยันความปลอดภัย กรุณาเก็บรักษาไว้ให้ดี
2. ไปที่แท็บ "จีนแผ่นดินใหญ่" (国内消息) หรือ "นอกจีนแผ่นดินใหญ่" (国际/港澳台消息) ที่คุณเพิ่งเข้าใช้งาน คุณจะพบ "ลายเซ็น" (签名名称) และ "รหัสเทมเพลต" (模板 CODE) ได้อย่างง่ายดาย
   - หากต้องการใช้ลายเซ็นและเทมเพลตสำหรับทดสอบเท่านั้น ให้ไปที่แท็บ "เริ่มต้นอย่างรวดเร็ว" (快速学习) แทน และคุณจะพบข้อมูลเหล่านี้ใต้ "ลายเซ็น & เทมเพลต (สำหรับทดสอบเท่านั้น)"
3. กรอกการตั้งค่าตัวเชื่อมต่อ Aliyun SMS:
   - กรอกช่อง `accessKeyId` และ `accessKeySecret` ด้วยคู่ access key ที่ได้จากขั้นตอนที่ 1
   - กรอกช่อง `signName` ด้วย "ลายเซ็น" (签名名称) ที่กล่าวถึงในขั้นตอนที่ 2 เทมเพลตทั้งหมดจะใช้ชื่อลายเซ็นนี้ร่วมกัน
   - คุณสามารถเพิ่มเทมเพลตตัวเชื่อมต่อ SMS ได้หลายรายการสำหรับแต่ละกรณี ตัวอย่างเช่นการเพิ่มเทมเพลตเดียว:
     - กรอกช่อง `templateCode` ซึ่งใช้ควบคุมเนื้อหา SMS ด้วย "รหัสเทมเพลต" (模板 CODE) จากขั้นตอนที่ 2
     - กรอกช่อง `usageType` ด้วยค่า `Register`, `SignIn`, `ForgotPassword` หรือ `Generic` ตามกรณีการใช้งาน (`usageType` เป็น property ของ Logto เพื่อระบุกรณีใช้งานที่เหมาะสม) เพื่อให้รองรับ user flow ได้ครบถ้วน จำเป็นต้องมีเทมเพลตที่มี usageType เป็น `Register`, `SignIn`, `ForgotPassword` และ `Generic`
4. ตั้งค่า "ตรวจสอบรหัสภูมิภาคเบอร์โทรศัพท์อย่างเข้มงวด":
   - เปิดใช้งานหากคุณต้องการส่ง SMS ไปยังเบอร์โทรศัพท์ต่างประเทศ (นอกจีนแผ่นดินใหญ่ เช่น สหรัฐฯ ฮ่องกง ฯลฯ) เมื่อเปิดใช้งาน ตัวเชื่อมต่อจะถือว่าเบอร์โทรศัพท์ทุกเบอร์มีรหัสภูมิภาคที่ถูกต้อง (เช่น +1, +852) เพื่อใช้ระบุว่าเป็นเบอร์จีนแผ่นดินใหญ่หรือไม่
   - **ข้อควรระวัง**: หากผู้ใช้เดิมของคุณมีเบอร์โทรศัพท์ที่ไม่มีรหัสภูมิภาค การเปิดใช้งานนี้อาจส่งผลต่อกระบวนการลงชื่อเข้าใช้ของพวกเขา ควรเปิดใช้งานเฉพาะเมื่อจำเป็นต้องส่ง SMS ไปต่างประเทศเท่านั้น

### ทดสอบตัวเชื่อมต่อ Aliyun SMS \{#test-aliyun-sms-connector}

คุณสามารถกรอกเบอร์โทรศัพท์แล้วคลิก "ส่ง" เพื่อดูว่าการตั้งค่าสามารถใช้งานได้ก่อนคลิก "บันทึกและเสร็จสิ้น"

เรียบร้อยแล้ว อย่าลืม <MainSiteUrl href="/connectors/sms-connectors/#enable-phone-number-sign-up-or-sign-in">เปิดใช้งานตัวเชื่อมต่อในประสบการณ์การลงชื่อเข้าใช้</MainSiteUrl>

### ประเภทการตั้งค่า \{#config-types}

| ชื่อ            | ประเภท     |
| --------------- | ---------- |
| accessKeyId     | string     |
| accessKeySecret | string     |
| signName        | string     |
| templates       | Template[] |

| คุณสมบัติของ Template | ประเภท      | ค่าที่เป็นไปได้                                      |
| --------------------- | ----------- | ---------------------------------------------------- |
| templateCode          | string      | N/A                                                  |
| usageType             | enum string | 'Register' / 'SignIn' / 'ForgotPassword' / 'Generic' |

## แหล่งอ้างอิง \{#references}

<Url href="https://dysms.console.aliyun.com/quickstart">Aliyun SMS - เริ่มต้นอย่างรวดเร็ว</Url>
