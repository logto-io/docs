---
sidebar_label: Logto core service
sidebar_position: 3
---

# Core Service

## บทนำ \{#introduction}

_Core Service_ คือบริการแบบ monolith สำหรับงานสำคัญของ Logto โค้ดต้นฉบับอยู่ที่ [`@logto/core`](https://github.com/logto-io/logto/tree/master/packages/core)

:::note
_Core Service_ และ _SDK core_ เป็นสองแนวคิดที่แยกจากกัน ดู [แนวทาง SDK](/developers/sdk-conventions) สำหรับความแตกต่าง
:::

เพื่อให้ง่ายขึ้น เราแบ่ง Core Service ออกเป็น 4 โมดูลหลัก:

<table>
  <thead>
    <tr>
      <td>ชื่อ</td>
      <td>คำอธิบาย</td>
      <td>Mount Path</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OIDC Provider</td>
      <td>เป็น [OpenID Provider](https://openid.net/specs/openid-connect-core-1_0.html)</td>
      <td>
        <code>/oidc</code>
      </td>
    </tr>
    <tr>
      <td>Logto API</td>
      <td>Management API, Experience API และ Account API</td>
      <td>
        <code>/api</code>
      </td>
    </tr>
    <tr>
      <td>Frontend proxies</td>
      <td>HTTP proxy หรือการให้บริการไฟล์ static สำหรับโปรเจกต์ frontend</td>
      <td>
        ดู <a href="#frontend-proxies">Frontend proxies</a> สำหรับรายละเอียด
      </td>
    </tr>
  </tbody>
</table>

API ฝั่ง backend รวมถึง OIDC ถูกสร้างอยู่ในแพ็กเกจ `core` ขณะที่ frontend proxies จะขึ้นกับแพ็กเกจพี่น้องใน monorepo ของ Logto

## OIDC Provider \{#oidc-provider}

Logto ใช้ [OpenID Connect](https://openid.net/connect/) implementation ที่ได้รับการรับรอง [node-oidc-provider](https://github.com/panva/node-oidc-provider) อยู่เบื้องหลัง โดย provider นี้จะถูก mount ที่ `/oidc` และคุณสามารถตรวจสอบการตั้งค่าและไฟล์ที่เกี่ยวข้องได้ที่ [packages/core/src/oidc](https://github.com/logto-io/logto/tree/master/packages/core/src/oidc)

OIDC [Userinfo Endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) พร้อมใช้งานและ mount ที่ `/oidc/me`

:::info
หากคุณต้องการเรียก OIDC API โดยตรง อย่าลืมตั้ง header `Content-Type: application/x-www-form-urlencoded`
:::

### ฟีเจอร์ OpenID ที่เปิดใช้งาน \{#enabled-openid-features}

- [OpenID Connect Core](https://openid.net/specs/openid-connect-core-1_0.html)
- [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)
- [OpenID Connect RP-Initiated Logout](https://openid.net/specs/openid-connect-rpinitiated-1_0.html)
- [OpenID Connect Back-Channel Logout](https://openid.net/specs/openid-connect-backchannel-1_0-final.html)
- [OAuth 2.0](https://www.rfc-editor.org/rfc/rfc6749.html)
- [OAuth 2.0 Token Introspection](https://www.rfc-editor.org/rfc/rfc7662.html)
- [OAuth 2.0 Token Revocation](https://www.rfc-editor.org/rfc/rfc7009.html)
- [OAuth 2.0 Resource Indicators](https://www.rfc-editor.org/rfc/rfc8707.html)
- [OAuth 2.0 Token Exchange](https://datatracker.ietf.org/doc/html/rfc8693.html)
- [Proof Key for Code Exchange (PKCE)](https://www.rfc-editor.org/rfc/rfc7636.html)

## Logto API \{#logto-api}

### Management API \{#management-api}

_Management API_ คือชุด API สำหรับจัดการและอัปเดตข้อมูล Logto เฉพาะผู้ใช้ที่มีบทบาท `admin` เท่านั้นที่เข้าถึงได้

ไปที่ [API references](https://openapi.logto.io) เพื่อดูรายละเอียด

หากต้องการเข้าถึง API แบบโปรแกรม ดู [โต้ตอบกับ Management API](/integrate-logto/interact-with-management-api)

### Experience API \{#experience-api}

Experience API คือชุด endpoint เฉพาะที่รองรับการโต้ตอบกับอินเทอร์เฟซลงชื่อเข้าใช้แบบกำหนดเอง

API เหล่านี้ช่วยให้นักพัฒนาสามารถสร้างฟีเจอร์หลักของการยืนยันตัวตน (Authentication) เช่น ลงชื่อเข้าใช้ ลงทะเบียน รีเซ็ตรหัสผ่าน ผูกบัญชีโซเชียล และการยืนยันตัวตนหลายปัจจัย (MFA) ในการใช้งานฟีเจอร์เหล่านี้ UI แบบกำหนดเองของคุณต้องโต้ตอบกับ Experience API

เพื่อเข้าใจ flow ของผู้ใช้และรายละเอียดการใช้งาน:

- ดูคู่มือ [พัฒนา UI ของคุณเอง](/customization/bring-your-ui/#develop-your-custom-ui) เพื่อเรียนรู้วิธีใช้ Experience API สร้าง UI ประสบการณ์ของคุณเอง
- อ้างอิง [Experience API references](https://openapi.logto.io/group/endpoint-experience) สำหรับเอกสาร API โดยละเอียด
- อ่าน [Experience API design RFC](https://github.com/logto-io/rfcs/blob/master/draft/0004-experience-api.md) สำหรับสเปกเทคนิคเชิงลึกและตัวอย่าง

### Account API \{#account-api}

Account API คือชุด API ที่ครอบคลุมซึ่งเปิดให้ผู้ใช้ปลายทางเข้าถึง API ได้โดยตรงโดยไม่ต้องผ่าน Management API จุดเด่นมีดังนี้:

- เข้าถึงโดยตรง: Account API ให้อำนาจผู้ใช้ปลายทางในการเข้าถึงและจัดการโปรไฟล์บัญชีของตนเองโดยตรง โดยไม่ต้องผ่าน Management API
- การจัดการโปรไฟล์และตัวตนผู้ใช้: ผู้ใช้สามารถจัดการโปรไฟล์และการตั้งค่าความปลอดภัยได้เต็มที่ รวมถึงอัปเดตข้อมูลตัวตน เช่น อีเมล เบอร์โทรศัพท์ รหัสผ่าน และจัดการการเชื่อมต่อโซเชียล รองรับ MFA และ SSO เร็วๆ นี้
- การควบคุมการเข้าถึงระดับโลก: ผู้ดูแลระบบ (Admin) มีสิทธิ์ควบคุมการเข้าถึงทั้งหมด สามารถปรับแต่งแต่ละฟิลด์ได้
- การอนุญาตที่ไร้รอยต่อ: การอนุญาตง่ายกว่าที่เคย! เพียงใช้ `client.getAccessToken()` เพื่อรับโทเค็นการเข้าถึงทึบ (opaque access token) สำหรับ OP (Logto) และแนบไปกับ Authorization header เป็น `Bearer <access_token>`

ด้วย Logto Account API คุณสามารถสร้างระบบจัดการบัญชีแบบกำหนดเอง เช่น หน้าโปรไฟล์ที่เชื่อมต่อกับ Logto ได้อย่างสมบูรณ์

ดู [การตั้งค่าบัญชีด้วย Account API](/end-user-flows/account-settings/by-account-api) เพื่อเรียนรู้วิธีใช้ Account API สร้างหน้าตั้งค่าบัญชีของคุณเอง

อ้างอิง [Account API references](https://openapi.logto.io/group/endpoint-my-account) สำหรับเอกสาร API โดยละเอียด

## Frontend proxies \{#frontend-proxies}

_frontend proxy_ คือฟังก์ชัน middleware ที่ให้บริการโปรเจกต์ frontend ตามสภาพแวดล้อม:

- ถ้าเป็น development จะ proxy HTTP request ไปยัง frontend dev server
- ถ้าเป็น production จะให้บริการไฟล์ frontend แบบ static โดยตรง

Logto มี frontend proxies สามตัว:

<table>
  <thead>
    <tr>
      <td>ชื่อ</td>
      <td>Frontend Package</td>
      <td>Mount Path</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Admin Console proxy</td>
      <td>
        <code>/packages/console</code>
      </td>
      <td>
        <code>/console</code>
      </td>
    </tr>
    <tr>
      <td>Demo app proxy</td>
      <td>
        <code>/packages/demo-app</code>
      </td>
      <td>
        <code>/demo-app</code>
      </td>
    </tr>
    <tr>
      <td>UI (sign-in experience) proxy</td>
      <td>
        <code>/packages/ui</code>
      </td>
      <td>
        <code>/</code>
      </td>
    </tr>
  </tbody>
</table>

:::note
คุณอาจสังเกตว่า UI proxy ใช้ root path ไม่เหมือน proxy อื่น UI proxy เป็น fallback proxy ซึ่งหมายความว่าจะทำงานก็ต่อเมื่อไม่มี proxy อื่นตรงกับ path ที่ร้องขอ
:::
