---
slug: /quick-starts/flutter
sidebar_label: Flutter
sidebar_custom_props:
  description: Flutter คือเฟรมเวิร์กสำหรับสร้างแอปมือถือแบบไฮบริด
language: dart
official_link: https://flutter.dev
app_type: แอปเนทีฟ
framework: Flutter
---

import FurtherReadings from '../../fragments/_further-readings.md';

import ApiResources from './_api-resources.mdx';
import Dependency from './_dependency.mdx';
import GetUserInfo from './_get-user-info.mdx';
import Installation from './_installation.mdx';
import Integration from './_integration.mdx';
import Organization from './_organization.mdx';
import Tip from './_tip.md';

# เพิ่มการยืนยันตัวตนให้กับแอป Flutter ของคุณ (Add authentication to your Flutter application)

คู่มือนี้จะแสดงวิธีการเชื่อมต่อ Logto เข้ากับแอป Flutter ของคุณ

<Tip />

## ข้อกำหนดเบื้องต้น \{#prerequisites}

- บัญชี [Logto Cloud](https://cloud.logto.io) หรือ [Logto ที่โฮสต์เอง](/introduction/set-up-logto-oss)
- สร้างแอปเนทีฟของ Logto แล้ว
- สภาพแวดล้อมสำหรับพัฒนา Flutter หรือ Dart

## การติดตั้ง \{#installation}

<Installation />

## การตั้งค่า \{#set-up}

<Dependency />

## การเชื่อมต่อระบบ \{#integration}

<Integration />

## รับข้อมูลผู้ใช้ \{#get-user-information}

<GetUserInfo />

## ทรัพยากร API และองค์กร \{#api-resources-and-organizations}

<ApiResources />

<Organization />

## คู่มือการย้ายเวอร์ชัน \{#migration-guide}

หากคุณกำลังย้ายจาก Logto Dart SDK เวอร์ชันก่อนหน้า (< 3.0.0):

1. อัปเดตไฟล์ `pubspec.yaml` ของคุณเพื่อใช้ Logto Dart SDK เวอร์ชันล่าสุด

   ```yaml title="pubspec.yaml"
   dependencies:
     logto_dart_sdk: ^3.0.0
   ```

2. อัปเดตไฟล์ Android manifest โดยแทนที่ callback activity เดิม `flutter_web_auth` ด้วย `flutter_web_auth_2` ใหม่

   - `FlutterWebAuth` -> `FlutterWebAuth2`
   - `flutter_web_auth` -> `flutter_web_auth_2`

3. ส่ง `redirectUri` ไปยังเมธอด `signOut`

   ขณะนี้ `redirectUri` จำเป็นต้องระบุเมื่อเรียกใช้เมธอด `signOut` สำหรับแพลตฟอร์ม iOS พารามิเตอร์นี้จะไม่มีผล แต่สำหรับ Android และ Web ซึ่งต้องมีการร้องขอ `end_session` เพิ่มเติมเพื่อเคลียร์เซสชันการลงชื่อเข้าใช้ พารามิเตอร์นี้จะถูกใช้เป็น `post_logout_redirect_uri` ในคำขอ `end_session`

   ```dart
   await logtoClient.signOut(redirectUri);
   ```

## การแก้ไขปัญหา \{#troubleshooting}

### การแก้ไขปัญหาบน Android \{#troubleshooting-android}

- คุณจะต้องอัปเดตไฟล์ AndroidManifest.xml เพื่อเพิ่ม activity `com.linusu.flutter_web_auth_2.CallbackActivity` ตัวอย่างเช่น:

  ```xml title="android/app/src/main/AndroidManifest.xml"
    <manifest>
    <application>

      <!-- เพิ่ม activity com.linusu.flutter_web_auth_2.CallbackActivity -->
      <activity
        android:name="com.linusu.flutter_web_auth_2.CallbackActivity"
        android:exported="true">
        <intent-filter android:label="flutter_web_auth_2">
          <action android:name="android.intent.action.VIEW" />
          <category android:name="android.intent.category.DEFAULT" />
          <category android:name="android.intent.category.BROWSABLE" />
          <data android:scheme="YOUR_CALLBACK_URL_SCHEME_HERE" />
        </intent-filter>
      </activity>

    </application>
  </manifest>
  ```

- หากคุณกำหนดเป้าหมาย SDK S+ (เวอร์ชัน 31 ขึ้นไป) คุณต้องระบุค่า `android:exported` อย่างชัดเจน หากคุณทำตามคำแนะนำการติดตั้งก่อนหน้านี้ อาจยังไม่ได้เพิ่มบรรทัดนี้ ตรวจสอบให้แน่ใจว่าได้เพิ่ม `android:exported="true"` ให้กับ activity `com.linusu.flutter_web_auth.CallbackActivity` ในไฟล์ `AndroidManifest.xml` ของคุณ

- เบราว์เซอร์ไม่ปิดหลังจากลงชื่อเข้าใช้สำเร็จ:

  เพื่อให้ `flutter_web_auth_2` ทำงานได้ถูกต้อง คุณต้องลบ entry `android:taskAffinity` ทั้งหมดออกจากไฟล์ `AndroidManifest.xml` ของคุณ และตั้งค่า `android:launchMode="singleTop"` ให้กับ main activity ในไฟล์ `AndroidManifest.xml`

  ```xml title="android/app/src/main/AndroidManifest.xml"
  <activity
    android:name=".MainActivity"
    android:launchMode="singleTop"
    android:theme="@style/LaunchTheme"
    // ...
  />
  ```

## อ่านเพิ่มเติม \{#further-readings}

<FurtherReadings />
