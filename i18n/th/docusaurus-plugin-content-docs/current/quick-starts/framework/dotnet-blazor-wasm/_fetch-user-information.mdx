import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

### แสดงข้อมูลผู้ใช้ \{#display-user-information}

ตัวอย่างต่อไปนี้แสดงวิธีแสดงข้อมูลผู้ใช้ในหน้า `Home.razor`:

```cshtml
<AuthorizeView>
    <Authorized>
        @* มุมมองเมื่อเข้าสู่ระบบแล้ว *@
        @* ... *@
        <p>คุณได้เข้าสู่ระบบในชื่อ @(@User?.Profile?.Name ?? "(ไม่ทราบชื่อ)").</p>
    </Authorized>
    @* ... *@
</AuthorizeView>
```

สำหรับพร็อพเพอร์ตี้และการอ้างสิทธิ์ (claims) อื่น ๆ เพิ่มเติม โปรดตรวจสอบคลาส `User` และ `Profile` ในแพ็กเกจ `Blorc.OpenIdConnect`

### ขอการอ้างสิทธิ์เพิ่มเติม \{#request-additional-claims}

<FindUserInfoMissing method="User" />

<ScopesAndClaimsIntroduction />

หากต้องการขอขอบเขต (scopes) เพิ่มเติม คุณสามารถเพิ่ม scopes ที่ถูกต้องลงในพร็อพเพอร์ตี้ `IdentityServer.Scope` ในไฟล์ `appsettings.json`

{/* eslint-disable prettier/prettier */}
```json5
{
  // ...
  "IdentityServer": {
    // ...
    // highlight-next-line
    "Scope": "openid profile email phone"
  }
}
```
{/* eslint-enable prettier/prettier */}

### การอ้างสิทธิ์ที่ต้องร้องขอผ่านเครือข่าย \{#claims-that-need-network-request}

เพื่อป้องกันไม่ให้วัตถุผู้ใช้มีขนาดใหญ่เกินไป การอ้างสิทธิ์บางอย่างจำเป็นต้องร้องขอผ่านเครือข่าย เช่น การอ้างสิทธิ์ custom_data จะไม่ถูกรวมอยู่ในวัตถุผู้ใช้ แม้ว่าจะร้องขอไว้ใน scopes ก็ตาม หากต้องการดึงการอ้างสิทธิ์เหล่านี้ คุณสามารถตั้งค่า `IdentityServer.LoadUserInfo` เป็น `true` ในไฟล์ `appsettings.json`

ตัวอย่างเช่น หากต้องการดึงที่อยู่อีเมลและ custom data ของผู้ใช้ สามารถใช้การตั้งค่าดังนี้:

{/* eslint-disable prettier/prettier */}
```json5
{
  // ...
  "IdentityServer": {
    // ...
    // highlight-start
    "Scope": "openid profile email custom_data",
    "LoadUserInfo": true
    // highlight-end
  }
}
```
{/* eslint-enable prettier/prettier */}

### ขอบเขตและการอ้างสิทธิ์ \{#scopes-and-claims}

<ScopesAndClaims />
