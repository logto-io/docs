import CodeBlock from '@theme/CodeBlock';

import ClaimsNeedNetworkRequest from '../../fragments/_claims-need-network-request.mdx';
import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

## รับข้อมูลผู้ใช้ \{#get-user-information}

### แสดงข้อมูลผู้ใช้ \{#display-user-information}

หากต้องการแสดงข้อมูลของผู้ใช้ คุณสามารถใช้เมธอด `client.GetIdTokenClaims` ตัวอย่างเช่น เพิ่ม route ดังนี้:

```go title="main.go"
func main() {
    //...

    router.GET("/user-id-token-claims", func(ctx *gin.Context) {
      session := sessions.Default(ctx)
      logtoClient := client.NewLogtoClient(logtoConfig, &SessionStorage{session: session})

      // highlight-start
      idTokenClaims, err := logtoClient.GetIdTokenClaims()
      // highlight-end

      if err != nil {
        ctx.String(http.StatusOK, err.Error())
      }

      ctx.JSON(http.StatusOK, idTokenClaims)
    })
}
```

### ขอการอ้างสิทธิ์ (claims) เพิ่มเติม \{#request-additional-claims}

<FindUserInfoMissing method="client.GetIdTokenClaims()" />

<ScopesAndClaimsIntroduction />

หากต้องการขอขอบเขต (scopes) เพิ่มเติม คุณสามารถส่ง scopes ไปยังอ็อบเจกต์ `LogtoConfig` ตัวอย่างเช่น:

```go title="main.go"
logtoConfig := &client.LogtoConfig{
  // ...other configs
  // highlight-next-line
  Scopes: []string{"email", "phone"},
}
```

จากนั้นคุณสามารถเข้าถึงการอ้างสิทธิ์ (claims) เพิ่มเติมในค่าที่คืนมาจาก `client.GetIdTokenClaims()`:

```go
idTokenClaims, error := client.GetIdTokenClaims()
// ตอนนี้คุณสามารถเข้าถึง claims เพิ่มเติม เช่น `claims.email`, `claims.phone` เป็นต้น
```

<ClaimsNeedNetworkRequest
  type="method"
  method="client.FetchUserInfo()"
  codeSnippet={
    <CodeBlock language="go">{`userInfo, error := client.FetchUserInfo()
// ตอนนี้คุณสามารถเข้าถึง claim \`userInfo.custom_data\``}</CodeBlock>
  }
/>

### ขอบเขต (scopes) และการอ้างสิทธิ์ (claims) \{#scopes-and-claims}

<ScopesAndClaims />
