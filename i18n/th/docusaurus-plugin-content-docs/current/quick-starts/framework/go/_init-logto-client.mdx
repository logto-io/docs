import GetAppSecret from '../../fragments/_get-app-secret.mdx';

ก่อนอื่น สร้าง Logto config:

```go title="main.go"
func main() {
	// ...
	logtoConfig := &client.LogtoConfig{
		Endpoint:  "<your-logto-endpoint>", // เช่น http://localhost:3001
		AppId:     "<your-application-id>",
		AppSecret: "<your-application-secret>",
	}
	// ...
}
```

<GetAppSecret />

จากนั้น คุณสามารถสร้าง `LogtoClient` สำหรับแต่ละคำขอของผู้ใช้โดยใช้ Logto config ข้างต้น:

```go title="main.go"
func main() {
	// ...

	router.GET("/", func(ctx *gin.Context) {
		// สร้าง LogtoClient
		session := sessions.Default(ctx)
		logtoClient := client.NewLogtoClient(
			logtoConfig,
			&SessionStorage{session: session},
		)

		// ใช้ Logto เพื่อควบคุมเนื้อหาของหน้าแรก
		authState := "คุณยังไม่ได้เข้าสู่ระบบเว็บไซต์นี้ :("

		if logtoClient.IsAuthenticated() {
			authState = "คุณได้เข้าสู่ระบบเว็บไซต์นี้แล้ว! :)"
		}

		homePage := `<h1>Hello Logto</h1>` +
			"<div>" + authState + "</div>"

		ctx.Data(http.StatusOK, "text/html; charset=utf-8", []byte(homePage))
	})

	// ...
}
```
