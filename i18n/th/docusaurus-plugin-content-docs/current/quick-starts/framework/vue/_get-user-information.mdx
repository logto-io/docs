import CodeBlock from '@theme/CodeBlock';

import ClaimsNeedNetworkRequest from '../../fragments/_claims-need-network-request.mdx';
import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

### แสดงข้อมูลผู้ใช้ \{#display-user-information}

หากต้องการแสดงข้อมูลของผู้ใช้ คุณสามารถใช้เมธอด `getIdTokenClaims()` ตัวอย่างเช่น ในหน้า Home ของคุณ:

```ts title="views/HomeView.vue"
import { useLogto, type IdTokenClaims } from '@logto/vue';
import { ref } from 'vue';

const { isAuthenticated, getIdTokenClaims } = useLogto();
const user = ref<IdTokenClaims>();

if (isAuthenticated.value) {
  (async () => {
    const claims = await getIdTokenClaims();
    user.value = claims;
  })();
}
```

```html
<template>
  <div v-if="isAuthenticated && user">
    <table class="table">
      <thead>
        <tr>
          <th>ชื่อ</th>
          <th>ค่า</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="(value, key) in user" v-bind:key="key">
          <td>{{ key }}</td>
          <td>{{ typeof value === "string" ? value : JSON.stringify(value) }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</template>
```

### ขอข้อมูลการอ้างสิทธิ์เพิ่มเติม \{#request-additional-claims}

<FindUserInfoMissing method="getIdTokenClaims()" />

<ScopesAndClaimsIntroduction />

หากต้องการขอขอบเขต (scopes) เพิ่มเติม คุณสามารถกำหนดค่า provider ของ Logto ได้ดังนี้:

```ts title="main.ts"
import { createLogto, UserScope } from '@logto/vue';

const app = createApp(App);

app.use(createLogto, {
  // ...other configs
  // highlight-start
  scopes: [
    UserScope.Email,
    UserScope.Phone,
    UserScope.CustomData,
    UserScope.Identities,
    UserScope.Organizations,
  ],
  // highlight-end
});
app.use(router);
```

จากนั้นคุณจะสามารถเข้าถึงการอ้างสิทธิ์เพิ่มเติมในค่าที่ส่งกลับของ `getIdTokenClaims()`:

```ts
const claims = await getIdTokenClaims();
// ตอนนี้คุณสามารถเข้าถึงการอ้างสิทธิ์เพิ่มเติม เช่น `claims.email`, `claims.phone` เป็นต้น
```

<ClaimsNeedNetworkRequest
  type="method"
  method="fetchUserInfo()"
  codeSnippet={
    <CodeBlock language="tsx">{`const { fetchUserInfo } = useLogto();

const userInfo = await fetchUserInfo();

// ตอนนี้คุณสามารถเข้าถึงการอ้างสิทธิ์ \`userInfo.custom_data\``}</CodeBlock>
}
/>

### ขอบเขตและการอ้างสิทธิ์{scopes-and-claims} \{#scopes-and-claims}

<ScopesAndClaims />
