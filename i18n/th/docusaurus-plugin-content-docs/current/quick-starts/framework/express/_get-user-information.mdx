import CodeBlock from '@theme/CodeBlock';

import ClaimsNeedNetworkRequest from '../../fragments/_claims-need-network-request.mdx';
import FindUserInfoMissing from '../../fragments/_find-user-info-missing.mdx';
import ScopesAndClaims from '../../fragments/_scopes-and-claims.mdx';
import ScopesAndClaimsIntroduction from '../../fragments/_scopes-claims-introduction.md';

### แสดงข้อมูลผู้ใช้ \{#display-user-information}

เมื่อผู้ใช้ลงชื่อเข้าใช้แล้ว ค่าใน `req.user` จะเป็นอ็อบเจกต์ที่มีข้อมูลของผู้ใช้ คุณสามารถแสดงข้อมูลนี้ในแอปของคุณได้:

```ts title="app.ts"
import { withLogto } from '@logto/express';

app.get('/', withLogto(config), (req, res) => {
  response.json(request.user.claims);
});
```

### ขอการอ้างสิทธิ์เพิ่มเติม \{#request-additional-claims}

<FindUserInfoMissing method="req.user" />

<ScopesAndClaimsIntroduction />

หากต้องการขอขอบเขต (scopes) เพิ่มเติม คุณสามารถเพิ่ม scopes ลงในคอนฟิกได้ดังนี้:

```ts title="app.ts"
import { LogtoExpressConfig, UserScope } from '@logto/express';

const config: LogtoExpressConfig = {
  // highlight-next-line
  scopes: [UserScope.Email, UserScope.Phone], // เพิ่ม scopes อื่น ๆ ได้ตามต้องการ
  // ...other configs
};
```

จากนั้นคุณสามารถเข้าถึงการอ้างสิทธิ์เพิ่มเติมในอ็อบเจกต์ `req.user` ได้:

```ts title="app.ts"
import { withLogto } from '@logto/express';

app.get('/', withLogto(config), (req, res) => {
  response.end(`User email: ${req.user.claims.email}`);
});
```

<ClaimsNeedNetworkRequest
  type="option"
  configOption="fetchUserInfo"
  codeSnippet={
    <CodeBlock language="ts" title="app.ts">{`const config: LogtoExpressConfig = {
  // highlight-next-line
  fetchUserInfo: true,
  // ...other configs
};`}</CodeBlock>
  }
/>

### ขอบเขต (Scopes) และการอ้างสิทธิ์ (Claims) \{#scopes-and-claims}

<ScopesAndClaims />
