import CodeBlock from '@theme/CodeBlock';

import {
  defaultBaseUrl,
  defaultRedirectUri,
} from '../../fragments/_web-configure-redirect-uris.mdx';

ในแอปพลิเคชันเว็บของคุณ ให้เพิ่ม route เพื่อจัดการคำขอลงชื่อเข้าใช้จากผู้ใช้อย่างถูกต้อง ตัวอย่างนี้จะใช้ `/sign-in`:

<CodeBlock language="python" title="flask.py">{`@app.route("/sign-in")
async def sign_in():
    # รับ URL สำหรับลงชื่อเข้าใช้และเปลี่ยนเส้นทางผู้ใช้ไปยังหน้านั้น
    return redirect(await client.signIn(
        redirectUri="${defaultRedirectUri}",
    ))
`}</CodeBlock>

แทนที่ <code>{defaultRedirectUri}</code> ด้วย callback URL ที่คุณตั้งค่าไว้ใน Logto Console สำหรับแอปพลิเคชันนี้

หากคุณต้องการแสดงหน้าสมัครสมาชิก (sign-up) เป็นหน้าจอแรก สามารถตั้งค่า `interactionMode` เป็น `signUp` ได้ดังนี้:

<CodeBlock language="python" title="flask.py">{`@app.route("/sign-in")
async def sign_in():
    return redirect(await client.signIn(
        redirectUri="${defaultRedirectUri}",
        interactionMode="signUp", # แสดงหน้าสมัครสมาชิกเป็นหน้าจอแรก
    ))
`}</CodeBlock>

ตอนนี้ ทุกครั้งที่ผู้ใช้ของคุณเข้าชม <code>{defaultBaseUrl}sign-in</code> จะเริ่มกระบวนการลงชื่อเข้าใช้ใหม่และเปลี่ยนเส้นทางผู้ใช้ไปยังหน้าลงชื่อเข้าใช้ของ Logto

> **หมายเหตุ**
> การสร้าง route สำหรับลงชื่อเข้าใช้ไม่ใช่วิธีเดียวในการเริ่มต้นกระบวนการลงชื่อเข้าใช้ คุณสามารถใช้เมธอด `signIn` เพื่อรับ URL สำหรับลงชื่อเข้าใช้และเปลี่ยนเส้นทางผู้ใช้ไปยังหน้านั้นได้เสมอ

หลังจากที่ผู้ใช้ร้องขอลงชื่อออก Logto จะล้างข้อมูลการยืนยันตัวตนของผู้ใช้ทั้งหมดใน session

เพื่อเคลียร์ session ของ Python และ session ของ Logto สามารถสร้าง route สำหรับลงชื่อออกได้ดังนี้:

<CodeBlock language="python" title="flask.py">{`@app.route("/sign-out")
async def sign_out():
    return redirect(
        # เปลี่ยนเส้นทางผู้ใช้ไปยังหน้าแรกหลังจากลงชื่อออกสำเร็จ
        await client.signOut(postLogoutRedirectUri="${defaultBaseUrl}")
    )
`}</CodeBlock>
