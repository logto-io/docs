---
sidebar_position: 7
---

import Availability from '@components/Availability';

# เก็บข้อมูลโปรไฟล์ผู้ใช้

<Availability cloud oss={{ major: 1, minor: 31 }} />

นอกเหนือจากตัวระบุและข้อมูลรับรองสำหรับการยืนยันตัวตนที่จำเป็นต่อการลงชื่อเข้าใช้ของผู้ใช้แล้ว แอปพลิเคชันของคุณอาจต้องเก็บข้อมูลโปรไฟล์ผู้ใช้เพิ่มเติมที่จัดเก็บใน Logto เพื่อให้สามารถดึงข้อมูลได้ง่ายผ่านการอ้างสิทธิ์ JWT หรือ API เพื่อมอบประสบการณ์ผลิตภัณฑ์ที่ปรับแต่งเฉพาะบุคคล คุณสามารถเก็บข้อมูลผู้ใช้ได้ด้วยวิธีดังต่อไปนี้:

- **ระหว่างการลงทะเบียนผู้ใช้ใหม่**: ใช้ฟีเจอร์ [เก็บข้อมูลโปรไฟล์ผู้ใช้](#quick-start) เพื่อเพิ่มขั้นตอน "บอกเราเกี่ยวกับตัวคุณ" ที่พร้อมใช้งานทันทีสำหรับเก็บข้อมูลโปรไฟล์ผู้ใช้เพิ่มเติมระหว่างการสมัคร ผู้ใช้ใหม่ต้องกรอกข้อมูลที่จำเป็นทั้งหมดก่อนจึงจะถือว่าการลงทะเบียนเสร็จสมบูรณ์ เอกสารนี้เน้นวิธีนี้เป็นหลัก

- **หลังการลงทะเบียนผู้ใช้**: ใช้ [Account API](/end-user-flows/account-settings/by-account-api) เพื่อสร้างประสบการณ์บริการตนเองในขั้นตอน onboarding ศูนย์บัญชี หรือระหว่างการใช้งานผลิตภัณฑ์ เพื่ออัปเดตข้อมูลโปรไฟล์ผู้ใช้

## ประโยชน์สำคัญ \{#key-benefits}

ฟีเจอร์ **เก็บข้อมูลโปรไฟล์ผู้ใช้** ช่วยให้คุณสามารถรวบรวมข้อมูลผู้ใช้เพิ่มเติมระหว่างประสบการณ์การลงทะเบียนของผู้ใช้ปลายทาง เราแนะนำให้เก็บเฉพาะข้อมูลที่จำเป็นต่อผลิตภัณฑ์ของคุณเท่านั้น เพื่อหลีกเลี่ยงขั้นตอนลงทะเบียนที่ยาวเกินไปซึ่งอาจส่งผลต่ออัตราการสมัครของผู้ใช้

ฟีเจอร์นี้ช่วยให้คุณ:

- **เก็บข้อมูลผู้ใช้อย่างครบถ้วน**: เก็บ [ข้อมูลผู้ใช้](/user-management/user-data) ได้ทุกประเภทเพื่อวัตถุประสงค์ทางธุรกิจหรือข้อกำหนดด้านกฎหมาย รวมถึง [คุณสมบัติมาตรฐานของผู้ใช้ OIDC](#basic-user-data-fields) และ [ข้อมูลที่กำหนดเอง](#custom-user-data-fields)

- **ปรับแต่งฟิลด์ได้อย่างยืดหยุ่น**: เลือกจาก [ประเภทฟิลด์](#field-types) ที่หลากหลาย เช่น ข้อความ ตัวเลข วันที่ เช็กบ็อกซ์ ดรอปดาวน์ (เลือกเดียว) URL และการตรวจสอบรูปแบบด้วย regex ให้ตรงกับความต้องการข้อมูลของคุณ

- **ประสบการณ์ผู้ใช้ที่เหมาะสม**: ปรับแต่งการแสดงผลด้วยป้ายชื่อ คำอธิบาย ตัวอย่างข้อความ และกฎการตรวจสอบความถูกต้อง กำหนดฟิลด์ให้เป็นแบบบังคับหรือไม่บังคับได้ตามความต้องการทางธุรกิจ

- **การตั้งค่าฟิลด์สำเร็จรูปในตัว**: ใช้ฟิลด์ข้อมูลพื้นฐานที่ตั้งค่าไว้ล่วงหน้าสำหรับคุณสมบัติผู้ใช้ทั่วไปได้ทันที ใช้ฟิลด์แบบผสม (ที่อยู่, ชื่อเต็ม) เพื่อเก็บข้อมูลที่มีโครงสร้างอย่างมีประสิทธิภาพในขั้นตอนเดียว

## เริ่มต้นอย่างรวดเร็ว \{#quick-start}

1. ไปที่ <CloudLink to="/sign-in-experience/collect-user-profile">Logto console > ประสบการณ์การลงชื่อเข้าใช้ > เก็บข้อมูลโปรไฟล์ผู้ใช้</CloudLink>
2. คลิก "เพิ่มฟิลด์โปรไฟล์" และเลือก [ฟิลด์สำเร็จรูป](#basic-user-data-fields) หรือกำหนด [ข้อมูลที่กำหนดเอง](#custom-user-data-fields) (คีย์ตัวอักษรและตัวเลข) เพื่อสร้าง
3. เปิดรายละเอียดฟิลด์เพื่อกำหนดประเภทฟิลด์ ป้ายชื่อ คำอธิบาย สถานะบังคับ และการตั้งค่าเฉพาะประเภท (ความยาว ช่วง รูปแบบ ตัวเลือก ฯลฯ) จากนั้นคลิก "บันทึกการเปลี่ยนแปลง"
4. กลับไปที่ ประสบการณ์การลงชื่อเข้าใช้ > เก็บข้อมูลโปรไฟล์ผู้ใช้ ลากและวางฟิลด์เพื่อจัดลำดับใหม่ การเปลี่ยนแปลงจะถูกนำไปใช้โดยอัตโนมัติ
5. ทดสอบประสบการณ์ผู้ใช้ด้วย [Logto live preview](/customization/live-preview) หรือแอปทดสอบของคุณ ไม่ว่าผู้ใช้จะสร้างบัญชีใหม่ผ่าน [identifier (อีเมล / เบอร์โทรศัพท์ / ชื่อผู้ใช้)](/end-user-flows/sign-up-and-sign-in/sign-up), [social sign-in](/end-user-flows/sign-up-and-sign-in/social-sign-in), หรือ [Enterprise SSO](/end-user-flows/enterprise-sso) ทุกคนจะเห็นหน้าว่า "บอกเราเกี่ยวกับตัวคุณ" ระหว่างการลงทะเบียน

<img
  src="/img/assets/collect-user-profile-during-sign-up.png"
  alt="เก็บข้อมูลโปรไฟล์ผู้ใช้ระหว่างการสมัคร"
/>

## ประเภทข้อมูลผู้ใช้ \{#user-data-types}

ข้อมูลผู้ใช้สามารถดูได้ในแต่ละ [โปรไฟล์ผู้ใช้](/user-management/manage-users) สำหรับภาพรวมของหมวดหมู่ข้อมูลผู้ใช้ทั้งหมด ดูเอกสาร [โครงสร้างข้อมูลผู้ใช้](/user-management/user-data) ฟีเจอร์เก็บข้อมูลโปรไฟล์ผู้ใช้ช่วยให้คุณรวบรวมทั้งข้อมูลผู้ใช้พื้นฐานและข้อมูลที่กำหนดเองระหว่างการลงทะเบียน

### ฟิลด์ข้อมูลผู้ใช้พื้นฐาน \{#basic-user-data-fields}

ฟิลด์ข้อมูลผู้ใช้พื้นฐานที่ Logto ให้มาจะถูกจัดเก็บโดยตรงใน `user` หรือ `user.profile` ฟิลด์เหล่านี้มีค่าการตั้งค่าเริ่มต้นและการแปลภาษา i18n พร้อมใช้งานทันทีหลังจากสร้าง คุณยังสามารถปรับแต่งประเภทฟิลด์และพารามิเตอร์ให้ตรงกับความต้องการของคุณได้

| ชื่อฟิลด์ (13%) | คีย์ข้อมูลผู้ใช้ (44%)                                                                                                                                                                                                                                                                          | คำอธิบาย                                                                                                                                                                                              |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name            | <code>user.name</code>                                                                                                                                                                                                                                                                          | ชื่อเต็มของผู้ใช้ในรูปแบบที่แสดงได้ รวมทุกองค์ประกอบของชื่อ (เช่น "Jane Doe")                                                                                                                         |
| Fullname        | <code>user.profile.givenName</code><br /><code>user.profile.middleName</code><br /><code>user.profile.familyName</code>                                                                                                                                                                         | ชื่อเต็มตามกฎหมายของผู้ใช้ ผสมผสาน familyName, givenName และ middleName ได้อย่างยืดหยุ่นตามการตั้งค่า                                                                                                 |
| Nickname        | <code>user.profile.nickname</code>                                                                                                                                                                                                                                                              | ชื่อเล่นหรือชื่อที่คุ้นเคยของผู้ใช้ ซึ่งอาจแตกต่างจากชื่อทางการ                                                                                                                                       |
| Birthdate       | <code>user.profile.birthdate</code>                                                                                                                                                                                                                                                             | วันเกิดของผู้ใช้ในรูปแบบที่กำหนด (เช่น "MM-dd-yyyy")                                                                                                                                                  |
| Gender          | <code>user.profile.gender</code>                                                                                                                                                                                                                                                                | เพศที่ผู้ใช้ระบุด้วยตนเอง (เช่น "หญิง", "ชาย", "ไม่ระบุ")                                                                                                                                             |
| Profile         | <code>user.profile.profile</code>                                                                                                                                                                                                                                                               | URL ของหน้าโปรไฟล์ที่มนุษย์อ่านได้ของผู้ใช้ (เช่น โปรไฟล์โซเชียลมีเดีย)                                                                                                                               |
| Website         | <code>user.profile.website</code>                                                                                                                                                                                                                                                               | URL ของเว็บไซต์หรือบล็อกส่วนตัวของผู้ใช้                                                                                                                                                              |
| Address         | <code>user.profile.address.formatted</code><br /><code>user.profile.address.streetAddress</code><br /><code>user.profile.address.region</code><br /><code>user.profile.address.zoneinfo</code><br /><code>user.profile.address.postalCode</code><br /><code>user.profile.address.country</code> | ที่อยู่เต็มของผู้ใช้ (เช่น "123 Main St, Anytown, USA 12345") เลือกได้ระหว่างแบบบรรทัดเดียว (<code>address.formatted</code>) หรือแบบหลายบรรทัดพร้อมองค์ประกอบย่อย (ถนน เมือง รัฐ รหัสไปรษณีย์ ประเทศ) |

### ฟิลด์ข้อมูลผู้ใช้ที่กำหนดเอง \{#custom-user-data-fields}

ฟิลด์ข้อมูลผู้ใช้ที่กำหนดเองคือฟิลด์ที่ผู้ใช้กำหนดขึ้นเองเพื่อเก็บข้อมูลเพิ่มเติมที่ฟิลด์พื้นฐานไม่มี เช่น ความสนใจ ขนาดบริษัท หรือคุณลักษณะเฉพาะทางธุรกิจอื่น ๆ

เมื่อสร้างฟิลด์ที่กำหนดเอง ให้ใช้เฉพาะตัวอักษรและตัวเลขสำหรับคีย์ข้อมูลผู้ใช้ (เช่น `customData.companySize`) จากนั้นคุณสามารถกำหนด [ประเภทฟิลด์](#field-types) และปรับแต่งคุณสมบัติเพิ่มเติมให้ตรงกับความต้องการของคุณ

ดูข้อมูลเพิ่มเติมเกี่ยวกับการดึงและอัปเดตข้อมูลผู้ใช้ที่กำหนดเองหลังจากสร้างผู้ใช้ได้ที่ [โครงสร้างข้อมูลผู้ใช้](/user-management/user-data#custom-data)

## ประเภทฟิลด์ \{#field-types}

เราสามารถแบ่งประเภทฟิลด์อย่างง่ายได้ดังนี้:

- แบบพื้นฐาน: ข้อความ ตัวเลข วันที่ เช็กบ็อกซ์ (Boolean) ดรอปดาวน์ (เลือกเดียว) URL รูปแบบด้วย Regular expression
- แบบผสม: ชื่อเต็ม ที่อยู่

### คุณสมบัติทั่วไป \{#common-properties}

| คุณสมบัติ (14%) | ใช้กับ (36%)              | หมายเหตุ                                                                                                |
| --------------- | ------------------------- | ------------------------------------------------------------------------------------------------------- |
| ป้ายชื่อ        | ทั้งหมด                   | ชื่อที่แสดงให้ผู้ใช้เห็น ลอยขึ้นด้านบนเมื่อมีค่าในฟิลด์หรือได้รับโฟกัส ฟิลด์นี้จำเป็นต้องระบุ           |
| ตัวอย่างข้อความ | ทั้งหมด (ยกเว้น Checkbox) | ข้อความแนะนำที่แสดงในฟิลด์เมื่อป้ายชื่อลอยอยู่ (ตัวอย่าง / แนวทางการกรอก)                               |
| คำอธิบาย        | ทั้งหมด (ยกเว้น Checkbox) | ข้อความสนับสนุนใต้ฟิลด์สำหรับคำแนะนำเพิ่มเติมหรือบริบทเสริม                                             |
| บังคับ          | ทั้งหมด (ยกเว้น Checkbox) | หากเปิดใช้งาน จะไม่สามารถส่งข้อมูลได้เมื่อฟิลด์ว่าง หากปิดใช้งาน จะมีแท็ก `(ไม่บังคับ)` ต่อท้ายป้ายชื่อ |

### การตั้งค่าเฉพาะประเภท \{#type-specific-configurations}

| ประเภท (14%)           | ด้านที่กำหนดค่าได้ (36%)            | หมายเหตุ                                                                                                                                                                                                                                                  |
| ---------------------- | ----------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ข้อความ                | ความยาวต่ำสุด / สูงสุด              | จำกัดความยาวข้อความที่ผู้ใช้กรอก                                                                                                                                                                                                                          |
| ตัวเลข                 | ค่าน้อยสุด / มากสุด                 | จำกัดช่วงค่าตัวเลขที่ผู้ใช้กรอก                                                                                                                                                                                                                           |
| วันที่                 | รูปแบบวันที่ (สำเร็จรูป / กำหนดเอง) | เลือกรูปแบบสำเร็จ (MM/dd/yyyy, dd/MM/yyyy, yyyy-MM-dd) การเปลี่ยนตัวอย่างข้อความจะเขียนทับการโต้ตอบเริ่มต้น หรือใช้รูปแบบ <a href="https://date-fns.org/v2.30.0/docs/format" target="_blank" rel="noopener noreferrer">date-fns</a> ที่ปรับแต่งได้เต็มที่ |
| เช็กบ็อกซ์             | ค่าเริ่มต้น                         | ติ๊ก (จริง) / ไม่ติ๊ก (เท็จ)                                                                                                                                                                                                                              |
| ดรอปดาวน์ (เลือกเดียว) | รายการตัวเลือก (≥1)                 | ใช้ <code>value:label</code> ต่อบรรทัด หากไม่มี label จะแสดง value แทน                                                                                                                                                                                    |
| URL                    | ไม่มี                               | ไม่มี                                                                                                                                                                                                                                                     |
| Regex                  | รูปแบบ Regular expression           | รูปแบบการตรวจสอบ (ไม่ต้องใส่ / ขึ้นต้นหรือปิดท้าย) เช่น <code>^\d{3}-\d{2}-\d{4}$</code> สำหรับ SSN                                                                                                                                                       |
| ที่อยู่                | องค์ประกอบ                          | แบบบรรทัดเดียวหรือหลายบรรทัด; องค์ประกอบย่อย: ถนน เมือง รัฐ รหัสไปรษณีย์ ประเทศ                                                                                                                                                                           |
| ชื่อเต็ม               | องค์ประกอบ                          | องค์ประกอบย่อย: ชื่อจริง ชื่อกลาง นามสกุล                                                                                                                                                                                                                 |

## การตรวจสอบความถูกต้อง \{#validation}

การตรวจสอบความถูกต้องของฟิลด์จะดำเนินการเมื่อผู้ใช้ส่งข้อมูลในขั้นตอนสุดท้ายของการลงทะเบียน โดยจะมีการตรวจสอบดังนี้:

- ต้องมีข้อมูล (ยกเว้น Checkbox)
- ขอบเขตความยาว (ข้อความ)
- ช่วงตัวเลข (ตัวเลข)
- ตรงกับรูปแบบ (Regex, วันที่ที่มีรูปแบบ, URL, การเป็นสมาชิกตัวเลือก Select)
- โครงสร้าง URL (ตรวจสอบไวยากรณ์ขั้นพื้นฐาน ไม่ตรวจสอบการเข้าถึง)

ใช้กับองค์ประกอบย่อยของฟิลด์แบบผสมทั้งสอง (`address` และ `fullname`) ด้วย โดยแต่ละองค์ประกอบต้องผ่านเกณฑ์การตรวจสอบเดียวกัน

## การแปลภาษา \{#localization}

Logto มีการแปลในระดับระบบสำหรับฟิลด์ข้อมูลผู้ใช้พื้นฐาน เช่น `firstName`, `lastName`, `gender`, และ `birthdate` โดยป้ายชื่อของฟิลด์เหล่านี้สามารถปรับแต่งได้ใน Logto Console
คุณสามารถเขียนทับป้ายชื่อเหล่านี้ด้วยการแปลของคุณเองได้ที่ [Logto > ประสบการณ์การลงชื่อเข้าใช้ > เนื้อหา](https://cloud.logto.io/to/sign-in-experience/content)

ฟิลด์ที่กำหนดเองจะขึ้นอยู่กับป้ายชื่อ ตัวอย่างข้อความ และคำอธิบายที่คุณระบุเท่านั้น สำหรับการแปลฟิลด์ที่กำหนดเอง คุณสามารถจัดการการแปลได้ด้วย [Bring your UI](/customization/bring-your-ui) หรือ [ติดต่อเรา](https://logto.io/contact) พร้อมข้อเสนอแนะของคุณ

## Management API (จุดเชื่อมต่อหลัก) \{#management-api-key-endpoints}

| Method (10%) | Endpoint                                                     | วัตถุประสงค์                                 |
| ------------ | ------------------------------------------------------------ | -------------------------------------------- |
| GET          | <code>/api/custom-profile-fields</code>                      | แสดงรายการฟิลด์ทั้งหมด                       |
| GET          | <code>/api/custom-profile-fields/:name</code>                | ดึงนิยามฟิลด์เดียวตามชื่อ                    |
| POST         | <code>/api/custom-profile-fields</code>                      | สร้างฟิลด์                                   |
| POST         | <code>/api/custom-profile-fields/batch</code>                | สร้างหลายรายการ (≤20 รายการต่อคำขอ)          |
| PUT          | <code>/api/custom-profile-fields/:name</code>                | อัปเดตฟิลด์ตามชื่อและชุดข้อมูลเต็ม           |
| DELETE       | <code>/api/custom-profile-fields/:name</code>                | ลบฟิลด์                                      |
| POST         | <code>/api/custom-profile-fields/properties/sie-order</code> | อัปเดตลำดับฟิลด์ในประสบการณ์การลงชื่อเข้าใช้ |

## แนวทางปฏิบัติที่ดีที่สุด \{#best-practices}

- เก็บเฉพาะข้อมูลที่จำเป็นในขั้นตอนสมัครสมาชิก ส่วนข้อมูลที่อยากได้เพิ่มเติมให้เก็บในภายหลัง
- ใช้ฟิลด์แบบผสมสำหรับข้อมูลที่มีโครงสร้าง (ที่อยู่, ชื่อเต็ม) เพื่อความสอดคล้องและรองรับการแปลภาษา
- ให้ตัวอย่าง / ตัวอย่างข้อความที่ชัดเจนสำหรับฟิลด์ที่ต้องการรูปแบบเฉพาะ (regex, วันที่, ช่วงตัวเลข)

## คำถามที่พบบ่อย \{#faqs}

<details>

<summary>

### ฟิลด์โปรไฟล์จะเก็บข้อมูลผู้ใช้ที่มีอยู่แล้วหรือไม่? \{#do-the-profile-fields-collect-existing-user-data}

</summary>

ไม่ ฟิลด์เหล่านี้จะเก็บข้อมูลเฉพาะจากขั้นตอนสุดท้ายของการลงทะเบียนผู้ใช้ใหม่เท่านั้น

</details>

<details>

<summary>

### ถ้าฉันลบฟิลด์ จะลบข้อมูลผู้ใช้ด้วยหรือไม่? \{#what-if-i-delete-a-field-does-it-remove-the-user-data}

</summary>

ไม่ ข้อมูลผู้ใช้ที่มีอยู่จะไม่ถูกลบ จะมีเพียงฟิลด์ที่ถูกลบออกจากฟอร์มสมัครสมาชิกในประสบการณ์ของผู้ใช้ปลายทางเท่านั้น

</details>

<details>

<summary>

### ฉันสามารถเก็บข้อมูลประเทศด้วยรายการที่ควบคุมได้แทนฟิลด์ข้อความธรรมดาได้หรือไม่? \{#can-i-collect-country-with-a-controlled-list-instead-of-a-regular-text-field}

</summary>

ได้ คุณสามารถเปลี่ยนองค์ประกอบ "ประเทศ" ให้เป็นฟิลด์ "ดรอปดาวน์ (เลือกเดียว)" พร้อมตัวเลือกมาตรฐานได้

</details>
