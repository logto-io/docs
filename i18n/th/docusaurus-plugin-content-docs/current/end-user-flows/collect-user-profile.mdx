---
sidebar_position: 7
---

# เก็บข้อมูลโปรไฟล์ผู้ใช้

นอกเหนือจากตัวระบุและข้อมูลรับรองสำหรับการยืนยันตัวตนที่จำเป็นต่อการลงชื่อเข้าใช้แล้ว แอปของคุณอาจต้องการเก็บข้อมูลโปรไฟล์ผู้ใช้เพิ่มเติมที่จัดเก็บใน Logto เพื่อให้สามารถเรียกใช้งานได้ง่ายผ่านการอ้างสิทธิ์ (Claims) ใน JWT หรือ API เพื่อมอบประสบการณ์ผลิตภัณฑ์ที่ปรับแต่งเฉพาะบุคคล คุณสามารถเก็บข้อมูลผู้ใช้ได้ด้วยวิธีดังต่อไปนี้:

- **ระหว่างการลงทะเบียนผู้ใช้ใหม่**: ใช้ฟีเจอร์ [เก็บข้อมูลโปรไฟล์ผู้ใช้](#quick-start) เพื่อเพิ่มขั้นตอน "บอกเราเกี่ยวกับตัวคุณ" ที่พร้อมใช้งานทันทีสำหรับเก็บข้อมูลโปรไฟล์เพิ่มเติมระหว่างการสมัคร ผู้ใช้ใหม่ต้องกรอกข้อมูลที่จำเป็นทั้งหมดก่อนจึงจะถือว่าการลงทะเบียนเสร็จสมบูรณ์ เอกสารนี้เน้นวิธีนี้เป็นหลัก

- **หลังการลงทะเบียนผู้ใช้**: ใช้ [Account API](/end-user-flows/account-settings/by-account-api) เพื่อสร้างประสบการณ์บริการตนเองระหว่าง onboarding, ศูนย์บัญชี หรือระหว่างการใช้งานผลิตภัณฑ์ เพื่ออัปเดตข้อมูลโปรไฟล์ผู้ใช้

## ประโยชน์สำคัญ \{#key-benefits}

ฟีเจอร์ **เก็บข้อมูลโปรไฟล์ผู้ใช้** ช่วยให้คุณสามารถรวบรวมข้อมูลผู้ใช้เพิ่มเติมระหว่างประสบการณ์การลงทะเบียนของผู้ใช้ปลายทาง เราแนะนำให้เก็บเฉพาะข้อมูลที่จำเป็นต่อผลิตภัณฑ์ของคุณเท่านั้น เพื่อหลีกเลี่ยงขั้นตอนการลงทะเบียนที่ยาวเกินไปซึ่งอาจส่งผลต่ออัตราการสมัครของผู้ใช้

ฟีเจอร์นี้ช่วยให้คุณ:

- **เก็บข้อมูลผู้ใช้อย่างครบถ้วน**: เก็บ [ข้อมูลผู้ใช้](/user-management/user-data) ใด ๆ เพื่อวัตถุประสงค์ทางธุรกิจหรือข้อกำหนดด้านกฎหมาย รวมถึง [คุณสมบัติมาตรฐานของผู้ใช้ OIDC](#basic-user-data-fields) และ [ข้อมูลที่กำหนดเอง](#custom-user-data-fields)

- **ปรับแต่งฟิลด์ได้อย่างยืดหยุ่น**: เลือกจาก [ประเภทฟิลด์](#field-types) ต่าง ๆ เช่น ข้อความ ตัวเลข วันที่ เช็กบ็อกซ์ ดรอปดาวน์ (เลือกเดียว) URL และการตรวจสอบด้วย regex ให้ตรงกับความต้องการข้อมูลของคุณ

- **ประสบการณ์ผู้ใช้ที่เหมาะสม**: ปรับแต่งการแสดงผลด้วยป้ายกำกับ คำอธิบาย ตัวอย่างข้อความ และกฎการตรวจสอบความถูกต้อง กำหนดฟิลด์ให้เป็น "จำเป็น" หรือ "ไม่จำเป็น" ได้ตามความต้องการทางธุรกิจ

- **การตั้งค่าฟิลด์สำเร็จรูปในตัว**: ใช้ฟิลด์ข้อมูลพื้นฐานที่ตั้งค่าไว้ล่วงหน้าสำหรับคุณสมบัติผู้ใช้ทั่วไป พร้อมใช้งานทันที ใช้ฟิลด์แบบผสม (ที่อยู่, ชื่อเต็ม) เพื่อเก็บข้อมูลเชิงโครงสร้างได้อย่างมีประสิทธิภาพในขั้นตอนเดียว

## เริ่มต้นอย่างรวดเร็ว \{#quick-start}

1. ไปที่ <CloudLink to="/sign-in-experience/collect-user-profile">Logto console > ประสบการณ์การลงชื่อเข้าใช้ > เก็บข้อมูลโปรไฟล์ผู้ใช้</CloudLink>
2. คลิก "เพิ่มฟิลด์โปรไฟล์" และเลือก [ฟิลด์สำเร็จรูป](#basic-user-data-fields) หรือกำหนด [ข้อมูลที่กำหนดเอง](#custom-user-data-fields) (คีย์เป็นตัวอักษรและตัวเลข) เพื่อสร้าง
3. เปิดรายละเอียดฟิลด์เพื่อกำหนดประเภทฟิลด์ ป้ายกำกับ คำอธิบาย สถานะจำเป็น และการตั้งค่าเฉพาะประเภท (ความยาว ช่วง รูปแบบ ตัวเลือก ฯลฯ) จากนั้นคลิก "บันทึกการเปลี่ยนแปลง"
4. กลับไปที่ ประสบการณ์การลงชื่อเข้าใช้ > เก็บข้อมูลโปรไฟล์ผู้ใช้ ลากและวางเพื่อจัดเรียงลำดับฟิลด์ใหม่ การเปลี่ยนแปลงจะถูกนำไปใช้โดยอัตโนมัติ
5. ทดสอบประสบการณ์ผู้ใช้ด้วย [Logto live preview](/customization/live-preview) หรือแอปทดสอบของคุณ ไม่ว่าผู้ใช้จะสร้างบัญชีใหม่ผ่าน [identifier (อีเมล/เบอร์โทรศัพท์/ชื่อผู้ใช้)](/end-user-flows/sign-up-and-sign-in/sign-up), [social sign-in](/end-user-flows/sign-up-and-sign-in/social-sign-in) หรือ [Enterprise SSO](/end-user-flows/enterprise-sso) ทุกคนจะเห็นหน้าว่า "บอกเราเกี่ยวกับตัวคุณ" ระหว่างการลงทะเบียน

<img
  src="/img/assets/collect-user-profile-during-sign-up.png"
  alt="เก็บข้อมูลโปรไฟล์ผู้ใช้ระหว่างสมัคร"
/>

## ประเภทข้อมูลผู้ใช้ \{#user-data-types}

ข้อมูลผู้ใช้สามารถดูได้ในแต่ละ [โปรไฟล์ผู้ใช้](/user-management/manage-users) สำหรับภาพรวมของหมวดหมู่ข้อมูลผู้ใช้ทั้งหมด ดูเอกสาร [โครงสร้างข้อมูลผู้ใช้](/user-management/user-data) ฟีเจอร์เก็บข้อมูลโปรไฟล์ผู้ใช้ช่วยให้คุณเก็บทั้งข้อมูลผู้ใช้พื้นฐานและข้อมูลที่กำหนดเองระหว่างการลงทะเบียน

### ฟิลด์ข้อมูลผู้ใช้พื้นฐาน \{#basic-user-data-fields}

ฟิลด์ข้อมูลผู้ใช้พื้นฐานที่ Logto ให้มาจะถูกจัดเก็บโดยตรงใน `user` หรือ `user.profile` ฟิลด์เหล่านี้มีค่าตั้งต้นและการแปลภาษา (i18n) พร้อมใช้งานทันทีหลังสร้าง คุณยังสามารถปรับแต่งประเภทฟิลด์และพารามิเตอร์ได้ตามความต้องการ

| ชื่อฟิลด์ (13%) | คีย์ข้อมูลผู้ใช้ (44%)                                                                                                                                                                                                                                                                          | คำอธิบาย                                                                                                                                                                                        |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Name            | <code>user.name</code>                                                                                                                                                                                                                                                                          | ชื่อเต็มของผู้ใช้ในรูปแบบที่แสดงได้ รวมทุกองค์ประกอบของชื่อ (เช่น "Jane Doe")                                                                                                                   |
| Fullname        | <code>user.profile.givenName</code><br /><code>user.profile.middleName</code><br /><code>user.profile.familyName</code>                                                                                                                                                                         | ชื่อเต็มตามกฎหมายของผู้ใช้ ผสมผสาน familyName, givenName และ middleName ได้อย่างยืดหยุ่นตามการตั้งค่า                                                                                           |
| Nickname        | <code>user.profile.nickname</code>                                                                                                                                                                                                                                                              | ชื่อเล่นหรือชื่อที่คุ้นเคยของผู้ใช้ ซึ่งอาจแตกต่างจากชื่อทางการ                                                                                                                                 |
| Birthdate       | <code>user.profile.birthdate</code>                                                                                                                                                                                                                                                             | วันเกิดของผู้ใช้ในรูปแบบที่กำหนด (เช่น "MM-dd-yyyy")                                                                                                                                            |
| Gender          | <code>user.profile.gender</code>                                                                                                                                                                                                                                                                | เพศที่ผู้ใช้ระบุด้วยตนเอง (เช่น "หญิง", "ชาย", "ไม่ระบุ")                                                                                                                                       |
| Profile         | <code>user.profile.profile</code>                                                                                                                                                                                                                                                               | URL ของหน้าข้อมูลโปรไฟล์ที่มนุษย์อ่านได้ของผู้ใช้ (เช่น โปรไฟล์โซเชียลมีเดีย)                                                                                                                   |
| Website         | <code>user.profile.website</code>                                                                                                                                                                                                                                                               | URL เว็บไซต์ส่วนตัวหรือบล็อกของผู้ใช้                                                                                                                                                           |
| Address         | <code>user.profile.address.formatted</code><br /><code>user.profile.address.streetAddress</code><br /><code>user.profile.address.region</code><br /><code>user.profile.address.zoneinfo</code><br /><code>user.profile.address.postalCode</code><br /><code>user.profile.address.country</code> | ที่อยู่เต็มของผู้ใช้ (เช่น "123 Main St, Anytown, USA 12345") เลือกได้ระหว่างบรรทัดเดียว (<code>address.formatted</code>) หรือหลายบรรทัดพร้อมองค์ประกอบย่อย (ถนน เมือง รัฐ รหัสไปรษณีย์ ประเทศ) |

### ฟิลด์ข้อมูลผู้ใช้ที่กำหนดเอง \{#custom-user-data-fields}

ฟิลด์ข้อมูลผู้ใช้ที่กำหนดเองคือฟิลด์ที่ผู้ใช้ระบบสร้างขึ้นเพื่อเก็บข้อมูลเพิ่มเติมที่ฟิลด์พื้นฐานไม่มี เช่น ความสนใจ ขนาดบริษัท หรือคุณสมบัติเฉพาะทางธุรกิจอื่น ๆ

เมื่อสร้างฟิลด์กำหนดเอง ให้ใช้เฉพาะตัวอักษรและตัวเลขสำหรับคีย์ข้อมูลผู้ใช้ (เช่น `customData.companySize`) จากนั้นคุณสามารถกำหนด [ประเภทฟิลด์](#field-types) และปรับแต่งคุณสมบัติเพิ่มเติมให้ตรงกับความต้องการของคุณ

ดูข้อมูลเพิ่มเติมเกี่ยวกับการดึงและอัปเดตข้อมูลผู้ใช้ที่กำหนดเองหลังจากสร้างผู้ใช้ได้ที่ [โครงสร้างข้อมูลผู้ใช้](/user-management/user-data#custom-data)

## ประเภทฟิลด์ \{#field-types}

เราสามารถแบ่งประเภทฟิลด์อย่างง่ายได้ดังนี้:

- แบบพื้นฐาน: ข้อความ ตัวเลข วันที่ เช็กบ็อกซ์ (Boolean) ดรอปดาวน์ (เลือกเดียว) URL Regular expression
- แบบผสม: ชื่อเต็ม (Fullname), ที่อยู่ (Address)

### คุณสมบัติร่วม \{#common-properties}

| คุณสมบัติ (14%) | ใช้กับ (36%)           | หมายเหตุ                                                                                            |
| --------------- | ---------------------- | --------------------------------------------------------------------------------------------------- |
| Label           | ทั้งหมด                | ชื่อที่แสดงให้ผู้ใช้เห็น ลอยขึ้นด้านบนเมื่อมีค่าหรือได้รับโฟกัส ฟิลด์นี้จำเป็นต้องระบุ              |
| Placeholder     | ทั้งหมดยกเว้น Checkbox | ข้อความแนะนำที่แสดงเมื่อ label ลอยอยู่ (ตัวอย่างข้อความ / แนวทางการกรอก)                            |
| Description     | ทั้งหมดยกเว้น Checkbox | ข้อความสนับสนุนใต้ฟิลด์ สำหรับคำแนะนำเพิ่มเติมหรือบริบทเสริม                                        |
| Required        | ทั้งหมดยกเว้น Checkbox | หากเปิดใช้งาน จะไม่สามารถส่งข้อมูลได้เมื่อว่างไว้ หากปิดใช้งาน จะมีแท็ก `(ไม่บังคับ)` ต่อท้าย label |

### การตั้งค่าเฉพาะประเภท \{#type-specific-configurations}

| ประเภท (14%)      | ด้านที่กำหนดค่าได้ (36%)     | หมายเหตุ                                                                                                                                                                                                                                                |
| ----------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Text              | min/max length               | จำกัดความยาวข้อความที่ผู้ใช้กรอกขั้นต่ำและสูงสุด                                                                                                                                                                                                        |
| Number            | min/max value                | จำกัดช่วงค่าตัวเลขขั้นต่ำและสูงสุดที่กรอกได้                                                                                                                                                                                                            |
| Date              | รูปแบบวันที่ (preset/custom) | เลือกรูปแบบสำเร็จ (MM/dd/yyyy, dd/MM/yyyy, yyyy-MM-dd) การเปลี่ยน placeholder จะเขียนทับการโต้ตอบเริ่มต้น หรือใช้รูปแบบ <a href="https://date-fns.org/v2.30.0/docs/format" target="_blank" rel="noopener noreferrer">date-fns</a> ที่ปรับแต่งได้เต็มที่ |
| Checkbox          | ค่าเริ่มต้น                  | ติ๊ก (True) / ไม่ติ๊ก (False)                                                                                                                                                                                                                           |
| Dropdown (Select) | รายการตัวเลือก (≥1)          | ใช้ <code>value:label</code> ต่อบรรทัด หากไม่มี label จะแสดง value แทน                                                                                                                                                                                  |
| URL               | N/A                          | N/A                                                                                                                                                                                                                                                     |
| Regex             | Regular expression           | รูปแบบตรวจสอบความถูกต้อง (ไม่ต้องใส่ / ต้น/ท้าย) เช่น <code>^\d{3}-\d{2}-\d{4}$</code> สำหรับ SSN                                                                                                                                                       |
| Address           | องค์ประกอบ                   | บรรทัดเดียวหรือหลายบรรทัด; องค์ประกอบย่อย: ถนน เมือง รัฐ รหัสไปรษณีย์ ประเทศ                                                                                                                                                                            |
| Fullname          | องค์ประกอบ                   | องค์ประกอบย่อย: ชื่อจริง ชื่อกลาง นามสกุล                                                                                                                                                                                                               |

## การตรวจสอบความถูกต้อง \{#validation}

การตรวจสอบความถูกต้องของฟิลด์จะเกิดขึ้นเมื่อผู้ใช้ส่งข้อมูลในขั้นตอนสุดท้ายของการลงทะเบียน โดยจะมีการตรวจสอบดังนี้:

- ต้องมีข้อมูล (ยกเว้น Checkbox)
- ขอบเขตความยาว (Text)
- ช่วงตัวเลข (Number)
- ตรงกับรูปแบบ (Regex, Date พร้อม format, URL, การเป็นสมาชิกตัวเลือก Select)
- โครงสร้าง URL (ตรวจสอบไวยากรณ์พื้นฐาน ไม่ตรวจสอบการเข้าถึง)

ใช้กับองค์ประกอบย่อยของฟิลด์แบบผสมทั้งสอง (`address` และ `fullname`) ด้วย โดยแต่ละองค์ประกอบต้องผ่านเกณฑ์การตรวจสอบเดียวกัน

## การแปลภาษา \{#localization}

Logto มีการแปลในระดับระบบสำหรับฟิลด์ข้อมูลผู้ใช้พื้นฐาน เช่น `firstName`, `lastName`, `gender`, และ `birthdate` โดย label ของฟิลด์เหล่านี้สามารถปรับแต่งได้ใน Logto Console
คุณสามารถเขียนทับ label เหล่านี้ด้วยการแปลของคุณเองได้ที่ [Logto > ประสบการณ์การลงชื่อเข้าใช้ > เนื้อหา](https://cloud.logto.io/to/sign-in-experience/content)

ฟิลด์ที่กำหนดเองจะขึ้นอยู่กับ label, placeholder และ description ที่คุณระบุทั้งหมด หากต้องการแปลฟิลด์กำหนดเอง คุณสามารถจัดการได้ผ่าน [Bring your UI](/customization/bring-your-ui) หรือ [ติดต่อเรา](https://logto.io/contact) พร้อมข้อเสนอแนะ

## Management API (จุดเชื่อมต่อหลัก) \{#management-api-key-endpoints}

| Method (10%) | Endpoint                                                     | วัตถุประสงค์                                 |
| ------------ | ------------------------------------------------------------ | -------------------------------------------- |
| GET          | <code>/api/custom-profile-fields</code>                      | แสดงรายการฟิลด์ทั้งหมด                       |
| GET          | <code>/api/custom-profile-fields/:name</code>                | ดึงนิยามฟิลด์เดียวตามชื่อ                    |
| POST         | <code>/api/custom-profile-fields</code>                      | สร้างฟิลด์ใหม่                               |
| POST         | <code>/api/custom-profile-fields/batch</code>                | สร้างหลายฟิลด์พร้อมกัน (≤20 รายการต่อคำขอ)   |
| PUT          | <code>/api/custom-profile-fields/:name</code>                | อัปเดตฟิลด์ตามชื่อและข้อมูลทั้งหมด           |
| DELETE       | <code>/api/custom-profile-fields/:name</code>                | ลบฟิลด์                                      |
| POST         | <code>/api/custom-profile-fields/properties/sie-order</code> | อัปเดตลำดับฟิลด์ในประสบการณ์การลงชื่อเข้าใช้ |

## แนวปฏิบัติที่ดีที่สุด \{#best-practices}

- เก็บเฉพาะข้อมูลที่จำเป็นในขั้นตอนสมัคร ส่วนข้อมูลเสริมให้เก็บในภายหลัง
- ใช้ฟิลด์แบบผสมสำหรับข้อมูลเชิงโครงสร้าง (ที่อยู่, ชื่อเต็ม) เพื่อความสอดคล้องและรองรับหลายภาษา
- ให้ตัวอย่าง/placeholder ที่ชัดเจนสำหรับฟิลด์ที่ต้องการรูปแบบเฉพาะ (regex, date, ช่วงตัวเลข)

## คำถามที่พบบ่อย \{#faqs}

<details>

<summary>

### ฟิลด์โปรไฟล์จะเก็บข้อมูลผู้ใช้ที่มีอยู่แล้วหรือไม่? \{#do-the-profile-fields-collect-existing-user-data}

</summary>

ไม่ ฟิลด์เหล่านี้จะเก็บข้อมูลเฉพาะจากขั้นตอนสุดท้ายของการลงทะเบียนผู้ใช้ใหม่เท่านั้น

</details>

<details>

<summary>

### ถ้าฉันลบฟิลด์ จะลบข้อมูลผู้ใช้ด้วยหรือไม่? \{#what-if-i-delete-a-field-does-it-remove-the-user-data}

</summary>

ไม่ ข้อมูลผู้ใช้ที่มีอยู่จะไม่ถูกลบ จะมีเพียงฟิลด์ที่ถูกลบออกจากฟอร์มสมัครของผู้ใช้ปลายทางเท่านั้น

</details>

<details>

<summary>

### ฉันสามารถเก็บข้อมูลประเทศด้วยรายการควบคุม (dropdown) แทนฟิลด์ข้อความธรรมดาได้หรือไม่? \{#can-i-collect-country-with-a-controlled-list-instead-of-a-regular-text-field}

</summary>

ได้ คุณสามารถเปลี่ยนองค์ประกอบ "ประเทศ" ให้เป็นฟิลด์ "Dropdown (เลือกเดียว)" พร้อมตัวเลือกมาตรฐานได้

</details>
