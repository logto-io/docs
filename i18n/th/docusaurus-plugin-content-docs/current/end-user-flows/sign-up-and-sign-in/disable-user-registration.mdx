---
sidebar_position: 6
sidebar_label: ปิดการลงทะเบียนผู้ใช้
---

# ไม่มีการลงทะเบียนสาธารณะ & เชิญเท่านั้น

ในบางกรณี คุณอาจต้องการจำกัดการลงทะเบียนผู้ใช้สำหรับแอปพลิเคชันของคุณ Logto อนุญาตให้คุณปิดการลงทะเบียนผู้ใช้แบบไม่ระบุตัวตน และจำกัดการลงชื่อเข้าใช้เฉพาะผู้ใช้ที่ได้รับเชิญโดยผู้ดูแลระบบเท่านั้น

## ปิดการลงทะเบียนผู้ใช้ \{#disable-user-registration}

เพื่อปิดการลงทะเบียนผู้ใช้ปลายทาง ให้ทำตามขั้นตอนดังนี้:

1. ไปที่หน้า <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > ประสบการณ์การลงชื่อเข้าใช้ > ลงทะเบียนและลงชื่อเข้าใช้</CloudLink>
2. ในส่วน **ตัวเลือกขั้นสูง** ให้ปิดสวิตช์ **เปิดใช้งานการลงทะเบียนผู้ใช้** เพื่อปิดการลงทะเบียนผู้ใช้ (ค่าเริ่มต้นคือเปิดใช้งาน)

เมื่อปิดการลงทะเบียนผู้ใช้แล้ว:

- ลิงก์ "สร้างบัญชี" จะถูกลบออกจากหน้าลงชื่อเข้าใช้
- หน้าลงทะเบียนจะถูกปิดใช้งาน และผู้ใช้ที่เข้าชมหน้าดังกล่าวจะถูกเปลี่ยนเส้นทางไปยังหน้าลงชื่อเข้าใช้
- กระบวนการลงทะเบียนผ่านโซเชียลและ Enterprise SSO ก็จะถูกปิดใช้งานเช่นกัน ผู้ใช้ที่ใช้บัญชีโซเชียลที่ยังไม่ได้ลงทะเบียนจะได้รับข้อความแสดงข้อผิดพลาด "ไม่พบบัญชี"
- ฟีเจอร์เชื่อมโยงบัญชีโซเชียลยังคงใช้งานได้สำหรับผู้ใช้ที่มีอีเมลหรือหมายเลขโทรศัพท์ที่ตรงกับบัญชีในระบบ

## สร้างกระบวนการลงทะเบียนแบบเชิญเท่านั้น \{#implement-an-invitation-only-sign-up-flow}

Logto ไม่มีฟีเจอร์เชิญผู้ใช้ในตัว แต่คุณสามารถสร้างกระบวนการลงทะเบียนแบบเชิญเท่านั้นได้อย่างง่ายดายโดยใช้ Management API ของผู้ใช้ใน Logto

### ตัวเลือกที่ 1: เชิญผู้ใช้ด้วย magic link (แนะนำ) \{#option-1-invite-user-with-magic-link-recommended}

1. ปิดการลงทะเบียนผู้ใช้ใน <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > ประสบการณ์การลงชื่อเข้าใช้</CloudLink>
2. ไปที่ <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > ประสบการณ์การลงชื่อเข้าใช้</CloudLink> และปิด "เปิดใช้งานการลงทะเบียนผู้ใช้" เพื่อปิดการลงทะเบียนสาธารณะ
3. รวบรวมอีเมลของผู้ใช้ที่คุณต้องการเชิญ (เช่น ผ่านเว็บไซต์ของคุณหรือคำแนะนำจากผู้ใช้เดิม)
4. สร้างและส่ง **magic invitation link** [ตามคู่มือ](/end-user-flows/one-time-token#implementation-guide) (ขอ one-time token, สร้าง magic link, เรียกใช้งานการยืนยันตัวตนผ่าน Logto SDK)<br/>
   **หมายเหตุ**: กำหนดเวลาหมดอายุของลิงก์เชิญ แนะนำให้ลิงก์ใช้งานได้อย่างน้อย 1 วัน ใช้ request body ดังนี้เพื่อสร้าง one-time token:

   ```json
   {
     "email": "user@example.com",
     "expiresIn": 172800 // ไม่บังคับ ค่าเริ่มต้นคือ 600 (10 นาที)
   }
   ```

5. ส่ง magic link ไปยังอีเมลของผู้ใช้ (เช่น `https://yourapp.com/landing-page?type=registrationInvitation&token=YHwbXSXxQfL02IoxFqr1hGvkB13uTqcd&email=user@example.com`) ปรับแต่งเทมเพลตอีเมล เช่น:

   <img
     src="/img/assets/invitation-only-registration-email-template.png"
     alt="Invitation-only registration email template"
   />

   เมื่อผู้ใช้คลิก "ยอมรับคำเชิญ" พวกเขาจะลงทะเบียนบริการของคุณโดยอัตโนมัติ แม้จะปิดการลงทะเบียนสาธารณะอยู่ก็ตาม วิธีนี้เรียกว่า "การเชิญผู้ใช้แบบเจาะจงเป้าหมาย"

### ตัวเลือกที่ 2: เชิญและสร้างผู้ใช้ผ่าน Management API \{#option-2-invite-and-create-users-via-management-api}

1. ปิดการลงทะเบียนผู้ใช้ใน <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > ประสบการณ์การลงชื่อเข้าใช้</CloudLink>
2. สร้างฟอร์มลงทะเบียนผู้ใช้แบบเชิญในแอปของคุณเอง
3. ส่งอีเมลเชิญผู้ใช้พร้อมลิงก์เชิญเฉพาะราย
4. เมื่อผู้ใช้คลิกลิงก์ลงทะเบียน ให้แอปของคุณเรียก [Logto Management API > Create user](https://openapi.logto.io/operation/operation-createuser) เพื่อสร้างบัญชีผู้ใช้
5. หลังจากสร้างบัญชีผู้ใช้แล้ว ให้เปลี่ยนเส้นทางผู้ใช้ไปยังหน้าลงชื่อเข้าใช้หรือรีเซ็ตรหัสผ่านของ Logto เพื่อดำเนินการลงทะเบียนให้เสร็จสมบูรณ์ ดู [Authentication parameters](/end-user-flows/authentication-parameters/) สำหรับแนวทางการปรับแต่งหน้าจอแรกและกรอกอีเมลของผู้ใช้ล่วงหน้าเพื่อให้ขั้นตอนลงชื่อเข้าใช้ราบรื่นขึ้น

### ตัวเลือกที่ 3: แจ้งผู้ใช้เมื่อสร้างบัญชีด้วยตนเอง \{#option-3-notify-users-on-manual-registration}

1. ปิดการลงทะเบียนผู้ใช้ใน Logto Console
2. สร้างบัญชีผู้ใช้ด้วยตนเองใน <CloudLink to="/users">Console > การจัดการผู้ใช้</CloudLink> หรือผ่าน [Management API](https://openapi.logto.io/operation/operation-createuser)
3. แจ้งผู้ใช้ทางอีเมลว่าบัญชีของพวกเขาถูกสร้างขึ้นแล้ว
4. เปลี่ยนเส้นทางผู้ใช้ไปยังหน้าลงชื่อเข้าใช้หรือรีเซ็ตรหัสผ่านของ Logto เพื่อดำเนินการลงทะเบียนให้เสร็จสมบูรณ์ ดู [Authentication parameters](/end-user-flows/authentication-parameters/) สำหรับแนวทางการปรับแต่งหน้าจอแรกและกรอกอีเมลของผู้ใช้ล่วงหน้าเพื่อให้ขั้นตอนลงชื่อเข้าใช้ราบรื่นขึ้น

## ประสบการณ์ผู้ใช้สำหรับบัญชีที่สร้างไว้ล่วงหน้า \{#user-experience-for-pre-registered-accounts}

บัญชีที่สร้างไว้ล่วงหน้า (หรือที่เรียกว่า provisioned users) ในตัวเลือกที่ 2 และ 3 บัญชีผู้ใช้จะถูกสร้างไว้ล่วงหน้าผ่าน Management API จากนั้นผู้ใช้ปลายทางจะลงชื่อเข้าใช้ผลิตภัณฑ์ของคุณเป็นครั้งแรก

เมื่อปิดการลงทะเบียนผู้ใช้ ผู้ใช้ที่เข้าชมหน้าลงทะเบียนจะถูกเปลี่ยนเส้นทางไปยังหน้าลงชื่อเข้าใช้ หากบัญชีผู้ใช้ถูกสร้างโดยผู้ดูแลระบบหรือผ่าน Management API (ตามตัวเลือกที่ 2 หรือ 3) ประสบการณ์การลงชื่อเข้าใช้ของผู้ใช้อาจแตกต่างกันไปตามวิธีการลงชื่อเข้าใช้และลงทะเบียนที่คุณตั้งค่าไว้:

- **ลงชื่อเข้าใช้ด้วยอีเมลหรือหมายเลขโทรศัพท์ผ่านรหัสยืนยัน**: สร้างบัญชีผู้ใช้ด้วย **ที่อยู่อีเมล** หรือ **หมายเลขโทรศัพท์** เปิดใช้งานวิธีลงชื่อเข้าใช้ด้วยรหัสยืนยันทางอีเมลหรือโทรศัพท์ เมื่อสร้างผู้ใช้แล้ว พวกเขาสามารถลงชื่อเข้าใช้โดยตรงด้วยอีเมลหรือหมายเลขโทรศัพท์โดยใช้วิธีการยืนยันรหัส
- **ลงชื่อเข้าใช้โซเชียลด้วยอีเมลหรือหมายเลขโทรศัพท์ที่ระบุ**: สร้างบัญชีผู้ใช้ด้วย **ที่อยู่อีเมล** หรือ **หมายเลขโทรศัพท์** ที่เชื่อมโยงกับบัญชีโซเชียลของพวกเขา สร้างและเปิดใช้งานการเชื่อมต่อโซเชียลสำหรับผู้ให้บริการโซเชียลนั้น เปิดใช้งานฟีเจอร์ [**การเชื่อมโยงบัญชีอัตโนมัติ**](/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking) เพื่อเชื่อมโยงตัวตนโซเชียลกับบัญชีผู้ใช้โดยอัตโนมัติตามอีเมลหรือหมายเลขโทรศัพท์ที่ตรงกัน เมื่อสร้างผู้ใช้แล้ว พวกเขาสามารถลงชื่อเข้าใช้โดยตรงด้วยบัญชีโซเชียลที่ตรงกับอีเมลหรือหมายเลขโทรศัพท์
- **ชื่อผู้ใช้/อีเมล/หมายเลขโทรศัพท์พร้อมรหัสผ่าน**: สร้างบัญชีผู้ใช้ด้วย **ชื่อผู้ใช้**, **ที่อยู่อีเมล** หรือ **หมายเลขโทรศัพท์** และเปิดใช้งานตัวระบุที่เกี่ยวข้องสำหรับการลงชื่อเข้าใช้ด้วยรหัสผ่าน
  - กำหนดรหัสผ่านล่วงหน้า: ตั้งรหัสผ่านขณะสร้างบัญชี แล้วแจ้งรหัสผ่านให้ผู้ใช้อย่างปลอดภัย ผู้ใช้สามารถลงชื่อเข้าใช้โดยตรงด้วยชื่อผู้ใช้ อีเมล หรือหมายเลขโทรศัพท์พร้อมรหัสผ่านที่ตั้งไว้ และเปลี่ยนรหัสผ่านได้หากต้องการ
  - ไม่กำหนดรหัสผ่านล่วงหน้า: สร้างบัญชีโดยไม่ตั้งรหัสผ่าน และแจ้งให้ผู้ใช้ตั้งรหัสผ่านเมื่อเปิดใช้งานบัญชี (จำเป็นต้องมี **ที่อยู่อีเมล** หรือ **หมายเลขโทรศัพท์** สำหรับกระบวนการรีเซ็ตรหัสผ่าน) หลังจากสร้างผู้ใช้แล้ว ให้เปลี่ยนเส้นทางไปยังหน้าตั้งรหัสผ่านใหม่โดยกรอกอีเมลหรือหมายเลขโทรศัพท์ล่วงหน้า ดูแนวทางการเปลี่ยนเส้นทางไปยังหน้าตั้งรหัสผ่านใหม่พร้อมรายละเอียดที่กรอกไว้ล่วงหน้าได้ที่ [Authentication parameters](/end-user-flows/authentication-parameters/) เมื่อผู้ใช้ตั้งรหัสผ่านใหม่แล้ว พวกเขาสามารถลงชื่อเข้าใช้โดยตรงด้วยชื่อผู้ใช้ อีเมล หรือหมายเลขโทรศัพท์และรหัสผ่านใหม่

## แหล่งข้อมูลที่เกี่ยวข้อง \{#related-resources}

<Url href="/end-user-flows/one-time-token">Magic link (One-time token)</Url>
