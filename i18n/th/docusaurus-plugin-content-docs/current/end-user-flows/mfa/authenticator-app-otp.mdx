---
sidebar_position: 3
---

# รหัส OTP จากแอปยืนยันตัวตน (Authenticator app OTP)

## แนวคิด \{#concepts}

แอปยืนยันตัวตน (Authenticator app) หรือที่เรียกกันว่า Software Token เป็นหนึ่งในวิธี [การยืนยันตัวตนหลายปัจจัย (MFA)](https://auth.wiki/mfa) ที่ได้รับความนิยมมากที่สุด โดยจะสร้าง [รหัสผ่านใช้ครั้งเดียว (OTP)](https://auth.wiki/otp) แบบชั่วคราวเพื่อเพิ่มความปลอดภัยในการยืนยันตัวตนออนไลน์ แตกต่างจากโทเค็นฮาร์ดแวร์แบบจับต้องได้ โทเค็นซอฟต์แวร์มักเป็นแอปพลิเคชันหรือปลั๊กอินที่ผู้ใช้ติดตั้งบนอุปกรณ์ของตน ไม่ว่าจะเป็นสมาร์ทโฟนหรือเบราว์เซอร์คอมพิวเตอร์ โทเค็นซอฟต์แวร์สามารถทำงานในอุปกรณ์เดียวหรือซิงค์ข้ามอุปกรณ์ได้ ขึ้นอยู่กับความสามารถของแอปยืนยันตัวตนและการตั้งค่าของผู้ใช้แต่ละคน

ตัวอย่างแอปโทเค็นซอฟต์แวร์ยอดนิยม เช่น Google Authenticator, Microsoft Authenticator, Duo, 1Password, Authy และอื่น ๆ

## ตั้งค่ารหัส OTP จากแอปยืนยันตัวตนสำหรับ MFA \{#configure-authenticator-app-otp-for-mfa}

1. ไปที่ <CloudLink to="/mfa">Console > การยืนยันตัวตนหลายปัจจัย (Multi-factor authentication)</CloudLink>
2. เปิดใช้งานปัจจัย "Authenticator App OTP" แนะนำให้ใช้ Authenticator App OTP ร่วมกับปัจจัย MFA อื่น ๆ (passkeys, SMS, รหัสสำรอง) เพื่อลดการพึ่งพาปัจจัยเดียว
3. กำหนดนโยบาย MFA ที่ต้องการ (บังคับใช้ หรือ ไม่บังคับ)
4. บันทึกการเปลี่ยนแปลงการตั้งค่า

## จัดการรหัส OTP จากแอปยืนยันตัวตน \{#configure-authenticator-app-otp-management}

คุณสามารถใช้ Account API เพื่อสร้างอินเทอร์เฟซจัดการบัญชีแบบกำหนดเอง ให้ผู้ใช้เพิ่ม ดู และลบรหัส OTP จากแอปยืนยันตัวตนของตนเองได้ เหมาะสำหรับการสร้างศูนย์บัญชีส่วนตัวและรองรับสถานการณ์สำรองข้อมูลข้ามอุปกรณ์

สำหรับขั้นตอนการใช้งานและ API endpoint อย่างละเอียด ดูที่ [การตั้งค่าบัญชีด้วย Account API](/end-user-flows/account-settings/by-account-api#link-a-new-totp)

## ขั้นตอนการตั้งค่า OTP จากแอปยืนยันตัวตน \{#authentication-app-otp-setup-flows}

1. **QR Code หรือ Secret Key**: ผู้ใช้จะได้รับ QR code หรือ secret key จากบริการของคุณ
2. **เพิ่มบัญชี**: ใช้แอปยืนยันตัวตนของตนเอง สแกน QR code หรือกรอก secret key ด้วยตนเองเพื่อเพิ่มบัญชี
3. **รหัสผ่านใช้ครั้งเดียวแบบไดนามิก**: แอปยืนยันตัวตนจะแสดงรหัส 6 หลักที่เปลี่ยนใหม่ทุก 1-2 นาทีสำหรับบัญชีที่เพิ่มไว้
4. **เสร็จสิ้นการตั้งค่า MFA**: ผู้ใช้กรอกรหัสนี้ในหน้าตั้งค่า MFA ภายในเวลาที่กำหนด เพื่อเสร็จสิ้นการตั้งค่า Authenticator App OTP สำหรับ MFA

<img src="/img/assets/otp-set-up-flow.png" alt="OTP set up flow" />

## ขั้นตอนการตรวจสอบ OTP จากแอปยืนยันตัวตน \{#authentication-app-otp-verification-flows}

1. **พยายามเข้าสู่ระบบ**: ระหว่างเข้าสู่ระบบ ผู้ใช้จะถูกขอให้ยืนยันตัวตนหลายปัจจัย (MFA)
2. **ดึง OTP**: เปิดแอปยืนยันตัวตนเพื่อดึงรหัส OTP สำหรับบัญชีที่เกี่ยวข้อง
3. **กรอก OTP**: ผู้ใช้กรอกรหัส OTP ที่แสดงในแอปภายในเวลาที่กำหนดในหน้าตรวจสอบ 2 ขั้นตอน
4. **การยืนยันตัวตน**: ระบบจะตรวจสอบ OTP และอนุญาตการเข้าถึงหากตรวจสอบสำเร็จ

<img src="/img/assets/otp-verification-flow.png" alt="OTP verification flow" />
