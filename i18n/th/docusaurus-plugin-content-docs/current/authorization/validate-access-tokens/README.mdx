---
sidebar_position: 6
sidebar_label: ตรวจสอบโทเค็นการเข้าถึงใน API
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

import DotNetAddValidationLogic from './dotnet/_add-validation-logic.mdx';
import DotNetApplyMiddleware from './dotnet/_apply-middleware.mdx';
import DotNetInit from './dotnet/_init.mdx';
import InitConstsAndUtils from './fragments/_init-consts-and-utils.md';
import RetrieveInfoAboutLogtoTenant from './fragments/_retrieve-info-about-logto-tenant.md';
import TestYourImplementation from './fragments/_test-your-implementation.mdx';
import ValidateTokenAndPermissions from './fragments/_validate-token-and-permissions.mdx';
import GoAddValidationLogic from './go/_add-validation-logic.mdx';
import GoApplyMiddleware from './go/_apply-middleware.mdx';
import GoInit from './go/_init.mdx';
import JavaAddValidationLogic from './java/_add-validation-logic.mdx';
import JavaApplyMiddleware from './java/_apply-middleware.mdx';
import JavaInit from './java/_init.mdx';
import NodeAddValidationLogic from './nodejs/_add-validation-logic.mdx';
import NodeApplyMiddleware from './nodejs/_apply-middleware.mdx';
import NodeInit from './nodejs/_init.mdx';
import PhpAddValidationLogic from './php/_add-validation-logic.mdx';
import PhpApplyMiddleware from './php/_apply-middleware.mdx';
import PhpInit from './php/_init.mdx';
import PythonAddValidationLogic from './python/_add-validation-logic.mdx';
import PythonApplyMiddleware from './python/_apply-middleware.mdx';
import PythonInit from './python/_init.mdx';
import RubyAddValidationLogic from './ruby/_add-validation-logic.mdx';
import RubyApplyMiddleware from './ruby/_apply-middleware.mdx';
import RubyInit from './ruby/_init.mdx';
import RustAddValidationLogic from './rust/_add-validation-logic.mdx';
import RustApplyMiddleware from './rust/_apply-middleware.mdx';
import RustInit from './rust/_init.mdx';

# วิธีตรวจสอบโทเค็นการเข้าถึง (Access tokens) ในบริการ API หรือ backend ของคุณ

การตรวจสอบโทเค็นการเข้าถึง (โทเค็นการเข้าถึง (Access tokens)) เป็นส่วนสำคัญของการบังคับใช้ [การควบคุมการเข้าถึงตามบทบาท (RBAC)](/authorization/role-based-access-control) ใน Logto คู่มือนี้จะแนะนำขั้นตอนการตรวจสอบ JWT ที่ออกโดย Logto ใน backend / API ของคุณ โดยตรวจสอบลายเซ็น ผู้ออก (Issuer) ผู้รับ (Audience) วันหมดอายุ สิทธิ์ (ขอบเขต; scopes) และบริบทขององค์กร

## ก่อนเริ่มต้น \{#before-you-start}

- คู่มือนี้สมมติว่าคุณคุ้นเคยกับแนวคิด RBAC ของ Logto แล้ว
- หากคุณต้องการปกป้องทรัพยากร API คู่มือนี้สมมติว่าคุณได้อ่าน [การปกป้องทรัพยากร API ระดับโกลบอล](/authorization/global-api-resources) แล้ว
- หากคุณต้องการปกป้องฟีเจอร์หรือเวิร์กโฟลว์ในแอป (สิทธิ์ที่ไม่ใช่ API) คู่มือนี้สมมติว่าคุณได้อ่าน [การปกป้องสิทธิ์ (permissions) ขององค์กร (non-API)](/authorization/organization-permissions) แล้ว
- หากคุณต้องการปกป้องทรัพยากร API ระดับองค์กร คู่มือนี้สมมติว่าคุณได้อ่าน [การปกป้องทรัพยากร API ระดับองค์กร](/authorization/organization-level-api-resources) แล้ว

## ขั้นตอนที่ 1: กำหนดค่าคงที่และยูทิลิตี้ \{#step-1-initialize-constants-and-utilities}

<InitConstsAndUtils />

<Tabs groupId="api-language">
  <TabItem value="node" label="Node.js">
    <NodeInit />
  </TabItem>
  <TabItem value="python" label="Python">
    <PythonInit />
  </TabItem>
  <TabItem value="go" label="Go">
    <GoInit />
  </TabItem>
  <TabItem value="java" label="Java">
    <JavaInit />
  </TabItem>
  <TabItem value="dotnet" label=".NET">
    <DotNetInit />
  </TabItem>
  <TabItem value="php" label="PHP">
    <PhpInit />
  </TabItem>
  <TabItem value="ruby" label="Ruby">
    <RubyInit />
  </TabItem>
  <TabItem value="rust" label="Rust">
    <RustInit />
  </TabItem>
</Tabs>

## ขั้นตอนที่ 2: ดึงข้อมูลเกี่ยวกับ Logto tenant ของคุณ \{#step-2-retrieve-info-about-your-logto-tenant}

<RetrieveInfoAboutLogtoTenant />

## ขั้นตอนที่ 3: ตรวจสอบโทเค็นและสิทธิ์ (permissions) \{#step-3-validate-the-token-and-permissions}

<ValidateTokenAndPermissions />

### เพิ่มตรรกะการตรวจสอบ \{#add-the-validation-logic}

<Tabs groupId="api-language">
  <TabItem value="node" label="Node.js">
    <NodeAddValidationLogic />
  </TabItem>
  <TabItem value="python" label="Python">
    <PythonAddValidationLogic />
  </TabItem>
  <TabItem value="go" label="Go">
    <GoAddValidationLogic />
  </TabItem>
  <TabItem value="java" label="Java">
    <JavaAddValidationLogic />
  </TabItem>
  <TabItem value="dotnet" label=".NET">
    <DotNetAddValidationLogic />
  </TabItem>
  <TabItem value="php" label="PHP">
    <PhpAddValidationLogic />
  </TabItem>
  <TabItem value="ruby" label="Ruby">
    <RubyAddValidationLogic />
  </TabItem>
  <TabItem value="rust" label="Rust">
    <RustAddValidationLogic />
  </TabItem>
</Tabs>

## ขั้นตอนที่ 4: นำ middleware ไปใช้กับ API ของคุณ \{#step-4-apply-middleware-to-your-api}

นำ middleware ไปใช้กับเส้นทาง API ที่คุณต้องการปกป้อง

<Tabs groupId="api-language">
  <TabItem value="node" label="Node.js">
    <NodeApplyMiddleware />
  </TabItem>
  <TabItem value="python" label="Python">
    <PythonApplyMiddleware />
  </TabItem>
  <TabItem value="go" label="Go">
    <GoApplyMiddleware />
  </TabItem>
  <TabItem value="java" label="Java">
    <JavaApplyMiddleware />
  </TabItem>
  <TabItem value="dotnet" label=".NET">
    <DotNetApplyMiddleware />
  </TabItem>
  <TabItem value="php" label="PHP">
    <PhpApplyMiddleware />
  </TabItem>
  <TabItem value="ruby" label="Ruby">
    <RubyApplyMiddleware />
  </TabItem>
  <TabItem value="rust" label="Rust">
    <RustApplyMiddleware />
  </TabItem>
</Tabs>

## ขั้นตอนที่ 5: ทดสอบการใช้งานของคุณ \{#step-5-test-your-implementation}

<TestYourImplementation />

## แหล่งข้อมูลที่เกี่ยวข้อง \{#related-resources}

<Url href="/developers/custom-token-claims">การปรับแต่งการอ้างสิทธิ์ (claims) ในโทเค็น</Url>
<Url href="https://auth.wiki/jwt">JSON Web Token (JWT)</Url>
<Url href="https://openid.net/specs/openid-connect-discovery-1_0.html">
  OpenID Connect Discovery
</Url>
<Url href="https://www.rfc-editor.org/rfc/rfc8707.html">
  RFC 8707: ตัวบ่งชี้ทรัพยากร (Resource Indicators)
</Url>
