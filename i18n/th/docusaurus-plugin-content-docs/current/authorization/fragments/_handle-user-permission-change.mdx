### ตัวเลือก: จัดการเมื่อสิทธิ์ของผู้ใช้เปลี่ยนแปลง \{#optional-handle-user-permission-change}

สิทธิ์ของผู้ใช้สามารถเปลี่ยนแปลงได้ตลอดเวลา เนื่องจาก Logto ออก JWT สำหรับการควบคุมการเข้าถึงตามบทบาท (RBAC) การอัปเดตสิทธิ์จะปรากฏเฉพาะในโทเค็นที่ออกใหม่เท่านั้น และจะไม่เปลี่ยนแปลง JWT ที่มีอยู่เดิม

:::info กฎขอบเขตย่อย (Scope subset rule)
โทเค็นการเข้าถึง (Access token) สามารถมีขอบเขต (scopes) ได้เฉพาะที่ร้องขอในกระบวนการอนุญาต OAuth เดิมเท่านั้น
แม้ว่าผู้ใช้จะได้รับสิทธิ์ใหม่ โทเค็นที่ออกภายหลังจะมีเพียงขอบเขตย่อยของขอบเขตที่ร้องขอไว้แต่แรก
หากต้องการเข้าถึงขอบเขตใหม่ที่ไม่ได้อยู่ในการร้องขอครั้งแรก ไคลเอนต์ต้องเริ่มกระบวนการอนุญาตใหม่
:::

#### สิทธิ์ที่ลดลง (Downscoped permissions) \{#downscoped-permissions}

เมื่อผู้ใช้สูญเสียสิทธิ์:

- โทเค็นที่ออกใหม่จะแสดงขอบเขตที่ลดลงทันที
- JWT ที่มีอยู่จะยังคงขอบเขตเดิมจนกว่าจะหมดอายุ
- API ของคุณควรตรวจสอบขอบเขตทุกครั้งและพึ่งพาอายุโทเค็นที่สั้น

หากคุณต้องการให้ระบบตอบสนองเร็วขึ้น ให้สร้างสัญญาณของคุณเองเพื่อแจ้งให้ไคลเอนต์รีเฟรชโทเค็น

#### สิทธิ์ที่เพิ่มขึ้น (Enlarged permissions) \{#enlarged-permissions}

{props.type === "global" && <p>สำหรับทรัพยากร API ระดับโกลบอล เมื่อผู้ใช้ได้รับสิทธิ์เพิ่ม สิทธิ์ที่เพิ่มขึ้นจะ **ไม่** ปรากฏผ่านการรีเฟรช ไคลเอนต์ต้องดำเนินกระบวนการอนุญาต OAuth ใหม่เพื่อรับโทเค็นที่มีขอบเขตใหม่ ซึ่งสามารถเกิดขึ้นแบบเงียบ ๆ ได้หากผู้ใช้มีเซสชัน Logto ที่ยังใช้งานอยู่</p>}

{props.type === "organization" && <p>สำหรับโทเค็นองค์กร เมื่อผู้ใช้ได้รับสิทธิ์เพิ่ม สิทธิ์ที่เพิ่มขึ้นจะปรากฏในการออกโทเค็นครั้งถัดไป (รีเฟรชหรือขอโทเค็น) ยังคงต้องใช้โทเค็นใหม่ แต่ไม่จำเป็นต้องยืนยันตัวตนใหม่ทั้งหมด เว้นแต่ขอบเขตใหม่จะเกินชุดที่ร้องขอไว้แต่แรก</p>}

#### ข้อแนะนำ \{#recommendations}

- ตรวจสอบขอบเขตใน API ของคุณทุกครั้งที่เรียกใช้งาน
- กำหนดอายุโทเค็นให้สั้น
- เพิ่มการแจ้งเตือนเสริม หากคุณต้องการให้การเปลี่ยนแปลงสิทธิ์มีผลทันที
