---
description: ใช้งาน Management API เพื่อเข้าถึงบริการ backend ของ Logto ขยายระบบ CIAM ของคุณด้วยการจัดการผู้ใช้ การตั้งค่าบัญชี การยืนยันตัวตน และสถาปัตยกรรมหลายผู้เช่า
sidebar_position: 5
---

import AccessLogtoManagementApiUsingAccessToken from '../../quick-starts/generic/machine-to-machine/fragments/_access-logto-management-api-using-access-token.mdx';
import AccessTokenUsage from '../../quick-starts/generic/machine-to-machine/fragments/_access-token-usage.mdx';
import BasicsAboutAccessTokenRequest from '../../quick-starts/generic/machine-to-machine/fragments/_basics-about-access-token-request.mdx';
import FetchAccessTokenForLogtoManagementApi from '../../quick-starts/generic/machine-to-machine/fragments/_fetch-access-token-for-logto-management-api.mdx';
import M2mAccessTokenNote from '../../quick-starts/generic/machine-to-machine/fragments/_m2m-access-token-sub-note.mdx';
import M2mRoleAssignment from '../../quick-starts/generic/machine-to-machine/fragments/_m2m-role-assignment.mdx';

# โต้ตอบกับ Management API

## Logto Management API คืออะไร? \{#what-is-logto-management-api}

Logto Management API คือชุด API ที่ครอบคลุมซึ่งให้คุณควบคุมการใช้งานได้อย่างเต็มที่ตามความต้องการของผลิตภัณฑ์และเทคโนโลยีของคุณ โดยถูกสร้างไว้ล่วงหน้า แสดงอยู่ใน <CloudLink to="/api-resources">Console > API resources > Logto Management API</CloudLink> และไม่สามารถลบหรือแก้ไขได้

ตัวระบุของมันจะอยู่ในรูปแบบ `https://[tenant-id].logto.app/api`

:::note

ตัวระบุของ Logto Management API จะแตกต่างกันระหว่าง [Logto Cloud](/logto-cloud) และ [Logto Open Source](/logto-oss):

- Logto Cloud: `https://[tenant-id].logto.app/api`
- Logto OSS: `https://default.logto.app/api`

ในตัวอย่างต่อไปนี้ เราจะใช้ตัวระบุของเวอร์ชัน Cloud

:::

<img alt="Logto Management API Resource" src="/img/assets/logto-management-api-resource.webp" />

<img alt="Logto Management API Details" src="/img/assets/logto-management-api-details.webp" />

ด้วย Logto Management API คุณสามารถเข้าถึงบริการ backend อันแข็งแกร่งของ Logto ซึ่งสามารถขยายได้สูงและนำไปใช้ได้ในหลากหลายสถานการณ์ โดยสามารถทำได้มากกว่าความสามารถ low-code ของ Admin Console

API ที่นิยมใช้งานบ่อยมีดังนี้:

- [User](https://openapi.logto.io/operation/operation-getuser)
- [Application](https://openapi.logto.io/operation/operation-listapplications)
- [Audit logs](https://openapi.logto.io/operation/operation-listlogs)
- [Roles](https://openapi.logto.io/operation/operation-listroles)
- [Resources](https://openapi.logto.io/operation/operation-listresources)
- [Connectors](https://openapi.logto.io/operation/operation-listconnectors)
- [Organizations](https://openapi.logto.io/operation/operation-listorganizations)

หากต้องการดูรายละเอียด API เพิ่มเติม กรุณาเยี่ยมชม https://openapi.logto.io/

## วิธีเข้าถึง Logto Management API \{#how-to-access-logto-management-api}

### สร้างแอป M2M \{#create-an-m2m-app}

:::note
หากคุณยังไม่คุ้นเคยกับ flow การยืนยันตัวตนแบบ M2M (Machine-to-Machine) ขอแนะนำให้อ่าน [ทำความเข้าใจ flow การยืนยันตัวตน](/integrate-logto/integrate-logto-into-your-application/understand-authentication-flow/#machine-to-machine-authentication-flow) เพื่อเข้าใจแนวคิดพื้นฐานก่อน
:::

ไปที่ <CloudLink to="/applications">Console > Applications</CloudLink> เลือกประเภทแอป “Machine-to-machine” และเริ่มกระบวนการสร้าง

<M2mRoleAssignment />

ในโมดูลกำหนดบทบาท คุณจะเห็นบทบาท M2M ทั้งหมดถูกเพิ่มไว้แล้ว และบทบาทที่มีไอคอน Logto หมายถึงบทบาทเหล่านั้นมีสิทธิ์ Logto Management API อยู่ด้วย

ตอนนี้ให้กำหนดบทบาท M2M ที่มีสิทธิ์ Logto Management API ให้กับแอป M2M ของคุณ

### ดึง access token \{#fetch-an-access-token}

#### พื้นฐานเกี่ยวกับการขอ access token \{#basics-about-access-token-request}

<BasicsAboutAccessTokenRequest />

#### ดึง access token สำหรับ Logto Management API \{#fetch-access-token-for-logto-management-api}

<FetchAccessTokenForLogtoManagementApi />

#### การตอบกลับ access token \{#access-token-response}

ตัวอย่างการตอบกลับที่สำเร็จจะมีลักษณะดังนี้:

```json
{
  "access_token": "eyJhbG...2g", // ใช้ token นี้เพื่อเข้าถึง Logto Management API
  "expires_in": 3600, // อายุของ token หน่วยเป็นวินาที
  "token_type": "Bearer", // ประเภทการยืนยันตัวตนสำหรับ request เมื่อใช้ access token
  "scope": "all" // scope `all` สำหรับ Logto Management API
}
```

<M2mAccessTokenNote />

### เข้าถึง Logto Management API ด้วย access token \{#access-logto-management-api-using-access-token}

<AccessTokenUsage />

<AccessLogtoManagementApiUsingAccessToken />

## กรณีการใช้งาน Logto Management API ที่พบบ่อย \{#typical-scenarios-for-using-logto-management-api}

นักพัฒนาของเราได้สร้างฟีเจอร์เพิ่มเติมมากมายโดยใช้ Logto Management API เราเชื่อว่า API ของเราสามารถขยายได้สูงและรองรับความต้องการที่หลากหลายของคุณ ตัวอย่างต่อไปนี้คือกรณีที่ไม่สามารถทำได้ผ่าน Logto Admin Console แต่สามารถทำได้ผ่าน Logto Management API

### สร้างโปรไฟล์ผู้ใช้เอง \{#implement-user-profile-on-your-own}

ขณะนี้ Logto ยังไม่มี UI สำเร็จรูปสำหรับโปรไฟล์ผู้ใช้ เราตระหนักว่าโปรไฟล์ผู้ใช้เกี่ยวข้องกับธุรกิจและคุณสมบัติของผลิตภัณฑ์อย่างใกล้ชิด ในขณะที่เรากำลังหาวิธีที่ดีที่สุด ขอแนะนำให้ใช้ API ของเราเพื่อสร้างโซลูชันของคุณเอง เช่น คุณสามารถใช้ interaction API, profile API และ verification code API เพื่อพัฒนาโซลูชันที่ตรงกับความต้องการของคุณ

### ค้นหาผู้ใช้ขั้นสูง \{#advanced-user-search}

Logto Admin Console รองรับการค้นหาและกรองขั้นพื้นฐาน สำหรับตัวเลือกการค้นหาขั้นสูง เช่น การค้นหาแบบ fuzzy, การจับคู่แบบเป๊ะ และการแยกแยะตัวพิมพ์เล็ก-ใหญ่ ดูคู่มือ [Advanced User Search](/user-management/advanced-user-search) ของเรา

### จัดการองค์กรเอง \{#implement-organization-management-on-your-own}

หากคุณใช้ฟีเจอร์ [organizations](/organizations) เพื่อสร้างแอปหลายผู้เช่า คุณอาจต้องใช้ Logto Management API สำหรับงานเช่น การเชิญองค์กรและการจัดการสมาชิก สำหรับ SaaS ของคุณที่มีทั้งผู้ดูแลและสมาชิกใน tenant, Logto Management API จะช่วยให้คุณสร้าง admin portal ที่ปรับแต่งได้ตามความต้องการธุรกิจ ดูรายละเอียดเพิ่มเติมได้ที่ [ที่นี่](/end-user-flows/organization-experience/)

## เคล็ดลับการใช้ Logto Management API \{#tips-for-using-logto-management-api}

### การจัดการผลลัพธ์ API แบบแบ่งหน้า \{#managing-paginated-api-responses}

ผลลัพธ์บางส่วนของ API อาจมีข้อมูลจำนวนมาก ผลลัพธ์เหล่านี้จะถูกแบ่งหน้า Logto ให้ข้อมูลการแบ่งหน้า 2 แบบ

#### ใช้ link headers \{#using-link-headers}

ตัวอย่าง header ของผลลัพธ์แบบแบ่งหน้าจะเป็นดังนี้:

```
Link: <https://logto.dev/users?page=1&page_size=20>; rel="first"
```

link header จะให้ URL สำหรับหน้าก่อนหน้า ถัดไป แรก และสุดท้ายของผลลัพธ์:

- URL สำหรับหน้าก่อนหน้าจะตามด้วย rel="prev"
- URL สำหรับหน้าถัดไปจะตามด้วย rel="next"
- URL สำหรับหน้าสุดท้ายจะตามด้วย rel="last"
- URL สำหรับหน้าแรกจะตามด้วย rel="first"

#### ใช้ total-number header \{#using-total-number-header}

นอกจาก link headers มาตรฐานแล้ว Logto จะเพิ่ม header `Total-Number` ด้วย:

```
Total-Number: 216
```

ซึ่งจะสะดวกและมีประโยชน์มากสำหรับการแสดงหมายเลขหน้า

#### เปลี่ยนหมายเลขหน้าและขนาดหน้า \{#changing-page-number-and-page-size}

มี query parameter ที่เป็นตัวเลือก 2 ตัว:

- `page`: ระบุหมายเลขหน้า เริ่มจาก 1 ค่าเริ่มต้นคือ 1
- `page_size`: ระบุจำนวนรายการต่อหน้า ค่าเริ่มต้นคือ 20

### ขีดจำกัดอัตรา (Rate limit) \{#rate-limit}

:::note
ใช้เฉพาะกับ Logto Cloud เท่านั้น
:::

เพื่อความน่าเชื่อถือและความปลอดภัยของบริการสำหรับผู้ใช้ทุกคน เราใช้ firewall ทั่วไปเพื่อตรวจสอบและจัดการทราฟฟิกไปยังเว็บไซต์ของเรา แม้ว่าเราจะไม่ได้กำหนดขีดจำกัดอัตราอย่างเข้มงวด แต่ขอแนะนำให้ผู้ใช้จำกัดกิจกรรมไว้ที่ประมาณ 200 คำขอทุก 10 วินาที เพื่อหลีกเลี่ยงการกระตุ้นมาตรการป้องกันของเรา

## แหล่งข้อมูลที่เกี่ยวข้อง \{#related-resources}

<Url href="https://blog.logto.io/management-api">ใช้ Logto Management API: คู่มือทีละขั้นตอน</Url>

<Url href="https://blog.logto.io/use-postman-to-obtain-m2m-access-token">
  รับ M2M access token ภายในไม่กี่นาทีด้วย Postman
</Url>
