---
description: ใช้ Logto เพื่อสร้างผู้ให้บริการข้อมูลระบุตัวตนของคุณเองและเปิดใช้งาน SSO สำหรับแอปพลิเคชันของบุคคลที่สาม ผสานรวมแอป OIDC / OAuth ได้อย่างง่ายดาย
sidebar_position: 4
---

import AuthorizationIcon from '@site/src/assets/authorization.svg';
import CustomizationIcon from '@site/src/assets/customization.svg';
import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# แอปบุคคลที่สาม (OAuth / OIDC)

การผสานรวมแอปพลิเคชันบุคคลที่สามของ Logto ช่วยให้คุณใช้ Logto เป็น [ผู้ให้บริการข้อมูลระบุตัวตน (IdP)](https://auth.wiki/identity-provider) สำหรับแอปพลิเคชันภายนอก

ผู้ให้บริการข้อมูลระบุตัวตน (IdP) คือบริการที่ตรวจสอบตัวตนของผู้ใช้และจัดการข้อมูลรับรองการเข้าสู่ระบบของพวกเขา หลังจากยืนยันตัวตนของผู้ใช้แล้ว IdP จะสร้างโทเค็นการยืนยันตัวตนหรือ assertion และอนุญาตให้ผู้ใช้เข้าถึงแอปพลิเคชันหรือบริการต่าง ๆ ได้โดยไม่ต้องเข้าสู่ระบบซ้ำอีก

แตกต่างจากแอปพลิเคชันที่คุณสร้างในคู่มือ [ผสานรวม Logto เข้ากับแอปพลิเคชันของคุณ](/integrate-logto/integrate-logto-into-your-application) ซึ่งพัฒนาและควบคุมโดยคุณเอง แอปพลิเคชันบุคคลที่สามเป็นบริการอิสระที่พัฒนาโดยนักพัฒนาภายนอกหรือพันธมิตรทางธุรกิจ

แนวทางการผสานรวมนี้เหมาะกับสถานการณ์ทางธุรกิจทั่วไป คุณสามารถเปิดให้ผู้ใช้เข้าถึงแอปพันธมิตรโดยใช้บัญชี Logto ของตนเอง เช่นเดียวกับที่ผู้ใช้ระดับองค์กรลงชื่อเข้าใช้ Slack ด้วย Google Workspace หรือคุณสามารถสร้างแพลตฟอร์มเปิดที่แอปพลิเคชันบุคคลที่สามสามารถเพิ่มฟีเจอร์ “ลงชื่อเข้าใช้ด้วย Logto” ได้ คล้ายกับ “ลงชื่อเข้าใช้ด้วย Google”

Logto เป็นบริการข้อมูลระบุตัวตนที่สร้างบนโปรโตคอล [OpenID Connect (OIDC)](https://auth.wiki/openid-connect) โดยให้ทั้ง [การยืนยันตัวตน (Authentication)](https://auth.wiki/authentication) และ [การอนุญาต (Authorization)](https://auth.wiki/authorization) ซึ่งทำให้การผสานรวมแอป OIDC บุคคลที่สามง่ายเหมือนกับแอปเว็บทั่วไป

เนื่องจาก OIDC สร้างขึ้นบน [OAuth 2.0](https://auth.wiki/oauth-2.0) โดยเพิ่มเลเยอร์การยืนยันตัวตน คุณจึงสามารถผสานรวมแอปบุคคลที่สามด้วยโปรโตคอล OAuth ได้เช่นกัน

## สร้างแอปพลิเคชันบุคคลที่สามใน Logto \{#create-a-third-party-application-in-logto}

1. ไปที่ <CloudLink to="/applications">Console > Applications</CloudLink>
2. คลิกปุ่ม "Create application" เลือก "Third-party app" เป็นประเภทแอปพลิเคชัน และเลือกหนึ่งในโปรโตคอลการผสานรวมต่อไปนี้:
   - OIDC / OAuth
3. เลือกประเภทแอปพลิเคชันตามประเภทของแอปพลิเคชันบุคคลที่สาม:
   - **Traditional Web**: แอปพลิเคชันที่เรนเดอร์ฝั่งเซิร์ฟเวอร์ (เช่น Node.js, PHP, Java) ที่สามารถเก็บ client secret ไว้ที่ backend ได้อย่างปลอดภัย
   - **Single Page App (SPA)**: แอปพลิเคชันที่เรนเดอร์ฝั่ง client (เช่น React, Vue, Angular) ที่ทำงานในเบราว์เซอร์และไม่สามารถเก็บ secret ได้อย่างปลอดภัย
   - **Native**: แอปพลิเคชันมือถือหรือเดสก์ท็อป (เช่น iOS, Android, Electron) ที่ทำงานบนอุปกรณ์ผู้ใช้
4. กรอกชื่อและคำอธิบายสำหรับแอปของคุณ แล้วคลิกปุ่ม "Create" จะมีการสร้างแอปพลิเคชันบุคคลที่สามใหม่

แอปพลิเคชันบุคคลที่สามที่สร้างขึ้นทั้งหมดจะถูกจัดหมวดหมู่ในหน้า Applications ใต้แท็บ "Third-party apps" การจัดเรียงนี้ช่วยให้คุณแยกแยะออกจากแอปของคุณเองและจัดการแอปทั้งหมดได้ง่ายขึ้นในที่เดียว

## คู่มือการผสานรวม \{#integration-guide}

### ค้นหาค่าการตั้งค่าแอปพลิเคชัน \{#find-the-application-configurations}

ในหน้ารายละเอียดแอปพลิเคชัน คุณจะพบ [**Client ID**](/integrate-logto/application-data-structure#application-id), [**Client secret**](/integrate-logto/application-data-structure#application-secret) (สำหรับแอปเว็บแบบดั้งเดิมเท่านั้น) และ endpoint OIDC ที่จำเป็นสำหรับการผสานรวม

หากบริการบุคคลที่สามรองรับ OIDC discovery เพียงแค่ให้ **Discovery endpoint** หากไม่รองรับ ให้คลิก **Show endpoint details** เพื่อดู endpoint ทั้งหมด รวมถึง [authorization endpoint](/integrate-logto/application-data-structure#authorization-endpoint) และ [token endpoint](/integrate-logto/application-data-structure#token-endpoint)

### ผสานรวมกับบริการที่รองรับ IdP บุคคลที่สาม \{#integrate-with-services-that-support-third-party-idp}

หากคุณเชื่อมต่อกับบริการหรือผลิตภัณฑ์ที่รองรับการตั้งค่าผู้ให้บริการข้อมูลระบุตัวตนภายนอกโดยตรง (เช่น แพลตฟอร์ม SaaS สำหรับองค์กร, เครื่องมือ collaboration) การตั้งค่าจะง่ายมาก:

1. เปิดหน้าการตั้งค่า IdP หรือ SSO ของบริการนั้น
2. คัดลอก **Client ID** (และ **Client secret** หากจำเป็น) จาก Logto ไปวางในหน้าตั้งค่าของบริการ
3. ให้ **Discovery endpoint** หากบริการรองรับ OIDC auto-discovery หรือคัดลอก **Authorization endpoint** และ **Token endpoint** ด้วยตนเอง
4. คัดลอก **Redirect URI** จากหน้าตั้งค่าของบริการและเพิ่มเข้าไปใน allowed redirect URIs ของแอป Logto ของคุณ
5. ตั้งค่า **scopes** หากบริการนั้นอนุญาต เนื่องจาก Logto เป็นผู้ให้บริการ OIDC ให้เพิ่ม scope `openid` หากคุณต้องการยืนยันตัวตนผู้ใช้ (จะได้รับ ID token และ endpoint UserInfo) scope `openid` เป็นตัวเลือกหากคุณต้องการเข้าถึงทรัพยากร OAuth เท่านั้น

บริการจะจัดการ flow OAuth / OIDC ให้อัตโนมัติเมื่อกำหนดค่าเสร็จ

### ผสานรวมผ่านโปรโตคอล OAuth / OIDC \{#integrate-via-oauth-protocol}

หากแอปพลิเคชันบุคคลที่สามต้องการผสานรวมกับ Logto เป็น IdP แบบโปรแกรม ควรใช้ [Authorization Code Flow](https://auth.wiki/authorization-code-flow) มาตรฐาน เราแนะนำให้ใช้ไลบรารี OAuth 2.0 / OIDC client สำหรับภาษาโปรแกรมของคุณเพื่อจัดการการใช้งาน

<Tabs groupId="app-type">
<TabItem value="traditional-web" label="Traditional web">

แอปพลิเคชันเว็บแบบดั้งเดิมเป็น **confidential clients** ที่สามารถเก็บ client secret ไว้ที่ backend server ได้อย่างปลอดภัย ดูรายละเอียดการใช้งานเต็มที่ได้ที่ [Authorization Code Flow](https://auth.wiki/authorization-code-flow)

**ขั้นตอนสำคัญ:**

1. **เริ่มต้นการอนุญาต**: เปลี่ยนเส้นทางผู้ใช้ไปยัง authorization endpoint ของ Logto พร้อม `client_id`, `redirect_uri`, `response_type=code` และ `scope`
2. **จัดการ callback**: รับ authorization `code` จากการ redirect
3. **แลกเปลี่ยนโทเค็น**: จาก backend ของคุณ POST ไปยัง token endpoint พร้อม code, `client_id` และ `client_secret`

</TabItem>
<TabItem value="spa-native" label="Single page app / Native">

Single page app และ Native app เป็น **public clients** ที่ไม่สามารถเก็บ secret ได้อย่างปลอดภัย แทนที่จะใช้ client secret แอปเหล่านี้ต้องใช้ [PKCE (Proof Key for Code Exchange)](https://auth.wiki/pkce) เพื่อความปลอดภัย ดูรายละเอียดการใช้งานเต็มที่ได้ที่ [Authorization Code Flow](https://auth.wiki/authorization-code-flow) และ [PKCE](https://auth.wiki/pkce)

**ขั้นตอนสำคัญ:**

1. **สร้างพารามิเตอร์ PKCE**: สร้าง `code_verifier` และแปลงเป็น `code_challenge` (SHA-256)
2. **เริ่มต้นการอนุญาต**: เปลี่ยนเส้นทางผู้ใช้ไปยัง authorization endpoint พร้อม `code_challenge` และ `code_challenge_method=S256`
3. **จัดการ callback**: รับ authorization `code` จากการ redirect
4. **แลกเปลี่ยนโทเค็น**: POST ไปยัง token endpoint พร้อม code และ `code_verifier` เดิม

</TabItem>
</Tabs>

## หน้าขอความยินยอมสำหรับแอป OIDC บุคคลที่สาม \{#consent-screen-for-oidc-third-party-applications}

เพื่อความปลอดภัย แอปพลิเคชัน OIDC บุคคลที่สามทั้งหมดจะถูกเปลี่ยนเส้นทางไปยัง [หน้าขอความยินยอม (consent screen)](/end-user-flows/consent-screen) เพื่อขอการอนุญาตจากผู้ใช้หลังจากได้รับการยืนยันตัวตนโดย Logto

[สิทธิ์โปรไฟล์ผู้ใช้](/integrate-logto/third-party-applications/permission-management#user-permissions-user-profile-scopes) [ขอบเขตทรัพยากร API](/integrate-logto/third-party-applications/permission-management#api-resource-permissions-api-resource-scopes) [สิทธิ์องค์กร](/integrate-logto/third-party-applications/permission-management#organization-permissions-organization-scopes) และข้อมูลสมาชิกองค์กรที่แอปบุคคลที่สามร้องขอทั้งหมดจะแสดงบนหน้าขอความยินยอม

สิทธิ์ที่ร้องขอเหล่านี้จะถูกอนุมัติให้กับแอปพลิเคชันบุคคลที่สามก็ต่อเมื่อผู้ใช้คลิกปุ่ม "Authorize" เท่านั้น

<center>
  <img src="/img/assets/consent-screen.webp" alt="consent screen" width={500} />
</center>

## การดำเนินการเพิ่มเติม \{#further-actions}

<DocCardList
  items={[
    {
      type: 'link',
      label: 'การจัดการสิทธิ์',
      href: '/integrate-logto/third-party-applications/permission-management',
      description: 'เรียนรู้วิธีจัดการสิทธิ์สำหรับแอป OIDC บุคคลที่สามของคุณ',
      customProps: {
        icon: <AuthorizationIcon width={20} height={20} />,
      },
    },
    {
      type: 'link',
      label: 'การปรับแต่งหน้าขอความยินยอม',
      href: '/integrate-logto/third-party-applications/consent-screen-branding',
      description:
        'ปรับแต่งหน้าขอความยินยอมให้ตรงกับอัตลักษณ์แบรนด์ของคุณและมอบประสบการณ์ผู้ใช้ที่สอดคล้องกัน',
      customProps: {
        icon: <CustomizationIcon width={20} height={20} />,
      },
    },
  ]}
/>

## คำถามที่พบบ่อย \{#faqs}

<details>
  <summary>

### เราจะมั่นใจได้อย่างไรว่าผู้ใช้สามารถอนุมัติสิทธิ์เฉพาะที่ตนเองมีบนหน้าขอความยินยอม? \{#how-do-we-ensure-users-can-only-grant-permissions-they-actually-have-on-the-consent-screen}

</summary>

Logto ใช้การควบคุมการเข้าถึงตามบทบาท (RBAC) เพื่อจัดการสิทธิ์ของผู้ใช้ บนหน้าขอความยินยอมจะแสดงเฉพาะขอบเขต (สิทธิ์) ที่ผู้ใช้ได้รับผ่านบทบาทของตนแล้วเท่านั้น หากแอปบุคคลที่สามร้องขอขอบเขตที่ผู้ใช้ไม่มี จะไม่แสดงเพื่อป้องกันการอนุญาตที่ไม่เหมาะสม

แนวทางการจัดการ:

- กำหนด [บทบาทระดับโกลบอล](/authorization/role-based-access-control) หรือ [บทบาทองค์กร](/authorization/organization-template) พร้อมขอบเขตเฉพาะ
- มอบหมายบทบาทให้ผู้ใช้ตามความต้องการในการเข้าถึง
- ผู้ใช้จะได้รับขอบเขตจากบทบาทโดยอัตโนมัติ

</details>

## แหล่งข้อมูลที่เกี่ยวข้อง \{#related-resources}

<Url href="https://blog.logto.io/logto-apache-answer">
  กรณีศึกษา: ผสานรวม Apache Answer เพื่อสร้างคอมมูนิตี้สำหรับผู้ใช้ของคุณ
</Url>

<Url href="https://blog.logto.io/logto-as-idp">
  การใช้ Logto เป็นผู้ให้บริการข้อมูลระบุตัวตน (IdP) สำหรับบุคคลที่สาม
</Url>
