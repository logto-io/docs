---
id: email-connectors
title: ตัวเชื่อมต่ออีเมล
sidebar_label: ตัวเชื่อมต่ออีเมล
sidebar_position: 1
---

# ตัวเชื่อมต่ออีเมล

ตัวเชื่อมต่ออีเมลจะผสานรวมบริการส่งอีเมลของคุณเข้ากับ Logto เพื่อเปิดใช้งานการยืนยันตัวตนผู้ใช้อย่างปลอดภัยผ่านอีเมล เมื่อกำหนดค่าแล้ว คุณสามารถส่ง [รหัสผ่านใช้ครั้งเดียว (OTP)](https://auth.wiki/otp) สำหรับ [การสมัครสมาชิก](/end-user-flows/sign-up-and-sign-in/sign-up), [การลงชื่อเข้าใช้](/end-user-flows/sign-up-and-sign-in/sign-in), [การรีเซ็ตรหัสผ่าน](/end-user-flows/sign-up-and-sign-in/reset-password), [การเชื่อมโยงบัญชี](/end-user-flows/sign-up-and-sign-in/social-sign-in#account-linking), [การเชิญสมาชิก](/end-user-flows/organization-experience/invite-organization-members) และ [การยืนยันการดำเนินการที่มีความเสี่ยงสูง](/end-user-flows/security-verification)

## เลือกตัวเชื่อมต่ออีเมลของคุณ \{#choose-your-email-connector}

Logto มีตัวเลือกตัวเชื่อมต่ออีเมลให้เลือก 3 ประเภท:

### Logto Email Service ฟรี (เฉพาะ Cloud) \{#free-logto-email-service-cloud-only}

ตัวเลือกบริการอีเมลในตัวนี้เหมาะสำหรับการเริ่มต้นอย่างรวดเร็วทั้งใน [สภาพแวดล้อมทดสอบ](/logto-cloud/tenant-settings#development) และ [สภาพแวดล้อมจริง](/logto-cloud/tenant-settings#production) โดยไม่ต้องเชื่อมต่อกับบริการภายนอก และให้บริการส่งอีเมลฟรีที่เชื่อถือได้ เพียงปรับแต่งแบรนด์พื้นฐานของคุณสำหรับเทมเพลตอีเมลที่ออกแบบไว้ล่วงหน้า

ตัวเชื่อมต่อ Logto Email Service ขณะนี้รองรับการปรับแต่งแบรนด์ เช่น โลโก้ ข้อมูลบริษัท และชื่อผู้ส่ง

อย่างไรก็ตาม แม้จะสะดวก แต่ก็มีข้อจำกัดบางประการที่ควรทราบ — คุณไม่สามารถปรับแต่งที่อยู่อีเมลผู้ส่ง โดเมน หรือเนื้อหาอีเมลเฉพาะได้

```mdx-code-block
import DocCardList from '@theme/DocCardList';
import LogtoEmailService from '@site/docs/connectors/assets/icons/logto-email-service.svg';
import AwsDm from '@site/docs/connectors/assets/icons/aws-direct-mail.svg';
import SendGrid from '@site/docs/connectors/assets/icons/sendgrid.svg';
import Mailgun from '@site/docs/connectors/assets/icons/mailgun.svg';
import Postmark from '@site/docs/connectors/assets/icons/postmark.svg';
import AliyunDm from '@site/docs/connectors/assets/icons/aliyun-direct-mail.svg';
import Smtp from '@site/docs/connectors/assets/icons/smtp.svg';
import Http from '@site/docs/connectors/assets/icons/http.svg';

<DocCardList
  items={[
    {
      type: 'link',
      label: 'Logto Email Service',
      href: '/connectors/email-connectors/built-in-email-service',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการสำหรับ Logto Email Service',
      customProps: {
        icon: <LogtoEmailService />,
      }
    },
  ]}
/>
```

### ผู้ให้บริการอีเมลยอดนิยม \{#popular-email-providers}

เชื่อมต่อกับผู้ให้บริการอีเมล (ESP) ที่คุณต้องการโดยใช้คู่มือทีละขั้นตอนของ Logto

ตัวเลือกเหล่านี้ช่วยให้คุณสามารถ [ปรับแต่งเทมเพลตอีเมลของคุณ](/connectors/email-connectors/email-templates) ได้อย่างเต็มที่ ชื่อผู้ส่ง เพิ่มตัวแปร ฯลฯ เพื่อให้เหมาะกับแบรนด์ของคุณมากที่สุด

เรามีการรองรับผู้ให้บริการอีเมลต่อไปนี้แบบสำเร็จรูป:

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'AWS Direct Mail',
      href: '/integrations/aws-ses',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ AWS Direct Mail',
      customProps: {
        icon: <AwsDm />,
      }
    },
    {
      type: 'link',
      label: 'Mailgun',
      href: '/integrations/mailgun',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ Mailgun',
      customProps: {
        icon: <Mailgun />,
      }
    },
    {
      type: 'link',
      label: 'SendGrid Email',
      href: '/integrations/sendgrid-email',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ SendGrid',
      customProps: {
        icon: <SendGrid />,
      }
    },
    {
      type: 'link',
      label: 'Aliyun Direct Mail',
      href: '/integrations/aliyun-dm',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ Aliyun Direct Mail',
      customProps: {
        icon: <AliyunDm />,
      }
    },
    {
      type: 'link',
      label: 'Postmark Mail',
      href: '/integrations/postmark',
      description: 'ตัวเชื่อมต่อ Logto สำหรับ Postmark',
      customProps: {
        icon: <Postmark />,
      }
    },
  ]}
/>
```

### ปรับแต่งตัวเชื่อมต่ออีเมลของคุณ \{#customize-your-email-connector}

หากไม่มีตัวเลือกข้างต้นตรงกับความต้องการของคุณ คุณสามารถเลือกเชื่อมต่อกับบริการอีเมลที่ต้องการผ่าน Simple Mail Transfer Protocol (SMTP) ได้เช่นกัน

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'SMTP',
      href: '/integrations/smtp',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ SMTP',
      customProps: {
        icon: <Smtp />,
      }
    },
  ]}
/>
```

หากคุณมีบริการอีเมลของตัวเองและไม่สามารถใช้การเชื่อมต่อ SMTP ได้ เรายังมี "HTTP email connector" ให้เลือกใช้

เมื่อจำเป็นต้องส่งอีเมล ระบบจะส่ง API call ไปยัง `endpoint` ที่กำหนดไว้เพื่อดำเนิน flow การยืนยันตัวตนที่ต้องใช้อีเมล โปรดทราบว่าเพื่อป้องกันข้อผิดพลาดใน flow การยืนยันตัวตน endpoint ที่กำหนดต้องตอบกลับด้วย 200 หลังได้รับ WebHook เพื่อแจ้ง Logto ว่าได้รับคำขอส่งอีเมลแล้ว ในกรณีนี้ คุณต้องตรวจสอบบริการอีเมลของคุณเองเพื่อให้แน่ใจว่าส่งสำเร็จ

```mdx-code-block
<DocCardList
  items={[
    {
      type: 'link',
      label: 'HTTP email connector',
      href: '/integrations/http-email',
      description: 'ตัวเชื่อมต่ออย่างเป็นทางการของ Logto สำหรับ HTTP email',
      customProps: {
        icon: <Http />,
      }
    },
  ]}
/>
```

หากตัวเชื่อมต่อมาตรฐานของเราไม่ตรงกับความต้องการเฉพาะของคุณ อย่าลังเลที่จะ [ติดต่อเรา](https://logto.productlane.com/roadmap) สำหรับผู้ใช้ OSS คุณสามารถ [พัฒนาตัวเชื่อมต่อของคุณเอง (OSS)](/logto-oss/develop-your-connector/implement-connectors#build-a-passwordless-connector) ได้หากมีความเร่งด่วน เรายินดีต้อนรับ [การมีส่วนร่วม](/logto-oss/contribution) เสมอ ความพยายามของคุณอาจช่วยเหลือสมาชิกชุมชนคนอื่นที่มีความต้องการเดียวกัน

## ขั้นตอนการตั้งค่า \{#configure-steps}

ทำตามขั้นตอนด้านล่างเพื่อเพิ่มตัวเชื่อมต่ออีเมล:

1. ไปที่ <CloudLink to="/connectors/passwordless">Console > Connectors > Email and SMS connectors </CloudLink>
2. เพื่อเพิ่มตัวเชื่อมต่ออีเมลใหม่ ให้คลิกปุ่ม "Set up" และเลือกผู้ให้บริการอีเมลที่ต้องการ
3. อ่านเอกสาร README และตั้งค่าตามขั้นตอนสำหรับผู้ให้บริการที่เลือก
4. คลิก "Save and Done" เพื่อเสร็จสิ้น

:::note

เพื่อให้แน่ใจว่าอีเมลสำคัญ (เช่น รหัสยืนยัน) ไปถึงกล่องจดหมายของผู้ใช้อย่างน่าเชื่อถือและไม่ตกเป็นสแปม ให้เน้นสองสิ่งนี้:

- **ตั้งค่าการยืนยันตัวตนอีเมล (SPF, DKIM, DMARC)**
  ผู้ให้บริการอีเมล (Gmail, Outlook ฯลฯ) ใช้โปรโตคอลเหล่านี้เพื่อตรวจสอบว่าคุณไม่ใช่สแปมเมอร์ หากขาดการตั้งค่าเหล่านี้ อีเมลอาจตกเป็นสแปมหรือถูกปฏิเสธ
  - SPF (Sender Policy Framework): ระบุเซิร์ฟเวอร์ / IP ที่อนุญาตให้ส่งอีเมลในนามโดเมนของคุณ
  - DKIM (DomainKeys Identified Mail): เพิ่มลายเซ็นดิจิทัลเพื่อพิสูจน์ว่าอีเมลไม่ถูกแก้ไข
  - DMARC (Domain-based Message Authentication): แจ้งผู้รับว่าจะจัดการอีเมลที่ไม่ผ่าน SPF / DKIM อย่างไร
- **แยกอีเมลยืนยันตัวตน & อีเมลการตลาด**
  อีเมลการตลาดมักทำให้เกิดการร้องเรียนสแปมหรืออัตราตีกลับสูง หากอีเมลยืนยันตัวตนใช้โดเมน / IP เดียวกัน อัตราการส่งถึงกล่องจดหมายจะลดลง
  - ใช้โดเมนเฉพาะ: ส่งอีเมลยืนยันจาก `@auth.yourdomain.com` การตลาดจาก `@marketing.yourdomain.com`
  - IP เฉพาะ: ขอ IP เฉพาะสำหรับอีเมลยืนยันตัวตนและค่อย ๆ อุ่น IP
  - ให้ที่อยู่ "From" ตรงกับ SPF / DKIM / DMARC

:::

## เปลี่ยนตัวเชื่อมต่ออีเมล \{#change-email-connector}

คุณจะสังเกตได้ว่าสามารถเพิ่มตัวเชื่อมต่ออีเมลได้เพียงหนึ่งตัวเท่านั้น

เมื่อคุณมีตัวเชื่อมต่ออีเมลอยู่แล้ว คุณสามารถเลือก "Change email connector" ได้เท่านั้น เมื่อดำเนินการนี้ในคอนโซล การเปลี่ยนแปลงจะมีผลทันทีหลังจากบันทึก ดังนั้นโปรดทดสอบการตั้งค่าก่อนบันทึกทุกครั้ง

เพื่อความเสถียรของบริการ ผู้ใช้ Cloud สามารถสร้าง [dev tenant](/logto-cloud/tenant-settings#development) สำหรับสภาพแวดล้อมพัฒนา หลังจากทดสอบการตั้งค่าใน dev แล้ว ให้ "migrate" การตั้งค่าไปยัง [production](/logto-cloud/tenant-settings#production) แล้วจึงบันทึก

## เปิดใช้งานการสมัครสมาชิกหรือเข้าสู่ระบบด้วยอีเมล \{#enable-email-address-for-end-user-flows}

เมื่อคุณเพิ่มตัวเชื่อมต่ออีเมลและตั้งค่าเรียบร้อยแล้ว คุณสามารถเปิดใช้งานการตั้งค่าการลงชื่อเข้าใช้และสมัครสมาชิกที่ใช้ "อีเมล + รหัสยืนยัน" ตามความต้องการของธุรกิจ

1. **ไปที่:** <CloudLink to="/sign-in-experience/sign-up-and-sign-in">Console > Sign-in experience > Sign-up and sign-in</CloudLink>
2. [**ตั้งค่าวิธีสมัครสมาชิก**](/end-user-flows/sign-up-and-sign-in/sign-up): เลือก "Email address" หรือ "Email address or phone number" เป็นตัวระบุการสมัครสมาชิก หมายเหตุ: ปัจจุบันต้องยืนยันอีเมลเสมอในขั้นตอนสมัครสมาชิก
3. [**ตั้งค่าวิธีลงชื่อเข้าใช้**](/end-user-flows/sign-up-and-sign-in/sign-in): ตัวระบุที่เลือกในขั้นตอนสมัครสมาชิกจะกลายเป็นวิธีลงชื่อเข้าใช้โดยอัตโนมัติ คลิก "Add another" เพื่อเพิ่มตัวเลือกการลงชื่อเข้าใช้อื่น ๆ
4. **บันทึกและทดสอบ:** คลิก "Save changes" เพื่อใช้งานประสบการณ์ลงชื่อเข้าใช้ใหม่ อย่าลืมใช้ "[Live preview](/customization/live-preview)" เพื่อทดสอบฟังก์ชัน

:::warning
เนื่องจากการตั้งค่าของเรามีผลทันที การลบตัวเชื่อมต่ออีเมลที่มีอยู่จะส่งผลต่อกระบวนการเข้าสู่ระบบและสมัครสมาชิกของผู้ใช้ปลายทาง

ตัวอย่างเช่น หากตัวระบุการลงชื่อเข้าใช้รวม "อีเมล + รหัสยืนยัน" การลบตัวเชื่อมต่ออีเมลจะทำให้ผู้ใช้ไม่ได้รับรหัสยืนยันทางอีเมลและเกิดข้อผิดพลาดใน flow การลงชื่อเข้าใช้

โปรดระวังความเสี่ยงที่อาจเกิดขึ้นเมื่อดำเนินการกับตัวเชื่อมต่อ
:::

## คำถามที่พบบ่อย \{#faqs}

<details>
<summary>

### จะปรับแต่งชื่อผู้ส่งอีเมลได้อย่างไร? \{#how-to-customize-the-email-sender-name}

</summary>

เรากำลังพัฒนาตัวเชื่อมต่อเพิ่มเติม หากคุณต้องการตัวเลือกอื่น ๆ แจ้งความต้องการของคุณใน Discord และส่ง Feature Request ที่ [GitHub](https://github.com/logto-io/logto/issues) หากต้องการความช่วยเหลือเพิ่มเติม สามารถ [ติดต่อเราทางอีเมล](mailto:contact@logto.io) ได้เช่นกัน

สำหรับผู้ร่วมพัฒนา เรามีวิธีสร้างตัวเชื่อมต่อที่ขยายได้ง่าย ให้คุณ [ปรับแต่งตัวเชื่อมต่อของคุณเอง](/logto-oss/develop-your-connector) ตามกรณีใช้งานเฉพาะของคุณ คุณสามารถส่ง pull request มายัง Logto ได้เสมอ เพื่อให้ชุมชนได้รับประโยชน์ร่วมกัน

</details>

<details>
<summary>

### จะจำกัด IP สำหรับคำขออีเมลใน Logto email connectors ได้อย่างไร? \{#how-can-i-restrict-ip-addresses-for-email-requests-in-logto-email-connectors}

</summary>

วิธีหนึ่งคือใช้ Logto HTTP email connector

ให้คุณสร้าง API endpoint บนเซิร์ฟเวอร์ของคุณที่เรียกบริการอีเมลที่เกี่ยวข้อง และเรียก endpoint นี้ผ่าน [HTTP email connector](/integrations/http-email) ของ Logto วิธีนี้จะช่วยให้คุณควบคุม IP ของ endpoint ได้อย่างสมบูรณ์ และสามารถเพิ่ม IP ที่ต้องการลงใน whitelist ของผู้ให้บริการอีเมลได้

</details>
