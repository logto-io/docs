---
sidebar_position: 3
---

# Créer une organisation

Imaginez que vous construisez une [application multi-locataire](https://auth.wiki/multi-tenancy) (par exemple, une application SaaS multi-locataire) qui dessert de nombreux clients, et chaque client possède un locataire dédié.

Les organisations sont généralement créées lorsque :

1. De nouveaux clients s'inscrivent et créent à la fois un compte et un locataire pour leur entreprise.
2. Les utilisateurs existants peuvent créer une nouvelle organisation depuis l'application.

<img src="/img/assets/new-account-creates-org.png" alt="Un nouveau compte crée une organisation" />
<img
  src="/img/assets/existing-user-creates-org.png"
  alt="Un utilisateur existant crée une organisation"
/>

## Implémenter la création d'organisation \{#implement-organization-creation}

Il existe deux façons de créer des organisations pour votre application.

### Créer via la Console Logto \{#create-via-logto-console}

Créez manuellement des organisations dans l'interface utilisateur de la Console Logto. Rendez-vous sur <CloudLink to="/organizations">Console > Organisations</CloudLink> pour créer des organisations, attribuer des membres et des rôles, et personnaliser l'expérience de connexion de l'organisation.

Créez un [modèle d'organisation](/authorization/organization-template) pour créer en lot des organisations similaires partageant les mêmes rôles et permissions.

### Créer via l’API de gestion Logto \{#create-via-logto-management-api}

La Console est idéale pour la configuration manuelle, mais la plupart des applications permettent aux utilisateurs finaux d'être autonomes—créer et gérer des organisations directement dans votre application. Pour cela, implémentez ces fonctionnalités avec la Management API Logto.

:::note

Si vous débutez avec la Management API Logto, lisez d'abord ceci :

<Url href="/concepts/core-service/#management-api">Management API</Url>
<Url href="/integrate-logto/interact-with-management-api">Interagir avec la Management API</Url>

:::

Supposons que votre backend soit connecté à la Management API Logto via le mécanisme machine à machine (M2M), et que vous ayez obtenu un jeton d’accès M2M.

Créez une organisation avec la Management API ([Références API](https://openapi.logto.io/operation/operation-createorganization)) :

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"tenantId":"string","name":"string","description":"string","customData":{},"isMfaRequired":false,"branding":{"logoUrl":"string","darkLogoUrl":"string","favicon":"string","darkFavicon":"string"},"createdAt":1234567890}'
```

Ajoutez ensuite l'utilisateur en tant que membre de l'organisation ([Référence API](https://openapi.logto.io/operation/operation-addorganizationusers)) :

```bash
curl \
 -X POST https://[tenant_id].logto.app/api/organizations/{id}/users \
 -H "Authorization: Bearer $M2M_ACCESS_TOKEN" \
 -H "Content-Type: application/json" \
 -d '{"userIds":["string"]}'
```

Vous pouvez également attribuer des rôles d'organisation spécifiques à l'utilisateur ([Référence API](https://openapi.logto.io/operation/operation-assignorganizationrolestousers)).

Consultez les [spécifications complètes de l’API](https://openapi.logto.io/group/endpoint-organizations) pour plus de détails.

Encapsulez ces appels dans votre propre couche API. Lorsque les utilisateurs effectuent l'action "créer une organisation" dans votre application, validez la requête en vérifiant leurs permissions, puis appelez la Management API Logto pour finaliser l'opération.

## Valider le jeton d’organisation dans les requêtes utilisateur \{#validating-organization-token-in-user-request}

Dans votre application, lorsque les utilisateurs effectuent des actions dans le contexte d'une organisation, ils doivent utiliser un jeton d’organisation au lieu d’un jeton d’accès classique. Le jeton d’organisation est un [JWT](https://auth.wiki/jwt) qui contient les permissions de l’organisation. Comme tout [jeton d’accès](https://auth.wiki/access-token), vous pouvez décoder les revendications et vérifier la revendication "scope" pour appliquer les permissions.

Voir <Url href="/authorization">Autorisation (Authorization)</Url> pour plus d’informations sur les scénarios d’autorisation et la validation des jetons d’organisation.
