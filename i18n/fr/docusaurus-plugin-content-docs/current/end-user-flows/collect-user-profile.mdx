---
sidebar_position: 7
---

# Collecter le profil utilisateur

Au-delà des identifiants d’authentification et des informations d’identification nécessaires à la connexion de l’utilisateur, votre application peut avoir besoin de collecter des informations supplémentaires sur le profil utilisateur stockées dans Logto pour une récupération facile via les revendications JWT ou les API, afin de fournir des expériences produits personnalisées. Vous pouvez collecter les données utilisateur par les méthodes suivantes :

- **Lors de l’inscription d’un nouvel utilisateur** : Utilisez la fonctionnalité [Collecter le profil utilisateur](#quick-start) pour ajouter une étape clé en main "Parlez-nous de vous" qui collecte des informations supplémentaires sur le profil utilisateur lors de l’inscription. Les nouveaux utilisateurs doivent remplir tous les champs obligatoires avant que l’inscription ne soit considérée comme terminée. Ce document se concentre sur cette approche.

- **Après l’inscription de l’utilisateur** : Utilisez l’[Account API](/end-user-flows/account-settings/by-account-api) pour mettre en œuvre des expériences en libre-service lors des parcours d’onboarding, dans les centres de compte ou tout au long de l’utilisation du produit pour mettre à jour les informations du profil utilisateur.

## Principaux avantages \{#key-benefits}

La fonctionnalité **Collecter le profil utilisateur** vous permet de recueillir des informations supplémentaires sur l’utilisateur lors de l’inscription de l’utilisateur final. Nous vous recommandons de ne collecter que les informations essentielles nécessaires à votre produit afin d’éviter des parcours d’inscription trop longs qui pourraient impacter les taux de conversion.

Cette fonctionnalité vous permet de :

- **Capturer des données utilisateur complètes** : Collectez toutes les [données utilisateur](/user-management/user-data) pour des besoins métier ou de conformité, y compris les [propriétés utilisateur standard OIDC](#basic-user-data-fields) et [données personnalisées](#custom-user-data-fields).

- **Personnalisation flexible des champs** : Choisissez parmi différents [types de champs](#field-types) tels que texte, nombre, date, case à cocher, liste déroulante (sélection), URL et validation par expression régulière pour répondre à vos besoins spécifiques.

- **Expérience utilisateur optimisée** : Personnalisez l’affichage avec des libellés, descriptions, espaces réservés et règles de validation. Configurez les champs comme obligatoires ou optionnels selon vos besoins métier.

- **Configurations de champs intégrées** : Utilisez des champs de données de base préconfigurés pour les propriétés utilisateur courantes avec une configuration prête à l’emploi. Profitez des champs composites (adresse, nom complet) pour recueillir efficacement des données structurées en une seule étape.

## Démarrage rapide \{#quick-start}

1. Rendez-vous sur <CloudLink to="/sign-in-experience/collect-user-profile">Console Logto > Expérience de connexion > Collecter le profil utilisateur</CloudLink>.
2. Cliquez sur "Ajouter des champs de profil" et choisissez un [champ intégré](#basic-user-data-fields) ou définissez une [donnée personnalisée](#custom-user-data-fields) (clé alphanumérique) à créer.
3. Ouvrez les détails du champ pour définir le type de champ, le libellé, la description, le caractère obligatoire et les paramètres spécifiques au type (longueur, plage, format, options, etc.). Cliquez sur "Enregistrer les modifications".
4. Retournez dans Expérience de connexion > Collecter le profil utilisateur, faites glisser et déposez les champs pour les réorganiser ; les modifications seront automatiquement appliquées.
5. Testez l’expérience utilisateur avec [l’aperçu en direct Logto](/customization/live-preview) ou votre application de test. Que les utilisateurs créent un nouveau compte via [identifiant (e-mail / numéro de téléphone / nom d’utilisateur)](/end-user-flows/sign-up-and-sign-in/sign-up), [connexion sociale](/end-user-flows/sign-up-and-sign-in/social-sign-in), ou [SSO d’entreprise](/end-user-flows/enterprise-sso), ils verront tous la page "Parlez-nous de vous" lors de l’inscription.

<img
  src="/img/assets/collect-user-profile-during-sign-up.png"
  alt="Collecter le profil utilisateur lors de l’inscription"
/>

## Types de données utilisateur \{#user-data-types}

Les données utilisateur peuvent être consultées dans chaque [profil utilisateur](/user-management/manage-users). Pour une vue d’ensemble complète de toutes les catégories de données utilisateur, consultez la documentation sur la [structure des données utilisateur](/user-management/user-data). La fonctionnalité Collecter le profil utilisateur vous permet de recueillir à la fois des données utilisateur de base et des données personnalisées lors de l’inscription.

### Champs de données utilisateur de base \{#basic-user-data-fields}

Les champs de données utilisateur de base fournis par Logto sont stockés directement dans la propriété `user` ou `user.profile`. Ces champs disposent de valeurs de configuration par défaut et de traductions i18n, prêts à l’emploi dès leur création. Vous pouvez également personnaliser les types de champs et les paramètres selon vos besoins spécifiques.

| Nom du champ (13%) | Clé de donnée utilisateur (44%)                                                                                                                                                                                                                                                                 | Description                                                                                                                                                                                                                                     |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Nom                | <code>user.name</code>                                                                                                                                                                                                                                                                          | Nom complet de l’utilisateur sous forme affichable incluant tous les composants du nom (ex. "Jane Doe").                                                                                                                                        |
| Nom complet        | <code>user.profile.givenName</code><br /><code>user.profile.middleName</code><br /><code>user.profile.familyName</code>                                                                                                                                                                         | Nom légal complet de l’utilisateur. Combine de manière flexible familyName, givenName et middleName selon la configuration.                                                                                                                     |
| Surnom             | <code>user.profile.nickname</code>                                                                                                                                                                                                                                                              | Nom familier ou usuel de l’utilisateur, pouvant différer de son nom légal.                                                                                                                                                                      |
| Date de naissance  | <code>user.profile.birthdate</code>                                                                                                                                                                                                                                                             | Date de naissance de l’utilisateur dans un format spécifié (ex. "MM-jj-aaaa").                                                                                                                                                                  |
| Genre              | <code>user.profile.gender</code>                                                                                                                                                                                                                                                                | Genre auto-identifié de l’utilisateur (ex. "Femme", "Homme", "Préfère ne pas dire").                                                                                                                                                            |
| Profil             | <code>user.profile.profile</code>                                                                                                                                                                                                                                                               | URL de la page de profil lisible de l’utilisateur (ex. profil de réseau social).                                                                                                                                                                |
| Site web           | <code>user.profile.website</code>                                                                                                                                                                                                                                                               | URL du site personnel ou du blog de l’utilisateur.                                                                                                                                                                                              |
| Adresse            | <code>user.profile.address.formatted</code><br /><code>user.profile.address.streetAddress</code><br /><code>user.profile.address.region</code><br /><code>user.profile.address.zoneinfo</code><br /><code>user.profile.address.postalCode</code><br /><code>user.profile.address.country</code> | Adresse complète de l’utilisateur (ex. "123 rue Principale, Ville, France 12345"). Choisissez entre une seule ligne (<code>address.formatted</code>) ou plusieurs lignes avec composants configurables (rue, ville, région, code postal, pays). |

### Champs de données utilisateur personnalisées \{#custom-user-data-fields}

Les champs de données utilisateur personnalisées sont des champs définis par l’utilisateur qui capturent des informations supplémentaires non couvertes par les champs de base, telles que les préférences, centres d’intérêt, taille de l’entreprise ou autres attributs spécifiques à votre activité.

Lors de la création de champs personnalisés, utilisez uniquement des caractères alphanumériques pour la clé de donnée utilisateur (ex. `customData.companySize`). Vous pouvez ensuite configurer le [type de champ](#field-types) et personnaliser les propriétés supplémentaires selon vos besoins.

Pour plus d’informations sur la récupération et la mise à jour des données utilisateur personnalisées après la création de l’utilisateur, consultez [structure des données utilisateur](/user-management/user-data#custom-data).

## Types de champs \{#field-types}

Nous pouvons simplement catégoriser les champs par simplicité :

- Primitif : Texte, Nombre, Date, Case à cocher (Booléen), Liste déroulante (Sélection unique), URL, Expression régulière.
- Composite : Nom complet, Adresse.

### Propriétés communes \{#common-properties}

| Propriété (14%) | S’applique à (36%)        | Remarques                                                                                                  |
| --------------- | ------------------------- | ---------------------------------------------------------------------------------------------------------- |
| Libellé         | Tous                      | Nom affiché à l’utilisateur. Flotte en haut lorsque le champ a une valeur ou est sélectionné. Obligatoire. |
| Espace réservé  | Tous (sauf case à cocher) | Indice affiché en ligne lorsque le libellé flotte (exemple / guide de formatage).                          |
| Description     | Tous (sauf case à cocher) | Texte d’aide sous le champ pour des instructions plus longues ou un contexte supplémentaire.               |
| Obligatoire     | Tous (sauf case à cocher) | Si activé, la soumission est bloquée si vide. Sinon, une étiquette `(Optionnel)` est ajoutée au libellé.   |

### Configurations spécifiques au type \{#type-specific-configurations}

| Type (14%)       | Aspects configurables (36%)      | Remarques                                                                                                                                                                                                                                                                                               |
| ---------------- | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Texte            | longueur min/max                 | Limite la longueur minimale et maximale du texte saisi par l’utilisateur.                                                                                                                                                                                                                               |
| Nombre           | valeur min/max                   | Limite la plage numérique minimale et maximale de la valeur saisie.                                                                                                                                                                                                                                     |
| Date             | Format de date (prédéfini/perso) | Choisissez des formats prédéfinis (MM/jj/aaaa, jj/MM/aaaa, aaaa-MM-jj). Modifier l’espace réservé remplace les interactions par défaut. Ou utilisez des modèles <a href="https://date-fns.org/v2.30.0/docs/format" target="_blank" rel="noopener noreferrer">date-fns</a> entièrement personnalisables. |
| Case à cocher    | Valeur par défaut                | Coché (Vrai) / Non coché (Faux).                                                                                                                                                                                                                                                                        |
| Liste déroulante | Liste d’options (≥1)             | Utilisez <code>valeur:libellé</code> par ligne. Si le libellé est omis, la valeur est affichée.                                                                                                                                                                                                         |
| URL              | N/A                              | N/A                                                                                                                                                                                                                                                                                                     |
| Regex            | Expression régulière             | Modèle de validation (sans les barres obliques de début / fin). Ex. <code>^\d{3}-\d{2}-\d{4}$</code> pour un numéro de sécurité sociale.                                                                                                                                                                |
| Adresse          | Composants                       | Une ou plusieurs lignes ; sous-composants : rue, ville, région, code postal, pays.                                                                                                                                                                                                                      |
| Nom complet      | Composants                       | Sous-composants : prénom, deuxième prénom, nom de famille.                                                                                                                                                                                                                                              |

## Validation \{#validation}

La validation des champs est effectuée lors de la soumission utilisateur à l’étape finale de l’inscription. Les vérifications suivantes sont appliquées :

- Présence obligatoire (sauf case à cocher).
- Limites de longueur (Texte).
- Plage numérique (Nombre).
- Correspondance de modèle (Regex, Date avec format, URL, appartenance à une option de sélection).
- Structure de l’URL (validation syntaxique de base, pas d’accessibilité).

S’applique également aux sous-composants des deux champs composites : `address` et `fullname`. Les composants individuels doivent également respecter les mêmes critères de validation.

## Localisation \{#localization}

Logto fournit des traductions système pour les champs de données utilisateur de base, tels que `firstName`, `lastName`, `gender` et `birthdate`. Le libellé de ces champs est configurable dans la Console Logto.
Vous pouvez remplacer ces libellés en fournissant vos propres traductions dans [Logto > Expérience de connexion > Contenu](https://cloud.logto.io/to/sign-in-experience/content)

Les champs personnalisés dépendent entièrement des libellés, espaces réservés et descriptions que vous fournissez. Pour la localisation des champs personnalisés, vous pouvez gérer les traductions en utilisant [Apportez votre UI](/customization/bring-your-ui) ou [nous contacter](https://logto.io/contact) pour vos retours.

## Management API (points de terminaison clés) \{#management-api-key-endpoints}

| Méthode (10%) | Point de terminaison                                         | Objectif                                                         |
| ------------- | ------------------------------------------------------------ | ---------------------------------------------------------------- |
| GET           | <code>/api/custom-profile-fields</code>                      | Lister tous les champs.                                          |
| GET           | <code>/api/custom-profile-fields/:name</code>                | Récupérer la définition d’un champ par nom.                      |
| POST          | <code>/api/custom-profile-fields</code>                      | Créer un champ.                                                  |
| POST          | <code>/api/custom-profile-fields/batch</code>                | Création en masse (≤20 éléments par requête).                    |
| PUT           | <code>/api/custom-profile-fields/:name</code>                | Mettre à jour un champ par nom et jeu complet.                   |
| DELETE        | <code>/api/custom-profile-fields/:name</code>                | Supprimer un champ.                                              |
| POST          | <code>/api/custom-profile-fields/properties/sie-order</code> | Mettre à jour l’ordre des champs dans l’Expérience de connexion. |

## Bonnes pratiques \{#best-practices}

- Collectez uniquement les données essentielles à l’inscription ; reportez les informations facultatives à une complétion ultérieure du profil.
- Utilisez les champs composites pour les données structurées (adresse, nom complet) pour la cohérence et la localisation.
- Fournissez des exemples clairs / espaces réservés pour les champs sensibles au format (regex, date, plages numériques).

## FAQ \{#faqs}

<details>

<summary>

### Les champs de profil collectent-ils les données des utilisateurs existants ? \{#do-the-profile-fields-collect-existing-user-data}

</summary>

Non, ils ne collectent que les informations lors de l’étape finale de l’inscription d’un nouvel utilisateur.

</details>

<details>

<summary>

### Que se passe-t-il si je supprime un champ ? Les données utilisateur sont-elles supprimées ? \{#what-if-i-delete-a-field-does-it-remove-the-user-data}

</summary>

Non, cela ne supprimera pas les données utilisateur existantes. Seul le champ sera retiré du formulaire d’inscription dans l’expérience utilisateur finale.

</details>

<details>

<summary>

### Puis-je collecter le pays avec une liste contrôlée plutôt qu’un champ texte classique ? \{#can-i-collect-country-with-a-controlled-list-instead-of-a-regular-text-field}

</summary>

Oui, vous pouvez remplacer le composant "Pays" par un champ "Liste déroulante (Sélection unique)" avec des options standardisées.

</details>
