import azureAdDefaultAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_default_attribute_mapping.webp';
import azureAdLogtoAttributeMappingImage from '@site/docs/integrations/sso/entra-id-saml/assets/azure_ad_logto_attribute_mapping.webp';

Logto offre un moyen flexible de mapper les attributs utilisateur renvoyés par le fournisseur d’identité (IdP) aux attributs utilisateur dans Logto. Logto synchronisera par défaut les attributs utilisateur suivants depuis l'IdP :

- id : L'identifiant unique de l'utilisateur. Logto lira la revendication `nameID` de la réponse SAML comme identifiant d'identité SSO de l'utilisateur.
- email : L'adresse e-mail de l'utilisateur. Logto lira la revendication `email` de la réponse SAML comme e-mail principal de l'utilisateur par défaut.
- name : Le nom de l'utilisateur.

Vous pouvez gérer la logique de mappage des attributs utilisateur soit du côté Azure AD, soit du côté Logto.

1. Mapper les attributs utilisateur AzureAD aux attributs utilisateur Logto du côté Logto.

   Visitez la section `Attributes & Claims` de votre application SSO Azure AD.

   Copiez les noms d'attributs suivants (avec le préfixe de l'espace de noms) et collez-les dans les champs correspondants dans Logto.

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` (Recommandation : mettez à jour cette carte de valeur d'attribut à `user.displayname` pour une meilleure expérience utilisateur)

<img src={azureAdDefaultAttributeMappingImage} alt="Mappage d'attributs par défaut Azure AD" />

1. Mapper les attributs utilisateur AzureAD aux attributs utilisateur Logto du côté AzureAD.

   Visitez la section `Attributes & Claims` de votre application SSO Azure AD.

   Cliquez sur `Edit`, et mettez à jour les champs `Additional claims` en fonction des paramètres des attributs utilisateur Logto :

   - mettez à jour la valeur du nom de revendication en fonction des paramètres des attributs utilisateur Logto.
   - supprimez le préfixe de l'espace de noms.
   - cliquez sur `Save` pour continuer.

   Vous devriez obtenir les paramètres suivants :

<img src={azureAdLogtoAttributeMappingImage} alt="Mappage d'attributs Azure AD_Logto" />

Vous pouvez également spécifier des attributs utilisateur supplémentaires du côté Azure AD. Logto conservera un enregistrement des attributs utilisateur originaux renvoyés par l'IdP sous le champ `sso_identity` de l'utilisateur.
