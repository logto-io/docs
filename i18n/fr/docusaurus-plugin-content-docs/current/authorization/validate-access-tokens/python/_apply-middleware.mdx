import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

<Tabs groupId="api-framework">
  <TabItem value="fastapi" label="FastAPI">

```py title="app.py"
from fastapi import FastAPI, Depends
from auth_middleware import verify_access_token, AuthInfo

app = FastAPI()

@app.get("/api/protected")
async def protected_endpoint(auth: AuthInfo = Depends(verify_access_token)):
    # Accédez aux informations d'authentification directement depuis le paramètre auth
    return {"auth": auth.to_dict()}

@app.get("/api/protected/detailed")
async def detailed_endpoint(auth: AuthInfo = Depends(verify_access_token)):
    # Votre logique de point de terminaison protégé
    return {
        "auth": auth.to_dict(),
        "message": "Données protégées accessibles avec succès"
    }
```

  </TabItem>
  <TabItem value="flask" label="Flask">

```py title="app.py"
from flask import Flask, g, jsonify
from auth_middleware import verify_access_token

app = Flask(__name__)

@app.route('/api/protected', methods=['GET'])
@verify_access_token
def protected_endpoint():
    # Accédez aux informations d'authentification depuis g.auth
    return jsonify({"auth": g.auth.to_dict()})

@app.route('/api/protected/detailed', methods=['GET'])
@verify_access_token
def detailed_endpoint():
    # Votre logique de point de terminaison protégé
    return jsonify({
        "auth": g.auth.to_dict(),
        "message": "Données protégées accessibles avec succès"
    })
```

  </TabItem>
  <TabItem value="django" label="Django">

```py title="views.py"
from django.http import JsonResponse
from auth_middleware import require_access_token

@require_access_token
def protected_view(request):
    # Accédez aux informations d'authentification depuis request.auth
    return JsonResponse({"auth": request.auth.to_dict()})

@require_access_token
def detailed_view(request):
    # Votre logique de point de terminaison protégé
    return JsonResponse({
        "auth": request.auth.to_dict(),
        "message": "Données protégées accessibles avec succès"
    })
```

  </TabItem>
  <TabItem value="django-rest-framework" label="Django REST Framework">

```py title="views.py"
from rest_framework.decorators import api_view, authentication_classes
from rest_framework.response import Response
from auth_middleware import AccessTokenAuthentication

@api_view(['GET'])
@authentication_classes([AccessTokenAuthentication])
def protected_view(request):
    # Accédez aux informations d'authentification depuis request.user.auth
    return Response({"auth": request.user.auth.to_dict()})

@api_view(['GET'])
@authentication_classes([AccessTokenAuthentication])
def detailed_view(request):
    # Votre logique de point de terminaison protégé
    return Response({
        "auth": request.user.auth.to_dict(),
        "message": "Données protégées accessibles avec succès"
    })
```

**Ou en utilisant des vues basées sur des classes :**

```py title="views.py"
from rest_framework.views import APIView
from rest_framework.response import Response
from auth_middleware import AccessTokenAuthentication

class ProtectedView(APIView):
    authentication_classes = [AccessTokenAuthentication]

    def get(self, request):
        # Accédez aux informations d'authentification depuis request.user.auth
        return Response({"auth": request.user.auth.to_dict()})

class DetailedView(APIView):
    authentication_classes = [AccessTokenAuthentication]

    def get(self, request):
        # Votre logique de point de terminaison protégé
        return Response({
            "auth": request.user.auth.to_dict(),
            "message": "Données protégées accessibles avec succès"
        })
```

  </TabItem>
</Tabs>
