"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[53518],{44961:(e,n,i)=>{i.d(n,{Ay:()=>l,RM:()=>s});var r=i(86070),t=i(15658);const s=[];function d(e){const{Url:n}={...(0,t.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Endbenutzerfl\xfcsse: Authentifizierungsfl\xfcsse, Kontofl\xfcsse und Organisationsfl\xfcsse "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Connectors konfigurieren "}),"\n",(0,r.jsx)(n,{href:"/authorization/api-resources/protect-your-api",children:" Sch\xfctze deine API "})]})}function l(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},34965:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>a,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"quick-starts/framework/wordpress/README","title":"Authentifizierung zu deiner WordPress-Anwendung hinzuf\xfcgen","description":"Dieses Tutorial zeigt dir, wie du Logto in deine WordPress Website integrierst.","source":"@site/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/wordpress/README.mdx","sourceDirName":"quick-starts/framework/wordpress","slug":"/quick-starts/wordpress","permalink":"/de/quick-starts/wordpress","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/de/docusaurus-plugin-content-docs/current/quick-starts/framework/wordpress/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/wordpress","sidebar_label":"WordPress","sidebar_custom_props":{"description":"WordPress ist ein freies und quelloffenes Content-Management-System."}},"sidebar":"quickStartSidebar","previous":{"title":"Webflow","permalink":"/de/quick-starts/webflow"},"next":{"title":"Maschine-zu-Maschine","permalink":"/de/quick-starts/m2m"}}');var t=i(86070),s=i(15658),d=i(44961);const l={slug:"/quick-starts/wordpress",sidebar_label:"WordPress",sidebar_custom_props:{description:"WordPress ist ein freies und quelloffenes Content-Management-System."}},o="Authentifizierung zu deiner WordPress-Anwendung hinzuf\xfcgen",u={},c=[{value:"Voraussetzungen",id:"voraussetzungen",level:2},{value:"Integration",id:"integration",level:2},{value:"Plugin installieren",id:"plugin-installieren",level:3},{value:"Redirect-URI konfigurieren",id:"redirect-uri-konfigurieren",level:3},{value:"Plugin einrichten",id:"plugin-einrichten",level:3},{value:"Checkpoint: Teste deine Anwendung",id:"checkpoint-teste-deine-anwendung",level:3},{value:"Rollen-Mapping",id:"rollen-mapping",level:2},{value:"Voraussetzungen",id:"voraussetzungen-1",level:3},{value:"Rollen-Mapping implementieren",id:"rollen-mapping-implementieren",level:3},{value:"Schritt 1: Zugriff auf die functions.php deines Themes",id:"schritt-1-zugriff-auf-die-functionsphp-deines-themes",level:3},{value:"Schritt 2: Die Rollen-Mapping-Funktion schreiben",id:"schritt-2-die-rollen-mapping-funktion-schreiben",level:3},{value:"Schritt 3: Den Code verstehen und anpassen",id:"schritt-3-den-code-verstehen-und-anpassen",level:3},{value:"Schritt 4: Deine Einrichtung testen",id:"schritt-4-deine-einrichtung-testen",level:3},{value:"Weiterf\xfchrende Lekt\xfcre",id:"weiterf\xfchrende-lekt\xfcre",level:2},...d.RM];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"authentifizierung-zu-deiner-wordpress-anwendung-hinzuf\xfcgen",children:"Authentifizierung zu deiner WordPress-Anwendung hinzuf\xfcgen"})}),"\n",(0,t.jsxs)(n.p,{children:["Dieses Tutorial zeigt dir, wie du Logto in deine ",(0,t.jsx)(n.a,{href:"https://wordpress.org",children:"WordPress"})," Website integrierst."]}),"\n",(0,t.jsx)(n.h2,{id:"voraussetzungen",children:"Voraussetzungen"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Ein ",(0,t.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," Konto oder ein ",(0,t.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"selbst gehostetes Logto"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Eine Logto-Traditionelle-Anwendung erstellt."}),"\n",(0,t.jsxs)(n.li,{children:["Ein WordPress-Projekt: Folge dem offiziellen ",(0,t.jsx)(n.a,{href:"https://wordpress.org/support/article/how-to-install-wordpress/",children:"WordPress-Installationsleitfaden"}),", um deine WordPress-Website einzurichten, bevor du fortf\xe4hrst."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,t.jsx)(n.h3,{id:"plugin-installieren",children:"Plugin installieren"}),"\n",(0,t.jsxs)(n.p,{children:["Wir werden das ",(0,t.jsx)(n.a,{href:"https://wordpress.org/plugins/generic-openid-connect/",children:"OpenID Connect Generic"})," Plugin verwenden, um Logto \xfcber das OIDC-Protokoll in deine WordPress-Website zu integrieren."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Melde dich bei deiner WordPress-Seite an."}),"\n",(0,t.jsx)(n.li,{children:'Navigiere zu "Plugins" und klicke auf "Neu hinzuf\xfcgen".'}),"\n",(0,t.jsx)(n.li,{children:'Suche nach "OpenID Connect Generic" und installiere das Plugin von daggerhart.'}),"\n",(0,t.jsx)(n.li,{children:"Aktiviere das Plugin."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"redirect-uri-konfigurieren",children:"Redirect-URI konfigurieren"}),"\n",(0,t.jsx)(n.p,{children:'Zuerst konfigurieren wir die Redirect-URI. Du findest sie in den Plugin-Einstellungen, scrolle nach unten zum Abschnitt "Notizen" und kopiere den Wert der "Redirect-URI".'}),"\n",(0,t.jsx)(n.p,{children:'Wechsle zur Anwendungsdetailseite der Logto-Konsole. F\xfcge eine Redirect-URI hinzu und klicke auf "\xc4nderungen speichern".'}),"\n",(0,t.jsx)(n.h3,{id:"plugin-einrichten",children:"Plugin einrichten"}),"\n",(0,t.jsx)(n.p,{children:"Beziehe dich auf die folgende Tabelle f\xfcr die notwendigen Konfigurationsdetails:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Plugin-Feld"}),(0,t.jsx)(n.th,{children:"Beschreibung"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Client ID"}),(0,t.jsx)(n.td,{children:"Die App-ID deiner Logto-Anwendung"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Client Secret"}),(0,t.jsx)(n.td,{children:"Das App-Geheimnis deiner Logto-Anwendung"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"OpenID Scope"}),(0,t.jsxs)(n.td,{children:["Gib ",(0,t.jsx)(n.code,{children:"email profile openid offline_access"})," ein"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Login Endpoint URL"}),(0,t.jsx)(n.td,{children:'Die Autorisierungsendpunkt-URL deiner Logto-Anwendung, die https://[tenant-id].logto.app/oidc/auth ist. Du kannst auf der Logto-Anwendungsseite auf "Endpunktdetails anzeigen" klicken, um die URL zu erhalten.'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Userinfo Endpoint URL"}),(0,t.jsx)(n.td,{children:"Die Userinfo-Endpunkt-URL deiner Logto-Anwendung, die https://[tenant-id].logto.app/oidc/me ist."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Token Validation Endpoint URL"}),(0,t.jsx)(n.td,{children:"Die Token-Validierungsendpunkt-URL deiner Logto-Anwendung, die https://[tenant-id].logto.app/oidc/token ist."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"End Session Endpoint URL"}),(0,t.jsx)(n.td,{children:"Die End-Session-Endpunkt-URL deiner Logto-Anwendung, die https://[tenant-id].logto.app/oidc/session/end ist."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Identity Key"}),(0,t.jsx)(n.td,{children:"Der eindeutige Schl\xfcssel im ID-Token, der die Identit\xe4t des Benutzers enth\xe4lt. Es kann sich um E-Mail oder Sub handeln, abh\xe4ngig von deiner Konfiguration."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Nickname Key"}),(0,t.jsx)(n.td,{children:"Der Schl\xfcssel im ID-Token, der den Spitznamen des Benutzers enth\xe4lt. Du kannst ihn auf Sub setzen und sp\xe4ter \xe4ndern."})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"checkpoint-teste-deine-anwendung",children:"Checkpoint: Teste deine Anwendung"}),"\n",(0,t.jsx)(n.p,{children:"Jetzt kannst du deine Anwendung testen:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Melde dich von deiner WordPress-Seite ab."}),"\n",(0,t.jsx)(n.li,{children:'Besuche die WordPress-Anmeldeseite und klicke auf die Schaltfl\xe4che "Mit Logto anmelden".'}),"\n",(0,t.jsx)(n.li,{children:"Du wirst zur Logto-Anmeldeseite weitergeleitet."}),"\n",(0,t.jsx)(n.li,{children:"Melde dich mit deinem Logto-Konto an."}),"\n",(0,t.jsx)(n.li,{children:"Du wirst zur\xfcck zur WordPress-Seite geleitet und automatisch angemeldet."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"rollen-mapping",children:"Rollen-Mapping"}),"\n",(0,t.jsx)(n.p,{children:"WordPress verf\xfcgt \xfcber ein integriertes Benutzerrollen-Managementsystem, das definiert, welche Aktionen (F\xe4higkeiten) ein Benutzer auf einer Seite ausf\xfchren kann. Die Standardbenutzerrollen umfassen Administrator, Editor, Autor, Mitwirkender und Abonnent, jede mit ihrem eigenen Satz von F\xe4higkeiten."}),"\n",(0,t.jsx)(n.p,{children:'Logto verwendet die rollenbasierte Zugangskontrolle (RBAC) als Autorisierungsmodell und nutzt "Berechtigungen" als kleinste Einheit der Berechtigung. Diese Berechtigungen definieren die spezifischen Aktionen, die ein authentifizierter Benutzer innerhalb einer Anwendung ausf\xfchren darf. WordPress hingegen arbeitet nach einem anderen Prinzip zur Verwaltung von Benutzerberechtigungen und verl\xe4sst sich auf vordefinierte "Rollen", die verschiedene F\xe4higkeiten b\xfcndeln.'}),"\n",(0,t.jsx)(n.p,{children:"Angesichts dieses grundlegenden Unterschieds schlagen wir vor, spezielle Rollen innerhalb von Logto zu erstellen, die den in WordPress definierten Rollen entsprechen. Diese Rollen m\xfcssen keine Berechtigungen haben, sie dienen nur als Referenz f\xfcr die Zuordnung von Benutzern zu WordPress-Rollen."}),"\n",(0,t.jsx)(n.h3,{id:"voraussetzungen-1",children:"Voraussetzungen"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Richte Rollen in Logto ein, die den Rollen in WordPress entsprechen. Wenn du beispielsweise eine 'editor'-Rolle in WordPress hast, erstelle eine 'group",":editors","'-Rolle in Logto."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"rollen-mapping-implementieren",children:"Rollen-Mapping implementieren"}),"\n",(0,t.jsxs)(n.p,{children:["Um das Rollen-Mapping zu implementieren, f\xfcgen wir benutzerdefinierten Code zur ",(0,t.jsx)(n.code,{children:"functions.php"}),"-Datei des WordPress-Themes hinzu. Dies beinhaltet die Verwendung des ",(0,t.jsx)(n.code,{children:"wp_login"}),"-Aktionshooks, der ausgel\xf6st wird, wenn sich ein Benutzer anmeldet. Hier ist eine Schritt-f\xfcr-Schritt-Anleitung, wie du dies einrichtest:"]}),"\n",(0,t.jsx)(n.h3,{id:"schritt-1-zugriff-auf-die-functionsphp-deines-themes",children:"Schritt 1: Zugriff auf die functions.php deines Themes"}),"\n",(0,t.jsxs)(n.p,{children:["\xd6ffne die ",(0,t.jsx)(n.code,{children:"functions.php"}),"-Datei deines Themes. Du kannst auf diese Datei \xfcber das WordPress-Admin-Panel zugreifen, indem du zu Darstellung > Theme-Editor navigierst und ",(0,t.jsx)(n.code,{children:"functions.php"})," aus der Dateiliste auf der rechten Seite ausw\xe4hlst. Oder im Quellcode navigiere zu deinem WordPress-Theme-Verzeichnis und finde die ",(0,t.jsx)(n.code,{children:"functions.php"}),"-Datei. Diese Datei erm\xf6glicht es dir, benutzerdefinierte PHP-Funktionen hinzuzuf\xfcgen, die die Funktionalit\xe4t deiner WordPress-Seite erweitern."]}),"\n",(0,t.jsx)(n.h3,{id:"schritt-2-die-rollen-mapping-funktion-schreiben",children:"Schritt 2: Die Rollen-Mapping-Funktion schreiben"}),"\n",(0,t.jsxs)(n.p,{children:["Unten ist ein einfaches Beispiel f\xfcr eine Funktion, die du zur functions.php hinzuf\xfcgen k\xf6nntest. Diese Funktion wird bei der Benutzeranmeldung ausgel\xf6st und weist Rollen basierend auf dem ",(0,t.jsx)(n.code,{children:"roles"}),"-Anspruch des Benutzers zu, der von Logto abgerufen wird."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"function logto_handler($user_login, $user = null) {\n\tif (!$user) {\n\t\t$user = get_user_by('login', $user_login);\n\t}\n\n\t$oidc_claims = get_user_meta($user->ID, 'openid-connect-generic-last-user-claim', true);\n\n\tif (in_array('group:editors', $oidc_claims['roles'])) {\n\t\t$user->set_role('editor');\n\t} else {\n\t\t$user->set_role('subscriber');\n\t}\n}\n\nadd_action('wp_login', 'logto_handler', 10, 2);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"schritt-3-den-code-verstehen-und-anpassen",children:"Schritt 3: Den Code verstehen und anpassen"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"logto_handler"})," Funktion: Diese Funktion nimmt zwei Parameter: ",(0,t.jsx)(n.code,{children:"$user_login"})," (Benutzername) und ",(0,t.jsx)(n.code,{children:"$user"})," (Benutzerobjekt). Sie ruft Rollen von Logto ab, die als ",(0,t.jsx)(n.code,{children:"openid-connect-generic-last-user-claim"})," in den Benutzermetadaten gespeichert sind, ordnet diese Rolle einer entsprechenden WordPress-Rolle zu und weist sie dem Benutzer zu."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"add_action"}),": Diese Zeile verbindet die ",(0,t.jsx)(n.code,{children:"logto_handler"})," Funktion mit der ",(0,t.jsx)(n.code,{children:"wp_login"})," Aktion, die nach der Benutzeranmeldung ausgel\xf6st wird. Die ",(0,t.jsx)(n.code,{children:"10"})," ist die Priorit\xe4t (Standard), und ",(0,t.jsx)(n.code,{children:"2"})," gibt die Anzahl der Argumente an, die die Funktion akzeptiert."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Das obige Beispiel weist die 'editor'-Rolle Benutzern zu, die \xfcber Logto mit der Rollenbezeichnung ",(0,t.jsx)(n.code,{children:"group:editors"})," authentifiziert wurden. In einem realen Szenario wirst du jedoch wahrscheinlich mehr Arten von Rollen-Mappings implementieren m\xfcssen."]}),"\n",(0,t.jsxs)(n.p,{children:["Du kannst die Liste der WordPress-Rollen und deren F\xe4higkeiten ",(0,t.jsx)(n.a,{href:"https://wordpress.org/support/article/roles-and-capabilities/",children:"hier"})," finden."]}),"\n",(0,t.jsx)(n.h3,{id:"schritt-4-deine-einrichtung-testen",children:"Schritt 4: Deine Einrichtung testen"}),"\n",(0,t.jsxs)(n.p,{children:["Jetzt lass uns die Rollen-Mapping-Funktion testen, indem wir uns mit einem Benutzer anmelden, der die ",(0,t.jsx)(n.code,{children:"group:editors"})," Rolle in Logto hat. Nach der Anmeldung \xfcberpr\xfcfe die Rolle des Benutzers in WordPress, um sicherzustellen, dass das Mapping korrekt funktioniert."]}),"\n",(0,t.jsx)(n.h2,{id:"weiterf\xfchrende-lekt\xfcre",children:"Weiterf\xfchrende Lekt\xfcre"}),"\n",(0,t.jsx)(d.Ay,{})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},15658:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var r=i(30758);const t={},s=r.createContext(t);function d(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);