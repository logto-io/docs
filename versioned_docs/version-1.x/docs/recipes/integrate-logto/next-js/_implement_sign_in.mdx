import redirectUriFigure from '../assets/next-redirect-uri.png';
import ConfigureRedirectUri from '../fragments/_configure-redirect-uri.mdx';
import SignInFlowSummary from '../fragments/_web-sign-in-flow-summary.mdx';

<SignInFlowSummary />

### Configure sign-in redirect URI

<ConfigureRedirectUri
  figureSrc={redirectUriFigure}
  redirectUri="http://localhost:3000/api/logto/sign-in-callback"
/>

### Prepare API routes

Prepare [API routes](https://nextjs.org/docs/api-routes/introduction) to connect with Logto.

Go back to your IDE/editor, use the following code to implement the API routes first:

```ts
// pages/api/logto/[action].ts
import { logtoClient } from '../../../libraries/logto';

export default logtoClient.handleAuthRoutes();
```

This will create 4 routes automatically:

1. `/api/logto/sign-in`: Sign in with Logto.
2. `/api/logto/sign-in-callback`: Handle sign-in callback.
3. `/api/logto/sign-out`: Sign out with Logto.
4. `/api/logto/user`: Check if user is authenticated with Logto. If yes, return user info.

### Implement sign-in button

We're almost there! In the last step, we will create a sign-in button:

```tsx
import { useRouter } from 'next/router';

<button onClick={() => window.location.assign('/api/logto/sign-in')}>Sign In</button>;
```

Now you will be navigated to Logto sign-in page when you click the button.
