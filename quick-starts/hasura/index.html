<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-quick-starts/database/hasura/README" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Integrate Logto with Hasura | Logto docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.logto.io/quick-starts/hasura/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Integrate Logto with Hasura | Logto docs"><meta data-rh="true" name="description" content="Hasura is a tool that can quickly provide corresponding GraphQL and REST APIs fit your data. Considering data security, Hasura also provides the ability to fine-tune access control for each different API."><meta data-rh="true" property="og:description" content="Hasura is a tool that can quickly provide corresponding GraphQL and REST APIs fit your data. Considering data security, Hasura also provides the ability to fine-tune access control for each different API."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.logto.io/quick-starts/hasura/"><link data-rh="true" rel="alternate" href="https://docs.logto.io/quick-starts/hasura/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.logto.io/quick-starts/hasura/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DE7QZWOVO6-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Logto docs Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Logto docs" href="/opensearch.xml">

<script src="https://plausible.io/js/script.js" defer="defer" data-domain="logto.io"></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)},window.addEventListener("load",(function(){plausible("AnyPageView",{props:{source:"Docs"}})}))</script>
<meta name="google-site-verification" content="3EYzsnarDwG6zL2dlHvyC8ySVcV6Q3RGlvh7-bvhb2k">



























<link rel="alternate" type="application/rss+xml" href="/tutorial/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tutorial/atom.xml" title="Logto docs Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/terms/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/terms/atom.xml" title="Logto docs Atom Feed">
<link rel="alternate" type="application/rss+xml" href="/about/rss.xml" title="Logto docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/about/atom.xml" title="Logto docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.57b243a3.css">
<script src="/assets/js/runtime~main.58a98007.js" defer="defer"></script>
<script src="/assets/js/main.f2c54d53.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_rNlu" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://logto.io" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logto.svg" alt="Silverhand Logo" class="themedComponent_lJbb themedComponent--light_p0ur"><img src="/img/logto_dark.svg" alt="Silverhand Logo" class="themedComponent_lJbb themedComponent--dark_B7lM"></div></a><a class="navbar__item navbar__link" href="/">Docs</a><a href="https://blog.logto.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_fn9V"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/quick-starts/">Quick starts</a><a class="navbar__item navbar__link" href="/integrations/">Integrations</a><a href="https://openapi.logto.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_fn9V"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_Sndo colorModeToggle_p7FY"><button class="clean-btn toggleButton_cRS7 toggleButtonDisabled_NV5o" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_GDO9"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_hhSC"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_mv5x"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_amhU"><div class="docsWrapper_iI7n"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ZAbc" type="button"></button><div class="docRoot_WVMy"><aside class="theme-doc-sidebar-container docSidebarContainer_aljP"><div class="sidebarViewport_Z5dD"><div class="sidebar__wEh"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_MNBo"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a class="menu__link" href="/quick-starts/hasura/">Language framework</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/android/">Android (Kotlin / Java)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/angular/">Angular</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/capacitor-js/">Capacitor JS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/chrome-extension/">Chrome extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/dotnet-core/blazor-server/">.NET Core (Blazor Server)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/dotnet-core/blazor-wasm/">.NET Core (Blazor WASM)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/dotnet-core/mvc/">.NET Core (MVC)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/dotnet-core/razor/">.NET Core (Razor Pages)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/expo/">Expo (React Native)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/express/">Express</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/flutter/">Flutter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/flutter-flow/">FlutterFlow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/go/">Go</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-start/java-spring-boot/">Java Spring Boot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/next/">Next.js</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/next-app-router/">Next.js App Router</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/next-auth/">Next Auth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/nuxt/">Nuxt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/php/">PHP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/python/">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/react/">React</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/sveltekit/">SvelteKit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/swift/">iOS (Swift)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/vanilla-js/">Vanilla JS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/vue/">Vue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/webflow/">Webflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/wordpress/">WordPress</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a class="menu__link" href="/quick-starts/hasura/">No framework and generic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/m2m/">Machine-to-machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/traditional-web/">Traditional web</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-section"><a class="menu__link" href="/quick-starts/hasura/">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/quick-starts/hasura/">Hasura</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/quick-starts/supabase/">Supabase</a></li></ul></nav></div></div></aside><main class="docMainContainer_77Wz"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_CL0N"><div class="docItemContainer_jLAD"><article><div class="tocCollapsible_Dc7Z theme-doc-toc-mobile tocMobile_km0w"><button type="button" class="clean-btn tocCollapsibleButton_lp9a">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Integrate Logto with Hasura</h1>
<p><a href="https://hasura.io/" target="_blank" rel="noopener noreferrer">Hasura</a> is a tool that can quickly provide corresponding GraphQL and REST APIs fit your data. Considering data security, Hasura also provides the ability to fine-tune access control for each different API.</p>
<p>Usually, Hasura users utilize other identity management and authentication services, Logto being a very popular one among them.</p>
<p>In this blog post, we will assume that you are already using Hasura services. We will introduce how to integrate Hasura and Logto to maximize the security of your data. If you do not have a Logto account, sign up and start using it now!</p>
<h2 class="anchor anchorWithStickyNavbar_ShCz" id="background">Background<a class="hash-link" aria-label="Direct link to Background" title="Direct link to Background" href="/quick-starts/hasura/#background">​</a></h2>
<p>Hasura employs <a href="https://hasura.io/docs/latest/auth/overview/" target="_blank" rel="noopener noreferrer">role-based access management</a>, while Logto uses the standard <a href="https://docs.logto.io/docs/recipes/rbac/" target="_blank" rel="noopener noreferrer">Role-based access control (RBAC)</a>.</p>
<p>In Logto&#x27;s model and best practices for RBAC, we advise users to use <code>scope</code> to correspond to the finest granularity of permissions, use <code>role</code> as a bunch of <code>scope</code>s for convenient batch operations, and ultimately check <code>scope</code> (usually on resource providers&#x27; side) to verify whether a user can perform a specific operation.</p>
<p>In Hasura, a <code>role</code> corresponds to the finest granularity of permissions, and permission checks are carried out against <code>role</code>s. Therefore, during the configuration of Logto, we recommend mapping one <code>role</code> to exactly one <code>scope</code>. This approach can link Logto&#x27;s and Hasura&#x27;s permissions together to avoid confusion and misuse.</p>
<p>Hasura can support access control using Webhooks or JWT. Our previous <a href="https://docs.logto.io/blog/logto-x-hasura/" target="_blank" rel="noopener noreferrer">blog post</a> introduced how to use Webhooks, and in the following sections, we will explain how to utilize Hasura&#x27;s JWT mode access control.</p>
<h2 class="anchor anchorWithStickyNavbar_ShCz" id="get-started">Get started<a class="hash-link" aria-label="Direct link to Get started" title="Direct link to Get started" href="/quick-starts/hasura/#get-started">​</a></h2>
<p>Let&#x27;s start with a simple example. Suppose a user already has two APIs in Hasura, <code>GET /user</code> and <code>PATCH /user</code>, corresponding to two roles: <code>user:reader</code> and <code>user:maintainer</code>, respectively.</p>
<h3 class="anchor anchorWithStickyNavbar_ShCz" id="1-create-hasura-api-resource-in-logto">1. Create Hasura API resource in Logto<a class="hash-link" aria-label="Direct link to 1. Create Hasura API resource in Logto" title="Direct link to 1. Create Hasura API resource in Logto" href="/quick-starts/hasura/#1-create-hasura-api-resource-in-logto">​</a></h3>
<p>Create a Hasura API resource in Logto.</p>
<p><img decoding="async" loading="lazy" alt="Hasura API" src="/assets/images/hasura-api-f0466211049ca00f0b07f1b913ba58e4.webp" width="1286" height="776" class="img_H24n"></p>
<h3 class="anchor anchorWithStickyNavbar_ShCz" id="2-create-roles-according-to-hasura-setup-in-logto">2. Create roles according to Hasura setup in Logto<a class="hash-link" aria-label="Direct link to 2. Create roles according to Hasura setup in Logto" title="Direct link to 2. Create roles according to Hasura setup in Logto" href="/quick-starts/hasura/#2-create-roles-according-to-hasura-setup-in-logto">​</a></h3>
<p>We need to create two <code>scope</code>s for the Hasura API resource mentioned in step 1, namely <code>read:user</code> and <code>maintain:user</code>, and then create two roles: <code>user:reader</code> (containing the <code>read:user</code> scope) and <code>user:maintainer</code> (including the <code>maintain:user</code> scope) to correspond one-to-one with Hasura&#x27;s roles. And assign these roles to Logto users as needed.</p>
<p><img decoding="async" loading="lazy" alt="Hasura API with scopes" src="/assets/images/hasura-api-with-scopes-ab26b108b1aa93f0225ca8cc55a70c8c.webp" width="2642" height="836" class="img_H24n"></p>
<p><img decoding="async" loading="lazy" alt="User reader role" src="/assets/images/user-reader-role-cc358419b86d766f002b9dda90515555.webp" width="2648" height="740" class="img_H24n"></p>
<p><img decoding="async" loading="lazy" alt="User maintainer role" src="/assets/images/user-maintainer-role-bc2937b4169034c8979712dd1484d864.webp" width="2652" height="736" class="img_H24n"></p>
<h3 class="anchor anchorWithStickyNavbar_ShCz" id="3-configure-hasura-environment-variable-hasura_graphql_jwt_secret-to-enable-jwt-mode">3. Configure Hasura environment variable <code>HASURA_GRAPHQL_JWT_SECRET</code> to enable JWT mode<a class="hash-link" aria-label="Direct link to 3-configure-hasura-environment-variable-hasura_graphql_jwt_secret-to-enable-jwt-mode" title="Direct link to 3-configure-hasura-environment-variable-hasura_graphql_jwt_secret-to-enable-jwt-mode" href="/quick-starts/hasura/#3-configure-hasura-environment-variable-hasura_graphql_jwt_secret-to-enable-jwt-mode">​</a></h3>
<p>By looking into <a href="https://hasura.io/docs/latest/auth/authentication/jwt/#hasura-jwt-configuration-options" target="_blank" rel="noopener noreferrer">Hasura JWT configuration options</a>, we need to add and configure the environment variable <code>HASURA_GRAPHQL_JWT_SECRET</code> before we can use JWT for access control.</p>
<p>There are many different options that can be configured, but here we introduce the simplest case: only the <code>jwk_url</code> needs to be configured. This value can be obtained from your Logto&#x27;s OpenID configuration endpoint (<a href="https://your.logto.domain/oidc/.well-known/openid-configuration" target="_blank" rel="noopener noreferrer">https://your.logto.domain/oidc/.well-known/openid-configuration</a>).</p>
<p><img decoding="async" loading="lazy" alt="Hasura JWT config" src="/assets/images/hasura-jwt-config-1935efe8a692058171ed131f90921dde.webp" width="1064" height="788" class="img_H24n"></p>
<h3 class="anchor anchorWithStickyNavbar_ShCz" id="4-customize-user-access-token-extra-claims">4. Customize user access token extra claims<a class="hash-link" aria-label="Direct link to 4. Customize user access token extra claims" title="Direct link to 4. Customize user access token extra claims" href="/quick-starts/hasura/#4-customize-user-access-token-extra-claims">​</a></h3>
<p>Using Logto&#x27;s Custom JWT feature, customize the logic to add extra claims to the JWT-format user access token.</p>
<p><img decoding="async" loading="lazy" alt="User access token script" src="/assets/images/user-access-token-script-924dba883452e140764247739744b91d.webp" width="2656" height="1526" class="img_H24n"></p>
<p>Customize the <code>getCustomJwtClaims</code> method to add data in the JWT that Hasura relies on for implementing access control. This can include data related to the user being authorized during that instance, including <code>role</code>s they possess, which can be accessed through <code>context</code>.</p>
<p>We have also defined an environment variable <code>USER_DEFAULT_ROLE_NAMES</code> to avoid hardcoding.</p>
<h3 class="anchor anchorWithStickyNavbar_ShCz" id="5-integrate-logto-sdk">5. Integrate Logto SDK<a class="hash-link" aria-label="Direct link to 5. Integrate Logto SDK" title="Direct link to 5. Integrate Logto SDK" href="/quick-starts/hasura/#5-integrate-logto-sdk">​</a></h3>
<p>After configuring Logto and Hasura, integrate your app with the Logto SDK. Here we use a React example to preview the user access token issued by Logto after user sign-in.</p>
<p><img decoding="async" loading="lazy" alt="User with roles" src="/assets/images/user-with-roles-ceb339a231a4e03f51e23691f45dd790.webp" width="2656" height="912" class="img_H24n"></p>
<p>First, we assign the previously created <code>user:reader</code> and <code>user:maintainer</code> roles to the user, and then log in as that user.</p>
<div class="language-tsx codeBlockContainer_s4MH theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I_ad"><pre tabindex="0" class="prism-code language-tsx codeBlock_EKXX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_H8OO"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">LogtoConfig</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://localhost:3001&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;your-application-id&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  appSecret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;your-application-secret&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scopes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token comment" style="color:#999988;font-style:italic">// existing scopes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;read:user&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;maintain:user&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resources</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token comment" style="color:#999988;font-style:italic">// existing resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;https://*.hasura.app/api&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_bNAr"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_BK27" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sGIr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_b4iy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Obtain the user access token and request Hasura APIs:</p>
<div class="language-tsx codeBlockContainer_s4MH theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_I_ad"><pre tabindex="0" class="prism-code language-tsx codeBlock_EKXX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_H8OO"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> accessToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> logto</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getAccessToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://*.hasura.app/api&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Before sending the request to Hasura</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Authorization&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">accessToken</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;x-Hasura-Role&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;required-role-for-the-endpoint&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_bNAr"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_BK27" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_sGIr"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_b4iy"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_ShCz" id="conclusion">Conclusion<a class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" href="/quick-starts/hasura/#conclusion">​</a></h2>
<p>In this article, we provide another method of JWT-based access control supported by Hasura, other than Webhook.</p>
<p>By comparing the processes of Hasura&#x27;s <a href="https://hasura.io/docs/latest/auth/authentication/webhook/" target="_blank" rel="noopener noreferrer">Webhook</a> and <a href="https://hasura.io/docs/latest/auth/authentication/jwt/" target="_blank" rel="noopener noreferrer">JWT</a> access control, we can see that the Webhook approach sends a Webhook to Logto and waits for a response with every Hasura request; whereas the JWT-based approach can continuously be used until the JWT expires.</p>
<p>The JWT approach can reduce network load and eliminate the network latency brought by Webhooks; meanwhile, the Webhook approach can synchronize changes in user permissions in real-time.</p>
<p>Users can choose the appropriate approach based on these conclusions, combined with their actual business needs.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/logto-io/docs/tree/master/docs/quick-starts/database/hasura/README.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Ddgz" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_IR25"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/quick-starts/traditional-web/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Traditional web</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/quick-starts/supabase/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Supabase</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_kJh5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#background">Background</a></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#get-started">Get started</a><ul><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#1-create-hasura-api-resource-in-logto">1. Create Hasura API resource in Logto</a></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#2-create-roles-according-to-hasura-setup-in-logto">2. Create roles according to Hasura setup in Logto</a></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#3-configure-hasura-environment-variable-hasura_graphql_jwt_secret-to-enable-jwt-mode">3. Configure Hasura environment variable <code>HASURA_GRAPHQL_JWT_SECRET</code> to enable JWT mode</a></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#4-customize-user-access-token-extra-claims">4. Customize user access token extra claims</a></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#5-integrate-logto-sdk">5. Integrate Logto SDK</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/quick-starts/hasura/#conclusion">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_TCBS"><div class="container_oxh8"><div class="logoRow_e6WH"><img src="/img/silverhand.svg" alt="Logo"></div><div class="footerRow_MwlS"><div class="copyRight_Do1v">Copyright © 2024 Silverhand Inc. Built with Docusaurus.</div><div class="links_lMuC"><a class="footer__link-item" href="/">Docs</a><a href="https://github.com/logto-io/logto" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a><a href="https://logto.io/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a><a href="mailto: contact@logto.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></div></div></div></footer></div>
</body>
</html>