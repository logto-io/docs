import InitConstsAndUtils from '../../authorization/validate-access-tokens/fragments/_init-consts-and-utils.md';
import RetrieveInfoAboutLogtoTenant from '../../authorization/validate-access-tokens/fragments/_retrieve-info-about-logto-tenant.md';
import TestYourImplementation from '../../authorization/validate-access-tokens/fragments/_test-your-implementation.mdx';
import ValidateTokenAndPermissions from '../../authorization/validate-access-tokens/fragments/_validate-token-and-permissions.md';
import NodeAddValidationLogic from '../../authorization/validate-access-tokens/nodejs/_add-validation-logic.mdx';
import NodeInit from '../../authorization/validate-access-tokens/nodejs/_init.mdx';

import BeforeYouStart from './_before-you-start.mdx';
import FurtherReading from './_further-reading.mdx';
import Intro from './_intro.mdx';
import PermissionModelsOverview from './_permission-models-overview.mdx';
import QuickPreparationSteps from './_quick-preparation-steps.mdx';

<Intro framework={props.framework} />

<BeforeYouStart framework={props.framework} />

<PermissionModelsOverview />

<QuickPreparationSteps />

## Initialize your API project

{/* WARNING: Do not put sub-headings inside the `props.initializeProject` content since it will NOT be rendered as a sub-heading in the sidebar. */}
{props.initializeProject}

## Initialize constants and utilities

<InitConstsAndUtils />

<NodeInit />

## Retrieve info about your Logto tenant

<RetrieveInfoAboutLogtoTenant />

## Validate the token and permissions

<ValidateTokenAndPermissions />

### Add the validation logic

<NodeAddValidationLogic framework={props.framework} />

## Apply the middleware to your API

{/* WARNING: Do not put sub-headings inside the `props.applyMiddleware` content since it will NOT be rendered as a sub-heading in the sidebar. */}
{props.applyMiddleware}

## Test your protected API

<TestYourImplementation />

<FurtherReading />
