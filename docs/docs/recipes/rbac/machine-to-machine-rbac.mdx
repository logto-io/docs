import AppDetailsRolesTab from './assets/application-details-roles-tab.webp';
import AssignRoleToApps from './assets/assign-role-to-apps.webp';
import CreateRole from './assets/create-role.webp';
import EnableAdminAccess from './assets/enable-admin-access.webp';
import ManagementApiAccess from './assets/management-api-access.webp';
import LogtoManagementApiScopes from './assets/management-api-scopes.webp';

# Machine-to-machine RBAC

Logto's RBAC now extends beyond users to include machines as well. We've introduced machine-to-machine role-based access control to enhance your ability to manage authorization across both users and machines.

## Use the Logto management API with machine-to-machine apps and roles.

The Logto management API is a handy tool for connecting to the Logto backend service. With machine-to-machine RBAC, consider creating specific roles and assigning them to your machine-to-machine apps. This method allows you to have better control over various machine-to-machine apps, each with its own set of permissions and roles.

### Legacy solution

If you want to use this machine-to-machine app for accessing [Management API](https://docs.logto.io/docs/references/core/#management-api), we previously had this "Enable admin access" in the Advanced settings tab.

<img width="800" src={EnableAdminAccess} alt="enable admin access" />

For users who had previously enabled this feature, we have removed this setting and now automatically assign a role called, “Management API Access”, which grants access to the Logto management API.

<img width="800" src={ManagementApiAccess} alt="management api access" />

### New solution

Now, when using the Logto management API, it relies entirely on role-based access controls.

#### Create a machine-to-machine role

You can create machine-to-machine (M2M) roles in the Role section and assign these roles to the respective machine-to-machine apps. Just go to Roles, and click Create Role, you will notice there will be a new setting called “Role type”. Select “Machine-to-machine app role” and assign the permission of Logto Management API.

<img width="800" src={CreateRole} alt="create role" />

:::note
Permissions for the Logto Management API are exclusively available to machine-to-machine app roles.
:::

And then assigned the role to the M2M app you have.

<img width="800" src={AssignRoleToApps} alt="assign role to apps" />

You may notice that the creation process aligns with the typical RBAC creation flow, but we've introduced an additional role category known as the "machine-to-machine app role." This enables you to customize the permissions specifically for these machine-to-machine roles.

:::note
Machine-to-machine roles can only be assigned to Machine-to-Machine apps. It can’t be assigned to users or other types of apps.
:::

#### View the permission of Logto Management API

<img width="800" src={LogtoManagementApiScopes} alt="management api scopes" />

<img width="800" src={AppDetailsRolesTab} alt="application details roles tab" />

In the future, we plan to democratize the permissions for the Logto Management API. This means you will have the ability to create more detailed roles for finer control over authorizations when calling the Logto Management API.

## Using machine-to-machine roles to protect your custom API resource

You can also use machine-to-machine roles to secure your custom API resources. This is especially valuable in scenarios like smart homes and healthcare. RBAC ensures that devices or hardware can only access and perform functions that are appropriate for their assigned roles.
