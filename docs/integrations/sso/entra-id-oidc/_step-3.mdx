Scopes define the permissions your app requests from users and control which data your app can access from their Microsoft Entra ID accounts. Requesting Microsoft Graph permissions requires configuration on both sides:

**In Microsoft Entra admin center:**

1. Navigate to **Microsoft Entra ID > App registrations** and select your application.
2. Go to **API permissions > Add a permission > Microsoft Graph > Delegated permissions**.
3. Select only the permissions your app requires:
   - OpenID permissions:
     - `openid` (Required) - Sign users in
     - `profile` (Required) - View users' basic profile
     - `email` (Required) - View users' email address
     - `offline_access` (Optional) - Required only if you enable [Store tokens for persistent API access](#step-4-store-tokens-to-access-microsoft-apis-optional) in the Logto connector and need to obtain refresh tokens for long-lived access to Microsoft Graph APIs.
   - API access (Optional): Add any additional permissions needed for your app. Common Microsoft Graph permissions include `Mail.Read`, `Calendars.Read`, `Files.Read`, etc. Browse the [Microsoft Graph permissions reference](https://docs.microsoft.com/en-us/graph/permissions-reference) to find available permissions.
4. Click **Add permissions** to confirm the selection.
5. If your app requires admin consent for certain permissions, click **Grant admin consent for [Your Organization]**.

<center>
  <img
    src="/img/assets/entra_id_oidc_add_api_permissions.webp"
    alt="Add Microsoft API permissions"
  />
</center>

**In Logto Microsoft Entra ID connector:**

1. Logto automatically includes `openid`, `profile`, and `email` scopes to retrieve basic user identity information. You can leave the `Scopes` field blank if you only need basic user information.
2. Add `offline_access` to the `Scopes` field if you plan to store tokens for persistent API access. This scope enables refresh tokens for long-lived API access.
3. Add additional scopes (separated by spaces) in the `Scopes` field to request more data from Microsoft Graph. Use standard scope names, for example: `User.Read Mail.Read Calendars.Read`

:::tip

If your app requests these scopes to access the Microsoft Graph API and perform actions, make sure to enable **Store tokens for persistent API access** in Logto Microsoft Entra ID connector. See the next section for details.

:::
