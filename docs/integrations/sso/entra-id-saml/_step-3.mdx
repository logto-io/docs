Logto provides a flexible way to map the user attributes returned from IdP to the user attributes in Logto. Logto will sync the following user attributes from IdP by default:

- id: The unique identifier of the user. Logto will read the `nameID` claim from the SAML response as the user SSO identity id.
- email: The email address of the user. Logto will read the `email` claim from the SAML response as the user primary email by default.
- name: The name of the user.

You may manage the user attributes mapping logic either on the Azure AD side or Logto side.

1. Map the AzureAD user attributes to Logto user attributes on Logto side.

   Visit the `Attributes & Claims` section of your Azure AD SSO application.

   Copy the following attribute names (with namespace prefix) and paste them into the corresponding fields in Logto.

   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress`
   - `http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name` (Recommendation: update this attribute value map to `user.displayname` for better user experience)a

![Azure AD default attribute mapping.webp](./assets/azure_ad_default_attribute_mapping.webp)

1. Map the AzureAD user attributes to Logto user attributes at the AzureAD side.

   Visit the `Attributes & Claims` section of your Azure AD SSO application.

   Click on `Edit`, and update the `Additional claims` fields based on the Logto user attributes settings:

   - update the claim name value based on the Logto user attributes settings.
   - remove the namespace prefix.
   - click `Save` to continue.

   Should end up with the following settings:

![Azure AD_Logto attribute mapping.webp](./assets/azure_ad_logto_attribute_mapping.webp)

You may also specify additional user attributes on the Azure AD side. Logto will keep a record of the original user attributes returned from IdP under the user's `sso_identity` field.
