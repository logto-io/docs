@use "sass:string";
@use '@scss/underscore' as _;

/**
 * Any CSS included here will be global. The classic template
 * bundles Infima by default. Infima is a CSS framework designed to
 * work well for content-centric websites.
 */

/* You can override the default Infima variables here. */

@function url-friendly-color($color) {
  @return '%23' + string.slice('#{$color}', 2, -1);
}

@function menu-sublist-icon($color) {
  $encoded-color: url-friendly-color($color);
  @return url('data:image/svg+xml;charset=utf-8,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.52667 6.11333L4.7 8.94C4.63751 9.00198 4.58792 9.07571 4.55407 9.15695C4.52023 9.23819 4.5028 9.32533 4.5028 9.41333C4.5028 9.50134 4.52023 9.58848 4.55407 9.66972C4.58792 9.75096 4.63751 9.82469 4.7 9.88667C4.82491 10.0108 4.99388 10.0805 5.17 10.0805C5.34612 10.0805 5.51509 10.0108 5.64 9.88667L8 7.52667L10.36 9.88667C10.4849 10.0108 10.6539 10.0805 10.83 10.0805C11.0061 10.0805 11.1751 10.0108 11.3 9.88667C11.3618 9.82437 11.4107 9.7505 11.4438 9.66927C11.477 9.58805 11.4938 9.50107 11.4933 9.41333C11.4938 9.3256 11.477 9.23862 11.4438 9.1574C11.4107 9.07617 11.3618 9.00229 11.3 8.94L8.47333 6.11333C8.41136 6.05085 8.33762 6.00125 8.25638 5.96741C8.17514 5.93356 8.08801 5.91613 8 5.91613C7.91199 5.91613 7.82485 5.93356 7.74362 5.96741C7.66238 6.00125 7.58864 6.05085 7.52667 6.11333Z" fill="#{$encoded-color}" /></svg>');
}

@function breadcrumb-separator-icon($color) {
  $encoded-color: url-friendly-color($color);
  @return url('data:image/svg+xml;charset=utf-8,<svg width="5" height="14" viewBox="0 0 5 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.25879 0.35791L1.1416 13.1138H0L3.11719 0.35791H4.25879Z" fill="#{$encoded-color}"/></svg>');
}

:root {
  --ifm-leading-desktop: 1;
  --ifm-color-primary: #5d34f2;
  --ifm-color-primary-dark: #4718f0;
  --ifm-color-primary-darker: #3e0feb;
  --ifm-color-primary-darkest: #330cc1;
  --ifm-color-primary-light: #7350f4;
  --ifm-color-primary-lighter: #7e5df5;
  --ifm-color-primary-lightest: #9f87f7;
  --ifm-link-color: #4300da;
  --ifm-breadcrumb-color-active: var(--ifm-link-color);
  --ifm-menu-color: var(--logto-color-text);
  --ifm-menu-color-active: var(--ifm-link-color);
  --ifm-navbar-link-hover-color: var(--ifm-link-color);
  --ifm-hover-overlay: rgba(93, 52, 242, 12%);
  --ifm-code-font-size: 95%;
  --ifm-navbar-height: 72px;
  --ifm-background-color: #fff;
  --ifm-container-width-xl: 1380px;
  --ifm-toc-border-color: var(--logto-line-divider);
  --ifm-font-color-base: var(--logto-color-text);
  --ifm-menu-link-sublist-icon: #{menu-sublist-icon(#747778)};
  --ifm-menu-link-sublist-icon-active: #{menu-sublist-icon(#4300da)};
  --ifm-breadcrumb-separator: #{breadcrumb-separator-icon(#a9acac)};

  --doc-sidebar-width: 300px !important;
  --doc-sidebar-section-title: #c9c5d0;
  --docusaurus-highlighted-code-line-bg: rgba(72, 77, 91, 12%);

  --padding-max-width: 100px;

  --logto-color-text: #191c1d;
  --logto-color-text-secondary: #747778;
  --logto-color-placeholder: #a9acac;
  --logto-color-error: #ba1b1b;
  --logto-color-danger-focused: rgba(186, 27, 27, 16%);
  --logto-bg-body-overlay: #fff;
  --logto-overlay-brand-hover: rgba(93, 52, 242, 8%);
  --logto-overlay-brand-focused: rgba(93, 52, 242, 16%);
  --logto-focused-variant: rgba(93, 52, 242, 16%);
  --logto-container-info-bg: #e9e8f8;
  --logto-container-on-info: var(--ifm-color-primary);
  --logto-container-danger-bg: #ffe5e4;
  --logto-container-on-danger: #ba1b1b;
  --logto-border: #c4c7c7;
  --logto-line-divider: rgba(25, 28, 29, 12%);
  --logto-hover: rgba(25, 28, 29, 8%);
  --logto-shadow-1: 0px 2px 6px 0px rgba(66, 41, 159, 8%);
  --logto-bg-gradient: linear-gradient(344deg, rgba(255, 255, 255) 75%, rgba(231, 221, 249, 6%) 100%);

  --font-display-1: 700 48/56px var(--ifm-font-family-base);
  --font-display-2: 700 40px/48px var(--ifm-font-family-base);
  --font-display-3: 700 32px/40px var(--ifm-font-family-base);
  --font-headline-1: 600 36px/44px var(--ifm-font-family-base);
  --font-headline-2: 600 28px/36px var(--ifm-font-family-base);
  --font-headline-3: 600 24px/32px var(--ifm-font-family-base);
  --font-title-1: 600 20px/28px var(--ifm-font-family-base);
  --font-title-2: 600 16px/24px var(--ifm-font-family-base);
  --font-title-3: 600 14px/20px var(--ifm-font-family-base);
  --font-label-1: 500 16px/24px var(--ifm-font-family-base);
  --font-label-2: 500 14px/20px var(--ifm-font-family-base);
  --font-label-3: 500 12px/16px var(--ifm-font-family-base);
  --font-body-0: 400 18px/26px var(--ifm-font-family-base);
  --font-body-1: 400 16px/24px var(--ifm-font-family-base);
  --font-body-2: 400 14px/20px var(--ifm-font-family-base);
  --font-body-3: 400 12px/16px var(--ifm-font-family-base);
  --font-section-head-1: 700 12px/16px var(--ifm-font-family-base);
  --font-section-head-2: 700 10px/16px var(--ifm-font-family-base);

  --mermaid-rect-fill: #bfdfff;
}

html {
  font: var(--font-body-1);
}

/* For readability concerns, you should choose a lighter palette in dark mode. */
html[data-theme='dark'] {
  --ifm-color-primary: #7958ff;
  --ifm-color-primary-dark: #5d36ff;
  --ifm-color-primary-darker: #5025ff;
  --ifm-color-primary-darkest: #2f00f0;
  --ifm-color-primary-light: #957aff;
  --ifm-color-primary-lighter: #a28bff;
  --ifm-color-primary-lightest: #ccbfff;
  --ifm-link-color: #a38fff;
  --ifm-breadcrumb-color-active: var(--ifm-link-color);
  --ifm-menu-color: var(--logto-color-text);
  --ifm-menu-color-active: var(--ifm-link-color);
  --ifm-navbar-link-hover-color: var(--ifm-link-color);
  --ifm-hover-overlay: rgba(202, 190, 255, 12%);
  --ifm-background-color: #111313;
  --ifm-toc-border-color: var(--logto-line-divider);
  --ifm-font-color-base: var(--logto-color-text);
  --ifm-menu-link-sublist-icon: #{menu-sublist-icon(#a9acac)};
  --ifm-menu-link-sublist-icon-active: #{menu-sublist-icon(#a38fff)};
  --ifm-breadcrumb-separator: #{breadcrumb-separator-icon(#747778)};
  --doc-sidebar-section-title: #777;
  --docusaurus-highlighted-code-line-bg: rgba(100, 100, 100, 3%);

  --logto-color-text: #f7f8f8;
  --logto-color-text-secondary: #a9acac;
  --logto-color-placeholder: #747778;
  --logto-color-error: #dd3730;
  --logto-color-danger-focused: rgba(255, 180, 169, 16%);
  --logto-bg-body-overlay: #2a2c32;
  --logto-overlay-brand-hover: #383844;
  --logto-overlay-brand-focused: rgba(247, 248, 248, 16%);
  --logto-focused-variant: rgba(202, 190, 255, 16%);
  --logto-container-info-bg: #2f2e39;
  --logto-container-on-info: var(--ifm-link-color);
  --logto-container-danger-bg: rgba(255, 137, 122, 16%);
  --logto-container-on-danger: #ff897a;
  --logto-border: #5c5f60;
  --logto-line-divider: rgba(247, 248, 248, 12%);
  --logto-hover: rgba(247, 248, 248, 8%);
  --logto-shadow-1: 0 4px 8px rgba(255, 255, 255, 8%);
  --logto-bg-gradient: linear-gradient(344deg, rgb(17, 19, 19) 75%, rgba(90, 36, 211, 2%) 100%);
  
  --mermaid-rect-fill: #001B3D;
}

.markdown {
  h1 {
    font: var(--font-headline-1);
    margin-top: 32px;
  
    &:first-child {
      margin-bottom: 20px;
    }
  }
  
  h2 {
    font: var(--font-headline-2);
    margin-top: 60px !important;
  }
  
  h3 {
    font: var(--font-headline-3);
    margin-top: 40px;
  }
  
  h4 {
    font: var(--font-title-1);
    margin-top: 32px;
  }
  
  h5 {
    font: var(--font-title-2);
  }
  
  h6 {
    font: var(--font-title-3);
  }

  li + li {
    margin-top: 8px;
  }

  > img {
    margin-bottom: 1rem;
  }
}

body #__docusaurus {
  min-height: 100vh;
}

// Top Nav
.navbar {
  background-color: var(--ifm-background-color);
  border-bottom: 1px solid var(--logto-line-divider);
  box-shadow: none;
  padding: 0 24px;
}

.navbar__brand {
  margin-right: 0;
}

.navbar__logo {
  display: flex;
  align-items: center;
  height: auto;
}

.navbar__item {
  display: inline-flex;
  align-items: center;
  font: var(--font-label-2);

  &.navbar__link {
    font-weight: 500;
  }

  @media (max-width: 996px) {
    display: none;
  }
}

// Side Bar
.theme-doc-sidebar-menu 
{
  .sidebar-section {
    color: var(--doc-sidebar-section-title);
    padding: var(--ifm-menu-link-padding-vertical) calc(var(--ifm-menu-link-padding-horizontal) + 0.5rem);
    text-transform: uppercase;
  }

  .sidebar-section > a.menu__link {
    font-size: 12px;
    font-weight: bold;
    letter-spacing: 0.05em;
    color: var(--doc-sidebar-section-title);
    padding: 0;
    pointer-events: none;
  }

  .sidebar-section:not(:first-child) {
    margin-top: calc(var(--ifm-menu-link-padding-vertical) * 2);
  }
}

// Right side TOC
.table-of-contents__left-border {
  border-left: none;
}

.table-of-contents__link {
  color: var(--logto-color-text);
  font: var(--font-body-2);
}

.table-of-contents__link:hover,
  .table-of-contents__link:hover code,
  .table-of-contents__link--active,
  .table-of-contents__link--active code {
    color: var(--ifm-link-color);
  }

.table-of-contents li {
  margin: calc(var(--ifm-toc-padding-vertical) * 2) var(--ifm-toc-padding-horizontal);
}

// Breadcrumb
.theme-doc-breadcrumbs {
  margin-top: 4px !important;
  margin-bottom: 0 !important;
}

.breadcrumbs__link {
  padding: 0;
  font: var(--font-body-2);
}

.breadcrumbs__item:not(:last-child):after {
  margin: 0 8px 0 9px;
  width: 5px;
  height: 13px;
  position: relative;
  top: 2px;
  filter: none;
  opacity: 1;
}

.breadcrumbs__link:any-link:hover,
.breadcrumbs__item--active .breadcrumbs__link {
  background: none;
}

// Add extra padding to the sidebar items
.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-1 > .menu__list-item-collapsible {
  padding-left: _.unit(2);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-2 > .menu__list-item-collapsible {
  padding-left: _.unit(6);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-3 > .menu__list-item-collapsible {
  padding-left: _.unit(10);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-4 > .menu__list-item-collapsible {
  padding-left: _.unit(14);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-5 > .menu__list-item-collapsible {
  padding-left: _.unit(16);
}

.menu__list-item-collapsible > .menu__link {
  padding-left: _.unit(5);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-1 > .menu__link {
  padding-left: _.unit(5);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-2 > .menu__link {
  padding-left: _.unit(11);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-3 > .menu__link {
  padding-left: _.unit(15);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-4 > .menu__link {
  padding-left: _.unit(19);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-5 > .menu__link {
  padding-left:  _.unit(23);
}

// Overwrite the sub-menu indention
.menu__list {
  .menu__list {
    padding-left: 0;
  }
}

.menu__link {
  word-break: break-word;
  line-height: 20px;
  font-size: 14px;
}

a.menu__link {
  > svg {
    color: var(--logto-color-text-secondary);
  }

  &.menu__link--active {
    > svg {
      color: var(--ifm-menu-color-active);
    }
  }

  &:not(.menu__link--active) {
    // overwrite default link hover color.
    &:hover {
      color: var(--ifm-menu-color);
    }
  }
}

.menu__list-item-collapsible {
  align-items: center;

  & > .menu__caret {
    order: 1;
    margin: _.unit(0.5);
    padding: 0;

    &::before {
      height: 1rem;
      width: 1rem;
      background: var(--ifm-menu-link-sublist-icon) 50% / 1rem 1rem;
    }
  }

  & > .menu__link--active + .menu__caret::before {
    background: var(--ifm-menu-link-sublist-icon-active) 50% / 1rem 1rem;
  }

  & > .menu__link:not(:last-child) {
    order: 2;
    padding-left: 0;
  }
}

.menu__link--sublist-caret {
  &::before {
    content: '';
    margin-right: _.unit(0.5);
    background: var(--ifm-menu-link-sublist-icon) 50% / 1rem 1rem;
    filter: var(--ifm-menu-link-sublist-icon-filter);
    height: 1rem;
    width: 1rem;
    transform: rotate(180deg);
    transition: transform var(--ifm-transition-fast) linear;
  }

  &::after {
    content: none;
  }

  &.menu__link--active {
    &::before {
      background: var(--ifm-menu-link-sublist-icon-active) 50% / 1rem 1rem;
    }
  }
}

.menu__list-item--collapsed {
  .menu__link--sublist-caret::before {
    transform: rotateZ(90deg);
  }
}

// Disable pagination bar at the bottom. "Previous" and "Next" buttons are not needed.
.pagination-nav {
  display: none;
}

// Footer
.theme-doc-footer {
  margin-top: 60px;
}

.footer {
  background-color: #191c1d;
  font: var(--font-body-2);
  padding: 60px 40px;
}

.footer__title {
  font: var(--font-title-2);
  color: #f7f8f8;
}

.footer__copyright {
  flex: 1;
  text-align: start;
}

.footer__col {
  padding: 0 20px;
}

.footer__items {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.footer__links {
  margin-bottom: 32px;
}

.footer__link-item {
  display: inline-flex;
  align-items: center;
  color: #a9acac;

  &:hover {
    color: #f7f8f8;
    text-decoration: none;
  }
  
  > svg {
    width: 16px;
  }

  > svg + span {
    margin-left: 12px;
  }
}

.footer__bottom {
  display: flex;
  align-items: center;
  gap: 20px;
  border-top: 1px solid #34353f;
  color: #a9acac;
  padding-top: 2rem;

  .footer__logo {
    width: 160px;
  }
}

@include _.sidebar-category-padding(2);
@include _.sidebar-category-padding(3);
@include _.sidebar-category-padding(4);
@include _.sidebar-category-padding(5);

@include _.sidebar-item-link-padding(2);
@include _.sidebar-item-link-padding(3);
@include _.sidebar-item-link-padding(4);
@include _.sidebar-item-link-padding(5);

// Docs
.docusaurus-highlight-code-line {
  background-color: rgba(0, 0, 0, 0.1);
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
}

main {
  position: relative;
  padding-bottom: var(--ifm-spacing-horizontal);

  & > .container {
    padding-inline: 24px;
    
    @media (min-width: 997px) {
      padding-inline: 48px 24px;
    }
  }

  img {
    border-radius: 8px;
  }
}

aside + main {
  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: calc(100vh - 72px);
    min-height: 400px;
    background: var(--logto-bg-gradient);
    background-repeat: no-repeat;
    background-size: cover;
    z-index: -1;
  }
}

[data-theme='dark'] .docusaurus-highlight-code-line {
  background-color: rgba(0, 0, 0, 0.3);
}

@media (max-width: 996px) {
  :root {
    --padding-max-width: 20px;
  }

  .footer {
    padding: 40px 20px;
  }
  
  .footer__links {
    margin-bottom: 0;
  }

  .footer__bottom {
    flex-direction: column;
    align-items: start;
  }
}

@media (min-width: 997px) {
  .navbar__brand {
    .navbar__logo {
      margin-right: _.unit(4);
    }
  }

  .theme-doc-sidebar-container nav {
    padding: var(--ifm-navbar-padding-horizontal) _.unit(3);
  }
}

hr {
  background-color: var(--logto-border);
}

code {
  tab-size: 4;
}

svg[id^='mermaid-'] {
  rect[class='rect'] {
    stroke: var(--logto-border);
  }
}

table {
  width: 100%;
  table-layout: fixed;
  display: table;

  ul, ol {
    padding-left: 1rem;
  }
}
