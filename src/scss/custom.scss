@use '@scss/underscore' as _;

/**
 * Any CSS included here will be global. The classic template
 * bundles Infima by default. Infima is a CSS framework designed to
 * work well for content-centric websites.
 */

/* You can override the default Infima variables here. */

:root {
  /* Typography scale */
  --font-display-1: 700 48/56px var(--ifm-font-family-base);
  --font-display-2: 700 40px/48px var(--ifm-font-family-base);
  --font-display-3: 700 32px/40px var(--ifm-font-family-base);
  --font-headline-1: 600 36px/44px var(--ifm-font-family-base);
  --font-headline-2: 600 28px/36px var(--ifm-font-family-base);
  --font-headline-3: 600 24px/32px var(--ifm-font-family-base);
  --font-title-1: 600 20px/28px var(--ifm-font-family-base);
  --font-title-2: 600 16px/24px var(--ifm-font-family-base);
  --font-title-3: 600 14px/20px var(--ifm-font-family-base);
  --font-label-1: 500 16px/24px var(--ifm-font-family-base);
  --font-label-2: 500 14px/20px var(--ifm-font-family-base);
  --font-label-3: 500 12px/16px var(--ifm-font-family-base);
  --font-body-0: 400 18px/26px var(--ifm-font-family-base);
  --font-body-1: 400 16px/24px var(--ifm-font-family-base);
  --font-body-2: 400 14px/20px var(--ifm-font-family-base);
  --font-body-3: 400 12px/16px var(--ifm-font-family-base);
  --font-section-head-1: 700 12px/16px var(--ifm-font-family-base);
  --font-section-head-2: 700 10px/16px var(--ifm-font-family-base);

  /* Shared variables */
  --ifm-leading-desktop: 1;
  --ifm-code-font-size: 95%;
  --ifm-navbar-height: 72px;
  --ifm-container-width-xl: 1380px;
  --ifm-alert-border-left-width: 4px;
  --ifm-alert-border-radius: 4px;
  --doc-sidebar-width: 300px !important;
  --docusaurus-details-decoration-color: var(--logto-line-divider);
  --padding-max-width: 100px;
  --ifm-color-primary: #5d34f2;
  --ifm-color-primary-dark: #4718f0;
  --ifm-color-primary-darker: #3e0feb;
  --ifm-color-primary-darkest: #330cc1;
  --ifm-color-primary-light: #7350f4;
  --ifm-color-primary-lighter: #7e5df5;
  --ifm-color-primary-lightest: #9f87f7;
  --ifm-link-color: var(--logto-link-color);
  --ifm-breadcrumb-color-active: var(--ifm-link-color);
  --ifm-menu-color: var(--logto-color-text);
  --ifm-menu-color-active: var(--ifm-link-color);
  --ifm-navbar-link-hover-color: var(--ifm-link-color);
  --ifm-hover-overlay: rgba(93, 52, 242, 12%);
  --ifm-background-color: #fff;
  --ifm-toc-border-color: var(--logto-line-divider);
  --ifm-font-color-base: var(--logto-color-text);
  --ifm-menu-link-sublist-icon: #{_.menu-sublist-icon(#747778)};
  --ifm-menu-link-sublist-icon-active: #{_.menu-sublist-icon(#4300da)};
  --ifm-breadcrumb-separator: #{_.breadcrumb-separator-icon(#a9acac)};
  --ifm-code-background: var(--logto-container-neutral-bg);
  --ifm-table-stripe-background: var(--logto-bg-light);
  --doc-sidebar-section-title: #c9c5d0;
  --docusaurus-highlighted-code-line-bg: rgba(255, 255, 255, 8%);
  --logto-link-color: #4300da;
  --logto-color-text: #191c1d;
  --logto-color-text-secondary: #747778;
  --logto-color-placeholder: #a9acac;
  --logto-color-error: #ba1b1b;
  --logto-color-danger-focused: rgba(186, 27, 27, 16%);
  --logto-bg-body-overlay: #fff;
  --logto-overlay-brand-hover: rgba(93, 52, 242, 8%);
  --logto-overlay-brand-focused: rgba(93, 52, 242, 16%);
  --logto-focused-variant: rgba(93, 52, 242, 16%);
  --logto-container-success-bg: #e1f2e2;
  --logto-container-on-success: #32873d;
  --logto-container-info-bg: #e9e8f8;
  --logto-container-on-info: var(--ifm-color-primary);
  --logto-container-neutral-bg: #eff1f1;
  --logto-container-alert-bg: #ffeddb;
  --logto-container-on-alert: #e08d0e;
  --logto-container-danger-bg: #ffe5e4;
  --logto-container-on-danger: #ba1b1b;
  --logto-border: #c4c7c7;
  --logto-neutral-variant-80: #c9c5d0;
  --logto-line-divider: rgba(25, 28, 29, 12%);
  --logto-hover: rgba(25, 28, 29, 8%);
  --logto-shadow-1: 0px 2px 6px 0px rgba(66, 41, 159, 8%);
  --logto-bg-light: #f7f8f8;
  --logto-bg-gradient: linear-gradient(344deg, rgb(255, 255, 255) 75%, rgba(231, 221, 249, 60%) 100%);

  --mermaid-rect-fill: #bfdfff;

  --inkeep-logto-icon: #{_.inkeep-logto-icon(#c9c5d0)};
}

html {
  font: var(--font-body-1);
}

/* For readability concerns, you should choose a lighter palette in dark mode. */
html[data-theme='dark'] {
  --ifm-color-primary: #7958ff;
  --ifm-color-primary-dark: #5d36ff;
  --ifm-color-primary-darker: #5025ff;
  --ifm-color-primary-darkest: #2f00f0;
  --ifm-color-primary-light: #957aff;
  --ifm-color-primary-lighter: #a28bff;
  --ifm-color-primary-lightest: #ccbfff;
  --ifm-link-color: var(--logto-link-color);
  --ifm-breadcrumb-color-active: var(--ifm-link-color);
  --ifm-menu-color: var(--logto-color-text);
  --ifm-menu-color-active: var(--ifm-link-color);
  --ifm-navbar-link-hover-color: var(--ifm-link-color);
  --ifm-hover-overlay: rgba(202, 190, 255, 12%);
  --ifm-background-color: #111313;
  --ifm-toc-border-color: var(--logto-line-divider);
  --ifm-font-color-base: var(--logto-color-text);
  --ifm-menu-link-sublist-icon: #{_.menu-sublist-icon(#a9acac)};
  --ifm-menu-link-sublist-icon-active: #{_.menu-sublist-icon(#a38fff)};
  --ifm-breadcrumb-separator: #{_.breadcrumb-separator-icon(#747778)};
  --ifm-code-background: var(--logto-container-neutral-bg);
  --ifm-table-stripe-background: var(--logto-bg-light);

  --doc-sidebar-section-title: #777;
  --docusaurus-highlighted-code-line-bg: rgba(255, 255, 255, 8%);

  --logto-link-color: #a38fff;
  --logto-color-text: #f7f8f8;
  --logto-color-text-secondary: #a9acac;
  --logto-color-placeholder: #747778;
  --logto-color-error: #dd3730;
  --logto-color-danger-focused: rgba(255, 180, 169, 16%);
  --logto-bg-light: #2a2c32;
  --logto-bg-body-overlay: #2a2c32;
  --logto-overlay-brand-hover: #383844;
  --logto-overlay-brand-focused: rgba(247, 248, 248, 16%);
  --logto-focused-variant: rgba(202, 190, 255, 16%);
  --logto-container-success-bg: rgba(104, 190, 108, 0.16);
  --logto-container-on-success: #83da85;
  --logto-container-info-bg: #2f2e39;
  --logto-container-on-info: var(--ifm-link-color);
  --logto-container-neutral-bg: #34353f;
  --logto-container-alert-bg: rgba(235, 153, 24, 0.16);
  --logto-container-on-alert: #d78701;
  --logto-container-danger-bg: rgba(255, 137, 122, 16%);
  --logto-container-on-danger: #ff897a;
  --logto-border: #5c5f60;
  --logto-neutral-variant-80: #5f5d67;
  --logto-line-divider: rgba(247, 248, 248, 14%);
  --logto-hover: rgba(247, 248, 248, 8%);
  --logto-shadow-1: 0 4px 8px rgba(255, 255, 255, 8%);
  --logto-bg-gradient: linear-gradient(344deg, rgb(17, 19, 19) 75%, rgba(90, 36, 211, 20%) 100%);
  
  --mermaid-rect-fill: #001B3D;

  --inkeep-logto-icon: #{_.inkeep-logto-icon(#5f5d67)};
}

.markdown {
  h1 {
    font: var(--font-headline-1);
    margin-top: 32px;
  
    &:first-child {
      margin-bottom: 20px;
    }
  }
  
  h2 {
    font: var(--font-headline-2);
    margin-top: 60px !important;
  }
  
  h3 {
    font: var(--font-headline-3);
    margin-top: 40px;
  }
  
  h4 {
    font: var(--font-title-1);
    margin-top: 32px;
  }
  
  h5 {
    font: var(--font-title-2);
  }
  
  h6 {
    font: var(--font-title-3);
  }

  li + li {
    margin-top: 8px;
  }

  > img {
    margin-bottom: 1rem;
  }

  ul, ol {
    margin-top: 1rem;
  
    ul, ol {
      margin-top: 0.5rem;
    }
  }

  li {
    &:not([role='tab']) {
      padding-inline-start: 8px;
    }

    img {
      margin-top: 1rem;
    }
  }
}

body #__docusaurus {
  min-height: 100vh;
}

// Top Nav
.navbar {
  background-color: var(--ifm-background-color);
  border-bottom: 1px solid var(--logto-line-divider);
  box-shadow: none;
  padding: 0 24px;

  @media (max-width: 996px) {
    padding: 0 16px;

    .navbar__toggle {
      margin-right: 12px;
    }
  }
}

.navbar__brand {
  margin-right: 0;
}

.navbar__logo {
  display: flex;
  align-items: center;
  height: auto;

  img {
    width: 118px;
    height: 36px;
  }
}

.navbar__item {
  display: inline-flex;
  align-items: center;
  font: var(--font-label-2);

  &.navbar__link {
    font-weight: 500;
  }

  @media (max-width: 996px) {
    display: none;
  }
}

// Search bar
.navbar__items {
  .DocSearch-Button {
    background: none;
    border: 1px solid var(--logto-border);
    border-radius: 8px;
    padding-block: 7px;
    padding-inline: 12px 6px;
    width: 173px;
    font: var(--font-label-2);
    position: relative;
    color: var(--logto-color-text-secondary);
    justify-content: flex-start;

    &:before {
      content: '';
      position: relative;
      top: 50%;
      inset-inline-start: 0;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      background: var(--searchbar-icon) 50% / 20px 20px;
    }

    .DocSearch-Button-Container {
      flex: 1;
    }

    .DocSearch-Search-Icon {
      display: none;
    }

    .DocSearch-Button-Placeholder {
      color: var(--logto-color-text-secondary);
      padding: 0;
      margin-inline-start: 8px;
      text-align: start;
    }

    &:focus-within {
      outline-color: var(--logto-focused-variant);
    }

    &:active,
    &:focus,
    &:hover {
      border: 1px solid var(--ifm-link-color);
      background: none;
      box-shadow: none;
      color: var(--logto-color-text);
      outline: 0;
    
      .DocSearch-Button-Placeholder {
        color: var(--logto-color-text);
      }
    }

    .DocSearch-Button-Keys {
      min-width: unset;
      background: var(--logto-container-neutral-bg);
      padding: 4px 6px;
      border-radius: 4px;
      display: flex;
      gap: 4px;
      align-items: center;
    }

    .DocSearch-Button-Key {
      background: none;
      border-radius: none;
      box-shadow: none;
      padding: 0;
      margin: 0;
      width: unset;
      height: unset;
      position: unset;
      top: unset;
      font: var(--font-body-3);
      color: var(--logto-color-text);
    }
  }
}

@media (max-width: 768px) {
  .navbar__items {
    .DocSearch-Button {
      border-radius: 50%;
      padding: 0;
      width: 36px;
      height: 36px;

      &:before {
        position: absolute;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .DocSearch-Button-Container,
      .DocSearch-Button-Keys,
      .DocSearch-Button-Placeholder {
        display: none;
      }
    }
  }
}

// Side bar
.theme-doc-sidebar-menu 
{
  .sidebar-section {
    color: var(--doc-sidebar-section-title);
    padding: var(--ifm-menu-link-padding-vertical) calc(var(--ifm-menu-link-padding-horizontal) + 0.5rem);
    text-transform: uppercase;
  }

  .sidebar-section > a.menu__link {
    font-size: 12px;
    font-weight: bold;
    letter-spacing: 0.05em;
    color: var(--doc-sidebar-section-title);
    padding: 0;
    pointer-events: none;
  }

  .sidebar-section:not(:first-child) {
    margin-top: calc(var(--ifm-menu-link-padding-vertical) * 2);
  }
}

// Right side TOC
.table-of-contents__left-border {
  border-left: none;
}

.table-of-contents__link {
  color: var(--logto-color-text);
  font: var(--font-body-2);
}

.table-of-contents__link:hover,
  .table-of-contents__link:hover code,
  .table-of-contents__link--active,
  .table-of-contents__link--active code {
    color: var(--ifm-link-color);
  }

.table-of-contents li {
  margin: calc(var(--ifm-toc-padding-vertical) * 2) var(--ifm-toc-padding-horizontal);
}

// Breadcrumb
.theme-doc-breadcrumbs {
  margin-top: 4px !important;
  margin-bottom: 0 !important;
}

.breadcrumbs__link {
  padding: 0;
  font: var(--font-body-2);
}

.breadcrumbs__item:not(:last-child):after {
  margin: 0 8px 0 9px;
  width: 5px;
  height: 13px;
  position: relative;
  top: 2px;
  filter: none;
  opacity: 1;
}

.breadcrumbs__link:any-link:hover,
.breadcrumbs__item--active .breadcrumbs__link {
  background: none;
}

// Add extra padding to the sidebar items
.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-1 > .menu__list-item-collapsible {
  padding-left: _.unit(2);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-2 > .menu__list-item-collapsible {
  padding-left: _.unit(6);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-3 > .menu__list-item-collapsible {
  padding-left: _.unit(10);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-4 > .menu__list-item-collapsible {
  padding-left: _.unit(14);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-category-level-5 > .menu__list-item-collapsible {
  padding-left: _.unit(16);
}

.menu__list-item-collapsible > .menu__link {
  padding-left: _.unit(5);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-1 > .menu__link {
  padding-left: _.unit(5);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-2 > .menu__link {
  padding-left: _.unit(11);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-3 > .menu__link {
  padding-left: _.unit(15);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-4 > .menu__link {
  padding-left: _.unit(19);
}

.theme-doc-sidebar-menu .theme-doc-sidebar-item-link-level-5 > .menu__link {
  padding-left:  _.unit(23);
}

// Overwrite the sub-menu indention
.menu__list {
  .menu__list {
    padding-left: 0;
  }
}

.menu__link {
  word-break: break-word;
  line-height: 20px;
  font-size: 14px;
}

a.menu__link {
  > svg {
    color: var(--logto-color-text-secondary);
  }

  &.menu__link--active {
    > svg {
      color: var(--ifm-menu-color-active);
    }
  }

  &:not(.menu__link--active) {
    // overwrite default link hover color.
    &:hover {
      color: var(--ifm-menu-color);
    }
  }
}

.menu__list-item-collapsible {
  align-items: center;

  & > .menu__caret {
    order: 1;
    margin: _.unit(0.5);
    padding: 0;

    &::before {
      height: 1rem;
      width: 1rem;
      background: var(--ifm-menu-link-sublist-icon) 50% / 1rem 1rem;
    }
  }

  & > .menu__link--active + .menu__caret::before {
    background: var(--ifm-menu-link-sublist-icon-active) 50% / 1rem 1rem;
  }

  & > .menu__link:not(:last-child) {
    order: 2;
    padding-left: 0;
  }
}

.menu__link--sublist-caret {
  &::before {
    content: '';
    margin-right: _.unit(0.5);
    background: var(--ifm-menu-link-sublist-icon) 50% / 1rem 1rem;
    filter: var(--ifm-menu-link-sublist-icon-filter);
    height: 1rem;
    width: 1rem;
    transform: rotate(180deg);
    transition: transform var(--ifm-transition-fast) linear;
  }

  &::after {
    content: none;
  }

  &.menu__link--active {
    &::before {
      background: var(--ifm-menu-link-sublist-icon-active) 50% / 1rem 1rem;
    }
  }
}

.menu__list-item--collapsed {
  .menu__link--sublist-caret::before {
    transform: rotateZ(90deg);
  }
}

// Disable pagination bar at the bottom. "Previous" and "Next" buttons are not needed.
.pagination-nav {
  display: none;
}

// Footer
.theme-doc-footer {
  margin-top: 60px;
}

.footer {
  background-color: #191c1d;
  font: var(--font-body-2);
  padding: 60px 40px;
}

.footer__title {
  font: var(--font-title-2);
  color: #f7f8f8;
}

.footer__copyright {
  flex: 1;
  text-align: start;
}

.footer__col {
  padding: 0 20px;
}

.footer__items {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.footer__links {
  margin-bottom: 32px;
}

.footer__link-item {
  display: inline-flex;
  align-items: center;
  color: #a9acac;

  &:hover {
    color: #f7f8f8;
    text-decoration: none;
  }
  
  > svg {
    width: 16px;
  }

  > svg + span {
    margin-left: 12px;
  }
}

.footer__bottom {
  display: flex;
  align-items: center;
  gap: 20px;
  border-top: 1px solid #34353f;
  color: #a9acac;
  padding-top: 2rem;

  .footer__logo {
    width: 160px;
    height: 28px;
  }
}

@include _.sidebar-category-padding(2);
@include _.sidebar-category-padding(3);
@include _.sidebar-category-padding(4);
@include _.sidebar-category-padding(5);

@include _.sidebar-item-link-padding(2);
@include _.sidebar-item-link-padding(3);
@include _.sidebar-item-link-padding(4);
@include _.sidebar-item-link-padding(5);

// Docs
.docusaurus-highlight-code-line {
  background-color: rgba(0, 0, 0, 0.1);
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
}

main {
  position: relative;
  padding-bottom: var(--ifm-spacing-horizontal);

  & > .container {
    padding-inline: 24px;
    
    @media (min-width: 997px) {
      padding-inline: 48px 24px;
    }
  }

  img {
    border-radius: 4px;
  }
}

aside + main {
  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: calc(100vh - 72px);
    min-height: 400px;
    background: var(--logto-bg-gradient);
    background-repeat: no-repeat;
    background-size: cover;
    z-index: -1;
  }
}

[data-theme='dark'] .docusaurus-highlight-code-line {
  background-color: rgba(0, 0, 0, 0.3);
}

@media (max-width: 996px) {
  :root {
    --padding-max-width: 20px;
  }

  .footer {
    padding: 40px 20px;
  }
  
  .footer__links {
    margin-bottom: 0;
  }

  .footer__link-item {
    display: inline-flex;
  }

  .footer__bottom {
    flex-direction: column;
    align-items: start;
  }
}

@media (min-width: 997px) {
  .navbar__brand {
    .navbar__logo {
      margin-right: _.unit(4);
    }
  }

  .theme-doc-sidebar-container nav {
    padding: var(--ifm-navbar-padding-horizontal) _.unit(2);
  }
}

hr {
  background-color: var(--logto-border);
}

// Code block
.theme-code-block {
  > div:first-child:not(:last-child) {
    // Fix the border bottom color since we use dracula theme on both light and dark modes
    border-bottom: 1px solid var(--ifm-color-gray-700); 
  }
}

// Inline code
code {
  tab-size: 4;
  font-size: 1em;
  line-height: calc(1em + 4px);
  font-weight: 400;
  border-radius: 4px;
  border: 1px solid var(--logto-line-divider);
  padding: 1px 4px;
}

// Mermaid diagrams
.docusaurus-mermaid-container {
  margin-bottom: 1rem;
}

svg[id^='mermaid-'] {
  rect[class='rect'] {
    stroke: var(--logto-border);
  }
}

table {
  width: 100%;
  table-layout: fixed;
  display: table;
  margin-top: 1rem;
  border-radius: 4px;
  overflow: hidden;
  border-style: hidden;
  box-shadow: 0 0 0 1px var(--logto-line-divider);

  thead {
    tr {
      background-color: var(--logto-bg-light);
      border: none;

      th {
        font: var(--font-title-3);
        color: var(--logto-color-text);
      }
    }
  }

  tr {
    border: none;
    background-color: transparent;
  }

  th, td {
    border-color: var(--logto-line-divider);
  }

  ul, ol {
    margin-top: unset;
    padding-left: 1rem;
  }
}

// Admonitions
.alert {
  a {
    color: var(--logto-link-color);
    text-decoration: none;
    text-decoration-color: var(--ifm-link-color);

    &:hover {
      color: var(--logto-link-color);
      text-decoration: underline;
    }
  }

  code:not(pre code) {
    background-color: var(--logto-container-neutral-bg);
  }
}

html[data-theme='dark'] {
  .alert pre {
    background-color: #181132;
  }
}

.alert--info,
.alert--secondary {
  --ifm-alert-background-color: var(--logto-container-info-bg);
  --ifm-alert-border-color: var(--logto-container-on-info);
  --ifm-color-success-contrast-foreground: var(--logto-color-text);

  span[data-type='title'] {
    color: var(--logto-container-on-info);
  }
}

.alert--warning {
  --ifm-alert-background-color: var(--logto-container-alert-bg);
  --ifm-alert-border-color: var(--logto-container-on-alert);
  --ifm-color-success-contrast-foreground: var(--logto-color-text);

  span[data-type='title'] {
    color: var(--logto-container-on-alert);
  }
}

.alert--success {
  --ifm-alert-background-color: var(--logto-container-success-bg);
  --ifm-alert-border-color: var(--logto-container-on-success);
  --ifm-color-success-contrast-foreground: var(--logto-color-text);

  span[data-type='title'] {
    color: var(--logto-container-on-success);
  }
}

// Details & Summary
details {
  --ifm-alert-background-color: transparent;
  --ifm-alert-border-color: var(--logto-line-divider);

  border-block: 1px solid var(--logto-line-divider);
  border-radius: 0;
  padding: 16px 0;
}

.katex-display {
  padding: 1em 0;
  margin: 0;
  overflow-x: auto;
}
