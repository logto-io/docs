"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[15898],{87424:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"end-user-flows/account-settings/by-account-api","title":"Param\xe8tres du compte par Account API","description":"D\xe9couvrez comment utiliser l\'Account API pour g\xe9rer les utilisateurs","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","sourceDirName":"end-user-flows/account-settings","slug":"/end-user-flows/account-settings/by-account-api","permalink":"/fr/end-user-flows/account-settings/by-account-api","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"D\xe9couvrez comment utiliser l\'Account API pour g\xe9rer les utilisateurs","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Param\xe8tres de compte par Management API","permalink":"/fr/end-user-flows/account-settings/by-management-api"},"next":{"title":"V\xe9rification de s\xe9curit\xe9","permalink":"/fr/end-user-flows/security-verification/"}}');var r=i(86070),o=i(15658);const a={description:"D\xe9couvrez comment utiliser l'Account API pour g\xe9rer les utilisateurs",sidebar_position:2},s="Param\xe8tres du compte par Account API",c={},l=[{value:"Qu&#39;est-ce que Logto Account API",id:"quest-ce-que-logto-account-api",level:2},{value:"Comment activer l&#39;Account API",id:"comment-activer-laccount-api",level:2},{value:"Comment acc\xe9der \xe0 l&#39;Account API",id:"comment-acc\xe9der-\xe0-laccount-api",level:2},{value:"R\xe9cup\xe9rer un jeton d\u2019acc\xe8s",id:"r\xe9cup\xe9rer-un-jeton-dacc\xe8s",level:3},{value:"Acc\xe9der \xe0 l&#39;Account API en utilisant le jeton d\u2019acc\xe8s",id:"acc\xe9der-\xe0-laccount-api-en-utilisant-le-jeton-dacc\xe8s",level:3},{value:"G\xe9rer les informations de base du compte",id:"g\xe9rer-les-informations-de-base-du-compte",level:2},{value:"R\xe9cup\xe9rer les informations du compte utilisateur",id:"r\xe9cup\xe9rer-les-informations-du-compte-utilisateur",level:3},{value:"Mettre \xe0 jour les informations de base du compte",id:"mettre-\xe0-jour-les-informations-de-base-du-compte",level:3},{value:"G\xe9rer les identifiants et autres informations sensibles",id:"g\xe9rer-les-identifiants-et-autres-informations-sensibles",level:2},{value:"Obtenir un identifiant d&#39;enregistrement de v\xe9rification",id:"obtenir-un-identifiant-denregistrement-de-v\xe9rification",level:3},{value:"V\xe9rifier le mot de passe de l&#39;utilisateur",id:"v\xe9rifier-le-mot-de-passe-de-lutilisateur",level:4},{value:"V\xe9rifier en envoyant un code de v\xe9rification \xe0 l&#39;email ou au t\xe9l\xe9phone de l&#39;utilisateur",id:"v\xe9rifier-en-envoyant-un-code-de-v\xe9rification-\xe0-lemail-ou-au-t\xe9l\xe9phone-de-lutilisateur",level:4},{value:"Envoyer une requ\xeate avec l&#39;identifiant d&#39;enregistrement de v\xe9rification",id:"envoyer-une-requ\xeate-avec-lidentifiant-denregistrement-de-v\xe9rification",level:3},{value:"Mettre \xe0 jour ou lier un nouvel email",id:"mettre-\xe0-jour-ou-lier-un-nouvel-email",level:3},{value:"Supprimer l&#39;email de l&#39;utilisateur",id:"supprimer-lemail-de-lutilisateur",level:3},{value:"G\xe9rer le t\xe9l\xe9phone",id:"g\xe9rer-le-t\xe9l\xe9phone",level:3},{value:"Lier une nouvelle connexion sociale",id:"lier-une-nouvelle-connexion-sociale",level:3},{value:"Supprimer une connexion sociale",id:"supprimer-une-connexion-sociale",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"param\xe8tres-du-compte-par-account-api",children:"Param\xe8tres du compte par Account API"})}),"\n",(0,r.jsx)(n.h2,{id:"quest-ce-que-logto-account-api",children:"Qu'est-ce que Logto Account API"}),"\n",(0,r.jsx)(n.p,{children:"L'Account API de Logto est un ensemble complet d'API qui offre aux utilisateurs finaux un acc\xe8s direct \xe0 l'API sans avoir besoin de passer par le Management API, voici les points forts :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Acc\xe8s direct : L'Account API permet aux utilisateurs finaux d'acc\xe9der directement et de g\xe9rer leur propre profil de compte sans n\xe9cessiter le relais du Management API."}),"\n",(0,r.jsx)(n.li,{children:"Gestion du profil utilisateur et des identit\xe9s : Les utilisateurs peuvent g\xe9rer enti\xe8rement leurs profils et param\xe8tres de s\xe9curit\xe9, y compris la possibilit\xe9 de mettre \xe0 jour les informations d'identit\xe9 telles que l'email, le t\xe9l\xe9phone et le mot de passe, ainsi que de g\xe9rer les connexions sociales. Le support pour l'authentification multi-facteurs (MFA) et l'authentification unique (SSO) arrive bient\xf4t."}),"\n",(0,r.jsx)(n.li,{children:"Contr\xf4le d'acc\xe8s global : L'administrateur a un contr\xf4le total et global sur les param\xe8tres d'acc\xe8s, et peut personnaliser chaque champ."}),"\n",(0,r.jsxs)(n.li,{children:["Autorisation transparente : L'autorisation est plus facile que jamais ! Utilisez simplement ",(0,r.jsx)(n.code,{children:"client.getAccessToken()"})," pour obtenir un jeton d\u2019acc\xe8s (Opaque token) pour OP (Logto), et attachez-le \xe0 l'en-t\xeate d'Autorisation comme ",(0,r.jsx)(n.code,{children:"Bearer <access_token>"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Avec l'Account API de Logto, vous pouvez construire un syst\xe8me de gestion de compte personnalis\xe9 comme une page de profil enti\xe8rement int\xe9gr\xe9e \xe0 Logto."}),"\n",(0,r.jsx)(n.p,{children:"Voici quelques utilisations fr\xe9quentes :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"R\xe9cup\xe9rer le profil utilisateur"}),"\n",(0,r.jsx)(n.li,{children:"Mettre \xe0 jour le profil utilisateur"}),"\n",(0,r.jsx)(n.li,{children:"Mettre \xe0 jour le mot de passe utilisateur"}),"\n",(0,r.jsx)(n.li,{children:"Mettre \xe0 jour les identit\xe9s utilisateur, y compris l'email, le t\xe9l\xe9phone et les connexions sociales"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Pour en savoir plus sur les API disponibles, veuillez visiter ",(0,r.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-my-account",children:"Logto Account API Reference"})," et ",(0,r.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-verifications",children:"Logto Verification API Reference"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"comment-activer-laccount-api",children:"Comment activer l'Account API"}),"\n",(0,r.jsxs)(n.p,{children:["Par d\xe9faut, l'Account API est d\xe9sactiv\xe9e. Pour l'activer, vous devez utiliser le ",(0,r.jsx)(n.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," pour mettre \xe0 jour les param\xe8tres globaux."]}),"\n",(0,r.jsxs)(n.p,{children:["Le point de terminaison de l'API ",(0,r.jsx)(n.code,{children:"/api/account-center"})," peut \xeatre utilis\xe9 pour r\xe9cup\xe9rer et mettre \xe0 jour les param\xe8tres du centre de compte, vous pouvez l'utiliser pour activer ou d\xe9sactiver l'Account API, et personnaliser les champs."]}),"\n",(0,r.jsx)(n.p,{children:"Exemple de requ\xeate :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/account-center \\\n  -H \'authorization: Bearer <access_token for Logto Management API>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"enabled":true,"fields":{"username":"Edit"}}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Le champ ",(0,r.jsx)(n.code,{children:"enabled"})," est utilis\xe9 pour activer ou d\xe9sactiver l'Account API, et le champ ",(0,r.jsx)(n.code,{children:"fields"})," est utilis\xe9 pour personnaliser les champs, la valeur peut \xeatre ",(0,r.jsx)(n.code,{children:"Off"}),", ",(0,r.jsx)(n.code,{children:"Edit"}),", ",(0,r.jsx)(n.code,{children:"ReadOnly"}),". La valeur par d\xe9faut est ",(0,r.jsx)(n.code,{children:"Off"}),". La liste des champs :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"name"})," : Le champ du nom."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"avatar"})," : Le champ de l'avatar."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"profile"})," : Le champ du profil, y compris ses sous-champs."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"username"})," : Le champ du nom d'utilisateur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"email"})," : Le champ de l'email."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"phone"})," : Le champ du t\xe9l\xe9phone."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"password"})," : Le champ du mot de passe, lors de l'obtention, il retournera ",(0,r.jsx)(n.code,{children:"true"})," si l'utilisateur a d\xe9fini un mot de passe, sinon ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"social"})," : Connexions sociales."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["En savoir plus sur les d\xe9tails de l'API dans ",(0,r.jsx)(n.a,{href:"https://openapi.logto.io/group/endpoint-account-center",children:"Logto Management API Reference"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"comment-acc\xe9der-\xe0-laccount-api",children:"Comment acc\xe9der \xe0 l'Account API"}),"\n",(0,r.jsx)(n.h3,{id:"r\xe9cup\xe9rer-un-jeton-dacc\xe8s",children:"R\xe9cup\xe9rer un jeton d\u2019acc\xe8s"}),"\n",(0,r.jsxs)(n.p,{children:["Apr\xe8s avoir configur\xe9 le SDK dans votre application, vous pouvez utiliser la m\xe9thode ",(0,r.jsx)(n.code,{children:"client.getAccessToken()"})," pour r\xe9cup\xe9rer un jeton d\u2019acc\xe8s. Ce jeton est un jeton d\u2019acc\xe8s (Opaque token) qui peut \xeatre utilis\xe9 pour acc\xe9der \xe0 l'Account API."]}),"\n",(0,r.jsxs)(n.p,{children:["Si vous n'utilisez pas le SDK officiel, vous devez d\xe9finir le ",(0,r.jsx)(n.code,{children:"resource"})," \xe0 vide pour la requ\xeate de jeton d\u2019acc\xe8s \xe0 ",(0,r.jsx)(n.code,{children:"/oidc/token"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"acc\xe9der-\xe0-laccount-api-en-utilisant-le-jeton-dacc\xe8s",children:"Acc\xe9der \xe0 l'Account API en utilisant le jeton d\u2019acc\xe8s"}),"\n",(0,r.jsxs)(n.p,{children:["Vous devez placer le jeton d\u2019acc\xe8s dans le champ ",(0,r.jsx)(n.code,{children:"Authorization"})," des en-t\xeates HTTP avec le format Bearer (",(0,r.jsx)(n.code,{children:"Bearer YOUR_TOKEN"}),") lorsque vous interagissez avec l'Account API."]}),"\n",(0,r.jsx)(n.p,{children:"Un exemple pour obtenir les informations du compte utilisateur :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"g\xe9rer-les-informations-de-base-du-compte",children:"G\xe9rer les informations de base du compte"}),"\n",(0,r.jsx)(n.h3,{id:"r\xe9cup\xe9rer-les-informations-du-compte-utilisateur",children:"R\xe9cup\xe9rer les informations du compte utilisateur"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,r.jsx)(n.p,{children:"Le corps de la r\xe9ponse serait comme :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "id": "...",\n  "username": "...",\n  "name": "...",\n  "avatar": "..."\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Les champs de r\xe9ponse peuvent varier en fonction des param\xe8tres du centre de compte."}),"\n",(0,r.jsx)(n.h3,{id:"mettre-\xe0-jour-les-informations-de-base-du-compte",children:"Mettre \xe0 jour les informations de base du compte"}),"\n",(0,r.jsx)(n.p,{children:"Les informations de base du compte incluent le nom d'utilisateur, le nom, l'avatar et le profil."}),"\n",(0,r.jsxs)(n.p,{children:["Pour mettre \xe0 jour le nom d'utilisateur, le nom et l'avatar, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"PATCH /api/my-account"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"username":"...","name":"...","avatar":"..."}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Pour mettre \xe0 jour le profil, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"PATCH /api/my-account/profile"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account/profile \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"familyName":"...","givenName":"..."}\'\n'})}),"\n",(0,r.jsx)(n.h2,{id:"g\xe9rer-les-identifiants-et-autres-informations-sensibles",children:"G\xe9rer les identifiants et autres informations sensibles"}),"\n",(0,r.jsx)(n.p,{children:"Pour des raisons de s\xe9curit\xe9, l'Account API n\xe9cessite une autre couche d'autorisation pour les op\xe9rations impliquant des identifiants et d'autres informations sensibles."}),"\n",(0,r.jsx)(n.h3,{id:"obtenir-un-identifiant-denregistrement-de-v\xe9rification",children:"Obtenir un identifiant d'enregistrement de v\xe9rification"}),"\n",(0,r.jsx)(n.p,{children:"Tout d'abord, vous devez obtenir un identifiant d'enregistrement de v\xe9rification, cela peut \xeatre utilis\xe9 pour v\xe9rifier l'identit\xe9 de l'utilisateur lors de la mise \xe0 jour des identifiants."}),"\n",(0,r.jsx)(n.p,{children:"Pour obtenir un identifiant d'enregistrement de v\xe9rification, vous pouvez v\xe9rifier le mot de passe de l'utilisateur ou envoyer un code de v\xe9rification \xe0 l'email ou au t\xe9l\xe9phone de l'utilisateur."}),"\n",(0,r.jsx)(n.h4,{id:"v\xe9rifier-le-mot-de-passe-de-lutilisateur",children:"V\xe9rifier le mot de passe de l'utilisateur"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X POST https://[tenant-id].logto.app/api/verifications/password \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"password\":\"...\"}'\n"})}),"\n",(0,r.jsx)(n.p,{children:"Le corps de la r\xe9ponse serait comme :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"v\xe9rifier-en-envoyant-un-code-de-v\xe9rification-\xe0-lemail-ou-au-t\xe9l\xe9phone-de-lutilisateur",children:"V\xe9rifier en envoyant un code de v\xe9rification \xe0 l'email ou au t\xe9l\xe9phone de l'utilisateur"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Pour utiliser cette m\xe9thode, vous devez ",(0,r.jsx)(n.a,{href:"/connectors/email-connectors/",children:"configurer le connecteur email"})," ou ",(0,r.jsx)(n.a,{href:"/connectors/sms-connectors/",children:"le connecteur SMS"}),", et vous assurer que le mod\xe8le ",(0,r.jsx)(n.code,{children:"UserPermissionValidation"})," est configur\xe9."]})}),"\n",(0,r.jsx)(n.p,{children:"Prenons l'email comme exemple, demandez un nouveau code de v\xe9rification et obtenez l'identifiant d'enregistrement de v\xe9rification :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"Le corps de la r\xe9ponse serait comme :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Apr\xe8s avoir re\xe7u le code de v\xe9rification, vous pouvez l'utiliser pour mettre \xe0 jour le statut de v\xe9rification de l'enregistrement de v\xe9rification."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"123456"}\'\n'})}),"\n",(0,r.jsx)(n.p,{children:"Apr\xe8s avoir v\xe9rifi\xe9 le code, vous pouvez maintenant utiliser l'identifiant d'enregistrement de v\xe9rification pour mettre \xe0 jour l'identifiant de l'utilisateur."}),"\n",(0,r.jsx)(n.h3,{id:"envoyer-une-requ\xeate-avec-lidentifiant-denregistrement-de-v\xe9rification",children:"Envoyer une requ\xeate avec l'identifiant d'enregistrement de v\xe9rification"}),"\n",(0,r.jsxs)(n.p,{children:["Lors de l'envoi d'une requ\xeate pour mettre \xe0 jour l'identifiant de l'utilisateur, vous devez attacher l'identifiant d'enregistrement de v\xe9rification \xe0 l'en-t\xeate de la requ\xeate avec le champ ",(0,r.jsx)(n.code,{children:"logto-verification-id"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"mettre-\xe0-jour-ou-lier-un-nouvel-email",children:"Mettre \xe0 jour ou lier un nouvel email"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Pour utiliser cette m\xe9thode, vous devez ",(0,r.jsx)(n.a,{href:"/connectors/email-connectors/",children:"configurer le connecteur email"}),", et vous assurer que le mod\xe8le ",(0,r.jsx)(n.code,{children:"BindNewIdentifier"})," est configur\xe9."]})}),"\n",(0,r.jsx)(n.p,{children:"Pour mettre \xe0 jour ou lier un nouvel email, vous devez d'abord prouver la propri\xe9t\xe9 de l'email."}),"\n",(0,r.jsxs)(n.p,{children:["Appelez le point de terminaison ",(0,r.jsx)(n.code,{children:"POST /api/verifications/verification-code"})," pour demander un code de v\xe9rification."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Vous trouverez un ",(0,r.jsx)(n.code,{children:"verificationId"})," dans la r\xe9ponse, et recevrez un code de v\xe9rification dans l'email, utilisez-le pour v\xe9rifier l'email."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"..."}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Apr\xe8s avoir v\xe9rifi\xe9 le code, vous pouvez maintenant mettre \xe0 jour l'email de l'utilisateur, d\xe9finissez le ",(0,r.jsx)(n.code,{children:"verificationId"})," dans le corps de la requ\xeate comme ",(0,r.jsx)(n.code,{children:"newIdentifierVerificationRecordId"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"email\":\"...\",\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"supprimer-lemail-de-lutilisateur",children:"Supprimer l'email de l'utilisateur"}),"\n",(0,r.jsxs)(n.p,{children:["Pour supprimer l'email de l'utilisateur, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"DELETE /api/my-account/primary-email"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"g\xe9rer-le-t\xe9l\xe9phone",children:"G\xe9rer le t\xe9l\xe9phone"}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Pour utiliser cette m\xe9thode, vous devez ",(0,r.jsx)(n.a,{href:"/connectors/sms-connectors/",children:"configurer le connecteur SMS"}),", et vous assurer que le mod\xe8le ",(0,r.jsx)(n.code,{children:"BindNewIdentifier"})," est configur\xe9."]})}),"\n",(0,r.jsxs)(n.p,{children:["Similaire \xe0 la mise \xe0 jour de l'email, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"PATCH /api/my-account/primary-phone"})," pour mettre \xe0 jour ou lier un nouveau t\xe9l\xe9phone. Et utilisez le point de terminaison ",(0,r.jsx)(n.code,{children:"DELETE /api/my-account/primary-phone"})," pour supprimer le t\xe9l\xe9phone de l'utilisateur."]}),"\n",(0,r.jsx)(n.h3,{id:"lier-une-nouvelle-connexion-sociale",children:"Lier une nouvelle connexion sociale"}),"\n",(0,r.jsx)(n.p,{children:"Pour lier une nouvelle connexion sociale, vous devez d'abord demander une URL d'autorisation :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorId":"...","redirectUri":"...","state":"..."}\'\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"connectorId"})," : L'ID du ",(0,r.jsx)(n.a,{href:"/connectors/social-connectors/",children:"connecteur social"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"redirectUri"})," : L'URI de redirection apr\xe8s que l'utilisateur a autoris\xe9 l'application, vous devez h\xe9berger une page web \xe0 cette URL et capturer le rappel."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"state"})," : L'\xe9tat \xe0 retourner apr\xe8s que l'utilisateur a autoris\xe9 l'application, c'est une cha\xeene al\xe9atoire utilis\xe9e pour pr\xe9venir les attaques CSRF."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Dans la r\xe9ponse, vous trouverez un ",(0,r.jsx)(n.code,{children:"verificationRecordId"}),", conservez-le pour une utilisation ult\xe9rieure."]}),"\n",(0,r.jsxs)(n.p,{children:["Apr\xe8s que l'utilisateur a autoris\xe9 l'application, vous recevrez un rappel \xe0 l'",(0,r.jsx)(n.code,{children:"redirectUri"})," avec le param\xe8tre ",(0,r.jsx)(n.code,{children:"state"}),". Ensuite, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"POST /api/verifications/social/verify"})," pour v\xe9rifier la connexion sociale."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorData":"...","verificationRecordId":"..."}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Le ",(0,r.jsx)(n.code,{children:"connectorData"})," est les donn\xe9es retourn\xe9es par le connecteur social apr\xe8s que l'utilisateur a autoris\xe9 l'application, vous devez analyser et obtenir les param\xe8tres de requ\xeate de l'",(0,r.jsx)(n.code,{children:"redirectUri"})," dans votre page de rappel, et les envelopper en JSON comme valeur du champ ",(0,r.jsx)(n.code,{children:"connectorData"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Enfin, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"PATCH /api/my-account/identities"})," pour lier la connexion sociale."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/identities \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,r.jsx)(n.h3,{id:"supprimer-une-connexion-sociale",children:"Supprimer une connexion sociale"}),"\n",(0,r.jsxs)(n.p,{children:["Pour supprimer une connexion sociale, vous pouvez utiliser le point de terminaison ",(0,r.jsx)(n.code,{children:"DELETE /api/my-account/identities"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/identities/[connector_target_id] \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},15658:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var t=i(30758);const r={},o=t.createContext(r);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);