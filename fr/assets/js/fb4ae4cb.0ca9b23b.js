"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[55482],{7001:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"logto-oss/develop-your-connector/step-by-step-guide","title":"Guide \xe9tape par \xe9tape pour d\xe9velopper un connecteur social","description":"La fa\xe7on la plus rapide de commencer est de copier le code d\'un connecteur officiel existant et de le modifier pour r\xe9pondre \xe0 vos besoins. Prenons le connecteur GitHub comme exemple.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/logto-oss/develop-your-connector/step-by-step-guide.mdx","sourceDirName":"logto-oss/develop-your-connector","slug":"/logto-oss/develop-your-connector/step-by-step-guide","permalink":"/fr/logto-oss/develop-your-connector/step-by-step-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/logto-oss/develop-your-connector/step-by-step-guide.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Impl\xe9menter des connecteurs","permalink":"/fr/logto-oss/develop-your-connector/implement-connectors"},"next":{"title":"Mise \xe0 niveau","permalink":"/fr/logto-oss/upgrading-oss-version"}}');var r=o(86070),i=o(15658);const s={sidebar_position:3},c="Guide \xe9tape par \xe9tape pour d\xe9velopper un connecteur social",l={},d=[{value:"\xc9tape 1 : Cloner un package de connecteur existant",id:"\xe9tape-1--cloner-un-package-de-connecteur-existant",level:2},{value:"\xc9tape 2 : Modifier le fichier d&#39;entr\xe9e principal (index.ts)",id:"\xe9tape-2--modifier-le-fichier-dentr\xe9e-principal-indexts",level:2},{value:"\xc9tape 3 : Tester le connecteur",id:"\xe9tape-3--tester-le-connecteur",level:2},{value:"Test unitaire",id:"test-unitaire",level:3},{value:"Test local",id:"test-local",level:3}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{CloudLink:o}=n;return o||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("CloudLink",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"guide-\xe9tape-par-\xe9tape-pour-d\xe9velopper-un-connecteur-social",children:"Guide \xe9tape par \xe9tape pour d\xe9velopper un connecteur social"})}),"\n",(0,r.jsx)(n.p,{children:"La fa\xe7on la plus rapide de commencer est de copier le code d'un connecteur officiel existant et de le modifier pour r\xe9pondre \xe0 vos besoins. Prenons le connecteur GitHub comme exemple."}),"\n",(0,r.jsx)(n.h2,{id:"\xe9tape-1--cloner-un-package-de-connecteur-existant",children:"\xc9tape 1 : Cloner un package de connecteur existant"}),"\n",(0,r.jsx)(n.p,{children:"Dans un dossier source de connecteur, vous trouverez les fichiers suivants :"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index.ts"})," : Le fichier d'entr\xe9e principal du connecteur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"constant.ts"})," : Les constantes utilis\xe9es dans le connecteur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"types.ts"})," : Les types TypeScript utilis\xe9s dans le connecteur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"index.test.ts"})," : Les cas de test pour le connecteur."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mock.ts"})," : Les donn\xe9es simul\xe9es utilis\xe9es dans les cas de test du connecteur."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["En plus de ces fichiers, vous devrez \xe9galement fournir un fichier ",(0,r.jsx)(n.code,{children:"README.md"})," pour d\xe9crire le connecteur, un ",(0,r.jsx)(n.code,{children:"logo.svg"})," (\xe9ventuellement un ",(0,r.jsx)(n.code,{children:"logo-dark.svg"})," pour une meilleure exp\xe9rience utilisateur en mode sombre), et un fichier ",(0,r.jsx)(n.code,{children:"package.json"})," pour d\xe9finir les informations du package npm."]}),"\n",(0,r.jsx)(n.h2,{id:"\xe9tape-2--modifier-le-fichier-dentr\xe9e-principal-indexts",children:"\xc9tape 2 : Modifier le fichier d'entr\xe9e principal (index.ts)"}),"\n",(0,r.jsxs)(n.p,{children:["Dans le fichier ",(0,r.jsx)(n.code,{children:"index.ts"}),", vous trouverez la plupart de la logique du connecteur. Il y a g\xe9n\xe9ralement 4 fonctions que vous devez impl\xe9menter :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getAuthorizationUri"})," : G\xe9n\xe9rer l'URI d\u2019Autorisation pour la plateforme sociale tierce. Pour GitHub, ce serait : ",(0,r.jsx)(n.code,{children:"https://github.com/login/oauth/authorize?client_id={clientId}&redirect_uri={redirectUri}&state={state}"}),". Consultez la documentation d\xe9veloppeur de votre plateforme sociale cible pour obtenir l'URI correct."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"authorizationCallbackHandler"})," : Prot\xe9ger les valeurs des param\xe8tres retourn\xe9s dans l'URI de rappel d\u2019Autorisation, extraire le ",(0,r.jsx)(n.code,{children:"code"})," d\u2019Autorisation et g\xe9rer les erreurs potentielles."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getAccessToken"})," : \xc9changer le ",(0,r.jsx)(n.code,{children:"code"})," d\u2019Autorisation contre un jeton d\u2019acc\xe8s."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"getUserInfo"})," : R\xe9cup\xe9rer les informations utilisateur de la plateforme sociale tierce avec le jeton d\u2019acc\xe8s."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"La plupart des autres logiques communes ont \xe9t\xe9 prises en charge dans le kit de connecteur Logto, ce qui devrait faciliter votre travail."}),"\n",(0,r.jsx)(n.p,{children:"Enfin, \xe0 la fin du fichier, vous devrez simplement exporter l'objet connecteur, en suivant la m\xeame structure de code que le connecteur GitHub."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const createGithubConnector: CreateConnector<SocialConnector> = async ({ getConfig }) => {\n  return {\n    metadata: defaultMetadata,\n    type: ConnectorType.Social,\n    configGuard: githubConfigGuard,\n    getAuthorizationUri: getAuthorizationUri(getConfig),\n    getUserInfo: getUserInfo(getConfig),\n  };\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\xe9tape-3--tester-le-connecteur",children:"\xc9tape 3 : Tester le connecteur"}),"\n",(0,r.jsx)(n.h3,{id:"test-unitaire",children:"Test unitaire"}),"\n",(0,r.jsx)(n.p,{children:"Tout d'abord, \xe9crivez quelques cas de test unitaire et assurez-vous que les fonctionnalit\xe9s de base fonctionnent comme pr\xe9vu."}),"\n",(0,r.jsx)(n.h3,{id:"test-local",children:"Test local"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Configurez Logto dans votre environnement local : Logto fournit plusieurs fa\xe7ons de fonctionner localement, vous pouvez soit utiliser CLI, soit docker, ou m\xeame construire \xe0 partir du code source. Consultez les documentations pour ",(0,r.jsx)(n.a,{href:"/logto-oss/using-cli/install-logto/",children:"plus de d\xe9tails"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Liez votre connecteur personnalis\xe9 \xe0 votre instance Logto : Utilisez le CLI pour cr\xe9er un lien symbolique de votre connecteur vers l'instance Logto. ",(0,r.jsx)(n.a,{href:"/logto-oss/using-cli/manage-connectors/#link-local-connectors",children:"Plus de d\xe9tails"}),".","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd logto\nnpx @logto/cli connector link -p .\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Apr\xe8s avoir li\xe9 le connecteur, vous devriez le voir dans le dossier ",(0,r.jsx)(n.code,{children:"<logto-root-path>/packages/core/connectors"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Red\xe9marrez votre instance Logto, allez dans la Console d'administration Logto, vous devriez pouvoir le voir dans la liste des connecteurs sociaux."}),"\n",(0,r.jsxs)(n.li,{children:["Configurez votre connecteur dans ",(0,r.jsx)(o,{to:"/sign-in-experience/sign-up-and-sign-in",children:"Console > Exp\xe9rience de connexion > Inscription et connexion"}),' > Connexion sociale. Et essayez-le dans notre application de d\xe9monstration avec la fonctionnalit\xe9 "Aper\xe7u en direct".']}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},15658:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>c});var t=o(30758);const r={},i=t.createContext(r);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);