"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[17488],{42839:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Nous vous recommandons de lire d'abord ",(0,s.jsx)(n.a,{href:"/authorization/role-based-access-control",children:"\ud83d\udd10 Contr\xf4le d\u2019acc\xe8s bas\xe9 sur les r\xf4les (RBAC)"})," pour comprendre les concepts de base de Logto RBAC et comment configurer correctement les ressources API."]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},37502:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[{value:"Point de contr\xf4le : Testez votre application",id:"point-de-contr\xf4le--testez-votre-application",level:3}];function o(e){const n={h3:"h3",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"point-de-contr\xf4le--testez-votre-application",children:"Point de contr\xf4le : Testez votre application"}),"\n",(0,s.jsx)(n.p,{children:"Maintenant, vous pouvez tester votre application :"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Ex\xe9cutez votre application, vous verrez le bouton de connexion."}),"\n",(0,s.jsx)(n.li,{children:"Cliquez sur le bouton de connexion, le SDK initiera le processus de connexion et vous redirigera vers la page de connexion Logto."}),"\n",(0,s.jsx)(n.li,{children:"Apr\xe8s vous \xeatre connect\xe9, vous serez redirig\xe9 vers votre application et verrez le bouton de d\xe9connexion."}),"\n",(0,s.jsx)(n.li,{children:"Cliquez sur le bouton de d\xe9connexion pour effacer le stockage local et vous d\xe9connecter."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},71307:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Une fois que vous avez configur\xe9 les ressources API, vous pouvez les ajouter lors de la configuration de Logto dans votre application :"}),"\n",e.configResourcesCode,"\n",(0,s.jsx)(n.p,{children:"Chaque ressource API a ses propres permissions (port\xe9es)."}),"\n",(0,s.jsxs)(n.p,{children:["Par exemple, la ressource ",(0,s.jsx)(n.code,{children:"https://shopping.your-app.com/api"})," a les permissions ",(0,s.jsx)(n.code,{children:"shopping:read"})," et ",(0,s.jsx)(n.code,{children:"shopping:write"}),", et la ressource ",(0,s.jsx)(n.code,{children:"https://store.your-app.com/api"})," a les permissions ",(0,s.jsx)(n.code,{children:"store:read"})," et ",(0,s.jsx)(n.code,{children:"store:write"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Pour demander ces permissions, vous pouvez les ajouter lors de la configuration de Logto dans votre application :"}),"\n",e.configResourcesWithScopesCode,"\n",(0,s.jsxs)(n.p,{children:["Vous pouvez remarquer que les port\xe9es sont d\xe9finies s\xe9par\xe9ment des ressources API. Cela est d\xfb au fait que les ",(0,s.jsx)(n.a,{href:"https://www.rfc-editor.org/rfc/rfc8707.html",children:"Indicateurs de ressource pour OAuth 2.0"})," sp\xe9cifient que les port\xe9es finales pour la requ\xeate seront le produit cart\xe9sien de toutes les port\xe9es de tous les services cibles."]}),"\n",e.configResourcesWithSharedScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Ainsi, dans le cas ci-dessus, les port\xe9es peuvent \xeatre simplifi\xe9es \xe0 partir de la d\xe9finition dans Logto, les deux ressources API peuvent avoir les port\xe9es ",(0,s.jsx)("code",{children:"read"})," et ",(0,s.jsx)("code",{children:"write"})," ","sans le pr\xe9fixe. Ensuite, dans la configuration de Logto :"]}),e.configResourcesWithSharedScopesCode,(0,s.jsxs)("p",{children:["Pour chaque ressource API, il demandera \xe0 la fois les port\xe9es ",(0,s.jsx)("code",{children:"read"})," et"," ",(0,s.jsx)("code",{children:"write"}),"."]})]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Il est acceptable de demander des port\xe9es qui ne sont pas d\xe9finies dans les ressources API. Par exemple, vous pouvez demander la port\xe9e ",(0,s.jsx)(n.code,{children:"email"})," m\xeame si les ressources API n'ont pas la port\xe9e ",(0,s.jsx)(n.code,{children:"email"})," disponible. Les port\xe9es non disponibles seront ignor\xe9es en toute s\xe9curit\xe9."]})}),"\n",(0,s.jsx)(n.p,{children:"Apr\xe8s une connexion r\xe9ussie, Logto \xe9mettra les port\xe9es appropri\xe9es aux ressources API en fonction des r\xf4les de l'utilisateur."})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},98601:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(n.p,{children:["Il se peut que certaines informations utilisateur soient manquantes dans l'objet retourn\xe9 par ",(0,s.jsx)("code",{children:e.method}),". Cela est d\xfb au fait que OAuth 2.0 et OpenID Connect (OIDC) sont con\xe7us pour suivre le principe du moindre privil\xe8ge (PoLP), et Logto est construit sur ces normes."]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},39038:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const{Url:n}={...(0,r.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{href:"/end-user-flows",children:" Flux utilisateur final : flux d'authentification, flux de compte et flux d'organisation "}),"\n",(0,s.jsx)(n,{href:"/connectors",children:" Configurer les connecteurs "}),"\n",(0,s.jsx)(n,{href:"/authorization/api-resources/protect-your-api",children:" Prot\xe9ger votre API "})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},91246:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={a:"a",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Concernant la connexion bas\xe9e sur la redirection"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Ce processus d'authentification (Authentication) suit le protocole ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", et Logto applique des mesures de s\xe9curit\xe9 strictes pour prot\xe9ger la connexion utilisateur."]}),"\n",(0,s.jsx)(n.li,{children:"Si vous avez plusieurs applications, vous pouvez utiliser le m\xeame fournisseur d\u2019identit\xe9 (Logto). Une fois que l'utilisateur se connecte \xe0 une application, Logto compl\xe9tera automatiquement le processus de connexion lorsque l'utilisateur acc\xe8de \xe0 une autre application."}),"\n"]}),(0,s.jsxs)(n.p,{children:["Pour en savoir plus sur la logique et les avantages de la connexion bas\xe9e sur la redirection, consultez ",(0,s.jsx)(n.a,{href:"/concepts/sign-in-experience",children:"Exp\xe9rience de connexion Logto expliqu\xe9e"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},88906:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Voici la liste des Port\xe9es (Scopes) prises en charge et les Revendications (Claims) correspondantes :"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"openid"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sub"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"L'identifiant unique de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"profile"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"name"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le nom complet de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"username"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le nom d'utilisateur de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"picture"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"URL de la photo de profil de l'utilisateur final. Cette URL DOIT faire r\xe9f\xe9rence \xe0 un fichier image (par exemple, un fichier image PNG, JPEG ou GIF), plut\xf4t qu'\xe0 une page Web contenant une image. Notez que cette URL DOIT sp\xe9cifiquement r\xe9f\xe9rencer une photo de profil de l'utilisateur final adapt\xe9e \xe0 l'affichage lors de la description de l'utilisateur final, plut\xf4t qu'une photo arbitraire prise par l'utilisateur final."}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"created_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Heure \xe0 laquelle l'utilisateur final a \xe9t\xe9 cr\xe9\xe9. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"updated_at"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"Heure \xe0 laquelle les informations de l'utilisateur final ont \xe9t\xe9 mises \xe0 jour pour la derni\xe8re fois. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["D'autres ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"revendications standard"})," incluent ",(0,s.jsx)(n.code,{children:"family_name"}),", ",(0,s.jsx)(n.code,{children:"given_name"}),", ",(0,s.jsx)(n.code,{children:"middle_name"}),", ",(0,s.jsx)(n.code,{children:"nickname"}),", ",(0,s.jsx)(n.code,{children:"preferred_username"}),", ",(0,s.jsx)(n.code,{children:"profile"}),", ",(0,s.jsx)(n.code,{children:"website"}),", ",(0,s.jsx)(n.code,{children:"gender"}),", ",(0,s.jsx)(n.code,{children:"birthdate"}),", ",(0,s.jsx)(n.code,{children:"zoneinfo"}),", et ",(0,s.jsx)(n.code,{children:"locale"})," seront \xe9galement incluses dans la port\xe9e ",(0,s.jsx)(n.code,{children:"profile"})," sans avoir besoin de demander le point de terminaison userinfo. Une diff\xe9rence par rapport aux revendications ci-dessus est que ces revendications ne seront renvoy\xe9es que lorsque leurs valeurs ne sont pas vides, tandis que les revendications ci-dessus renverront ",(0,s.jsx)(n.code,{children:"null"})," si les valeurs sont vides."]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Contrairement aux revendications standard, les revendications ",(0,s.jsx)(n.code,{children:"created_at"})," et ",(0,s.jsx)(n.code,{children:"updated_at"})," utilisent des millisecondes au lieu de secondes."]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"email"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"L'adresse e-mail de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"email_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Si l'adresse e-mail a \xe9t\xe9 v\xe9rifi\xe9e"}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"phone"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:"Le num\xe9ro de t\xe9l\xe9phone de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"phone_number_verified"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:"Si le num\xe9ro de t\xe9l\xe9phone a \xe9t\xe9 v\xe9rifi\xe9"}),(0,s.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"address"})})}),"\n",(0,s.jsxs)(n.p,{children:["Veuillez vous r\xe9f\xe9rer \xe0 ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," pour les d\xe9tails de la revendication d'adresse."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"custom_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"Les donn\xe9es personnalis\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"identities"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object"})}),(0,s.jsx)(n.td,{children:"Les identit\xe9s li\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"sso_identities"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"array"})}),(0,s.jsx)(n.td,{children:"Les identit\xe9s SSO li\xe9es de l'utilisateur"}),(0,s.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organizations"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsx)(n.td,{children:"Les identifiants d'organisation auxquels l'utilisateur appartient"}),(0,s.jsx)(n.td,{children:"Non"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_data"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"object[]"})}),(0,s.jsx)(n.td,{children:"Les donn\xe9es d'organisation auxquelles l'utilisateur appartient"}),(0,s.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Nom de la revendication"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"organization_roles"}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string[]"})}),(0,s.jsxs)(n.td,{children:["Les r\xf4les d'organisation auxquels l'utilisateur appartient avec le format ",(0,s.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,s.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:['En consid\xe9rant la performance et la taille des donn\xe9es, si "Besoin d\'userinfo ?" est "Oui", cela signifie que la revendication n\'appara\xeetra pas dans le Jeton d\u2019identifiant (ID token), mais sera renvoy\xe9e dans la r\xe9ponse du ',(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"point de terminaison userinfo"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},13195:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>o});var s=t(86070),r=t(15658),i=t(88906);const o=[...i.RM];function c(e){const n={a:"a",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Logto utilise les conventions de ",(0,s.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"port\xe9es et revendications"})," OIDC pour d\xe9finir les Port\xe9es et Revendications pour r\xe9cup\xe9rer les informations utilisateur \xe0 partir du Jeton d\u2019identifiant et du point de terminaison OIDC ",(0,s.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo"}),'. Les termes "Port\xe9e" et "Revendication" proviennent des sp\xe9cifications OAuth 2.0 et OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:"En bref, lorsque vous demandez une Port\xe9e, vous obtiendrez les Revendications correspondantes dans les informations utilisateur. Par exemple, si vous demandez la port\xe9e `email`, vous obtiendrez les donn\xe9es `email` et `email_verified` de l'utilisateur."}),(0,s.jsx)("p",{children:"Par d\xe9faut, le SDK Logto demandera toujours trois Port\xe9es : `openid`, `profile` et `offline_access`, et il n'est pas possible de supprimer ces Port\xe9es par d\xe9faut. Mais vous pouvez ajouter plus de Port\xe9es lors de la configuration de Logto :"}),e.configScopesCode]}),"\n",(0,s.jsx)(i.Ay,{})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},17646:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={admonition:"admonition",code:"code",mermaid:"mermaid",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Par d\xe9faut, des revendications limit\xe9es sont retourn\xe9es. Si vous avez besoin de plus d'informations, vous pouvez demander des port\xe9es suppl\xe9mentaires pour acc\xe9der \xe0 plus de revendications."}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:'Une "revendication" est une assertion faite \xe0 propos d\'un sujet ; une "port\xe9e" est un groupe de revendications. Dans le cas actuel, une revendication est une information sur l\'utilisateur.'})}),"\n",(0,s.jsx)(n.p,{children:"Voici un exemple non normatif de la relation port\xe9e - revendication :"}),"\n",(0,s.jsx)(n.mermaid,{value:"classDiagram\n  class openid {\n    +sub\n  }\n\n  class profile {\n    +name\n    +username\n    +picture\n    +...\n  }\n\n  class email {\n    +email\n    +email_verified\n  }\n\n  class phone {\n    +phone_number\n    +phone_number_verified\n  }"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"La revendication \"sub\" signifie \"sujet\", qui est l'identifiant unique de l'utilisateur (c'est-\xe0-dire l'ID utilisateur)."})}),"\n",(0,s.jsxs)(n.p,{children:["Le SDK Logto demandera toujours trois port\xe9es : ",(0,s.jsx)(n.code,{children:"openid"}),", ",(0,s.jsx)(n.code,{children:"profile"})," et ",(0,s.jsx)(n.code,{children:"offline_access"}),"."]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},61710:(e,n,t)=>{t.d(n,{Ay:()=>d,Ip:()=>i,RM:()=>o});var s=t(86070),r=t(15658);const i="http://localhost:3000/",o=[];function c(e){const n={admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Dans les extraits de code suivants, nous supposons que votre application fonctionne sur ",(0,s.jsx)("code",{children:i}),"."]})})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},34313:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>P,contentTitle:()=>L,default:()=>q,frontMatter:()=>y,metadata:()=>s,toc:()=>I});const s=JSON.parse('{"id":"quick-starts/framework/dotnet-blazor-server/README","title":"Ajoutez l\u2019authentification \xe0 votre application .NET Core (Blazor Server)","description":"Pr\xe9requis","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","sourceDirName":"quick-starts/framework/dotnet-blazor-server","slug":"/quick-starts/dotnet-core/blazor-server","permalink":"/fr/quick-starts/dotnet-core/blazor-server","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/dotnet-blazor-server/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/dotnet-core/blazor-server","sidebar_label":".NET Core (Blazor Server)","sidebar_custom_props":{"logoFilename":"dotnet-blazor.svg","description":"Int\xe9grer Logto dans votre application .NET Core Blazor Server."}},"sidebar":"quickStartSidebar","previous":{"title":"Extension Chrome","permalink":"/fr/quick-starts/chrome-extension"},"next":{"title":".NET Core (Blazor WASM)","permalink":"/fr/quick-starts/dotnet-core/blazor-wasm"}}');var r=t(86070),i=t(15658),o=t(42839),c=t(37502),d=t(39038),a=t(91287),l=t(16100),u=t(71140),p=t(26554),h=t(63325),x=t(98557),j=t(30089),m=t(80791);function g(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"\xc9tant donn\xe9 que Blazor Server utilise SignalR pour communiquer entre le serveur et le client, cela signifie que les m\xe9thodes qui manipulent directement le contexte HTTP (comme l'\xe9mission de d\xe9fis ou de redirections) ne fonctionnent pas comme pr\xe9vu lorsqu'elles sont appel\xe9es depuis un composant Blazor."}),"\n",(0,r.jsx)(n.p,{children:"Pour corriger cela, nous devons explicitement ajouter deux points de terminaison pour les redirections de connexion et de d\xe9connexion :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'app.MapGet("/SignIn", async context =>\n{\n    if (!(context.User?.Identity?.IsAuthenticated ?? false))\n    {\n        await context.ChallengeAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n\napp.MapGet("/SignOut", async context =>\n{\n    if (context.User?.Identity?.IsAuthenticated ?? false)\n    {\n        await context.SignOutAsync(new AuthenticationProperties { RedirectUri = "/" });\n    } else {\n        context.Response.Redirect("/");\n    }\n});\n'})}),"\n",(0,r.jsx)(n.p,{children:"Nous pouvons maintenant rediriger vers ces points de terminaison pour d\xe9clencher la connexion et la d\xe9connexion."})]})}function v(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(g,{...e})}):g(e)}function f(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Alternativement, vous pouvez utiliser le composant ",(0,r.jsx)(n.code,{children:"AuthorizeView"})," pour rendre conditionnellement du contenu en fonction de l'\xe9tat d'authentification de l'utilisateur. Ce composant est utile lorsque vous souhaitez afficher un contenu diff\xe9rent pour les utilisateurs authentifi\xe9s et non authentifi\xe9s."]}),"\n",(0,r.jsx)(n.p,{children:"Dans votre composant Razor, ajoutez le code suivant :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:"@using Microsoft.AspNetCore.Components.Authorization\n\n@* ... *@\n\n<AuthorizeView>\n    <Authorized>\n        <p>Nom : @User?.Identity?.Name</p>\n        @* Contenu pour les utilisateurs authentifi\xe9s *@\n    </Authorized>\n    <NotAuthorized>\n        @* Contenu pour les utilisateurs non authentifi\xe9s *@\n    </NotAuthorized>\n</AuthorizeView>\n\n@* ... *@\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Le composant ",(0,r.jsx)(n.code,{children:"AuthorizeView"})," n\xe9cessite un param\xe8tre en cascade de type ",(0,r.jsx)(n.code,{children:"Task<AuthenticationState>"}),". Un moyen direct d'obtenir ce param\xe8tre est d'ajouter le composant ",(0,r.jsx)(n.code,{children:"<CascadingAuthenticationState>"}),". Cependant, en raison de la nature de Blazor Server, nous ne pouvons pas simplement ajouter le composant \xe0 la mise en page ou au composant racine (cela peut ne pas fonctionner comme pr\xe9vu). Au lieu de cela, nous pouvons ajouter le code suivant au builder (",(0,r.jsx)(n.code,{children:"Program.cs"})," ou ",(0,r.jsx)(n.code,{children:"Startup.cs"}),") pour fournir le param\xe8tre en cascade :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddCascadingAuthenticationState();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Ensuite, vous pouvez utiliser le composant ",(0,r.jsx)(n.code,{children:"AuthorizeView"})," dans chaque composant qui en a besoin."]})]})}function A(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(f,{...e})}):f(e)}function b(e){const n={code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\xc9tant donn\xe9 que nous ne pouvons pas acc\xe9der directement \xe0 ",(0,r.jsx)(n.code,{children:"HttpContext"})," dans les composants Razor, nous devons injecter le ",(0,r.jsx)(n.code,{children:"HttpContextAccessor"})," dans le composant et l'utiliser pour r\xe9cup\xe9rer les jetons. Le code suivant d\xe9montre comment r\xe9cup\xe9rer le jeton d\u2019acc\xe8s pour la ressource API dans un composant Razor :"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@using Logto.AspNetCore.Authentication\n@using Microsoft.AspNetCore.Authentication\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject IHttpContextAccessor HttpContextAccessor\n\n@* ... *@\n\n<p><b>Ressource :</b> @(Resource ?? "(null)")</p>\n<p><b>Jeton d\u2019acc\xe8s :</b> @(AccessToken ?? "(null)")</p>\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n    private string? AccessToken { get; set; }\n    private string? Resource { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n\n        if (User?.Identity?.IsAuthenticated == true)\n        {\n            await FetchTokenAsync();\n        }\n    }\n\n    private async Task FetchTokenAsync()\n    {\n        var httpContext = HttpContextAccessor.HttpContext;\n        if (httpContext == null)\n        {\n            return;\n        }\n\n        var logtoOptions = httpContext.GetLogtoOptions();\n        Resource = logtoOptions?.Resource;\n        // Remplacez par d\'autres types de jetons si n\xe9cessaire\n        AccessToken = await httpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n    }\n}\n'})})]})}function R(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(b,{...e})}):b(e)}function C(e){const n={code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Dans le composant Razor, ajoutez le code suivant :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cshtml",metastring:'title="Components/Pages/Index.razor"',children:'@using Microsoft.AspNetCore.Components.Authorization\n@using System.Security.Claims\n@inject AuthenticationStateProvider AuthenticationStateProvider\n@inject NavigationManager NavigationManager\n\n@* ... *@\n\n<p>Est authentifi\xe9 : @User.Identity?.IsAuthenticated</p>\n@if (User.Identity?.IsAuthenticated == true)\n{\n    <button @onclick="SignOut">Se d\xe9connecter</button>\n}\nelse\n{\n    <button @onclick="SignIn">Se connecter</button>\n}\n\n@* ... *@\n\n@code {\n    private ClaimsPrincipal? User { get; set; }\n\n    protected override async Task OnInitializedAsync()\n    {\n        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();\n        User = authState.User;\n    }\n\n    private void SignIn()\n    {\n        NavigationManager.NavigateTo("/SignIn", forceLoad: true);\n    }\n\n    private void SignOut()\n    {\n        NavigationManager.NavigateTo("/SignOut", forceLoad: true);\n    }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Explication"})," :"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Le ",(0,r.jsx)(n.code,{children:"AuthenticationStateProvider"})," inject\xe9 est utilis\xe9 pour obtenir l'\xe9tat d'authentification de l'utilisateur actuel et remplir la propri\xe9t\xe9 ",(0,r.jsx)(n.code,{children:"User"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Les m\xe9thodes ",(0,r.jsx)(n.code,{children:"SignIn"})," et ",(0,r.jsx)(n.code,{children:"SignOut"})," sont utilis\xe9es pour rediriger l'utilisateur vers les points de terminaison de connexion et de d\xe9connexion respectivement. En raison de la nature de Blazor Server, nous devons utiliser ",(0,r.jsx)(n.code,{children:"NavigationManager"})," avec un chargement forc\xe9 pour d\xe9clencher la redirection."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'La page affichera le bouton "Se connecter" si l\'utilisateur n\'est pas authentifi\xe9, et affichera le bouton "Se d\xe9connecter" si l\'utilisateur est authentifi\xe9.'})]})}function z(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(C,{...e})}):C(e)}const y={slug:"/quick-starts/dotnet-core/blazor-server",sidebar_label:".NET Core (Blazor Server)",sidebar_custom_props:{logoFilename:"dotnet-blazor.svg",description:"Int\xe9grer Logto dans votre application .NET Core Blazor Server."}},L="Ajoutez l\u2019authentification \xe0 votre application .NET Core (Blazor Server)",P={},I=[...h.RM,{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Installation",id:"installation",level:2},...x.RM,{value:"Int\xe9gration",id:"int\xe9gration",level:2},{value:"Ajouter l&#39;authentification Logto",id:"ajouter-lauthentification-logto",level:3},...a.RM,{value:"Flux de connexion et de d\xe9connexion",id:"flux-de-connexion-et-de-d\xe9connexion",level:3},...j.RM,{value:"Configurer les URIs de redirection",id:"configurer-les-uris-de-redirection",level:3},...l.RM,{value:"Ajouter des routes",id:"ajouter-des-routes",level:3},{value:"Impl\xe9menter les boutons de connexion et de d\xe9connexion",id:"impl\xe9menter-les-boutons-de-connexion-et-de-d\xe9connexion",level:3},{value:"Le composant <code>&lt;AuthorizeView /&gt;</code>",id:"le-composant-authorizeview-",level:3},...c.RM,{value:"Obtenir des informations sur l&#39;utilisateur",id:"obtenir-des-informations-sur-lutilisateur",level:2},...p.RM,{value:"Ressources API",id:"ressources-api",level:2},...o.RM,{value:"Configurer la ressource API dans votre application",id:"configurer-la-ressource-api-dans-votre-application",level:3},...m.RM,{value:"R\xe9cup\xe9rer des jetons",id:"r\xe9cup\xe9rer-des-jetons",level:2},{value:"R\xe9cup\xe9rer le jeton via <code>HttpContext</code>",id:"r\xe9cup\xe9rer-le-jeton-via-httpcontext",level:3},...u.RM,{value:"R\xe9cup\xe9rer le jeton dans les composants Razor",id:"r\xe9cup\xe9rer-le-jeton-dans-les-composants-razor",level:3},{value:"Lectures compl\xe9mentaires",id:"lectures-compl\xe9mentaires",level:2},...d.RM];function S(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ajoutez-lauthentification-\xe0-votre-application-net-core-blazor-server",children:"Ajoutez l\u2019authentification \xe0 votre application .NET Core (Blazor Server)"})}),"\n",(0,r.jsx)(h.Ay,{}),"\n",(0,r.jsx)(n.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Un compte ",(0,r.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou un ",(0,r.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-h\xe9berg\xe9"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Une application web traditionnelle Logto cr\xe9\xe9e."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(x.Ay,{}),"\n",(0,r.jsx)(n.h2,{id:"int\xe9gration",children:"Int\xe9gration"}),"\n",(0,r.jsx)(n.h3,{id:"ajouter-lauthentification-logto",children:"Ajouter l'authentification Logto"}),"\n",(0,r.jsx)(a.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"flux-de-connexion-et-de-d\xe9connexion",children:"Flux de connexion et de d\xe9connexion"}),"\n",(0,r.jsx)(j.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"configurer-les-uris-de-redirection",children:"Configurer les URIs de redirection"}),"\n",(0,r.jsx)(l.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"ajouter-des-routes",children:"Ajouter des routes"}),"\n",(0,r.jsx)(v,{}),"\n",(0,r.jsx)(n.h3,{id:"impl\xe9menter-les-boutons-de-connexion-et-de-d\xe9connexion",children:"Impl\xe9menter les boutons de connexion et de d\xe9connexion"}),"\n",(0,r.jsx)(z,{}),"\n",(0,r.jsxs)(n.h3,{id:"le-composant-authorizeview-",children:["Le composant ",(0,r.jsx)(n.code,{children:"<AuthorizeView />"})]}),"\n",(0,r.jsx)(A,{}),"\n",(0,r.jsx)(c.Ay,{}),"\n",(0,r.jsx)(n.h2,{id:"obtenir-des-informations-sur-lutilisateur",children:"Obtenir des informations sur l'utilisateur"}),"\n",(0,r.jsx)(p.Ay,{}),"\n",(0,r.jsx)(n.h2,{id:"ressources-api",children:"Ressources API"}),"\n",(0,r.jsx)(o.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"configurer-la-ressource-api-dans-votre-application",children:"Configurer la ressource API dans votre application"}),"\n",(0,r.jsx)(m.Ay,{}),"\n",(0,r.jsx)(n.h2,{id:"r\xe9cup\xe9rer-des-jetons",children:"R\xe9cup\xe9rer des jetons"}),"\n",(0,r.jsxs)(n.h3,{id:"r\xe9cup\xe9rer-le-jeton-via-httpcontext",children:["R\xe9cup\xe9rer le jeton via ",(0,r.jsx)(n.code,{children:"HttpContext"})]}),"\n",(0,r.jsx)(u.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"r\xe9cup\xe9rer-le-jeton-dans-les-composants-razor",children:"R\xe9cup\xe9rer le jeton dans les composants Razor"}),"\n",(0,r.jsx)(R,{}),"\n",(0,r.jsx)(n.h2,{id:"lectures-compl\xe9mentaires",children:"Lectures compl\xe9mentaires"}),"\n",(0,r.jsx)(d.Ay,{})]})}function q(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(S,{...e})}):S(e)}},91287:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Ouvrez ",(0,s.jsx)(n.code,{children:"Startup.cs"})," (ou ",(0,s.jsx)(n.code,{children:"Program.cs"}),") et ajoutez le code suivant pour enregistrer les services d'authentification Logto :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'using Logto.AspNetCore.Authentication;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddLogtoAuthentication(options =>\n{\n  options.Endpoint = builder.Configuration["Logto:Endpoint"]!;\n  options.AppId = builder.Configuration["Logto:AppId"]!;\n  options.AppSecret = builder.Configuration["Logto:AppSecret"];\n});\n'})}),"\n",(0,s.jsxs)(n.p,{children:["La m\xe9thode ",(0,s.jsx)(n.code,{children:"AddLogtoAuthentication"})," effectuera les actions suivantes :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["D\xe9finir le sch\xe9ma d'Authentification (Authentication) par d\xe9faut sur ",(0,s.jsx)(n.code,{children:"LogtoDefaults.CookieScheme"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["D\xe9finir le sch\xe9ma de d\xe9fi par d\xe9faut sur ",(0,s.jsx)(n.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["D\xe9finir le sch\xe9ma de d\xe9connexion par d\xe9faut sur ",(0,s.jsx)(n.code,{children:"LogtoDefaults.AuthenticationScheme"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Ajouter des gestionnaires d'authentification par cookie et OpenID Connect au sch\xe9ma d'authentification."}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},16100:(e,n,t)=>{t.d(n,{Ay:()=>a,RM:()=>c});var s=t(86070),r=t(15658),i=t(8899),o=t(61710);const c=[...o.RM,{value:"Modifier les chemins par d\xe9faut",id:"modifier-les-chemins-par-d\xe9faut",level:4}];function d(e){const n={code:"code",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Tout d'abord, configurons l' ",(0,s.jsx)(n.strong,{children:"URI de redirection Logto"}),". Ajoutez l'URI suivante \xe0 la liste des \"URIs de redirection\" sur la page des d\xe9tails de l'application Logto :"]}),"\n",(0,s.jsx)(i.A,{children:`http://${o.Ip}/Callback`}),"\n",(0,s.jsxs)(n.p,{children:["Pour configurer l' ",(0,s.jsx)(n.strong,{children:"URI de redirection apr\xe8s d\xe9connexion Logto"}),", ajoutez l'URI suivante \xe0 la liste des \"URIs de redirection apr\xe8s d\xe9connexion\" sur la page des d\xe9tails de l'application Logto :"]}),"\n",(0,s.jsx)(i.A,{children:`http://${o.Ip}/SignedOutCallback`}),"\n",(0,s.jsx)(n.h4,{id:"modifier-les-chemins-par-d\xe9faut",children:"Modifier les chemins par d\xe9faut"}),"\n",(0,s.jsxs)(n.p,{children:["L' ",(0,s.jsx)(n.strong,{children:"URI de redirection Logto"})," a un chemin par d\xe9faut de ",(0,s.jsx)(n.code,{children:"/Callback"}),", et l' ",(0,s.jsx)(n.strong,{children:"URI de redirection apr\xe8s d\xe9connexion Logto"})," a un chemin par d\xe9faut de ",(0,s.jsx)(n.code,{children:"/SignedOutCallback"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Vous pouvez les laisser tels quels s'il n'y a pas de besoin particulier. Si vous souhaitez les modifier, vous pouvez d\xe9finir la propri\xe9t\xe9 ",(0,s.jsx)(n.code,{children:"CallbackPath"})," et ",(0,s.jsx)(n.code,{children:"SignedOutCallbackPath"})," pour ",(0,s.jsx)(n.code,{children:"LogtoOptions"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // Autres configurations...\n  // highlight-start\n  options.CallbackPath = "/Foo";\n  options.SignedOutCallbackPath = "/Bar";\n  // highlight-end\n});\n'})}),"\n",(0,s.jsx)(n.p,{children:"N'oubliez pas de mettre \xe0 jour la valeur sur la page des d\xe9tails de l'application Logto en cons\xe9quence."})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},71140:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Parfois, vous pouvez avoir besoin de r\xe9cup\xe9rer le jeton d\u2019acc\xe8s (Access token) ou le jeton d\u2019identifiant (ID token) pour des appels API. Vous pouvez utiliser la m\xe9thode ",(0,s.jsx)(n.code,{children:"GetTokenAsync"})," pour r\xe9cup\xe9rer les jetons :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessToken);\nvar idToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.IdToken);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Pas besoin de vous soucier de l'expiration du jeton, le middleware d'authentification (Authentication) actualisera automatiquement les jetons lorsque cela sera n\xe9cessaire."}),"\n",(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsx)(n.p,{children:"Bien que le middleware d'authentification (Authentication) actualise automatiquement les jetons, les revendications (Claims) dans l'objet utilisateur ne seront pas mises \xe0 jour en raison de la limitation du gestionnaire d'authentification OpenID Connect sous-jacent.\nCela peut \xeatre r\xe9solu une fois que nous aurons \xe9crit notre propre gestionnaire d'authentification."})}),"\n",(0,s.jsxs)(n.p,{children:["Notez que le jeton d\u2019acc\xe8s (Access token) ci-dessus est un jeton opaque (Opaque token) pour le point de terminaison userinfo dans OpenID Connect, qui n'est pas un jeton JWT. Si vous avez sp\xe9cifi\xe9 la ressource API, vous devez utiliser ",(0,s.jsx)(n.code,{children:"LogtoParameters.Tokens.AccessTokenForResource"})," pour r\xe9cup\xe9rer le jeton d\u2019acc\xe8s (Access token) pour la ressource API :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",children:"var accessToken = await HttpContext.GetTokenAsync(LogtoParameters.Tokens.AccessTokenForResource);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ce jeton sera un jeton JWT avec la ressource API comme audience (Audience)."})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},26554:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>d});var s=t(86070),r=t(15658),i=t(98601),o=t(13195),c=t(17646);const d=[{value:"Afficher les informations de l&#39;utilisateur",id:"afficher-les-informations-de-lutilisateur",level:3},{value:"Demander des revendications suppl\xe9mentaires",id:"demander-des-revendications-suppl\xe9mentaires",level:3},...i.RM,...c.RM,{value:"Revendications n\xe9cessitant une requ\xeate r\xe9seau",id:"revendications-n\xe9cessitant-une-requ\xeate-r\xe9seau",level:3},{value:"Port\xe9es et revendications",id:"port\xe9es-et-revendications",level:3},...o.RM];function a(e){const n={a:"a",code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h3,{id:"afficher-les-informations-de-lutilisateur",children:"Afficher les informations de l'utilisateur"}),"\n",(0,s.jsxs)(n.p,{children:["Pour savoir si l'utilisateur est authentifi\xe9, vous pouvez v\xe9rifier la propri\xe9t\xe9 ",(0,s.jsx)(n.code,{children:"User.Identity?.IsAuthenticated"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Pour obtenir les revendications du profil utilisateur, vous pouvez utiliser la propri\xe9t\xe9 ",(0,s.jsx)(n.code,{children:"User.Claims"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obtenir l'ID de l'utilisateur\nvar userId = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Subject)?.Value;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Voir ",(0,s.jsx)(n.a,{href:"https://github.com/logto-io/csharp/blob/master/src/Logto.AspNetCore.Authentication/LogtoParameters.cs",children:(0,s.jsx)(n.code,{children:"LogtoParameters.Claims"})})," pour la liste des noms de revendications et leurs significations."]}),"\n",(0,s.jsx)(n.h3,{id:"demander-des-revendications-suppl\xe9mentaires",children:"Demander des revendications suppl\xe9mentaires"}),"\n",(0,s.jsx)(i.Ay,{method:"User.Claims"}),"\n",(0,s.jsx)(c.Ay,{}),"\n",(0,s.jsxs)(n.p,{children:["Pour demander des port\xe9es suppl\xe9mentaires, vous pouvez configurer la propri\xe9t\xe9 ",(0,s.jsx)(n.code,{children:"Scopes"})," dans l'objet ",(0,s.jsx)(n.code,{children:"options"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Scopes = new string[] {\n    LogtoParameters.Scopes.Email,\n    LogtoParameters.Scopes.Phone\n  }\n  // highlight-end\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Ensuite, vous pouvez acc\xe9der aux revendications suppl\xe9mentaires via ",(0,s.jsx)(n.code,{children:"User.Claims"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Controllers/HomeController.cs"',children:"var claims = User.Claims;\n\n// Obtenir l'email de l'utilisateur\nvar email = claims.FirstOrDefault(c => c.Type == LogtoParameters.Claims.Email)?.Value;\n"})}),"\n",(0,s.jsx)(n.h3,{id:"revendications-n\xe9cessitant-une-requ\xeate-r\xe9seau",children:"Revendications n\xe9cessitant une requ\xeate r\xe9seau"}),"\n",(0,s.jsxs)(n.p,{children:["Pour \xe9viter de surcharger l'objet utilisateur, certaines revendications n\xe9cessitent des requ\xeates r\xe9seau pour \xeatre r\xe9cup\xe9r\xe9es. Par exemple, la revendication custom_data n'est pas incluse dans l'objet utilisateur m\xeame si elle est demand\xe9e dans les port\xe9es. Pour r\xe9cup\xe9rer ces revendications, vous pouvez d\xe9finir ",(0,s.jsx)(n.code,{children:"GetClaimsFromUserInfoEndpoint"})," sur ",(0,s.jsx)(n.code,{children:"true"})," dans l'objet ",(0,s.jsx)(n.code,{children:"options"})," :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:"builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.GetClaimsFromUserInfoEndpoint = true;\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"port\xe9es-et-revendications",children:"Port\xe9es et revendications"}),"\n",(0,s.jsx)(o.Ay,{})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},63325:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"La d\xe9monstration suivante est construite sur .NET Core 8.0. Le SDK est compatible avec .NET 6.0 ou sup\xe9rieur."}),"\n",(0,s.jsxs)(n.li,{children:["Les projets d'exemple .NET Core sont disponibles dans le ",(0,s.jsx)(n.a,{href:"https://github.com/logto-io/csharp",children:"r\xe9pertoire GitHub"}),"."]}),"\n"]})})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},98557:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>i});var s=t(86070),r=t(15658);const i=[];function o(e){const n={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Ajoutez le package NuGet \xe0 votre projet :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"dotnet add package Logto.AspNetCore.Authentication\n"})})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},30089:(e,n,t)=>{t.d(n,{Ay:()=>d,RM:()=>o});var s=t(86070),r=t(15658),i=t(91246);const o=[...i.RM];function c(e){const n={li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Avant de continuer, il y a deux termes confus dans le middleware d'authentification .NET Core que nous devons clarifier :"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"CallbackPath"})," : L'URI vers laquelle Logto redirigera l'utilisateur apr\xe8s que l'utilisateur se soit connect\xe9 (l'\"URI de redirection\" dans Logto)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RedirectUri"})," : L'URI vers laquelle sera redirig\xe9 apr\xe8s que les actions n\xe9cessaires ont \xe9t\xe9 prises dans le middleware d'Authentification (Authentication) Logto."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Le processus de connexion peut \xeatre illustr\xe9 comme suit :"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\n  subgraph Votre application\n    A\n    C\n    D\n  end\n  subgraph Logto\n    B\n  end\n  A(Chemin de connexion) --\x3e|Rediriger vers| B(Logto)\n  B --\x3e|Rediriger vers| C(CallbackPath)\n  C --\x3e|Rediriger vers| D(RedirectUri)"}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsxs)(n.p,{children:["De m\xeame, .NET Core a \xe9galement ",(0,s.jsx)(n.strong,{children:"SignedOutCallbackPath"})," et ",(0,s.jsx)(n.strong,{children:"RedirectUri"})," pour le flux de d\xe9connexion."]}),"\n",(0,s.jsx)(n.p,{children:"Pour plus de clart\xe9, nous les appellerons comme suit :"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Terme que nous utilisons"}),(0,s.jsx)(n.th,{children:"Terme .NET Core"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"URI de redirection Logto"}),(0,s.jsx)(n.td,{children:"CallbackPath"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"URI de redirection post-d\xe9connexion Logto"}),(0,s.jsx)(n.td,{children:"SignedOutCallbackPath"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"URI de redirection de l'application"}),(0,s.jsx)(n.td,{children:"RedirectUri"})]})]})]}),"\n",(0,s.jsx)(i.Ay,{})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},80791:(e,n,t)=>{t.d(n,{Ay:()=>p,RM:()=>l});var s=t(86070),r=t(15658),i=t(71307);function o(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-next-line\n  options.Resource = "https://<votre-indicateur-de-ressource-api>";\n});\n'})})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}function d(e){const n={code:"code",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-csharp",metastring:'title="Program.cs"',children:'builder.Services.AddLogtoAuthentication(options =>\n{\n  // ...\n  // highlight-start\n  options.Resource = "https://shopping.your-app.com/api";\n  options.Scopes = new string[] {\n    "openid",\n    "profile",\n    "offline_access",\n    "read",\n    "write"\n  };\n  // highlight-end\n});\n'})})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}const l=[...i.RM];function u(e){return(0,s.jsx)(i.Ay,{configResourcesCode:(0,s.jsx)(c,{}),configResourcesWithScopesCode:(0,s.jsx)(a,{})})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u()}}}]);