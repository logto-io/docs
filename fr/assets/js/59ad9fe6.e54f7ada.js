"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[17426],{16230:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(86070),i=t(15658);const s=[];function o(e){const n={p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Passons \xe0 la page des d\xe9tails de l'application de Logto Console. Ajoutez une URI de redirection ",(0,r.jsx)("code",{children:e.redirectUri}),' et cliquez sur "Enregistrer les modifications".']}),"\n",(0,r.jsx)("img",{alt:"URI de redirection dans Logto Console",src:e.figureSrc,width:"600px"})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},39038:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(86070),i=t(15658);const s=[];function o(e){const{Url:n}={...(0,i.R)(),...e.components};return n||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Url",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{href:"/end-user-flows",children:" Flux utilisateur final : flux d'authentification, flux de compte et flux d'organisation "}),"\n",(0,r.jsx)(n,{href:"/connectors",children:" Configurer les connecteurs "}),"\n",(0,r.jsx)(n,{href:"/authorization/api-resources/protect-your-api",children:" Prot\xe9ger votre API "})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},65513:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(86070),i=t(15658);const s=t.p+"assets/images/app-secret-2b2c12ae8557fbcf3b283bf86f3ac6db.png",o=[];function l(e){const n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)("p",{children:(0,r.jsx)(n.p,{children:"Vous pouvez trouver et copier le \"Secret de l'application\" depuis la page des d\xe9tails de\nl'application dans la Console d'administration :"})}),(0,r.jsx)("img",{alt:"Secret de l'application",src:s,width:"586px"})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},91246:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(86070),i=t(15658);const s=[];function o(e){const n={a:"a",li:"li",ol:"ol",p:"p",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Concernant la connexion bas\xe9e sur la redirection"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Ce processus d'authentification (Authentication) suit le protocole ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html",children:"OpenID Connect (OIDC)"}),", et Logto applique des mesures de s\xe9curit\xe9 strictes pour prot\xe9ger la connexion utilisateur."]}),"\n",(0,r.jsx)(n.li,{children:"Si vous avez plusieurs applications, vous pouvez utiliser le m\xeame fournisseur d\u2019identit\xe9 (Logto). Une fois que l'utilisateur se connecte \xe0 une application, Logto compl\xe9tera automatiquement le processus de connexion lorsque l'utilisateur acc\xe8de \xe0 une autre application."}),"\n"]}),(0,r.jsxs)(n.p,{children:["Pour en savoir plus sur la logique et les avantages de la connexion bas\xe9e sur la redirection, consultez ",(0,r.jsx)(n.a,{href:"/concepts/sign-in-experience",children:"Exp\xe9rience de connexion Logto expliqu\xe9e"}),"."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},88906:(e,n,t)=>{t.d(n,{Ay:()=>l,RM:()=>s});var r=t(86070),i=t(15658);const s=[];function o(e){const n={a:"a",admonition:"admonition",code:"code",hr:"hr",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Voici la liste des Port\xe9es (Scopes) prises en charge et les Revendications (Claims) correspondantes :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"openid"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sub"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"L'identifiant unique de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"profile"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Le nom complet de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"username"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Le nom d'utilisateur de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"picture"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"URL de la photo de profil de l'utilisateur final. Cette URL DOIT faire r\xe9f\xe9rence \xe0 un fichier image (par exemple, un fichier image PNG, JPEG ou GIF), plut\xf4t qu'\xe0 une page Web contenant une image. Notez que cette URL DOIT sp\xe9cifiquement r\xe9f\xe9rencer une photo de profil de l'utilisateur final adapt\xe9e \xe0 l'affichage lors de la description de l'utilisateur final, plut\xf4t qu'une photo arbitraire prise par l'utilisateur final."}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"created_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Heure \xe0 laquelle l'utilisateur final a \xe9t\xe9 cr\xe9\xe9. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"updated_at"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"Heure \xe0 laquelle les informations de l'utilisateur final ont \xe9t\xe9 mises \xe0 jour pour la derni\xe8re fois. Le temps est repr\xe9sent\xe9 comme le nombre de millisecondes depuis l'\xe9poque Unix (1970-01-01T00:00:00Z)."}),(0,r.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["D'autres ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#StandardClaims",children:"revendications standard"})," incluent ",(0,r.jsx)(n.code,{children:"family_name"}),", ",(0,r.jsx)(n.code,{children:"given_name"}),", ",(0,r.jsx)(n.code,{children:"middle_name"}),", ",(0,r.jsx)(n.code,{children:"nickname"}),", ",(0,r.jsx)(n.code,{children:"preferred_username"}),", ",(0,r.jsx)(n.code,{children:"profile"}),", ",(0,r.jsx)(n.code,{children:"website"}),", ",(0,r.jsx)(n.code,{children:"gender"}),", ",(0,r.jsx)(n.code,{children:"birthdate"}),", ",(0,r.jsx)(n.code,{children:"zoneinfo"}),", et ",(0,r.jsx)(n.code,{children:"locale"})," seront \xe9galement incluses dans la port\xe9e ",(0,r.jsx)(n.code,{children:"profile"})," sans avoir besoin de demander le point de terminaison userinfo. Une diff\xe9rence par rapport aux revendications ci-dessus est que ces revendications ne seront renvoy\xe9es que lorsque leurs valeurs ne sont pas vides, tandis que les revendications ci-dessus renverront ",(0,r.jsx)(n.code,{children:"null"})," si les valeurs sont vides."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Contrairement aux revendications standard, les revendications ",(0,r.jsx)(n.code,{children:"created_at"})," et ",(0,r.jsx)(n.code,{children:"updated_at"})," utilisent des millisecondes au lieu de secondes."]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"email"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"L'adresse e-mail de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"email_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si l'adresse e-mail a \xe9t\xe9 v\xe9rifi\xe9e"}),(0,r.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"phone"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{children:"Le num\xe9ro de t\xe9l\xe9phone de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"phone_number_verified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"Si le num\xe9ro de t\xe9l\xe9phone a \xe9t\xe9 v\xe9rifi\xe9"}),(0,r.jsx)(n.td,{children:"Non"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"address"})})}),"\n",(0,r.jsxs)(n.p,{children:["Veuillez vous r\xe9f\xe9rer \xe0 ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#AddressClaim",children:"OpenID Connect Core 1.0"})," pour les d\xe9tails de la revendication d'adresse."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"custom_data"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"custom_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Les donn\xe9es personnalis\xe9es de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Oui"})]})})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"identities"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object"})}),(0,r.jsx)(n.td,{children:"Les identit\xe9s li\xe9es de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Oui"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sso_identities"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})}),(0,r.jsx)(n.td,{children:"Les identit\xe9s SSO li\xe9es de l'utilisateur"}),(0,r.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organizations"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organizations"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{children:"Les identifiants d'organisation auxquels l'utilisateur appartient"}),(0,r.jsx)(n.td,{children:"Non"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_data"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"object[]"})}),(0,r.jsx)(n.td,{children:"Les donn\xe9es d'organisation auxquelles l'utilisateur appartient"}),(0,r.jsx)(n.td,{children:"Oui"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"urn:logto:scope:organization_roles"})})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Nom de la revendication"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Besoin d'userinfo ?"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"organization_roles"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsxs)(n.td,{children:["Les r\xf4les d'organisation auxquels l'utilisateur appartient avec le format ",(0,r.jsx)(n.code,{children:"<organization_id>:<role_name>"})]}),(0,r.jsx)(n.td,{children:"Non"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:['En consid\xe9rant la performance et la taille des donn\xe9es, si "Besoin d\'userinfo ?" est "Oui", cela signifie que la revendication n\'appara\xeetra pas dans le Jeton d\u2019identifiant (ID token), mais sera renvoy\xe9e dans la r\xe9ponse du ',(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"point de terminaison userinfo"}),"."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},13195:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(86070),i=t(15658),s=t(88906);const o=[...s.RM];function l(e){const n={a:"a",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Logto utilise les conventions de ",(0,r.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#Claims",children:"port\xe9es et revendications"})," OIDC pour d\xe9finir les Port\xe9es et Revendications pour r\xe9cup\xe9rer les informations utilisateur \xe0 partir du Jeton d\u2019identifiant et du point de terminaison OIDC ",(0,r.jsx)("a",{href:"https://openid.net/specs/openid-connect-core-1_0.html#UserInfo",children:"userinfo"}),'. Les termes "Port\xe9e" et "Revendication" proviennent des sp\xe9cifications OAuth 2.0 et OpenID Connect (OIDC).']}),"\n","\n",e.configScopesCode&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"En bref, lorsque vous demandez une Port\xe9e, vous obtiendrez les Revendications correspondantes dans les informations utilisateur. Par exemple, si vous demandez la port\xe9e `email`, vous obtiendrez les donn\xe9es `email` et `email_verified` de l'utilisateur."}),(0,r.jsx)("p",{children:"Par d\xe9faut, le SDK Logto demandera toujours trois Port\xe9es : `openid`, `profile` et `offline_access`, et il n'est pas possible de supprimer ces Port\xe9es par d\xe9faut. Mais vous pouvez ajouter plus de Port\xe9es lors de la configuration de Logto :"}),e.configScopesCode]}),"\n",(0,r.jsx)(s.Ay,{})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},61710:(e,n,t)=>{t.d(n,{Ay:()=>c,Ip:()=>s,RM:()=>o});var r=t(86070),i=t(15658);const s="http://localhost:3000/",o=[];function l(e){const n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Dans les extraits de code suivants, nous supposons que votre application fonctionne sur ",(0,r.jsx)("code",{children:s}),"."]})})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},88844:(e,n,t)=>{t.d(n,{Ay:()=>c,RM:()=>o});var r=t(86070),i=t(15658),s=t(91246);const o=[...s.RM];function l(e){const n={hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Avant de plonger dans les d\xe9tails, voici un aper\xe7u rapide de l'Exp\xe9rience utilisateur. Le processus de connexion peut \xeatre simplifi\xe9 comme suit :"}),"\n",(0,r.jsx)(n.mermaid,{value:"graph LR\n    A(Votre application) --\x3e|1. Lancer la connexion| B(Logto)\n    B --\x3e|2. Terminer la connexion| A"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Votre application lance la m\xe9thode de connexion."}),"\n",(0,r.jsx)(n.li,{children:"L'utilisateur est redirig\xe9 vers la page de connexion Logto. Pour les applications natives, le navigateur syst\xe8me est ouvert."}),"\n",(0,r.jsx)(n.li,{children:"L'utilisateur se connecte et est redirig\xe9 vers votre application (configur\xe9e comme l'URI de redirection)."}),"\n"]}),"\n",(0,r.jsx)(s.Ay,{}),"\n",(0,r.jsx)(n.hr,{})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},63163:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>q,contentTitle:()=>_,default:()=>z,frontMatter:()=>L,metadata:()=>r,toc:()=>w});const r=JSON.parse('{"id":"quick-starts/framework/next-auth/README","title":"Ajoutez l\u2019authentification \xe0 votre application Next Auth","description":"Ce guide vous montrera comment int\xe9grer Logto dans votre application Next.js avec Next Auth.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","sourceDirName":"quick-starts/framework/next-auth","slug":"/quick-starts/next-auth","permalink":"/fr/quick-starts/next-auth","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/fr/docusaurus-plugin-content-docs/current/quick-starts/framework/next-auth/README.mdx","tags":[],"version":"current","frontMatter":{"slug":"/quick-starts/next-auth","sidebar_label":"Next Auth","sidebar_custom_props":{"logoFilename":"next-auth.svg","description":"Authentification pour Next.js."}},"sidebar":"quickStartSidebar","previous":{"title":"Next.js (App Router)","permalink":"/fr/quick-starts/next-app-router"},"next":{"title":"Nuxt","permalink":"/fr/quick-starts/nuxt"}}');var i=t(86070),s=t(15658),o=t(39038),l=t(78551),c=t(77501);const d=t.p+"assets/images/next-auth-redirect-uri-8aeb945fa0bdb8fab0929add43786b5c.png";var a=t(16230),u=t(65513),h=t(61710),p=t(88844);const x=[...p.RM,...h.RM,{value:"Configurer l&#39;URI de redirection de connexion",id:"configurer-luri-de-redirection-de-connexion",level:4},...a.RM,{value:"Configurer le fournisseur Next Auth",id:"configurer-le-fournisseur-next-auth",level:4},...u.RM];function j(e){const n={code:"code",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Ay,{}),"\n",(0,i.jsx)(h.Ay,{}),"\n",(0,i.jsx)(n.h4,{id:"configurer-luri-de-redirection-de-connexion",children:"Configurer l'URI de redirection de connexion"}),"\n",(0,i.jsx)(a.Ay,{figureSrc:d,redirectUri:"http://localhost:3000/api/auth/callback/logto"}),"\n",(0,i.jsx)(n.h4,{id:"configurer-le-fournisseur-next-auth",children:"Configurer le fournisseur Next Auth"}),"\n",(0,i.jsx)(u.Ay,{}),"\n",(0,i.jsxs)(n.p,{children:["Modifiez votre configuration de route API de Next Auth, si vous utilisez Pages Router, le fichier est dans ",(0,i.jsx)(n.code,{children:"pages/api/auth/[...nextauth].js"}),", si vous utilisez App Router, le fichier est dans ",(0,i.jsx)(n.code,{children:"app/api/auth/[...nextauth]/route.ts"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Voici un exemple de App Router :"}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsxs)(l.A,{value:"v5",label:"Next Auth v5",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import NextAuth from 'next-auth';\n\nexport const {\n  handlers: { GET, POST },\n  signIn,\n  signOut,\n  auth,\n} = NextAuth({\n  providers: [\n    {\n      id: 'logto',\n      name: 'Logto',\n      type: 'oidc',\n      // Vous pouvez obtenir la valeur de l'\xe9metteur depuis la page D\xe9tails de l'application Logto,\n      // dans le champ \"Endpoint de l'\xe9metteur\"\n      issuer: 'https://xxxx.logto.app/oidc',\n      clientId: '<logto-app-id>',\n      clientSecret: '<logto-app-secret>',\n      authorization: {\n        params: { scope: 'openid offline_access profile email' },\n      },\n      profile(profile) {\n        // Vous pouvez personnaliser le mappage du profil utilisateur ici\n        return {\n          id: profile.sub,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.picture,\n        };\n      },\n    },\n  ],\n});\n"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Remplacez l'URL ",(0,i.jsx)(n.code,{children:"issuer"}),' par le "Endpoint de l\'\xe9metteur" de votre application Logto.']}),"\n",(0,i.jsxs)(n.li,{children:["Remplacez le ",(0,i.jsx)(n.code,{children:"clientId"})," et le ",(0,i.jsx)(n.code,{children:"clientSecret"})," par l'ID et le secret de votre application Logto."]}),"\n",(0,i.jsxs)(n.li,{children:["Personnalisez la fonction ",(0,i.jsx)(n.code,{children:"profile"})," pour mapper le profil utilisateur \xe0 l'objet utilisateur Next Auth, le mappage par d\xe9faut est montr\xe9 dans l'exemple."]}),"\n"]})]}),(0,i.jsxs)(l.A,{value:"v4",label:"Next Auth v4",children:[(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import NextAuth from 'next-auth';\n\nconst handler = NextAuth({\n  providers: [\n    {\n      id: 'logto',\n      name: 'Logto',\n      type: 'oauth',\n      // Vous pouvez obtenir l'URL bien connue depuis la page D\xe9tails de l'application Logto,\n      // dans le champ \"Endpoint de configuration du fournisseur OpenID\"\n      wellKnown: 'https://xxxx.logto.app/oidc/.well-known/openid-configuration',\n      authorization: { params: { scope: 'openid offline_access profile email' } },\n      clientId: '<logto-app-id>',\n      clientSecret: '<logto-app-secret>',\n      client: {\n        id_token_signed_response_alg: 'ES384',\n      },\n      profile(profile) {\n        // Vous pouvez personnaliser le mappage du profil utilisateur ici\n        return {\n          id: profile.sub,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.picture,\n        };\n      },\n    },\n  ],\n});\n\nexport { handler as GET, handler as POST };\n"})}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Remplacez l'URL ",(0,i.jsx)(n.code,{children:"wellKnown"}),' par le "Endpoint de configuration du fournisseur OpenID" de votre application Logto.']}),"\n",(0,i.jsxs)(n.li,{children:["Remplacez le ",(0,i.jsx)(n.code,{children:"clientId"})," et le ",(0,i.jsx)(n.code,{children:"clientSecret"})," par l'ID et le secret de votre application Logto."]}),"\n",(0,i.jsxs)(n.li,{children:["Personnalisez la fonction ",(0,i.jsx)(n.code,{children:"profile"})," pour mapper le profil utilisateur \xe0 l'objet utilisateur Next Auth, le mappage par d\xe9faut est montr\xe9 dans l'exemple."]}),"\n",(0,i.jsxs)(n.li,{children:["N'oubliez pas de d\xe9finir le ",(0,i.jsx)(n.code,{children:"id_token_signed_response_alg"})," sur ",(0,i.jsx)(n.code,{children:"ES384"}),"."]}),"\n"]})]})]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(j,{...e})}):j(e)}function f(e){const n={a:"a",admonition:"admonition",li:"li",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Dans ce guide, nous supposons que vous avez configur\xe9 Next Auth dans votre projet Next.js. Si ce n'est pas le cas, consultez la ",(0,i.jsx)(n.a,{href:"https://next-auth.js.org/getting-started/introduction",children:"documentation de Next Auth"})," pour commencer."]}),"\n"]})})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}var v=t(13195);function b(e){const n={code:"code",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"const handler = NextAuth({\n  providers: [\n    {\n      id: 'logto',\n      name: 'Logto',\n      // ... other options\n      authorization: { params: { scope: 'openid offline_access profile email' } },\n      // ... other options\n    },\n  ],\n});\n"})})}function A(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}const y=[...v.RM];function N(e){return(0,i.jsx)(v.Ay,{configScopesCode:(0,i.jsx)(A,{})})}function R(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(N,{...e})}):N()}const L={slug:"/quick-starts/next-auth",sidebar_label:"Next Auth",sidebar_custom_props:{logoFilename:"next-auth.svg",description:"Authentification pour Next.js."}},_="Ajoutez l\u2019authentification \xe0 votre application Next Auth",q={},w=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Int\xe9gration",id:"int\xe9gration",level:2},{value:"Configurer le fournisseur Next Auth",id:"configurer-le-fournisseur-next-auth",level:3},...x,{value:"Point de contr\xf4le",id:"point-de-contr\xf4le",level:3},{value:"Port\xe9es et revendications",id:"port\xe9es-et-revendications",level:2},...y,{value:"Lectures compl\xe9mentaires",id:"lectures-compl\xe9mentaires",level:2},...o.RM];function I(e){const n={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ajoutez-lauthentification-\xe0-votre-application-next-auth",children:"Ajoutez l\u2019authentification \xe0 votre application Next Auth"})}),"\n",(0,i.jsxs)(n.p,{children:["Ce guide vous montrera comment int\xe9grer Logto dans votre application Next.js avec ",(0,i.jsx)(n.a,{href:"https://next-auth.js.org/",children:"Next Auth"}),"."]}),"\n",(0,i.jsx)(g,{}),"\n",(0,i.jsx)(n.h2,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Un compte ",(0,i.jsx)(n.a,{href:"https://cloud.logto.io",children:"Logto Cloud"})," ou un ",(0,i.jsx)(n.a,{href:"/introduction/set-up-logto-oss",children:"Logto auto-h\xe9berg\xe9"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Une application traditionnelle Logto cr\xe9\xe9e."}),"\n",(0,i.jsxs)(n.li,{children:["Un projet Next.js avec Next Auth, consultez la ",(0,i.jsx)(n.a,{href:"https://next-auth.js.org/getting-started/introduction",children:"documentation Next Auth"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"int\xe9gration",children:"Int\xe9gration"}),"\n",(0,i.jsx)(n.h3,{id:"configurer-le-fournisseur-next-auth",children:"Configurer le fournisseur Next Auth"}),"\n",(0,i.jsx)(m,{}),"\n",(0,i.jsx)(n.h3,{id:"point-de-contr\xf4le",children:"Point de contr\xf4le"}),"\n",(0,i.jsx)(n.p,{children:"Maintenant, vous pouvez tester votre application pour voir si l'authentification fonctionne comme pr\xe9vu."}),"\n",(0,i.jsx)(n.h2,{id:"port\xe9es-et-revendications",children:"Port\xe9es et revendications"}),"\n",(0,i.jsx)(R,{}),"\n",(0,i.jsx)(n.h2,{id:"lectures-compl\xe9mentaires",children:"Lectures compl\xe9mentaires"}),"\n",(0,i.jsx)(o.Ay,{})]})}function z(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(I,{...e})}):I(e)}},78551:(e,n,t)=>{t.d(n,{A:()=>o});t(30758);var r=t(13526);const i={tabItem:"tabItem_PGP0"};var s=t(86070);function o(e){let{children:n,hidden:t,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,o),hidden:t,children:n})}},77501:(e,n,t)=>{t.d(n,{A:()=>y});var r=t(30758),i=t(13526),s=t(65052),o=t(25557),l=t(77469),c=t(50873),d=t(62230),a=t(60196);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:i}}=e;return{value:n,label:t,attributes:r,default:i}}))}(t);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:t}=e;const i=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,c.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function j(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,s=h(e),[o,c]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[d,u]=x({queryString:t,groupId:i}),[j,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,s]=(0,a.Dv)(t);return[i,(0,r.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:i}),f=(()=>{const e=d??j;return p({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{f&&c(f)}),[f]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),m(e)}),[u,m,s]),tabValues:s}}var m=t(13887);const f={tabList:"tabList_CGfx",tabItem:"tabItem_JX1E"};var g=t(86070);function v(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.a_)(),a=e=>{const n=e.currentTarget,t=c.indexOf(n),i=l[t].value;i!==r&&(d(n),o(i))},u=e=>{let n=null;switch(e.key){case"Enter":a(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>c.push(e),onKeyDown:u,onClick:a,...s,className:(0,i.A)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:s}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function A(e){const n=j(e);return(0,g.jsxs)("div",{className:(0,i.A)("tabs-container",f.tabList),children:[(0,g.jsx)(v,{...n,...e}),(0,g.jsx)(b,{...n,...e})]})}function y(e){const n=(0,m.A)();return(0,g.jsx)(A,{...e,children:u(e.children)},String(n))}},15658:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var r=t(30758);const i={},s=r.createContext(i);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);