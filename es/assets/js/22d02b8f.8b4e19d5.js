"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[53629],{86453:(e,o,a)=>{a.r(o),a.d(o,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"logto-oss/file-storage-provider","title":"Proveedor de almacenamiento de archivos","description":"Por defecto, Logto Console utiliza una entrada de texto para URLs de archivos est\xe1ticos como avatares. Para habilitar una experiencia de carga de archivos m\xe1s intuitiva con arrastrar y soltar, necesitas configurar un proveedor de almacenamiento.","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/logto-oss/file-storage-provider.mdx","sourceDirName":"logto-oss","slug":"/logto-oss/file-storage-provider","permalink":"/es/logto-oss/file-storage-provider","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/logto-oss/file-storage-provider.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"Cach\xe9 central","permalink":"/es/logto-oss/central-cache"},"next":{"title":"Desarrolla tu conector","permalink":"/es/logto-oss/develop-your-connector/"}}');var c=a(86070),r=a(15658);const s={sidebar_position:6},i="Proveedor de almacenamiento de archivos",l={},d=[{value:"Azure Storage",id:"azure-storage",level:2},{value:"Requisitos previos",id:"requisitos-previos",level:3},{value:"Configuraci\xf3n usando CLI",id:"configuraci\xf3n-usando-cli",level:3},{value:"<code>connectionString</code>",id:"connectionstring",level:4},{value:"<code>container</code>",id:"container",level:4},{value:"<code>publicUrl</code>",id:"publicurl",level:4},{value:"S3 Storage",id:"s3-storage",level:2},{value:"Requisitos previos",id:"requisitos-previos-1",level:3},{value:"Configuraci\xf3n usando CLI",id:"configuraci\xf3n-usando-cli-1",level:3},{value:"<code>accessKeyId</code>",id:"accesskeyid",level:4},{value:"<code>accessSecretKey</code>",id:"accesssecretkey",level:4},{value:"<code>bucket</code>",id:"bucket",level:4},{value:"<code>region</code>",id:"region",level:4},{value:"<code>endpoint</code>",id:"endpoint",level:4},{value:"<code>publicUrl</code>",id:"publicurl-1",level:4},{value:"Google Cloud Storage",id:"google-cloud-storage",level:2},{value:"Requisitos previos",id:"requisitos-previos-2",level:3},{value:"Obtener el archivo de clave",id:"obtener-el-archivo-de-clave",level:3},{value:"A\xf1adir el archivo de clave a Logto",id:"a\xf1adir-el-archivo-de-clave-a-logto",level:3},{value:"Configuraci\xf3n usando CLI",id:"configuraci\xf3n-usando-cli-2",level:3},{value:"<code>projectId</code>",id:"projectid",level:4},{value:"<code>keyFilename</code>",id:"keyfilename",level:4},{value:"<code>bucketName</code>",id:"bucketname",level:4},{value:"<code>publicUrl</code>",id:"publicurl-2",level:4}];function t(e){const o={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.header,{children:(0,c.jsx)(o.h1,{id:"proveedor-de-almacenamiento-de-archivos",children:"Proveedor de almacenamiento de archivos"})}),"\n",(0,c.jsx)(o.p,{children:"Por defecto, Logto Console utiliza una entrada de texto para URLs de archivos est\xe1ticos como avatares. Para habilitar una experiencia de carga de archivos m\xe1s intuitiva con arrastrar y soltar, necesitas configurar un proveedor de almacenamiento."}),"\n",(0,c.jsx)(o.p,{children:"Logto admite m\xfaltiples proveedores de almacenamiento, incluidos AWS S3 y Azure Storage. Esta gu\xeda te mostrar\xe1 c\xf3mo configurar un proveedor de almacenamiento para Logto."}),"\n",(0,c.jsxs)(o.p,{children:["La configuraci\xf3n se almacena en la tabla ",(0,c.jsx)(o.code,{children:"systems"}),' de la base de datos, pero se recomienda usar el CLI para configurar el proveedor de almacenamiento. Para m\xe1s informaci\xf3n, prueba el comando "help":']}),"\n",(0,c.jsx)(o.pre,{children:(0,c.jsx)(o.code,{className:"language-sh",children:"pnpm logto db system --help\n"})}),"\n",(0,c.jsx)(o.h2,{id:"azure-storage",children:"Azure Storage"}),"\n",(0,c.jsx)(o.p,{children:"Azure Storage es una soluci\xf3n de almacenamiento en la nube potente y escalable que te permite almacenar y gestionar tus datos en la nube. La siguiente gu\xeda te mostrar\xe1 c\xf3mo configurar Azure Storage como proveedor de almacenamiento para Logto."}),"\n",(0,c.jsx)(o.h3,{id:"requisitos-previos",children:"Requisitos previos"}),"\n",(0,c.jsxs)(o.ul,{children:["\n",(0,c.jsx)(o.li,{children:(0,c.jsx)(o.a,{href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview",children:"Cuenta de Azure Storage"})}),"\n"]}),"\n",(0,c.jsx)(o.h3,{id:"configuraci\xf3n-usando-cli",children:"Configuraci\xf3n usando CLI"}),"\n",(0,c.jsx)(o.p,{children:"Ejemplo de uso:"}),"\n",(0,c.jsx)(o.pre,{children:(0,c.jsx)(o.code,{children:'pnpm logto db system set storageProvider \'{"provider":"AzureStorage","connectionString":"DefaultEndpointsProtocol=https;AccountName=logto;AccountKey=oRhfTBHOHiBxxxxxxxxxxxxxxxxZ0se6XROftl/Xrow==;EndpointSuffix=core.windows.net","container":"logto"}\'\n'})}),"\n",(0,c.jsx)(o.h4,{id:"connectionstring",children:(0,c.jsx)(o.code,{children:"connectionString"})}),"\n",(0,c.jsx)(o.p,{children:"Para acceder a Azure Storage, necesitas usar una cadena de conexi\xf3n, que es una cadena de caracteres que contiene la informaci\xf3n necesaria para establecer una conexi\xf3n con tu cuenta de almacenamiento."}),"\n",(0,c.jsxs)(o.p,{children:["Para obtener la cadena de conexi\xf3n, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-configure-connection-string",children:"Azure Storage connection string"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"container",children:(0,c.jsx)(o.code,{children:"container"})}),"\n",(0,c.jsx)(o.p,{children:"El contenedor es un recurso de almacenamiento que almacena blobs. Puedes usar el contenedor para organizar tus blobs y controlar el acceso a tus datos."}),"\n",(0,c.jsxs)(o.p,{children:["Para crear un contenedor, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction#containers",children:"Azure Storage container"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"publicurl",children:(0,c.jsx)(o.code,{children:"publicUrl"})}),"\n",(0,c.jsx)(o.p,{children:"Opcional."}),"\n",(0,c.jsxs)(o.p,{children:['La URL p\xfablica es la URL que se puede usar para acceder al recurso de almacenamiento p\xfablicamente. Si no est\xe1s usando CDN, puedes dejarlo en blanco para usar el "Punto de conexi\xf3n principal" predeterminado de Azure Storage como la URL p\xfablica. Logto obtendr\xe1 este valor de "connectionString" con la ayuda del SDK de Azure. Para aprender m\xe1s sobre el punto de conexi\xf3n principal de tu cuenta de almacenamiento, sigue la documentaci\xf3n oficial de ',(0,c.jsx)(o.a,{href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-account-overview#primary-endpoints",children:"Azure Storage primary endpoint"}),"."]}),"\n",(0,c.jsx)(o.h2,{id:"s3-storage",children:"S3 Storage"}),"\n",(0,c.jsx)(o.p,{children:"S3 Storage es un servicio de almacenamiento en la nube que ofrece almacenamiento de objetos a trav\xe9s de una interfaz de servicio web. La siguiente gu\xeda te mostrar\xe1 c\xf3mo configurar S3 Storage como proveedor de almacenamiento para Logto."}),"\n",(0,c.jsx)(o.h3,{id:"requisitos-previos-1",children:"Requisitos previos"}),"\n",(0,c.jsxs)(o.ul,{children:["\n",(0,c.jsxs)(o.li,{children:[(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-buckets.html",children:"Cuenta de S3 Storage"})," u otro servicio de almacenamiento compatible con S3, como ",(0,c.jsx)(o.a,{href:"https://min.io/",children:"MinIO"})]}),"\n"]}),"\n",(0,c.jsx)(o.h3,{id:"configuraci\xf3n-usando-cli-1",children:"Configuraci\xf3n usando CLI"}),"\n",(0,c.jsx)(o.p,{children:"Ejemplo de uso:"}),"\n",(0,c.jsx)(o.pre,{children:(0,c.jsx)(o.code,{children:'pnpm logto db system set storageProvider \'{"provider":"S3Storage","accessKeyId":"my-access-key-id","accessSecretKey": "my-secret-access-key","bucket":"logto","endpoint":"https://s3.us-east-2.amazonaws.com"}\'\n'})}),"\n",(0,c.jsx)(o.h4,{id:"accesskeyid",children:(0,c.jsx)(o.code,{children:"accessKeyId"})}),"\n",(0,c.jsxs)(o.p,{children:["El ID de clave de acceso es un identificador para tu cuenta de AWS. Para encontrar tu ID de clave de acceso para tu cuenta de AWS, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey",children:"AWS access key ID"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"accesssecretkey",children:(0,c.jsx)(o.code,{children:"accessSecretKey"})}),"\n",(0,c.jsxs)(o.p,{children:["La clave de acceso secreta se utiliza junto con el ID de clave de acceso para firmar solicitudes program\xe1ticas. Para encontrar tu clave de acceso secreta para tu cuenta de AWS, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey",children:"AWS access key secret"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"bucket",children:(0,c.jsx)(o.code,{children:"bucket"})}),"\n",(0,c.jsxs)(o.p,{children:["El bucket es un contenedor para objetos almacenados en Amazon S3. Para crear un bucket, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/creating-buckets.html",children:"AWS S3 bucket"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"region",children:(0,c.jsx)(o.code,{children:"region"})}),"\n",(0,c.jsx)(o.p,{children:"Opcional."}),"\n",(0,c.jsxs)(o.p,{children:["La regi\xf3n es la regi\xf3n geogr\xe1fica donde se encuentra el bucket de AWS S3. Si ",(0,c.jsx)(o.code,{children:"endpoint"})," es un punto de conexi\xf3n est\xe1ndar de AWS S3, se puede analizar desde ",(0,c.jsx)(o.code,{children:"endpoint"}),". Para encontrar tu regi\xf3n de AWS S3, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/general/latest/gr/s3.html",children:"AWS S3 region"}),"."]}),"\n",(0,c.jsx)(o.p,{children:"Si est\xe1s utilizando un servicio de almacenamiento compatible con S3, puedes dejar este campo en blanco."}),"\n",(0,c.jsx)(o.h4,{id:"endpoint",children:(0,c.jsx)(o.code,{children:"endpoint"})}),"\n",(0,c.jsx)(o.p,{children:"Opcional."}),"\n",(0,c.jsxs)(o.p,{children:["El punto de conexi\xf3n es la URL que se utiliza para acceder al servicio AWS S3. Para encontrar tu punto de conexi\xf3n de AWS S3, sigue la documentaci\xf3n oficial de ",(0,c.jsx)(o.a,{href:"https://docs.aws.amazon.com/general/latest/gr/s3.html",children:"AWS S3 endpoint"}),"."]}),"\n",(0,c.jsx)(o.p,{children:"Puedes dejar este campo en blanco para usar el punto de conexi\xf3n predeterminado para la regi\xf3n. Si est\xe1s utilizando un servicio de almacenamiento compatible con S3, puedes usar el punto de conexi\xf3n del servicio."}),"\n",(0,c.jsx)(o.h4,{id:"publicurl-1",children:(0,c.jsx)(o.code,{children:"publicUrl"})}),"\n",(0,c.jsx)(o.p,{children:"Opcional."}),"\n",(0,c.jsx)(o.p,{children:"La URL p\xfablica es la URL que se puede usar para acceder al recurso de almacenamiento p\xfablicamente. Si no est\xe1s usando CDN, puedes dejarlo en blanco para usar la URL predeterminada de S3 Storage."}),"\n",(0,c.jsx)(o.h2,{id:"google-cloud-storage",children:"Google Cloud Storage"}),"\n",(0,c.jsx)(o.p,{children:"Google Cloud Storage es un servicio de almacenamiento en la nube que proporciona almacenamiento de objetos a trav\xe9s de una interfaz de servicio web. La siguiente gu\xeda te mostrar\xe1 c\xf3mo configurar Google Cloud Storage como proveedor de almacenamiento para Logto."}),"\n",(0,c.jsx)(o.h3,{id:"requisitos-previos-2",children:"Requisitos previos"}),"\n",(0,c.jsxs)(o.ul,{children:["\n",(0,c.jsx)(o.li,{children:"Un proyecto de Google Cloud"}),"\n",(0,c.jsxs)(o.li,{children:["Un bucket, consulta la documentaci\xf3n oficial de Google Cloud: ",(0,c.jsx)(o.a,{href:"https://cloud.google.com/storage/docs/creating-buckets",children:"https://cloud.google.com/storage/docs/creating-buckets"}),"."]}),"\n"]}),"\n",(0,c.jsx)(o.h3,{id:"obtener-el-archivo-de-clave",children:"Obtener el archivo de clave"}),"\n",(0,c.jsx)(o.p,{children:'Los SDK de Google Cloud com\xfanmente usan un "archivo de clave". Si no est\xe1s familiarizado con Google Cloud, esta podr\xeda ser la parte m\xe1s desafiante. Aqu\xed te mostramos c\xf3mo obtenerlo:'}),"\n",(0,c.jsxs)(o.ol,{children:["\n",(0,c.jsxs)(o.li,{children:["Ve a la p\xe1gina de cuentas de servicio: ",(0,c.jsx)(o.a,{href:"https://console.cloud.google.com/iam-admin/serviceaccounts",children:"https://console.cloud.google.com/iam-admin/serviceaccounts"})]}),"\n",(0,c.jsx)(o.li,{children:"Crea una cuenta, ingresa un nombre y luego contin\xfaa."}),"\n",(0,c.jsx)(o.li,{children:'En el siguiente paso, selecciona el rol de "Storage Object User". Puedes encontrarlo usando el filtro.'}),"\n",(0,c.jsx)(o.li,{children:'Una vez que hayas terminado de crear la cuenta, ve a la p\xe1gina de detalles de la cuenta y selecciona la pesta\xf1a "keys".'}),"\n",(0,c.jsx)(o.li,{children:'Haz clic en "add key", selecciona "create a new key", elige "json" en el di\xe1logo y luego descarga tu archivo json.'}),"\n"]}),"\n",(0,c.jsx)(o.h3,{id:"a\xf1adir-el-archivo-de-clave-a-logto",children:"A\xf1adir el archivo de clave a Logto"}),"\n",(0,c.jsx)(o.p,{children:"Logto debe tener acceso al archivo de clave."}),"\n",(0,c.jsx)(o.p,{children:(0,c.jsx)(o.strong,{children:"Ejecutando en Node.js"})}),"\n",(0,c.jsxs)(o.p,{children:["Copia el archivo a ",(0,c.jsx)(o.code,{children:"/path/to/logto/core"})," y ren\xf3mbralo a ",(0,c.jsx)(o.code,{children:"google-storage-key.json"}),"."]}),"\n",(0,c.jsx)(o.p,{children:(0,c.jsx)(o.strong,{children:"Ejecutando en un contenedor Docker"})}),"\n",(0,c.jsx)(o.p,{children:"Si est\xe1s ejecutando Logto en un contenedor Docker, necesitar\xe1s montar el archivo en el contenedor. Suponiendo que est\xe1s usando Docker Compose, a\xf1ade esto a tu configuraci\xf3n:"}),"\n",(0,c.jsx)(o.pre,{children:(0,c.jsx)(o.code,{className:"language-yaml",children:"volumes:\n  - ./path/to/google-storage-key.json:/etc/logto/core/google-storage-key.json\n"})}),"\n",(0,c.jsxs)(o.p,{children:["Recuerda reemplazar ",(0,c.jsx)(o.code,{children:"/path/to"})," con la ruta real."]}),"\n",(0,c.jsx)(o.h3,{id:"configuraci\xf3n-usando-cli-2",children:"Configuraci\xf3n usando CLI"}),"\n",(0,c.jsx)(o.p,{children:"Ejemplo de uso:"}),"\n",(0,c.jsx)(o.pre,{children:(0,c.jsx)(o.code,{children:'pnpm logto db system set storageProvider \'{"provider":"GoogleStorage","projectId":"psychic-trainer-403801","keyFilename":"google-storage-key.json","bucketName":"logto-test2"}\'\n'})}),"\n",(0,c.jsx)(o.h4,{id:"projectid",children:(0,c.jsx)(o.code,{children:"projectId"})}),"\n",(0,c.jsx)(o.p,{children:"Tu ID de proyecto de Google Cloud."}),"\n",(0,c.jsx)(o.h4,{id:"keyfilename",children:(0,c.jsx)(o.code,{children:"keyFilename"})}),"\n",(0,c.jsxs)(o.p,{children:["El nombre del archivo de clave, si sigues los pasos anteriores, entonces es ",(0,c.jsx)(o.code,{children:"google-storage-key.json"}),"."]}),"\n",(0,c.jsx)(o.h4,{id:"bucketname",children:(0,c.jsx)(o.code,{children:"bucketName"})}),"\n",(0,c.jsx)(o.p,{children:"El nombre del bucket."}),"\n",(0,c.jsx)(o.h4,{id:"publicurl-2",children:(0,c.jsx)(o.code,{children:"publicUrl"})}),"\n",(0,c.jsx)(o.p,{children:"Opcional."}),"\n",(0,c.jsx)(o.p,{children:"La URL p\xfablica es la URL que se puede usar para acceder al recurso de almacenamiento p\xfablicamente. Si no est\xe1s usando CDN, puedes dejarlo en blanco para usar la URL predeterminada de S3 Storage."})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,c.jsx)(o,{...e,children:(0,c.jsx)(t,{...e})}):t(e)}},15658:(e,o,a)=>{a.d(o,{R:()=>s,x:()=>i});var n=a(30758);const c={},r=n.createContext(c);function s(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:s(e.components),n.createElement(r.Provider,{value:o},e.children)}}}]);