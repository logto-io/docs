"use strict";(self.webpackChunk_logto_docs=self.webpackChunk_logto_docs||[]).push([[77607],{22825:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"end-user-flows/account-settings/by-account-api","title":"Configuraci\xf3n de cuenta mediante Account API","description":"Aprende a usar la Account API para gestionar usuarios","source":"@site/i18n/es/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","sourceDirName":"end-user-flows/account-settings","slug":"/end-user-flows/account-settings/by-account-api","permalink":"/es/end-user-flows/account-settings/by-account-api","draft":false,"unlisted":false,"editUrl":"https://github.com/logto-io/docs/tree/master/i18n/es/docusaurus-plugin-content-docs/current/end-user-flows/account-settings/by-account-api.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"Aprende a usar la Account API para gestionar usuarios","sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Configuraci\xf3n de cuenta mediante Management API","permalink":"/es/end-user-flows/account-settings/by-management-api"},"next":{"title":"Verificaci\xf3n de seguridad","permalink":"/es/end-user-flows/security-verification/"}}');var c=n(86070),o=n(15658);const r={description:"Aprende a usar la Account API para gestionar usuarios",sidebar_position:2},s="Configuraci\xf3n de cuenta mediante Account API",l={},t=[{value:"\xbfQu\xe9 es Logto Account API?",id:"qu\xe9-es-logto-account-api",level:2},{value:"C\xf3mo habilitar la Account API",id:"c\xf3mo-habilitar-la-account-api",level:2},{value:"C\xf3mo acceder a la Account API",id:"c\xf3mo-acceder-a-la-account-api",level:2},{value:"Obtener un token de acceso",id:"obtener-un-token-de-acceso",level:3},{value:"Acceder a la Account API usando el token de acceso",id:"acceder-a-la-account-api-usando-el-token-de-acceso",level:3},{value:"Gestionar informaci\xf3n b\xe1sica de la cuenta",id:"gestionar-informaci\xf3n-b\xe1sica-de-la-cuenta",level:2},{value:"Recuperar informaci\xf3n de la cuenta de usuario",id:"recuperar-informaci\xf3n-de-la-cuenta-de-usuario",level:3},{value:"Actualizar informaci\xf3n b\xe1sica de la cuenta",id:"actualizar-informaci\xf3n-b\xe1sica-de-la-cuenta",level:3},{value:"Gestionar identificadores y otra informaci\xf3n sensible",id:"gestionar-identificadores-y-otra-informaci\xf3n-sensible",level:2},{value:"Obtener un id de registro de verificaci\xf3n",id:"obtener-un-id-de-registro-de-verificaci\xf3n",level:3},{value:"Verificar la contrase\xf1a del usuario",id:"verificar-la-contrase\xf1a-del-usuario",level:4},{value:"Verificar enviando un c\xf3digo de verificaci\xf3n al correo electr\xf3nico o tel\xe9fono del usuario",id:"verificar-enviando-un-c\xf3digo-de-verificaci\xf3n-al-correo-electr\xf3nico-o-tel\xe9fono-del-usuario",level:4},{value:"Enviar solicitud con id de registro de verificaci\xf3n",id:"enviar-solicitud-con-id-de-registro-de-verificaci\xf3n",level:3},{value:"Actualizar o vincular un nuevo correo electr\xf3nico",id:"actualizar-o-vincular-un-nuevo-correo-electr\xf3nico",level:3},{value:"Eliminar el correo electr\xf3nico del usuario",id:"eliminar-el-correo-electr\xf3nico-del-usuario",level:3},{value:"Gestionar tel\xe9fono",id:"gestionar-tel\xe9fono",level:3},{value:"Vincular una nueva conexi\xf3n social",id:"vincular-una-nueva-conexi\xf3n-social",level:3},{value:"Eliminar una conexi\xf3n social",id:"eliminar-una-conexi\xf3n-social",level:3}];function d(e){const a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.header,{children:(0,c.jsx)(a.h1,{id:"configuraci\xf3n-de-cuenta-mediante-account-api",children:"Configuraci\xf3n de cuenta mediante Account API"})}),"\n",(0,c.jsx)(a.h2,{id:"qu\xe9-es-logto-account-api",children:"\xbfQu\xe9 es Logto Account API?"}),"\n",(0,c.jsx)(a.p,{children:"La Logto Account API es un conjunto completo de APIs que brinda a los usuarios finales acceso directo a la API sin necesidad de pasar por la Management API. Aqu\xed est\xe1n los aspectos destacados:"}),"\n",(0,c.jsxs)(a.ul,{children:["\n",(0,c.jsx)(a.li,{children:"Acceso directo: La Account API permite a los usuarios finales acceder y gestionar directamente su propio perfil de cuenta sin requerir el relevo de la Management API."}),"\n",(0,c.jsx)(a.li,{children:"Gesti\xf3n de perfil de usuario e identidades: Los usuarios pueden gestionar completamente sus perfiles y configuraciones de seguridad, incluyendo la capacidad de actualizar informaci\xf3n de identidad como correo electr\xf3nico, tel\xe9fono y contrase\xf1a, as\xed como gestionar conexiones sociales. El soporte para MFA e SSO llegar\xe1 pronto."}),"\n",(0,c.jsx)(a.li,{children:"Control de acceso global: El administrador tiene control total y global sobre las configuraciones de acceso, pudiendo personalizar cada campo."}),"\n",(0,c.jsxs)(a.li,{children:["Autorizaci\xf3n sin problemas: \xa1Autorizar es m\xe1s f\xe1cil que nunca! Simplemente usa ",(0,c.jsx)(a.code,{children:"client.getAccessToken()"})," para obtener un token de acceso opaco para OP (Logto) y adj\xfantalo al encabezado de Autorizaci\xf3n como ",(0,c.jsx)(a.code,{children:"Bearer <access_token>"}),"."]}),"\n"]}),"\n",(0,c.jsx)(a.p,{children:"Con la Logto Account API, puedes construir un sistema de gesti\xf3n de cuentas personalizado como una p\xe1gina de perfil totalmente integrada con Logto."}),"\n",(0,c.jsx)(a.p,{children:"Algunos usos frecuentes se enumeran a continuaci\xf3n:"}),"\n",(0,c.jsxs)(a.ul,{children:["\n",(0,c.jsx)(a.li,{children:"Recuperar perfil de usuario"}),"\n",(0,c.jsx)(a.li,{children:"Actualizar perfil de usuario"}),"\n",(0,c.jsx)(a.li,{children:"Actualizar contrase\xf1a de usuario"}),"\n",(0,c.jsx)(a.li,{children:"Actualizar identidades de usuario, incluyendo correo electr\xf3nico, tel\xe9fono y conexiones sociales"}),"\n"]}),"\n",(0,c.jsxs)(a.p,{children:["Para obtener m\xe1s informaci\xf3n sobre las APIs disponibles, visita ",(0,c.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-my-account",children:"Logto Account API Reference"})," y ",(0,c.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-verifications",children:"Logto Verification API Reference"}),"."]}),"\n",(0,c.jsx)(a.h2,{id:"c\xf3mo-habilitar-la-account-api",children:"C\xf3mo habilitar la Account API"}),"\n",(0,c.jsxs)(a.p,{children:["Por defecto, la Account API est\xe1 deshabilitada. Para habilitarla, necesitas usar la ",(0,c.jsx)(a.a,{href:"/integrate-logto/interact-with-management-api",children:"Management API"})," para actualizar las configuraciones globales."]}),"\n",(0,c.jsxs)(a.p,{children:["El endpoint de la API ",(0,c.jsx)(a.code,{children:"/api/account-center"})," se puede usar para recuperar y actualizar las configuraciones del centro de cuentas, puedes usarlo para habilitar o deshabilitar la Account API y personalizar los campos."]}),"\n",(0,c.jsx)(a.p,{children:"Ejemplo de solicitud:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/account-center \\\n  -H \'authorization: Bearer <access_token for Logto Management API>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"enabled":true,"fields":{"username":"Edit"}}\'\n'})}),"\n",(0,c.jsxs)(a.p,{children:["El campo ",(0,c.jsx)(a.code,{children:"enabled"})," se usa para habilitar o deshabilitar la Account API, y el campo ",(0,c.jsx)(a.code,{children:"fields"})," se usa para personalizar los campos, el valor puede ser ",(0,c.jsx)(a.code,{children:"Off"}),", ",(0,c.jsx)(a.code,{children:"Edit"}),", ",(0,c.jsx)(a.code,{children:"ReadOnly"}),". El valor predeterminado es ",(0,c.jsx)(a.code,{children:"Off"}),". La lista de campos:"]}),"\n",(0,c.jsxs)(a.ul,{children:["\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"name"}),": El campo de nombre."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"avatar"}),": El campo de avatar."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"profile"}),": El campo de perfil, incluyendo sus subcampos."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"username"}),": El campo de nombre de usuario."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"email"}),": El campo de correo electr\xf3nico."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"phone"}),": El campo de tel\xe9fono."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"password"}),": El campo de contrase\xf1a, al obtenerlo, devolver\xe1 ",(0,c.jsx)(a.code,{children:"true"})," si el usuario ha establecido una contrase\xf1a, de lo contrario ",(0,c.jsx)(a.code,{children:"false"}),"."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"social"}),": Conexiones sociales."]}),"\n"]}),"\n",(0,c.jsxs)(a.p,{children:["Aprende m\xe1s sobre los detalles de la API en ",(0,c.jsx)(a.a,{href:"https://openapi.logto.io/group/endpoint-account-center",children:"Logto Management API Reference"}),"."]}),"\n",(0,c.jsx)(a.h2,{id:"c\xf3mo-acceder-a-la-account-api",children:"C\xf3mo acceder a la Account API"}),"\n",(0,c.jsx)(a.h3,{id:"obtener-un-token-de-acceso",children:"Obtener un token de acceso"}),"\n",(0,c.jsxs)(a.p,{children:["Despu\xe9s de configurar el SDK en tu aplicaci\xf3n, puedes usar el m\xe9todo ",(0,c.jsx)(a.code,{children:"client.getAccessToken()"})," para obtener un token de acceso. Este token es un token opaco que se puede usar para acceder a la Account API."]}),"\n",(0,c.jsxs)(a.p,{children:["Si no est\xe1s usando el SDK oficial, debes establecer el ",(0,c.jsx)(a.code,{children:"resource"})," en vac\xedo para la solicitud de concesi\xf3n de token de acceso a ",(0,c.jsx)(a.code,{children:"/oidc/token"}),"."]}),"\n",(0,c.jsx)(a.h3,{id:"acceder-a-la-account-api-usando-el-token-de-acceso",children:"Acceder a la Account API usando el token de acceso"}),"\n",(0,c.jsxs)(a.p,{children:["Debes colocar el token de acceso en el campo ",(0,c.jsx)(a.code,{children:"Authorization"})," de los encabezados HTTP con el formato Bearer (",(0,c.jsx)(a.code,{children:"Bearer YOUR_TOKEN"}),") cuando interact\xfaes con la Account API."]}),"\n",(0,c.jsx)(a.p,{children:"Un ejemplo para obtener la informaci\xf3n de la cuenta de usuario:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,c.jsx)(a.h2,{id:"gestionar-informaci\xf3n-b\xe1sica-de-la-cuenta",children:"Gestionar informaci\xf3n b\xe1sica de la cuenta"}),"\n",(0,c.jsx)(a.h3,{id:"recuperar-informaci\xf3n-de-la-cuenta-de-usuario",children:"Recuperar informaci\xf3n de la cuenta de usuario"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl https://[tenant-id].logto.app/api/my-account \\\n  -H 'authorization: Bearer <access_token>'\n"})}),"\n",(0,c.jsx)(a.p,{children:"El cuerpo de la respuesta ser\xeda como:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-json",children:'{\n  "id": "...",\n  "username": "...",\n  "name": "...",\n  "avatar": "..."\n}\n'})}),"\n",(0,c.jsx)(a.p,{children:"Los campos de respuesta pueden variar dependiendo de las configuraciones del centro de cuentas."}),"\n",(0,c.jsx)(a.h3,{id:"actualizar-informaci\xf3n-b\xe1sica-de-la-cuenta",children:"Actualizar informaci\xf3n b\xe1sica de la cuenta"}),"\n",(0,c.jsx)(a.p,{children:"La informaci\xf3n b\xe1sica de la cuenta incluye el nombre de usuario, nombre, avatar y perfil."}),"\n",(0,c.jsxs)(a.p,{children:["Para actualizar el nombre de usuario, nombre y avatar, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"PATCH /api/my-account"}),"."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"username":"...","name":"...","avatar":"..."}\'\n'})}),"\n",(0,c.jsxs)(a.p,{children:["Para actualizar el perfil, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"PATCH /api/my-account/profile"}),"."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/my-account/profile \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"familyName":"...","givenName":"..."}\'\n'})}),"\n",(0,c.jsx)(a.h2,{id:"gestionar-identificadores-y-otra-informaci\xf3n-sensible",children:"Gestionar identificadores y otra informaci\xf3n sensible"}),"\n",(0,c.jsx)(a.p,{children:"Por razones de seguridad, la Account API requiere otra capa de autorizaci\xf3n para las operaciones que involucran identificadores y otra informaci\xf3n sensible."}),"\n",(0,c.jsx)(a.h3,{id:"obtener-un-id-de-registro-de-verificaci\xf3n",children:"Obtener un id de registro de verificaci\xf3n"}),"\n",(0,c.jsx)(a.p,{children:"Primero, necesitas obtener un id de registro de verificaci\xf3n, esto se puede usar para verificar la identidad del usuario al actualizar identificadores."}),"\n",(0,c.jsx)(a.p,{children:"Para obtener un id de registro de verificaci\xf3n, puedes verificar la contrase\xf1a del usuario o enviar un c\xf3digo de verificaci\xf3n al correo electr\xf3nico o tel\xe9fono del usuario."}),"\n",(0,c.jsx)(a.h4,{id:"verificar-la-contrase\xf1a-del-usuario",children:"Verificar la contrase\xf1a del usuario"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl -X POST https://[tenant-id].logto.app/api/verifications/password \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"password\":\"...\"}'\n"})}),"\n",(0,c.jsx)(a.p,{children:"El cuerpo de la respuesta ser\xeda como:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,c.jsx)(a.h4,{id:"verificar-enviando-un-c\xf3digo-de-verificaci\xf3n-al-correo-electr\xf3nico-o-tel\xe9fono-del-usuario",children:"Verificar enviando un c\xf3digo de verificaci\xf3n al correo electr\xf3nico o tel\xe9fono del usuario"}),"\n",(0,c.jsx)(a.admonition,{type:"note",children:(0,c.jsxs)(a.p,{children:["Para usar este m\xe9todo, necesitas ",(0,c.jsx)(a.a,{href:"/connectors/email-connectors/",children:"configurar el conector de correo electr\xf3nico"})," o ",(0,c.jsx)(a.a,{href:"/connectors/sms-connectors/",children:"conector de SMS"}),", y asegurarte de que la plantilla ",(0,c.jsx)(a.code,{children:"UserPermissionValidation"})," est\xe9 configurada."]})}),"\n",(0,c.jsx)(a.p,{children:"Tomando el correo electr\xf3nico como ejemplo, solicita un nuevo c\xf3digo de verificaci\xf3n y obt\xe9n el id de registro de verificaci\xf3n:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,c.jsx)(a.p,{children:"El cuerpo de la respuesta ser\xeda como:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-json",children:'{\n  "verificationRecordId": "...",\n  "expiresAt": "..."\n}\n'})}),"\n",(0,c.jsx)(a.p,{children:"Al recibir el c\xf3digo de verificaci\xf3n, puedes usarlo para actualizar el estado de verificaci\xf3n del registro de verificaci\xf3n."}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"123456"}\'\n'})}),"\n",(0,c.jsx)(a.p,{children:"Despu\xe9s de verificar el c\xf3digo, ahora puedes usar el id de registro de verificaci\xf3n para actualizar el identificador del usuario."}),"\n",(0,c.jsx)(a.h3,{id:"enviar-solicitud-con-id-de-registro-de-verificaci\xf3n",children:"Enviar solicitud con id de registro de verificaci\xf3n"}),"\n",(0,c.jsxs)(a.p,{children:["Al enviar una solicitud para actualizar el identificador del usuario, necesitas adjuntar el id de registro de verificaci\xf3n al encabezado de la solicitud con el campo ",(0,c.jsx)(a.code,{children:"logto-verification-id"}),"."]}),"\n",(0,c.jsx)(a.h3,{id:"actualizar-o-vincular-un-nuevo-correo-electr\xf3nico",children:"Actualizar o vincular un nuevo correo electr\xf3nico"}),"\n",(0,c.jsx)(a.admonition,{type:"note",children:(0,c.jsxs)(a.p,{children:["Para usar este m\xe9todo, necesitas ",(0,c.jsx)(a.a,{href:"/connectors/email-connectors/",children:"configurar el conector de correo electr\xf3nico"}),", y asegurarte de que la plantilla ",(0,c.jsx)(a.code,{children:"BindNewIdentifier"})," est\xe9 configurada."]})}),"\n",(0,c.jsx)(a.p,{children:"Para actualizar o vincular un nuevo correo electr\xf3nico, primero debes demostrar la propiedad del correo electr\xf3nico."}),"\n",(0,c.jsxs)(a.p,{children:["Llama al endpoint ",(0,c.jsx)(a.code,{children:"POST /api/verifications/verification-code"})," para solicitar un c\xf3digo de verificaci\xf3n."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/verification-code \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."}}\'\n'})}),"\n",(0,c.jsxs)(a.p,{children:["Encontrar\xe1s un ",(0,c.jsx)(a.code,{children:"verificationId"})," en la respuesta y recibir\xe1s un c\xf3digo de verificaci\xf3n en el correo electr\xf3nico, \xfasalo para verificar el correo electr\xf3nico."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X PATCH https://[tenant-id].logto.app/api/verifications/verification-code/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"identifier":{"type":"email","value":"..."},"verificationId":"...","code":"..."}\'\n'})}),"\n",(0,c.jsxs)(a.p,{children:["Despu\xe9s de verificar el c\xf3digo, ahora puedes actualizar el correo electr\xf3nico del usuario, establece el ",(0,c.jsx)(a.code,{children:"verificationId"})," en el cuerpo de la solicitud como ",(0,c.jsx)(a.code,{children:"newIdentifierVerificationRecordId"}),"."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"email\":\"...\",\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,c.jsx)(a.h3,{id:"eliminar-el-correo-electr\xf3nico-del-usuario",children:"Eliminar el correo electr\xf3nico del usuario"}),"\n",(0,c.jsxs)(a.p,{children:["Para eliminar el correo electr\xf3nico del usuario, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"DELETE /api/my-account/primary-email"}),"."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/primary-email \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})}),"\n",(0,c.jsx)(a.h3,{id:"gestionar-tel\xe9fono",children:"Gestionar tel\xe9fono"}),"\n",(0,c.jsx)(a.admonition,{type:"note",children:(0,c.jsxs)(a.p,{children:["Para usar este m\xe9todo, necesitas ",(0,c.jsx)(a.a,{href:"/connectors/sms-connectors/",children:"configurar el conector de SMS"}),", y asegurarte de que la plantilla ",(0,c.jsx)(a.code,{children:"BindNewIdentifier"})," est\xe9 configurada."]})}),"\n",(0,c.jsxs)(a.p,{children:["Similar a la actualizaci\xf3n de correo electr\xf3nico, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"PATCH /api/my-account/primary-phone"})," para actualizar o vincular un nuevo tel\xe9fono. Y usar el endpoint ",(0,c.jsx)(a.code,{children:"DELETE /api/my-account/primary-phone"})," para eliminar el tel\xe9fono del usuario."]}),"\n",(0,c.jsx)(a.h3,{id:"vincular-una-nueva-conexi\xf3n-social",children:"Vincular una nueva conexi\xf3n social"}),"\n",(0,c.jsx)(a.p,{children:"Para vincular una nueva conexi\xf3n social, primero debes solicitar una URL de autorizaci\xf3n:"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorId":"...","redirectUri":"...","state":"..."}\'\n'})}),"\n",(0,c.jsxs)(a.ul,{children:["\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"connectorId"}),": El ID del ",(0,c.jsx)(a.a,{href:"/connectors/social-connectors/",children:"conector social"}),"."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"redirectUri"}),": El URI de redirecci\xf3n despu\xe9s de que el usuario autorice la aplicaci\xf3n, debes alojar una p\xe1gina web en esta URL y capturar el callback."]}),"\n",(0,c.jsxs)(a.li,{children:[(0,c.jsx)(a.code,{children:"state"}),": El estado que se devolver\xe1 despu\xe9s de que el usuario autorice la aplicaci\xf3n, es una cadena aleatoria que se usa para prevenir ataques CSRF."]}),"\n"]}),"\n",(0,c.jsxs)(a.p,{children:["En la respuesta, encontrar\xe1s un ",(0,c.jsx)(a.code,{children:"verificationRecordId"}),", gu\xe1rdalo para uso posterior."]}),"\n",(0,c.jsxs)(a.p,{children:["Despu\xe9s de que el usuario autorice la aplicaci\xf3n, recibir\xe1s un callback en el ",(0,c.jsx)(a.code,{children:"redirectUri"})," con el par\xe1metro ",(0,c.jsx)(a.code,{children:"state"}),". Luego puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"POST /api/verifications/social/verify"})," para verificar la conexi\xf3n social."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'curl -X POST https://[tenant-id].logto.app/api/verifications/social/verify \\\n  -H \'authorization: Bearer <access_token>\' \\\n  -H \'content-type: application/json\' \\\n  --data-raw \'{"connectorData":"...","verificationRecordId":"..."}\'\n'})}),"\n",(0,c.jsxs)(a.p,{children:["El ",(0,c.jsx)(a.code,{children:"connectorData"})," es el dato devuelto por el conector social despu\xe9s de que el usuario autorice la aplicaci\xf3n, necesitas analizar y obtener los par\xe1metros de consulta del ",(0,c.jsx)(a.code,{children:"redirectUri"})," en tu p\xe1gina de callback, y envolverlos como un JSON como el valor del campo ",(0,c.jsx)(a.code,{children:"connectorData"}),"."]}),"\n",(0,c.jsxs)(a.p,{children:["Finalmente, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"PATCH /api/my-account/identities"})," para vincular la conexi\xf3n social."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl -X PATCH https://[tenant-id].logto.app/api/my-account/identities \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"newIdentifierVerificationRecordId\":\"...\"}'\n"})}),"\n",(0,c.jsx)(a.h3,{id:"eliminar-una-conexi\xf3n-social",children:"Eliminar una conexi\xf3n social"}),"\n",(0,c.jsxs)(a.p,{children:["Para eliminar una conexi\xf3n social, puedes usar el endpoint ",(0,c.jsx)(a.code,{children:"DELETE /api/my-account/identities"}),"."]}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"curl -X DELETE https://[tenant-id].logto.app/api/my-account/identities/[connector_target_id] \\\n  -H 'authorization: Bearer <access_token>' \\\n  -H 'logto-verification-id: <verification_record_id>'\n"})})]})}function u(e={}){const{wrapper:a}={...(0,o.R)(),...e.components};return a?(0,c.jsx)(a,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},15658:(e,a,n)=>{n.d(a,{R:()=>r,x:()=>s});var i=n(30758);const c={},o=i.createContext(c);function r(e){const a=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),i.createElement(o.Provider,{value:a},e.children)}}}]);